! function(V, G, O) {
    "use strict";

    function R(y, F) {
        if ("function" != typeof F && null !== F) throw new TypeError("Super expression must either be null or a function");
        y.prototype = G.create(F && F.prototype, {
            constructor: {
                value: y,
                writable: !0,
                configurable: !0
            }
        }), F && Oh(y, F)
    }

    function S(l) {
        var z = G.prototype.toString.call(l);
        return "Array]" === z.substring(z.length - 6)
    }

    function T(Y, Q, d, U, b, W) {
        Q = Q || [], d = d || [], U = U || [];
        try {
            Q.push(Y);
            var w = Function.apply(0, Q);
            return d[d.length] = "return " + w, Function.apply(0, d).apply(0, U)
        } catch (V) {
            return W && W(V), b
        }
    }

    function c(y) {
        var L = {};
        return {
            get: function(M) {
                if (L[M] !== O) return L[M];
                var v;
                switch (M) {
                    case "WEBGL_depth_texture":
                        v = y.getExtension("WEBGL_depth_texture") || y.getExtension("MOZ_WEBGL_depth_texture") || y.getExtension("WEBKIT_WEBGL_depth_texture");
                        break;
                    case "EXT_texture_filter_anisotropic":
                        v = y.getExtension("EXT_texture_filter_anisotropic") || y.getExtension("MOZ_EXT_texture_filter_anisotropic") || y.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                        break;
                    case "WEBGL_compressed_texture_s3tc":
                        v = y.getExtension("WEBGL_compressed_texture_s3tc") || y.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || y.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                        break;
                    case "WEBGL_compressed_texture_pvrtc":
                        v = y.getExtension("WEBGL_compressed_texture_pvrtc") || y.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                        break;
                    case "WEBGL_compressed_texture_etc1":
                        v = y.getExtension("WEBGL_compressed_texture_etc1");
                        break;
                    default:
                        v = y.getExtension(M)
                }
                return L[M] = v, v
            }
        }
    }

    function m(W, B, U) {
        function G() {
            if (Z !== O) return Z;
            var n = B.get("EXT_texture_filter_anisotropic");
            return Z = null !== n ? W.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
        }

        function l(A) {
            if ("highp" === A) {
                if (W.getShaderPrecisionFormat(W.VERTEX_SHADER, W.HIGH_FLOAT).precision > 0 && W.getShaderPrecisionFormat(W.FRAGMENT_SHADER, W.HIGH_FLOAT).precision > 0) return "highp";
                A = "mediump"
            }
            return "mediump" === A && W.getShaderPrecisionFormat(W.VERTEX_SHADER, W.MEDIUM_FLOAT).precision > 0 && W.getShaderPrecisionFormat(W.FRAGMENT_SHADER, W.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp"
        }
        var Z;
        U = U || {};
        var A = "undefined" != typeof WebGL2RenderingContext && W instanceof WebGL2RenderingContext,
            w = U.precision !== O ? U.precision : "highp",
            n = l(w);
        n !== w && (console.warn("WebGL:", w, "not supported, using", n, "instead."), w = n);
        var v = U.logarithmicDepthBuffer === !0,
            r = W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS),
            x = W.getParameter(W.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
            E = W.getParameter(W.MAX_TEXTURE_SIZE),
            u = W.getParameter(W.MAX_CUBE_MAP_TEXTURE_SIZE),
            j = W.getParameter(W.MAX_VERTEX_ATTRIBS),
            P = W.getParameter(W.MAX_VERTEX_UNIFORM_VECTORS),
            s = W.getParameter(W.MAX_VARYING_VECTORS),
            V = W.getParameter(W.MAX_FRAGMENT_UNIFORM_VECTORS),
            M = x > 0,
            t = A || !!B.get("OES_texture_float"),
            Y = (A || !!B.get("OES_element_index_uint")) && "undefined" != typeof Uint32Array,
            z = M && t,
            q = A ? W.getParameter(W.MAX_SAMPLES) : 0;
        return {
            getMaxAnisotropy: G,
            getMaxPrecision: l,
            precision: w,
            logarithmicDepthBuffer: v,
            maxTextures: r,
            maxVertexTextures: x,
            maxTextureSize: E,
            maxCubemapSize: u,
            maxAttributes: j,
            maxVertexUniforms: P,
            maxVaryings: s,
            maxFragmentUniforms: V,
            vertexTextures: M,
            floatFragmentTextures: t,
            elementTypeUint: Y,
            floatVertexTextures: z,
            maxSamples: q
        }
    }

    function N(b, h) {
        return b.z !== h.z ? h.z - b.z : b.id - h.id
    }
    var E = "ht";
    if (!V[E]) {
        ! function() {
            Date.now && Date.prototype.getTime || (Date.now = function() {
                return (new Date).getTime()
            }), V.performance && V.performance.now || function() {
                var r = Date.now();
                V.performance || (V.performance = {}), V.performance.now = function() {
                    return Date.now() - r
                }
            }();
            for (var w = Date.now(), j = 16, Z = ["ms", "moz", "webkit", "o"], I = 0; I < Z.length && !V.requestAnimationFrame; ++I) V.requestAnimationFrame = V[Z[I] + "RequestAnimationFrame"], V.cancelAnimationFrame = V[Z[I] + "CancelAnimationFrame"] || V[Z[I] + "CancelRequestAnimationFrame"];
            V.requestAnimationFrame || (V.requestAnimationFrame = function(p) {
                var h = Date.now(),
                    E = j + w - h;
                return 0 > E && (E = 0), w = h, V.setTimeout(function() {
                    w = Date.now(), p(performance.now())
                }, E)
            }), V.cancelAnimationFrame || (V.cancelAnimationFrame = function(N) {
                return V.clearTimeout(N)
            }), G.assign === O && (G.assign = function(A) {
                if (A === O || null === A) throw new TypeError("Cannot convert undefined or null to object");
                for (var z = G(A), q = 1; q < arguments.length; q++) {
                    var I = arguments[q];
                    if (I !== O && null !== I)
                        for (var H in I) G.prototype.hasOwnProperty.call(I, H) && (z[H] = I[H])
                }
                return z
            }), V.btoa === O && (V.btoa = function(S) {
                for (var U, V, G = String(S), j = 0, b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", N = ""; G.charAt(0 | j) || (b = "=", j % 1); N += b.charAt(63 & U >> 8 - 8 * (j % 1))) {
                    if (V = G.charCodeAt(j += .75), V > 255) throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");
                    U = U << 8 | V
                }
                return N
            })
        }();
        var d, H, j, K, P = V.location,
            W = P && V.document,
            Y = null,
            w = O,
            F = V[E] = {},
            l = V[E + "config"],
            z = F.Default = l && l.Default || {},
            A = F.Style = l && l.Style || {},
            s = F.Attr = l && l.Attr || {},
            k = function() {
                return !0
            },
            p = function() {
                return !1
            },
            v = function(Y) {
                return Y
            },
            _ = function(R) {
                return !R
            },
            Q = F.Color = l && l.Color || {},
            C = F.IsGetter = l && l.IsGetter || {};
        ! function() {
            var B = !1;
            try {
                var T = G.defineProperty({}, "passive", {
                    get: function() {
                        return B = !0, O
                    }
                });
                P && (j = d = P) && V.addEventListener("test", T, T), P && (K = H = P) && V.removeEventListener("test", T, T)
            } catch (h) {
                B = !1
            }
            z.passiveSupported = B
        }();
        var L, y, n, g, o = z.passiveSupported,
            I = z.eventListenerOptionsFalse = o ? {
                passive: !1,
                capture: !1
            } : !1,
            M = z.eventListenerOptionsTrue = o ? {
                passive: !1,
                capture: !0
            } : !0,
            D = function(m, q, C, Y) {
                m.addEventListener(q, C, Y ? M : I)
            },
            J = function($, Y, s, S) {
                $.removeEventListener(Y, s, S ? M : I)
            },
            Z = Math,
            X = Z.round,
            e = Z.floor,
            $ = Z.ceil,
            x = Z.sqrt,
            q = Z.max,
            h = Z.min,
            r = Z.abs,
            u = Z.cos,
            a = Z.acos,
            b = Z.sin,
            t = Z.pow,
            i = Z.asin,
            B = Z.exp,
            f = Z.PI,
            U = 2 * f,
            yr = f / 2,
            Ec = Z.tan,
            di = Z.atan2,
            Cl = Z.random,
            Hk = Z.log,
            Jn = function(G, B, H) {
                return Math.max(B, Math.min(H, G))
            },
            me = t(2, 1),
            kg = !1,
            Hh = V.parseInt || global.parseInt,
            Jd = "2022-02-15",
            Gn = P && (V.navigator ? V.navigator.platform.indexOf("Win") > -1 : !1),
            Zl = function(j) {
                return j * j
            },
            Kc = P && V.setTimeout,
            ur = P && V.clearTimeout,
            $k = P && (V.navigator ? V.navigator.userAgent.toLowerCase() : ""),
            Un = function(H) {
                return H.test($k)
            },
            kq = Un(/msie/),
            Bp = Un(/msie/) || Un(/trident/),
            bn = Un(/msie 10/),
            sr = Un(/edge/),
            cs = Un(/firefox/),
            ro = Un(/mac/),
            id = Un(/mscAndroid/),
            $r = z.isTouchable === O ? Gn ? !1 : W ? "ontouchend" in W : !1 : z.isTouchable,
            Df = "default",
            Zp = "single",
            dj = "multiple",
            ae = "front",
            Ad = "back",
            _i = "left",
            rj = "right",
            vi = "top",
            Ei = "bottom",
            Vc = "center",
            hp = "eye",
            mp = "middle",
            hj = "east",
            Qo = "west",
            ef = "north",
            Yh = "none",
            dr = "px",
            af = "absolute",
            uh = "border",
            tb = "triangle",
            Eh = "rect",
            zi = "circle",
            Jo = "cylinder",
            Cd = "shape",
            _d = "items",
            bf = "normal",
            eb = "remove",
            Aj = "clear",
            Kq = "width",
            _f = "height",
            Ji = "ingroup",
            vl = "check",
            cj = "uncheck",
            Oi = "radio",
            wl = "radioOn",
            Hq = "radioOff",
            Wq = "points",
            Zn = "values",
            Fc = "series",
            Nm = "body",
            pd = "label",
            oc = "label2",
            qf = "note",
            mk = "note2",
            Up = "icons",
            fc = "labelFont",
            rl = "labelColor",
            th = "labelSelectColor",
            rk = "note.expanded",
            dl = "note2.expanded",
            yj = "edge.expanded",
            $j = "edge.points",
            tk = "edge.type",
            dh = "rotation",
            Rc = "hidden",
            nd = "visible",
            Np = "tuv",
            el = "no",
            qi = "draw",
            pp = "select",
            Hc = "currentSubGraph",
            Ne = "selectBackground",
            wc = "autoMakeVisible",
            sf = "autoHideScrollBar",
            vr = "scrollBarColor",
            lg = "scrollBarSize",
            Hl = "indent",
            xq = "rowHeight",
            Xi = "columnLineColor",
            ns = "rowLineColor",
            pq = "columnLineVisible",
            Vk = "rowLineVisible",
            fg = "visibleFunc",
            se = "expandIcon",
            Xd = "collapseIcon",
            bk = "checkMode",
            Re = "sortFunc",
            kc = "editable",
            Vg = "batchEditable",
            Jl = "tristate",
            Gm = "asc",
            gq = "desc",
            $n = "position",
            lm = "__",
            Vh = "elevation",
            Xh = "children",
            hg = "translateX",
            Ie = "translateY",
            co = "dataModel",
            Sc = "maxSize",
            Wg = "enc",
            Yk = "state",
            Go = Wg + "o" + "de",
            zf = "shape3d",
            Uk = "shape3d.resolution",
            sh = "shape3d.visible",
            Ho = "shape3d.from.visible",
            vf = "shape3d.to.visible",
            vp = "shape3d.top.visible",
            Ql = "shape3d.bottom.visible",
            yp = "repeat.uv.length",
            Dg = "serializeValue",
            Jr = "deserializeValue",
            lq = "centerUniform",
            Pi = "uniform",
            Mp = "rgba(255,255,255,0)",
            mo = "style",
            lj = "attr",
            Hj = "field",
            kn = "string",
            Fk = "boolean",
            Kb = "color",
            cb = "int",
            Op = "number",
            $q = "ew-resize",
            Fd = "ns-resize",
            pi = "pointer",
            Pe = "auto",
            uo = "mousedown",
            Dd = "mousemove",
            Wk = "mouseup",
            ke = "mouseout",
            Pc = "touchstart",
            qe = "touchmove",
            nq = "touchend",
            Nj = "keydown",
            Do = "keyup",
            Hd = ["DOMMouseScroll", "mousewheel"],
            ff = cs ? Hd[0] : Hd[1],
            _p = lm + E + lm + Go,
            Rh = [Pc, qe, nq],
            Mi = [uo, Dd, Wk, ke, ff, "wheel", "mouseenter", "mouseleave", "mouseover"],
            Nq = [Nj, Do, "keypress", "input", "contextmenu", "compositionstart", "compositionupdate", "compositionend"],
            Wp = $r ? Rh.concat(Nq) : Mi.concat(Nq),
            Qi = Y,
            Qf = Y,
            Lf = Y,
            rm = Y,
            Bo = !0,
            xl = Wk.length,
            yi = function() {
                Lf && (ur(Lf.timeout), Lf = Y)
            },
            Zo = function() {
                Lf && cd(Lf.e, Lf.info)
            };
        V.addEventListener && (w = P) && ($r || (D(V, ke, function() {
            yi()
        }), D(V, ff, function() {
            Wd()
        })), D(V, Do, function(q) {
            91 === q.keyCode ? Ll = {} : delete Ll[q.keyCode]
        }, !0), D(V, Nj, function(G) {
            Ll[G.keyCode] = !0
        }, !0), D(V, "blur", function() {
            Ll = {}
        }));
        var er, ee, zg, Rk = 0,
            $o = Y,
            Tf = function(s, B) {
                var o = Kc(function() {
                    delete $o[o], Mq($o) && ($o = Y), s()
                }, B);
                return o
            },
            pb = Y,
            Dm = Y,
            bb = {},
            Af = {},
            Ip = {},
            Jc = {},
            Yg = {},
            Ll = {},
            wj = {},
            Ni = {},
            Hi = {},
            Vd = {},
            Kf = /.json$/,
            al = /\.(json|bin)$/,
            de = /^data:image\/svg\+xml/,
            Bb = {},
            Kd = [],
            Ce = {},
            qg = Y,
            Or = Y,
            gj = function() {},
            sg = function() {
                throw "Oops!"
            },
            Pd = [0, 0, 0],
            yf = {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            },
            ye = Y,
            mh = Y,
            qd = Y,
            bo = function(k, Q) {
                Af[k] = Q, Q && Q.comps && !Q.uuid && (Q.uuid = F.Math.generateUUID()), Wr[k] && (Q.cacheRule = Wr[k], delete Wr[k])
            },
            nm = function(F) {
                mh && !F._72O && (qd || (qd = {}), qd[F._72O = Vf()] = F), er != Y ? mj() < .05 && g && !ee && (vb = yi) : vb = xk
            },
            Hg = function(t, h, u, C) {
                mh || (mh = {});
                var N = mh[t];
                if (N) {
                    if (N.url === h) return;
                    N.image ? (N.image.onload = gj, N.image.onerror = gj) : N.request && (N.request.onload = gj, N.request.onerror = gj)
                }
                if (Kf.test(h)) {
                    var R = new gk;
                    if (mh[t] = {
                            request: R,
                            url: h
                        }, h = z.beforeLoadURL(h, t), h.data) {
                        var H = z.parse(h.data);
                        Lm(t, H), z.handleImageLoaded(t, H)
                    } else {
                        R.onload = function() {
                            if (200 === this.status || 0 === this.status) {
                                var k = z.parse(R.getResponseText());
                                Lm(t, k), z.handleImageLoaded(t, k)
                            } else Lm(t, z.handleUnfoundImage(t, h) || Y)
                        }, R.onerror = function() {
                            Lm(t, z.handleUnfoundImage(t, h) || Y)
                        };
                        var w = {};
                        w.url = encodeURI(h), w.sync = !1, R.send(w)
                    }
                } else {
                    var H = new Image;
                    mh[t] = {
                        image: H,
                        url: h
                    }, /^data:image/.test(h) || (h = z.beforeLoadURL(h, t), h = z.appendTimeStamp(h), h = encodeURI(h), H.crossOrigin = z.crossOrigin), z.convertImageSrc(h, function(y) {
                        Bp && (h.toLowerCase().indexOf(".svg") > 0 || de.test(h)) ? (W.body.appendChild(H), H.style.visibility = "hidden", H.onload = function() {
                            Kc(function() {
                                if (u && (H.width = u), C && (H.height = C), !H.width || !H.height) {
                                    var q = H.width || H.clientWidth,
                                        d = H.height || H.clientHeight;
                                    H.width = q, H.height = d
                                }
                                z.handleImageLoaded(t, H), Lm(t, H), W.body.removeChild(H), H.style.visibility = ""
                            }, 180)
                        }, H.onerror = function() {
                            Lm(t, z.handleUnfoundImage(t, h) || Y), W.body.removeChild(H), H.style.visibility = ""
                        }) : (H.onload = function() {
                            u && (H.width = u), C && (H.height = C), z.handleImageLoaded(t, H), Lm(t, H)
                        }, H.onerror = function() {
                            Lm(t, z.handleUnfoundImage(t, h) || Y)
                        }), H.src = y
                    })
                }
            },
            Lm = function(X, T) {
                if (bo(X, T), delete mh[X], Mq(mh) && (mh = Y, qd)) {
                    for (var J in qd) {
                        var L = qd[J];
                        L._2O && L._2O[X] && (L.deleteTexture(X), delete L._2O[X]), L.invalidateAll && L.invalidateAll(O, "imageLoaded", X), L.redraw && L.redraw(), L.iv(), T && T.layoutAttach && Ap(L.dm) && L.dm().updateLayoutAttach(X), delete L._72O
                    }
                    qd = Y
                }
                if (T && qd)
                    for (var J in qd) {
                        var L = qd[J];
                        L.invalidateAll && L.invalidateAll(O, "imageLoading", X), L.redraw && L.redraw(), L.iv(), T.layoutAttach && Ap(L.dm) && L.dm().updateLayoutAttach(X)
                    }
            },
            ji = function() {
                return Hk = Z && Date,
                    function() {
                        return V.performance && V.performance.now ? V.performance.now() : Date.now()
                    }
            }(),
            ab = function(y, C, w) {
                return {
                    width: y,
                    height: C,
                    comps: ym(w) ? w : [w]
                }
            },
            Qd = function(K, F) {
                return {
                    type: zi,
                    rect: [K, F, 1.6, 1.6],
                    borderWidth: 1,
                    borderColor: Ee,
                    gradient: lb,
                    gradientColor: Rf,
                    background: Ee
                }
            },
            oi = function(v, r) {
                return ab(16, 16, {
                    type: tb,
                    rect: [4, 4, 10, 8],
                    background: v,
                    rotation: r ? 1.57 : 3.14
                })
            },
            De = function(d, x) {
                return ab(16, 16, {
                    type: tb,
                    rect: [4, 4, 8, 7],
                    background: d,
                    rotation: x ? 3.14 : 0
                })
            },
            Vj = function(N) {
                var I = N._orientation;
                return "horizontal" === I || "h" === I
            },
            kd = function(C, z) {
                var h = Y || 4,
                    E = Y || 1,
                    i = Y || 1;
                0 > h ? h = 0 : h > .25 && (h = .25);
                var t, q, G, L, O, N, S, v = .5,
                    d = [],
                    V = [],
                    $ = [],
                    D = U / i,
                    s = U / E,
                    k = v - h;
                for (q = 0; E >= q; q++)
                    for (L = -f + q * s, N = u(L), O = b(L), t = 0; i >= t; t++) G = t * D, S = k + h * N, d.push(u(G) * S, O * h, -b(G) * S), (y = [C, z]) && V.push(t / i, 1 - q / E);
                for (q = 0; E > q; q++) {
                    var W = q * (i + 1),
                        T = (q + 1) * (i + 1);
                    for (t = 0; i > t; t++) $.push(W + t, T + t + 1, T + t, W + t, W + t + 1, T + t + 1), Rd.z = ii.z = [C, z]
                }
            },
            Kn = function(t) {
                var W = 2,
                    Z = 0;
                for (var n in t) n.length === W && Hh(n, 32) === Cg && (qg = Or = t[n]), Z++;
                return Z
            },
            ud = function(n, N, A, t) {
                return A || (A = $r ? 5 : 3, A /= t || 1), {
                    x: n - A,
                    y: N - A,
                    width: 2 * A,
                    height: 2 * A
                }
            },
            Zf = function(r, M, s, l) {
                var U = this;
                M || (M = $r ? 5 : 3, s = 20, l = 20);
                var E = {
                    x: r,
                    y: M,
                    width: s,
                    height: l
                };
                if (s)
                    for (var b = 0; s > b; b++)
                        if (3 === s) l = 20;
                        else
                            for (var K = 0; l > K; K++) U = V ? V : s;
                var m = {
                    x: f,
                    y: 2 * f
                };
                if (mm(E, m)) {
                    var k = _f[0] + vi[0] + Aj[1] + Gm.length,
                        Y = Rc[0] + Jl[0] + Aj[1] + Nm.length;
                    Mh[hp] = [U[k], U[Y]], U[k] = Oe[hp], U[Y] = Oe[zf]
                }
            },
            Uh = function(S) {
                return (/ble$/.test(S) || /ed$/.test(S) || C[S] ? "is" : "get") + S.charAt(0).toUpperCase() + S.slice(1)
            },
            Oe = function(w) {
                return "set" + w.charAt(0).toUpperCase() + w.slice(1)
            },
            Sf = function(e) {
                return typeof e === kn || e instanceof String
            },
            Jm = function(f) {
                return typeof f === Op
            },
            xk = function($) {
                return typeof $ === Fk
            },
            jl = function(g) {
                return g && "object" == typeof g
            },
            Ap = function(m) {
                return "function" == typeof m
            },
            ym = function(H) {
                return H instanceof Array
            },
            eo = function(N) {
                return N instanceof no
            },
            Eq = function(P) {
                return ym(P) ? new no(P) : P
            },
            Mk = function(J) {
                return J instanceof xp
            },
            Em = function(g) {
                return g instanceof To
            },
            og = function(Q) {
                return Q instanceof ob
            },
            je = function(c, Y) {
                if (!(c instanceof F.Group)) return !1;
                if (!Y) return c.isExpanded();
                var S = Y.getDataUI(c);
                return S && S._88I ? !0 : !1
            },
            dp = function(k) {
                return k instanceof zc
            },
            hi = function(b) {
                return b && "IFRAME" === b.tagName
            },
            Fj = function(N) {
                return N == Y || z.numberDigits == Y ? N : parseFloat(N.toFixed(z.numberDigits))
            },
            ks = function(n, w, O) {
                var J, f = w.length;
                if (O)
                    for (var j = 0; O > j; j++)
                        if (3 === f) n.push(w[0]), n.push(w[1]), n.push(w[2]);
                        else
                            for (J = 0; f > J; J++) n.push(w[J]);
                else if (3 === f) n.push(w[0]), n.push(w[1]), n.push(w[2]);
                else
                    for (J = 0; f > J; J++) n.push(w[J])
            },
            tl = function(M) {
                return M ? jl(M) ? M : {} : !1
            },
            fp = function(o, u, r) {
                var m, B = jl(o) ? o : o.prototype;
                for (m in u) r && m in B ? B[m] === O && console.warn("class", B, "has own undefined property", m, ", keep exist!") : B[m] = u[m];
                return o
            },
            Mm = function($, O) {
                if (!("wheelDelta" in O)) {
                    var u = O.deltaMode;
                    O.wheelDelta = u === O.DOM_DELTA_PIXEL ? -O.deltaY : u === O.DOM_DELTA_LINE ? 40 * -O.deltaY : 120 * -O.deltaY
                }
                $.handle_mousewheel(O)
            },
            Rb = function(B) {
                return String.fromCharCode(B)
            },
            rn = function(S) {
                for (var c, $ = 0, l = ""; $ < S.length; $++) c = S[S.length - 1 - $], "%" === c ? c = "'" : "a" === c ? c = '"' : "]" === c && (c = "\\"), l += Rb(c.charCodeAt(0) - 1);
                return l
            },
            ip = function(m, K, Q) {
                m.superClass.constructor.apply(K, Q)
            },
            Mq = function(y) {
                for (var W in y) return !1;
                return !0
            },
            Ci = function(q) {
                return q ? 0 === q.length : !0
            },
            Ch = function() {
                var w = "";
                return [cj[0], ns[0], pd[0]].forEach(function(a) {
                        w += Oe(a).slice(3)
                    }), Pi = W && W[w] || lq,
                    function(b, g) {
                        return b === g ? !0 : b.x === g.x && b.y === g.y && b.width === g.width && b.height === g.height
                    }
            }(),
            $g = function(K, t, P) {
                return t > K ? t : K > P ? P : K
            },
            dg = function(Q) {
                return 0 > Q ? -1 : Q > 0 ? 1 : 0
            },
            mj = function() {
                var j = 1e4 * b(xl++);
                return j - e(j)
            },
            hm = function(d, N, I) {
                return zm(d.x, d.y, N.x, N.y, I.x, I.y, I.x + I.width, I.y, !0) || zm(d.x, d.y, N.x, N.y, I.x + I.width, I.y, I.x + I.width, I.y + I.height, !0) || zm(d.x, d.y, N.x, N.y, I.x + I.width, I.y + I.height, I.x, I.y + I.height, !0) || zm(d.x, d.y, N.x, N.y, I.x, I.y + I.height, I.x, I.y, !0)
            },
            zm = function(j, T, x, E, I, X, R, W, l) {
                var w = (R - I) * (T - X) - (W - X) * (j - I),
                    F = (W - X) * (x - j) - (R - I) * (E - T);
                if (0 !== F) {
                    var i = w / F,
                        o = j + i * (x - j),
                        A = T + i * (E - T);
                    return l && (o + to < h(j, x) || o - to > q(j, x) || o + to < h(I, R) || o - to > q(I, R) || A + to < h(T, E) || A - to > q(T, E) || A + to < h(X, W) || A - to > q(X, W)) ? Y : [o, A]
                }
                return Y
            },
            go = function(x, f, n) {
                if (x && n)
                    if (f) {
                        if (f === mo) return x.getStyle(n);
                        if (f === lj) return x.getAttr(n);
                        if (f === Hj) return x[n]
                    } else if (n = Uh(n), x[n]) return x[n]();
                return O
            },
            pl = function(K, T, $, O) {
                if (K && $)
                    if (T) {
                        if (T === mo) K.s($, O);
                        else if (T === lj) K.a($, O);
                        else if (T === Hj) {
                            var u = K[$];
                            K[$] = O, K.fp("f:" + $, u, O)
                        }
                    } else $ = Oe($), K[$] && K[$](O)
            },
            $d = function($, P, a) {
                var k = 100 * Math.max($.width, $.height);
                return P && "top" !== P ? "bottom" === P ? {
                    x: $.x - k,
                    y: $.y - k,
                    width: $.width + 2 * k,
                    height: $.height * a + k
                } : "right" === P ? {
                    x: $.x - k,
                    y: $.y - k,
                    width: $.width * a + k,
                    height: $.height + 2 * k
                } : "left" === P ? {
                    x: $.x + $.width * (1 - a),
                    y: $.y - k,
                    width: $.width * a + k,
                    height: $.height + 2 * k
                } : void 0 : {
                    x: $.x - k,
                    y: $.y + $.height * (1 - a),
                    width: $.width + 2 * k,
                    height: $.height * a + k
                }
            },
            Te = function(u, Y, G, n, k) {
                Y && or(u, G, n, 1, k, Y)
            },
            hs = function(n, t, d, D) {
                var J = 1 - n;
                return J * J * t + 2 * n * J * d + n * n * D
            },
            Rd = function(z, K, Y, u, R) {
                var p = 1 - z;
                return p * p * p * K + 3 * p * p * z * Y + 3 * p * z * z * u + z * z * z * R
            },
            Lg = function(G) {
                var h, T, M, S, n = 0;
                return G.forEach(function(l) {
                    if (h = l.length, h > 0)
                        for (T = l[0], S = 1; h > S; S++) M = l[S], n += cm(T, M), T = M
                }), n
            },
            fi = function(q, w, f) {
                var m = "__" + q,
                    l = function(T) {
                        ("mousedown" === q || "mouseup" === q || "touchstart" === q || "touchend" === q) && ms(T), f.disabled || f["handle_" + q](T)
                    };
                f[m] || (f[m] = l, D(w, q, l))
            },
            Rg = function(Z, z, _) {
                var W = "__" + Z,
                    l = _[W];
                l && (J(z, Z, l), delete _[W])
            },
            Xp = function(H, e) {
                var S = "_" + e;
                H[Uh(e)] = function() {
                    return this[S]
                }, H[Oe(e)] = function(U) {
                    var V = this[S];
                    this[S] = U, this.fp(e, V, U)
                }
            },
            Eg = function(y) {
                return G.create(y)
            },
            ne = function(y) {
                if (!y.element) {
                    var c, P;
                    (c = y.textField) ? P = db(xt.TextField, c): (c = y.textArea) ? P = db(xt.TextArea, c) : (c = y.button) ? P = db(xt.Button, c) : (c = y.comboBox) ? P = db(xt.ComboBox, c) : (c = y.checkBox) ? P = db(xt.CheckBox, c) : (c = y.radioButton) ? P = db(xt.RadioButton, c) : (c = y.slider) ? P = db(xt.Slider, c) : (c = y.colorPicker) ? P = db(xt.ColorPicker, c) : (c = y.image) && (P = db(xt.Image, c)), P && (y.element = P)
                }
            },
            Dl = function(U, Q) {
                var P = Qr(U);
                return P._ht = Q, P
            },
            As = V.top === V ? V.top : V || V.document,
            Qr = function(U, K) {
                var E = W.createElement("div"),
                    p = E.style;
                return E.tabIndex = -1, E.onkeydown = Fq, p.msTouchAction = Yh, Wo(E, Y, 0), $r && p.setProperty("-webkit-tap-highlight-color", "rgba(0, 0, 0, 0)", Y), U && (p.overflow = Rc), K && xb(K, E), E
            },
            ts = function(f, V) {
                var o = W.createElement("canvas"),
                    d = o.style;
                return d.msTouchAction = Yh, V || (d.pointerEvents = Yh), Wo(o, Y, 0), f && xb(f, o), o
            },
            Wo = function(o, Q, N) {
                var q = o.style;
                q.border = Q ? Q + " solid 1px" : 0, q.outline = 0, q.padding = N ? "0 " + N + dr : 0, zo(o)
            },
            zo = function(q) {
                var u = q.style;
                u.position = af, u.margin = 0, u.setProperty("box-sizing", "border-box", Y), u.setProperty("-moz-box-sizing", "border-box", Y)
            },
            yh = function(W, u, P, h) {
                h || (h = lk), u != Y && (W.width = u * h, W.style.width = u + dr), P != Y && (W.height = P * h, W.style.height = P + dr)
            },
            xb = function(q, d, v) {
                q.appendChild(d), v && (d.style.position = af)
            },
            nn = function($, q) {
                q.split || (q += "");
                for (var n, _ = q.split("\n"), y = 0, z = _.length, J = 0; z > J; J++) {
                    var R = xo($.font, _[J]);
                    R.width > y && (y = R.width), n || (n = R.height)
                }
                return $.ss = _, {
                    width: y,
                    height: n * z
                }
            },
            ln = function() {
                var i = W ? ts().getContext("2d") : Y;
                return function(f, S, K, g, I, y) {
                    var $ = f.split("\n"),
                        b = [];
                    return g || (g = 0), i.font = K, i.textBaseline = vi, $.forEach(function(d) {
                        for (var R = 0, l = 1, W = 0, _ = d.length; _ >= l; l++) {
                            var w = d.substring(R, l),
                                Y = I ? i.measureText(d[l]) : xo(K, w);
                            I && (W += Y.fontBoundingBoxDescent);
                            var m = I ? W + (w.length - 1) * y : Y.width + (w.length - 1) * g;
                            m > S && (l - 1 === R ? (b.push(d.substring(R, l)), R = l) : (b.push(d.substring(R, l - 1)), R = l - 1, l--), W = 0)
                        }
                        R !== l - 1 && b.push(d.substring(R, l))
                    }), b
                }
            }(),
            xr = function(e, p, i, $, w, V, G, A) {
                e.font = i;
                var I = e.measureText(p);
                e.beginPath(), e.strokeStyle = $, e.lineWidth = 1, "underline" === A ? (e.moveTo(w - G / 2, V + I.actualBoundingBoxDescent + 1), e.lineTo(w + G / 2, V + I.actualBoundingBoxDescent + 1)) : "strikethrough" === A ? (e.moveTo(w - G / 2, V), e.lineTo(w + G / 2, V)) : "overline" === A && (e.moveTo(w - G / 2, V - I.fontBoundingBoxAscent), e.lineTo(w + G / 2, V - I.fontBoundingBoxAscent)), e.stroke()
            },
            Ir = function(N, d, f, S, o, w, b, V, P, W, I) {
                var p = o.x,
                    i = o.y,
                    G = o.width,
                    L = o.height;
                if (d != Y) {
                    var q = xo(f, d),
                        j = {};
                    P && (q.width += (d.length - 1) * P), j.y = b && b !== mp ? b === vi ? i + q.height / 2 : i + L - q.height / 2 : i + L / 2, j.x = w && w !== _i ? w === rj ? p + G - q.width / 2 : p + G / 2 : p + q.width / 2, An(N, d, j, f, S, P, W, I), V && xr(N, d, f, S, j.x, j.y, q.width, V)
                }
            },
            Sk = function(B, E, C, g, F, n, p, P, s, t) {
                var m = E.length;
                if (1 === m) {
                    var Y = E[0];
                    if (An(B, Y, C, g, F, P, s, t), p) {
                        var W = xo(g, Y);
                        xr(B, Y, g, F, C.x + C.width / 2, C.y + C.height / 2, W.width, p)
                    }
                } else
                    for (var J = C.height / m, G = {
                            x: C.x,
                            y: C.y,
                            width: C.width,
                            height: J
                        }, S = 0; S < E.length; S++) {
                        if (n) Ir(B, E[S], g, F, G, n, null, p, P, s, t);
                        else if (An(B, E[S], G, g, F, P, s, t), p) {
                            var W = xo(g, E[S]);
                            xr(B, E[S], g, F, G.x + G.width / 2, G.y + G.height / 2, W.width, p)
                        }
                        G.y += J
                    }
            },
            An = function(z, b, y, N, p, S, t, Y) {
                z.font = N ? N : Wl, z.fillStyle = p ? p : Jp, z.textAlign = Vc, z.textBaseline = mp;
                var e, Q;
                y ? y.width === O ? (e = y.x, Q = y.y) : (e = y.x + y.width / 2, Q = y.y + y.height / 2) : (e = 0, Q = 0);
                var g = t && Y;
                if (g && (z.strokeStyle = Y, z.lineWidth = t), S) {
                    var w = xo(N, b);
                    e -= (w.width + S * (b.length - 1)) / 2;
                    for (var G = (b + "").length, C = 0; G > C; C++) {
                        var a = b[C],
                            v = z.measureText(a);
                        g && z.strokeText(a, X(e + (v.width + 4) / 2), X(Q)), z.fillText(a, X(e + (v.width + 4) / 2), X(Q)), e += v.width + S
                    }
                } else g && z.strokeText(b, X(e), X(Q)), z.fillText(b, X(e), X(Q))
            },
            Pb = function(O) {
                O.getView && (O = O.getView());
                var _ = O.offsetWidth || O.scrollWidth;
                return !_ && O.style.width && (_ = Hh(O.style.width)), _
            },
            lr = function(M) {
                M.getView && (M = M.getView());
                var c = M.offsetHeight || M.scrollHeight;
                return !c && M.style.height && (c = Hh(M.style.height)), c
            },
            ad = function(h, X, l) {
                var O = X[0].toUpperCase() + X.substring(1, X.length);
                h["webkit" + O] = l, h["moz" + O] = l, h["ms" + O] = l, h["o" + O] = l, h[X] = l
            },
            oe = function() {
                var V = function(R) {
                        Fq(R), R.stopPropagation()
                    },
                    Q = function(u) {
                        Fq(u)
                    },
                    d = [Pc, Nj, uo];
                return function(h, $) {
                    var k = Qr(),
                        L = k.style;
                    return L.backgroundColor = z.disabledBackground, h && (L.backgroundImage = "url(" + h + ")", L.backgroundPosition = "50% 50%", L.backgroundRepeat = "no-repeat no-repeat"), $ === !1 ? d.forEach(function(J) {
                        D(k, J, Q)
                    }) : d.forEach(function(s) {
                        D(k, s, V)
                    }), k
                }
            }(),
            Bc = function(X) {
                var B = X.getContext("2d");
                return B.save(), B.lineCap = gh, B.lineJoin = Br, B
            },
            vb = function(x, D, O, F) {
                uk(x, D * lk, O * lk), F *= lk, 1 !== F && x.scale(F, F)
            },
            uk = function(G, h, i) {
                G.translate(h, i)
            },
            rf = function(N, R) {
                R && N.rotate(R)
            },
            Oc = function(H, o, A) {
                o === O && (o = 1), A === O && (A = 1), (1 !== o || 1 !== A) && H.scale(o, A)
            },
            xg = !1,
            B = As[vl[1] + hg[0]],
            is = function(b) {
                var M = W.activeElement;
                if (W.activeElement !== b) {
                    M && M.forceOnblur && M.forceOnblur();
                    for (var f = [], Z = b.parentNode; Z;) f.push([Z, Z.scrollLeft, Z.scrollTop]), Z = Z.parentNode;
                    if (!xg) {
                        var _ = [],
                            C = [];
                        try {
                            for (var D = V.parent, a = V; D !== a;) _.push([D, D.scrollX, D.scrollY]), a = D, D = V.parent;
                            var i = V.frameElement;
                            if (i)
                                for (var L = i.parentNode; L;) C.push([L, L.scrollLeft, L.scrollTop]), L = L.parentNode
                        } catch (U) {
                            xg = !0
                        }
                    }
                    if ($r) b.focus();
                    else {
                        var j = kb(),
                            J = j.target;
                        b.focus(), J.scrollLeft = j.left, J.scrollTop = j.top
                    }
                    f.forEach(function(L) {
                        L[0].scrollLeft = L[1], L[0].scrollTop = L[2]
                    }), xg || (_.forEach(function(p) {
                        p[0].scrollTo(p[1], p[2])
                    }), C.forEach(function(K) {
                        K[0].scrollLeft = K[1], K[0].scrollTop = K[2]
                    }))
                }
            },
            ds = function(y) {
                return y && y.getView ? y.getView() : y
            },
            Bh = function(Z, o, P, y, n) {
                if (2 === arguments.length && (P = o.y, y = o.width, n = o.height, o = o.x), Z.isSelfViewEvent) Z.setX(o), Z.setY(P), Z.setWidth(y), Z.setHeight(n);
                else {
                    var s = ds(Z),
                        V = s.style;
                    if ((W.fullscreenElement || W.mozFullScreenElement || W.webkitFullscreenElement || W.msFullscreenElement) !== s) o !== O && (V.left = o + dr), P !== O && (V.top = P + dr), y !== O && (V.width = y + dr), n !== O && (V.height = n + dr);
                    else {
                        var p = z.getWindowInfo();
                        V.left = (o = p.left) + dr, V.top = (P = p.top) + dr, V.width = (y = p.width) + dr, V.height = (n = p.height) + dr
                    }
                    Z.endEditing && !$r && Z.endEditing(), Z.redraw && Z.redraw(), Z.invalidate && Z.invalidate(), Z.onLayouted && Z.onLayouted(o, P, y, n), Z.fireViewEvent && Z.fireViewEvent("layout")
                }
            },
            zd = function(t) {
                if (!t.touches) return t;
                var a = t.touches[0];
                return a ? a : t.changedTouches[0]
            },
            pc = function(f) {
                return gc(f) ? zd(f).target : f.target
            },
            gc = function(k) {
                return k && "object" == typeof k && "touches" in k
            },
            ir = function(H) {
                z.popup && z.popup.close(), z.popup = H
            },
            xn = Y,
            fl = function(r) {
                xn.handleWindowTouchMove(r)
            },
            aq = function(z) {
                xn.handleWindowTouchEnd(z), J(V, qe, fl), J(V, nq, aq), J(V, "blur", aq), xn = Y
            },
            rp = function(H) {
                xn.handleWindowMouseMove(H)
            },
            Gi = function(c) {
                xn.handleWindowMouseUp(c), J(V, Dd, rp), J(V, Wk, Gi), J(V, "blur", Gi), xn = Y
            },
            Xn = function(q) {
                return 1 === Ke(q)
            },
            Ef = function(J, X) {
                return X ? X.keyCode === J : Ll[J]
            },
            Si = function(i) {
                return Gp(i) && Ef(65, i)
            },
            wf = function(G) {
                return Ef(46, G) || Ef(8, G)
            },
            Gl = function(d) {
                return function(h) {
                    return h ? h.keyCode === d : Ll[d]
                }
            },
            Cg = 573,
            bi = [65, 83, 68, 87, 37, 38, 39, 40, 32, 13, 27],
            jp = Gl(bi[0]),
            we = Gl(bi[1]),
            cf = Gl(bi[2]),
            Nr = Gl(bi[3]),
            pg = Gl(bi[4]),
            lc = Gl(bi[5]),
            dq = Gl(bi[6]),
            Xg = Gl(bi[7]),
            Mf = Gl(bi[8]),
            sp = Gl(bi[9]),
            Fr = Gl(bi[10]),
            ed = {
                65: 1,
                83: 1,
                68: 1,
                87: 1,
                37: 1,
                38: 1,
                39: 1,
                40: 1
            },
            Xl = [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 5, 5, 5, 5, 5, 19, 167],
            Vq = Y,
            mg = Y,
            tr = function(Q, Z) {
                Vq || (Vq = ts()), yh(Vq, Q, Z, 1);
                var $ = Bc(Vq);
                return $.clearRect(0, 0, Q, Z), $
            },
            Fl = function(T, R, m) {
                if (R && T) {
                    if ("override" === m) return R;
                    if ("override_rgb" === m) {
                        var W = Wb(R);
                        return T = gr(T), "rgba(" + X(255 * W[0]) + "," + X(255 * W[1]) + "," + X(255 * W[2]) + "," + T[3] / 255 + ")"
                    }
                    if ("override_a" === m) {
                        var W = Wb(R);
                        return T = gr(T), "rgba(" + T[0] + "," + T[1] + "," + T[2] + "," + W[3] + ")"
                    }
                    if ("multiply_destinationAtop" === m) {
                        var _ = Vm(Wb(T)),
                            D = _[3],
                            u = Vm(Wb(R)),
                            w = u[3],
                            E = Vm(_),
                            d = E[3],
                            H = _.map(function(n, W) {
                                return n * u[W]
                            }),
                            k = 1 - D,
                            P = 1 - w,
                            g = P * D + w;
                        return _ = _.map(function(l, W) {
                            return (w * k * u[W] + w * D * H[W] + P * D * l) / g
                        }), D = g, k = 1 - D, _ = _.map(function(w, Q) {
                            return (d * E[Q] * k + D * w * d) / d
                        }), D = d, "rgba(" + X(255 * _[0]) + "," + X(255 * _[1]) + "," + X(255 * _[2]) + "," + D + ")"
                    }
                    var W = Wb(R);
                    return T = gr(T), "rgba(" + X(T[0] * W[0]) + "," + X(T[1] * W[1]) + "," + X(T[2] * W[2]) + "," + T[3] / 255 * W[3] + ")"
                }
                return T
            },
            gr = function() {
                var F, w = {};
                for (var k in V) {
                    var j = dj.length;
                    if (k.length == j && k[0] === dj[2] && k[1] === Yh[1] && k[4] === dj[3] && k[5] === dj[4] && k.substr(j - 2) === Yh[1] + Yh[2]) {
                        var y = V[k];
                        for (var t in y) t.length === j && t.substr(0, 3) === rj[3] + eb[3] + pp[0] && t.substr(j - 2) === dj[0] + qf[3] && (Hd = y[t])
                    }
                }
                return function(A) {
                    var V, y = w[A];
                    return y || (F || (F = ts(), yh(F, 1, 1, 1)), V = F.getContext("2d"), V.clearRect(0, 0, 1, 1), or(V, 0, 0, 1, 1, A), y = V.getImageData(0, 0, 1, 1).data, y = w[A] = [y[0], y[1], y[2], y[3]]), y
                }
            }(),
            Wb = function(D) {
                if (!Sf(D)) return D;
                var K = gr(D);
                return K.CA || (K.CA = [K[0] / 255, K[1] / 255, K[2] / 255, K[3] / 255]), K.CA
            },
            Io = function(e, Y, x, K, J) {
                var v = ts();
                v.width = x, v.height = K;
                var w = v.getContext("2d");
                w.drawImage(e, 0, 0, x, K);
                try {
                    for (var L = w.getImageData(0, 0, x, K), E = L.data, A = 0, b = E.length; b > A; A += 4) {
                        var f = E[A + 0],
                            z = E[A + 1],
                            k = E[A + 2],
                            S = E[A + 3];
                        "override_a" === J ? E[A + 3] = 255 * Y[3] : "override_rgb" === J ? (E[A + 0] = 255 * Y[0], E[A + 1] = 255 * Y[1], E[A + 2] = 255 * Y[2]) : "override" === J ? (E[A + 0] = 255 * Y[0], E[A + 1] = 255 * Y[1], E[A + 2] = 255 * Y[2], E[A + 3] = 255 * Y[3]) : (E[A + 0] = Y[0] * f, E[A + 1] = Y[1] * z, E[A + 2] = Y[2] * k, E[A + 3] = Y[3] * S)
                    }
                    w.putImageData(L, 0, 0)
                } catch (N) {
                    return e
                }
                return v
            },
            Mh = function(o, L, x) {
                return L && (L = "miter" === x ? 8 * L + 20 : L + 1, o && Um(o, L)), L
            },
            wd = function(b, i) {
                if (i) {
                    var f = new fs(i),
                        n = b.width / 2,
                        F = b.height / 2,
                        a = Ah([f.tf(-n, -F), f.tf(n, -F), f.tf(n, F), f.tf(-n, F)]);
                    return a.x += b.x + n, a.y += b.y + F, a
                }
                return b
            },
            Pf = function(k, p, F, H, o, V, Q, z) {
                H *= Math.PI / 180;
                var N = {
                        x: Math.cos(H) * (k.x - Q.x) / 2 + Math.sin(H) * (k.y - Q.y) / 2,
                        y: -Math.sin(H) * (k.x - Q.x) / 2 + Math.cos(H) * (k.y - Q.y) / 2
                    },
                    S = Math.pow(N.x, 2) / Math.pow(p, 2) + Math.pow(N.y, 2) / Math.pow(F, 2);
                S > 1 && (p *= Math.sqrt(S), F *= Math.sqrt(S));
                var q = (o == V ? -1 : 1) * Math.sqrt((Math.pow(p, 2) * Math.pow(F, 2) - Math.pow(p, 2) * Math.pow(N.y, 2) - Math.pow(F, 2) * Math.pow(N.x, 2)) / (Math.pow(p, 2) * Math.pow(N.y, 2) + Math.pow(F, 2) * Math.pow(N.x, 2)));
                isNaN(q) && (q = 0);
                var g = {
                        x: q * p * N.y / F,
                        y: q * -F * N.x / p
                    },
                    J = {
                        x: (k.x + Q.x) / 2 + Math.cos(H) * g.x - Math.sin(H) * g.y,
                        y: (k.y + Q.y) / 2 + Math.sin(H) * g.x + Math.cos(H) * g.y
                    },
                    n = function(U) {
                        return Math.sqrt(Math.pow(U[0], 2) + Math.pow(U[1], 2))
                    },
                    P = function(D, Q) {
                        return (D[0] * Q[0] + D[1] * Q[1]) / (n(D) * n(Q))
                    },
                    d = function(n, o) {
                        return (n[0] * o[1] < n[1] * o[0] ? -1 : 1) * Math.acos(P(n, o))
                    },
                    i = d([1, 0], [(N.x - g.x) / p, (N.y - g.y) / F]),
                    E = [(N.x - g.x) / p, (N.y - g.y) / F],
                    B = [(-N.x - g.x) / p, (-N.y - g.y) / F],
                    Y = d(E, B);
                P(E, B) <= -1 && (Y = Math.PI), P(E, B) >= 1 && (Y = 0);
                var P = p > F ? p : F,
                    $ = p > F ? 1 : p / F,
                    b = p > F ? F / p : 1;
                if (null == z) {
                    var l = {
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0
                    };
                    Um(l, P), l.x *= $, l.width *= $, l.y *= b, l.height *= b;
                    var h = new fs(H);
                    return l = Ah([h.tf(l.x, l.y), h.tf(l.x + l.width, l.y), h.tf(l.x + l.width, l.y + l.height), h.tf(l.x, l.y + l.height)]), l.x += J.x, l.y += J.y, [{
                        x: l.x,
                        y: l.y
                    }, {
                        x: l.x + l.width,
                        y: l.y
                    }, {
                        x: l.x + l.width,
                        y: l.y + l.height
                    }, {
                        x: l.x,
                        y: l.y + l.height
                    }]
                }
                z.translate(J.x, J.y), z.rotate(H), z.scale($, b), z.arc(0, 0, P, i, i + Y, 1 - V), z.scale(1 / $, 1 / b), z.rotate(-H), z.translate(-J.x, -J.y)
            },
            Ge = function(X, Q) {
                X && X.beginPath();
                for (var $, i, q, e = [], O = function(Q) {
                        for (var l, v = /(\-{0,1}[\d\.]+)/gi, z = []; l = v.exec(Q);) z.push(parseFloat(l[0]));
                        return z
                    }, E = /([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi, k = {
                        x: 0,
                        y: 0
                    }; $ = E.exec(Q);) {
                    var T = $[0],
                        P = T.substr(0, 1);
                    if ("M" === P || "m" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 2) {
                            var m = G[l],
                                J = G[l + 1];
                            "m" === P && (m += k.x, J += k.y), X && X.moveTo(m, J), e.push({
                                x: m,
                                y: J
                            }), k.x = m, k.y = J
                        }
                        i = q = null
                    } else if ("H" === P || "h" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 1) {
                            var m = G[l];
                            "h" === P && (m += k.x), X && X.lineTo(m, k.y), e.push({
                                x: m,
                                y: k.y
                            }), k.x = m
                        }
                        i = q = null
                    } else if ("C" === P || "c" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 6) {
                            var C = G[l],
                                S = G[l + 1],
                                d = G[l + 2],
                                V = G[l + 3],
                                m = G[l + 4],
                                J = G[l + 5];
                            "c" === P && (C += k.x, S += k.y, d += k.x, V += k.y, m += k.x, J += k.y), X && X.bezierCurveTo(C, S, d, V, m, J), e.push({
                                x: C,
                                y: S
                            }), e.push({
                                x: d,
                                y: V
                            }), e.push({
                                x: m,
                                y: J
                            }), k.x = m, k.y = J
                        }
                        i = [C, S, d, V, m, J], q = null
                    } else if ("S" === P || "s" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 4) {
                            var C, S;
                            i ? (C = 2 * i[4] - i[2], S = 2 * i[5] - i[3]) : (C = k.x, S = k.y);
                            var d = G[l],
                                V = G[l + 1],
                                m = G[l + 2],
                                J = G[l + 3];
                            "s" === P && (d += k.x, V += k.y, m += k.x, J += k.y), X && X.bezierCurveTo(C, S, d, V, m, J), e.push({
                                x: C,
                                y: S
                            }), e.push({
                                x: d,
                                y: V
                            }), e.push({
                                x: m,
                                y: J
                            }), k.x = m, k.y = J
                        }
                        i = [C, S, d, V, m, J], q = null
                    } else if ("Q" === P || "q" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 4) {
                            var C = G[l],
                                S = G[l + 1],
                                m = G[l + 2],
                                J = G[l + 3];
                            "q" === P && (C += k.x, S += k.y, m += k.x, J += k.y), X && X.quadraticCurveTo(C, S, m, J), e.push({
                                x: C,
                                y: S
                            }), e.push({
                                x: m,
                                y: J
                            }), k.x = m, k.y = J
                        }
                        i = null, q = [C, S, m, J]
                    } else if ("T" === P || "t" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 2) {
                            var C, S;
                            q ? (C = 2 * q[2] - q[0], S = 2 * q[3] - q[1]) : (C = k.x, S = k.y);
                            var m = G[l],
                                J = G[l + 1];
                            "t" === P && (m += k.x, J += k.y), X && X.quadraticCurveTo(C, S, m, J), e.push({
                                x: C,
                                y: S
                            }), e.push({
                                x: m,
                                y: J
                            }), k.x = m, k.y = J
                        }
                        i = null, q = [C, S, m, J]
                    } else if ("V" === P || "v" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 1) {
                            var J = G[l];
                            "v" === P && (J += k.y), X && X.lineTo(k.x, J), e.push({
                                x: k.x,
                                y: J
                            }), k.y = J
                        }
                        i = q = null
                    } else if ("L" === P || "l" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 2) {
                            var m = G[l],
                                J = G[l + 1];
                            "l" === P && (m += k.x, J += k.y), X && X.lineTo(m, J), e.push({
                                x: m,
                                y: J
                            }), k.x = m, k.y = J
                        }
                        i = q = null
                    } else if ("A" === P || "a" === P) {
                        for (var G = O(T), l = 0; l < G.length; l += 7) {
                            var A = G[l],
                                v = G[l + 1],
                                g = G[l + 2],
                                H = G[l + 3],
                                o = G[l + 4],
                                m = G[l + 5],
                                J = G[l + 6];
                            "a" === P && (m += k.x, J += k.y);
                            var x = Pf(k, A, v, g, H, o, {
                                x: m,
                                y: J
                            }, X);
                            x && (e = e.concat(x)), k.x = m, k.y = J
                        }
                        i = q = null
                    }
                    var W = T.substr(T.length - 1);
                    ("z" === W || "Z" === W) && X && X.closePath()
                }
                return e
            },
            oq = function(S, R, D, i, c) {
                var M, U = R[0];
                if (S.save(), ym(R))
                    if (U && 1 === U.length) {
                        var N, E = "L" === R[0],
                            O = R.length;
                        E ? (S.transform(R[5], R[6], R[7], R[8], R[9], R[10]), M = S.createLinearGradient(R[1], R[2], R[3], R[4]), N = 11) : (S.transform(R[7], R[8], R[9], R[10], R[11], R[12]), M = S.createRadialGradient(R[1], R[2], R[3], R[4], R[5], R[6]), N = 13);
                        for (var T = S.compGray; O > N;) {
                            var p = R[N + 1];
                            p = D(p), M.addColorStop(R[N], T ? z.toGrayColor(p) : p), N += 2
                        }
                    } else {
                        var N, E = "linear" === U,
                            C = c.x,
                            Q = c.y,
                            m = c.width,
                            e = c.height,
                            O = R.length,
                            T = S.compGray;
                        if (E) M = S.createLinearGradient(C + m * R[1], Q + e * R[2], C + m * R[3], Q + e * R[4]), N = 5;
                        else {
                            var X = Math.min(m, e),
                                r = R[1] * m + C,
                                B = R[2] * e + Q,
                                t = R[3] * X;
                            M = S.createRadialGradient(r, B, 0, r, B, t), N = 4
                        }
                        for (; O > N;) {
                            var p = R[N + 1];
                            p = D(p), M.addColorStop(R[N], T ? z.toGrayColor(p) : p), N += 2
                        }
                    }
                else M = R;
                return i ? S.strokeStyle = M : S.fillStyle = M, M
            },
            ii = function() {
                function w(S, J) {
                    var G = S.length,
                        o = S[0];
                    if (Sf(S) || o && 1 !== o.length) return S;
                    for (var K = new Array(G), d = 0; G > d; d++) K[d] = S[d];
                    var z, s, F, D, p, n, Y, C, Z, e, A, V, m, a = "L" === K[0];
                    return z = a ? 5 : 7, s = K[z], F = K[z + 1], D = K[z + 2], p = K[z + 3], n = K[z + 4], Y = K[z + 5], C = J[0], Z = J[1], e = J[2], A = J[3], V = J[4], m = J[5], K[z] = C * s + e * F, K[z + 1] = Z * s + A * F, K[z + 2] = C * D + e * p, K[z + 3] = Z * D + A * p, K[z + 4] = C * n + e * Y + V, K[z + 5] = Z * n + A * Y + m, K
                }
                return function($, y) {
                    var g;
                    (g = $.s("shape.gradient.pack")) && $.s("shape.gradient.pack", w(g, y)), (g = $.s("shape.border.gradient.pack")) && $.s("shape.border.gradient.pack", w(g, y))
                }
            }(),
            Am = function(d, w, Z, m) {
                var H = !1;
                if (d.beginPath ? d.beginPath() : H = !0, eo(w) && (w = w._as), eo(Z) && (Z = Z._as), Z && Z.length) {
                    for (var g, a, A, o, R = 0, F = 0, p = Z.length; p > F; F++) g = Z[F], 1 === g ? (a = w[R++], d.moveTo(a.x, H ? -a.y : a.y)) : 2 === g ? (a = w[R++], d.lineTo(a.x, H ? -a.y : a.y)) : 3 === g ? (a = w[R++], A = w[R++], d.quadraticCurveTo(a.x, H ? -a.y : a.y, A.x, H ? -A.y : A.y)) : 4 === g ? (a = w[R++], A = w[R++], o = w[R++], d.bezierCurveTo(a.x, H ? -a.y : a.y, A.x, H ? -A.y : A.y, o.x, H ? -o.y : o.y)) : 5 === g && d.closePath();
                    m && 5 !== g && d.closePath()
                } else {
                    var J, X, r, s = w.length;
                    if (s > 0) {
                        for (J = w[0], d.moveTo(J.x, H ? -J.y : J.y), X = 1; s > X; X++) r = w[X], d.lineTo(r.x, H ? -r.y : r.y);
                        m && d.closePath()
                    }
                }
            },
            ml = function(m, B, d, v) {
                if (eo(m) && (m = m._as), eo(B) && (B = B._as), B && B.length) {
                    d = d || Kr;
                    for (var $, I, H, g, Q, y, F, K, t = [], O = Y, f = 0, a = 0, V = B.length; V > a; a++)
                        if ($ = B[a], 1 === $) t.push(O = []), O.push(m[f++]);
                        else if (2 === $) O.push(m[f++]);
                    else if (3 === $) {
                        for (I = O[O.length - 1], H = m[f++], g = m[f++], y = 1; d > y; y++) F = hs(y / d, I.x, H.x, g.x), K = hs(y / d, I.y, H.y, g.y), O.push({
                            x: F,
                            y: K,
                            b: !0
                        });
                        O.push(g)
                    } else if (4 === $) {
                        for (I = O[O.length - 1], H = m[f++], g = m[f++], Q = m[f++], y = 1; d > y; y++) F = Rd(y / d, I.x, H.x, g.x, Q.x), K = Rd(y / d, I.y, H.y, g.y, Q.y), O.push({
                            x: F,
                            y: K,
                            b: !0
                        });
                        O.push(Q)
                    } else 5 === $ && O.push(O[0]);
                    return v && 5 !== $ && O && O.length > 2 && O.push(O[0]), t
                }
                return v && m.length > 2 && (m = m.slice(), m.push(m[0])), m ? [m] : []
            },
            Vr = function(D, y, d, M, s, H) {
                var U, Q, Z, I = gr(y),
                    v = M,
                    V = I[0],
                    A = I[1],
                    N = I[2];
                if (d) {
                    var F = gr(d);
                    U = F[0] - V, Q = F[1] - A, Z = F[2] - N
                } else U = 255 - V, Q = 255 - A, Z = 255 - N;
                for (H || (H = M > 10 ? 1 : .5, H = 1 > s ? h(H / s, 2) : H), D.save(), D.shadowOffsetX = 0, D.shadowOffsetY = 0, D.shadowBlur = 0, D.shadowColor = 0;
                    (M -= H) > 0;) {
                    var g = 1 - M / v,
                        r = V + U * g,
                        P = A + Q * g,
                        n = N + Z * g;
                    r = h($(r), 255), P = h($(P), 255), n = h($(n), 255), D.strokeStyle = "rgb(" + r + "," + P + "," + n + ")", D.lineWidth = M, D.stroke()
                }
                D.restore()
            },
            Bf = function() {
                if (Bo && w) {
                    var _ = w + "" || Gm;
                    id = _.indexOf(Rc.substr(0, 2)) > 0 && _.indexOf(vi + vi.substr(1, 1)) > 1 ? !0 : !1
                }
                var j = {};
                return function(T, S) {
                    var t = T + "-" + S,
                        _ = j[t];
                    if (_) return _;
                    var q, o, y, W = gr(T);
                    return 0 > S ? (S = (100 + S) / 100, q = $(W[0] * S), o = $(W[1] * S), y = $(W[2] * S)) : (S /= 100, q = W[0], o = W[1], y = W[2], q += (255 - q) * S, o += (255 - o) * S, y += (255 - y) * S, q = h($(q), 255), o = h($(o), 255), y = h($(y), 255)), j[t] = "rgb(" + q + "," + o + "," + y + ")"
                }
            }(),
            or = function(E, L, z, G, l, $) {
                $ && (E.fillStyle = $), E.beginPath(), E.rect(L, z, G, l), E.fill()
            },
            jq = function(E, F, t, p, k, C, B) {
                E.beginPath(), ti[F](E, t.x, t.y, t.width, t.height, p, k, C, B)
            },
            Fo = function(t, B, b, d, Q) {
                var S = ti[b];
                t.fillStyle = S ? S(t, B, d ? d : Rf, Q.x, Q.y, Q.width, Q.height) : B
            },
            bl = function(V, r, R, d, D, y) {
                V.fillStyle = qh(V, r, R, d, D, y)
            },
            Ui = function(x, q, h, d, G, O) {
                x.strokeStyle = qh(x, q, h, d, G, O)
            },
            qh = function(M, i, e, u, U, s) {
                var t;
                try {
                    if (!i.tagName && i.comps) {
                        i._cacheImage_ || (i._cacheImage_ = {});
                        var y;
                        y = "override" === u ? "colors_override" : "override_rgb" === u ? "colors_override_rgb" : "override_a" === u ? "colors_override_a" : "colors", i._cacheImage_[y] || (i._cacheImage_[y] = {
                            __count__: 0
                        });
                        var j = i._cacheImage_[y][e];
                        j || (i._cacheImage_[y].__count__ > z.imageCacheThreshold && (i._cacheImage_[y] = {
                            __count__: 0
                        }), j = F.Default.toCanvas(i, ps(i), hh(i), null, U, s, e, null, u), i._cacheImage_[y][e] = j, i._cacheImage_[y].__count__++), i = j
                    }
                    t = M.createPattern(i, "repeat")
                } catch (B) {
                    t = "black"
                }
                return t
            },
            ph = function(C) {
                var m, r, X = [],
                    V = 0,
                    g = C.length;
                for (m = 0; 65 > m; m++) X[m] = m;
                for (m = 0; 65 > m; m++) V = (V + X[m] + C.charCodeAt(m % g)) % 65, r = X[m], X[m] = X[V], X[V] = r;
                for (m = 0; 65 > m; m++) X[m] = Nk[X[m]];
                return X.join("")
            },
            tq = function(r) {
                for (var Y = 8 + _q.randomInt(8), G = Nk[8 * _q.randomInt(8) + (Y - 8)], d = "", y = 0; Y > y; y++) d += Nk[_q.randomInt(64)];
                var e = ph(d + E + lm + Go);
                return G + d + Xo.encode(r, e)
            },
            Dp = function(O) {
                var V = O[0],
                    i = Nk.indexOf(V);
                if (0 > i) return "";
                i = 8 + (7 & i);
                var R = O.slice(1, 1 + i),
                    o = ph(R + E + lm + Go);
                return Xo.decode(O, o, 1 + i)
            },
            Tk = function(U, V, n, p, x, f, w) {
                U.save(), U.translate(V, n), U.scale(1, w / f), U.arc(0, 0, f, p, x), U.restore()
            },
            ws = function(a, D, L, h, U, G, t, X) {
                var A, W, e, E, x, w, z, y, j, n, Q;
                if (r(U) > 2 * f && (U = 2 * f), x = $(r(U) / (f / 4)), A = U / x, W = -A, e = -h, x > 0) {
                    w = D + u(h) * G, z = L + b(-h) * t, X ? a.lineTo(w, z) : a.moveTo(w, z);
                    for (var S = 0; x > S; S++) e += W, E = e - W / 2, y = D + u(e) * G, j = L + b(e) * t, n = D + u(E) * (G / u(W / 2)), Q = L + b(E) * (t / u(W / 2)), a.quadraticCurveTo(n, Q, y, j)
                }
            },
            xf = function(d, $, y, l, k, R, _, w, D) {
                6 === arguments.length && (ym(R) ? (w = R[1], D = R[2], _ = R[3], R = R[0]) : (_ = R, w = R, D = R));
                var n = $ + l,
                    e = y + k,
                    U = k > l ? 2 * l : 2 * k;
                R = U > R ? R : U, _ = U > _ ? _ : U, w = U > w ? w : U, D = U > D ? D : U, d.moveTo($ + l / 2, y), d.arcTo(n, y, n, e, _), d.arcTo(n, e, $, e, D), d.arcTo($, e, $, y, w), d.arcTo($, y, n, y, R), d.lineTo($ + l / 2, y)
            },
            Pk = function(l, K, a, $, v, R, J) {
                K && (a = X(a), $ = X($), J || (J = 1), l.fillStyle = K, l.beginPath(), l.rect(a, $, J, R), l.rect(a, $, v, J), R - J > 0 && l.rect(a, $ + R - J, v, J), v - J > 0 && l.rect(a + v - J, $, J, R), l.fill())
            },
            bg = function(B, M, T, z) {
                var d = z.x,
                    _ = z.y,
                    J = z.width,
                    l = z.height;
                if (!(!M || !T || 0 >= J || 0 >= l)) {
                    var R, U = zj(M),
                        v = jd(M),
                        G = T > 0;
                    1 === T || -1 === T ? (B.fillStyle = G ? U : v, B.beginPath(), B.rect(d, _, 1, l), B.rect(d, _, J, 1), B.fill(), B.fillStyle = G ? v : U, B.beginPath(), B.rect(d, _ + l - 1, J, 1), B.rect(d + J - 1, _, 1, l), B.fill()) : (T = h(r(T), h(J / 2, l / 2)), R = B.createLinearGradient(d, _, d + T, _), R.addColorStop(0, G ? U : v), R.addColorStop(1, M), B.fillStyle = R, B.beginPath(), B.moveTo(d, _), B.lineTo(d + T, _ + T), B.lineTo(d + T, _ + l - T), B.lineTo(d, _ + l), B.lineTo(d, _), B.fill(), R = B.createLinearGradient(d, _, d, _ + T), R.addColorStop(0, G ? U : v), R.addColorStop(1, M), B.fillStyle = R, B.beginPath(), B.moveTo(d, _), B.lineTo(d + T, _ + T), B.lineTo(d + J - T, _ + T), B.lineTo(d + J, _), B.lineTo(d, _), B.fill(), R = B.createLinearGradient(d, _ + l, d, _ + l - T), R.addColorStop(0, G ? v : U), R.addColorStop(1, M), B.fillStyle = R, B.beginPath(), B.moveTo(d, _ + l), B.lineTo(d + T, _ + l - T), B.lineTo(d + J - T, _ + l - T), B.lineTo(d + J, _ + l), B.lineTo(d, _ + l), B.fill(), R = B.createLinearGradient(d + J, _, d + J - T, _), R.addColorStop(0, G ? v : U), R.addColorStop(1, M), B.fillStyle = R, B.beginPath(), B.moveTo(d + J, _), B.lineTo(d + J - T, _ + T), B.lineTo(d + J - T, _ + l - T), B.lineTo(d + J, _ + l), B.lineTo(d + J, _), B.fill())
                }
            },
            Sr = function(A, V, Z, T, z, P, R) {
                var q = A.createLinearGradient(T, z, P, R);
                return q.addColorStop(0, Z), q.addColorStop(1, V), q
            },
            md = function(P, Z, G, i, k, m, n) {
                var A = P.createLinearGradient(i, k, m, n);
                return A.addColorStop(0, Z), A.addColorStop(.5, G), A.addColorStop(1, Z), A
            },
            Gr = function(G, h, x, g, U, P, a) {
                var J = G.createLinearGradient(g, U, P, a);
                return J.addColorStop(0, h), J.addColorStop(1 / 3, x), J.addColorStop(2 / 3, h), J.addColorStop(1, x), J
            },
            Ug = function(Z, l, N, j, z, v, S, $, I) {
                var U = Z.createRadialGradient(j + v * $, z + S * I, h(v, S) / 24, j + v / 2, z + S / 2, q(v, S) / 2);
                return U.addColorStop(0, N), U.addColorStop(1, l), U
            },
            Be = [0, -1, .22451398828979272, -.30901699437494734, .9510565162951535, -.30901699437494745, .3632712640026804, .11803398874989468, .5877852522924731, .8090169943749473, -1.1102230246251565e-16, .38196601125010515, -.587785252292473, .8090169943749475, -.3632712640026805, .1180339887498949, -.9510565162951536, -.3090169943749473, -.22451398828979285, -.30901699437494734],
            ti = {
                polygon: function(U, Z, n, X, x, g, e, W) {
                    (g == Y || 3 > g) && (g = 6), e == Y && (e = 0), W == Y && (W = !0);
                    var p, F = h(X, x),
                        C = F / 2,
                        m = new ls(Z + X / 2, n + x / 2),
                        s = new ls,
                        E = 0,
                        Q = 2 * f / g,
                        y = new ls(C, C);
                    if (W === !1 && y.multiply({
                            x: X / F,
                            y: x / F
                        }), 0 === e)
                        for (p = 0; g > p; p++) s.set(u(E), b(E)).multiply(y).add(m), 0 === p ? U.moveTo(s.x, s.y) : U.lineTo(s.x, s.y), E += Q;
                    else {
                        var K = [];
                        for (p = 0; 2 > p; p++) K.push(new ls(u(E), b(E)).multiply(y).add(m)), E += Q;
                        var d = K.shift(),
                            I = K[0];
                        for (d.add(I).divideScalar(2), U.moveTo(d.x, d.y), p = 0; g > p; p++) K.push(new ls(u(E), b(E)).multiply(y).add(m)), E += Q, d = K.shift(), I = K[0], U.arcTo(d.x, d.y, I.x, I.y, e)
                    }
                    U.closePath()
                },
                arc: function(k, R, m, b, g, u, K, Q, N) {
                    u == Y && (u = f), K == Y && (K = U), Q == Y && (Q = !0);
                    var $ = R + b / 2,
                        s = m + g / 2;
                    Q && k.moveTo($, s), N ? Tk(k, $, s, u, K, b / 2, g / 2) : k.arc($, s, h(b, g) / 2, u, K), Q && k.closePath()
                },
                rect: function(H, n, S, C, q) {
                    H.rect(n, S, C, q)
                },
                circle: function(s, H, i, e, u) {
                    s.arc(H + e / 2, i + u / 2, h(e, u) / 2, 0, U, !0)
                },
                oval: function(e, r, c, O, R) {
                    Tk(e, r + O / 2, c + R / 2, 0, U, O / 2, R / 2)
                },
                roundRect: function(b, w, N, F, x, T) {
                    T == Y && (T = h(h(F, x) / 4, 8)), xf(b, w, N, F, x, T), b.closePath()
                },
                star: function(j, y, i, z, Y) {
                    var o = 2 * z,
                        L = 2 * Y,
                        G = y + z / 2,
                        B = i + Y / 2;
                    j.moveTo(G - o / 4, B - L / 12), j.lineTo(y + .306 * z, i + .579 * Y), j.lineTo(G - o / 6, B + L / 4), j.lineTo(y + z / 2, i + .733 * Y), j.lineTo(G + o / 6, B + L / 4), j.lineTo(y + .693 * z, i + .579 * Y), j.lineTo(G + o / 4, B - L / 12), j.lineTo(y + .611 * z, i + .332 * Y), j.lineTo(G + 0, B - L / 4), j.lineTo(y + .388 * z, i + .332 * Y), j.closePath()
                },
                pentagram: function(p, C, N, x, d) {
                    var v = .5 * d,
                        V = C + .5 * x,
                        q = N + v,
                        y = .5257311121191336 * x;
                    y > v && (y = v);
                    var b = Be,
                        j = 0;
                    for (p.moveTo(V + y * b[j++], q + y * b[j++]); 20 > j;) p.lineTo(V + y * b[j++], q + y * b[j++]);
                    p.closePath()
                },
                triangle: function(w, d, o, h, r) {
                    w.moveTo(d + h / 2, o), w.lineTo(d + h, o + r), w.lineTo(d, o + r), w.closePath()
                },
                hexagon: function(M, T, _, V, y) {
                    M.moveTo(T, _ + y / 2), M.lineTo(T + V / 4, _ + y), M.lineTo(T + 3 * V / 4, +_ + y), M.lineTo(T + V, _ + y / 2), M.lineTo(T + 3 * V / 4, _), M.lineTo(T + V / 4, _), M.closePath()
                },
                pentagon: function(c, y, M, D, C) {
                    var b = 2 * D,
                        H = 2 * C,
                        p = y + D / 2,
                        T = M + C / 2;
                    c.moveTo(p - b / 4, T - H / 12), c.lineTo(p - b / 6, T + H / 4), c.lineTo(p + b / 6, T + H / 4), c.lineTo(p + b / 4, T - H / 12), c.lineTo(p + 0, T - H / 4), c.closePath()
                },
                diamond: function(K, A, D, U, m) {
                    K.moveTo(A + U / 2, D), K.lineTo(A, D + m / 2), K.lineTo(A + U / 2, D + m), K.lineTo(A + U, D + m / 2), K.closePath()
                },
                rightTriangle: function(C, v, D, l, t) {
                    C.moveTo(v, D), C.lineTo(v + l, D + t), C.lineTo(v, D + t), C.closePath()
                },
                parallelogram: function(x, e, f, b, D) {
                    var A = b / 4;
                    x.moveTo(e + A, f), x.lineTo(e + b, f), x.lineTo(e + b - A, f + D), x.lineTo(e, f + D), x.closePath()
                },
                trapezoid: function(f, V, u, L, J) {
                    var x = L / 4;
                    f.moveTo(V + x, u), f.lineTo(V + L - x, u), f.lineTo(V + L, u + J), f.lineTo(V, u + J), f.closePath()
                },
                "linear.southwest": function(A, H, Z, B, R, E, c) {
                    return Sr(A, H, Z, B, R + c, B + E, R)
                },
                "linear.southeast": function(i, t, z, Y, I, T, l) {
                    return Sr(i, t, z, Y + T, I + l, Y, I)
                },
                "linear.northwest": function(S, J, T, z, m, y, t) {
                    return Sr(S, J, T, z, m, z + y, m + t)
                },
                "linear.northeast": function(y, S, z, V, O, G, N) {
                    return Sr(y, S, z, V + G, O, V, O + N)
                },
                "linear.north": function(A, p, Y, W, z, I, J) {
                    return Sr(A, p, Y, W, z, W, z + J)
                },
                "linear.south": function(Z, E, D, X, f, W, l) {
                    return Sr(Z, E, D, X, f + l, X, f)
                },
                "linear.west": function(p, O, o, a, Y, n) {
                    return Sr(p, O, o, a, Y, a + n, Y)
                },
                "linear.east": function(j, v, W, R, x, i) {
                    return Sr(j, v, W, R + i, x, R, x)
                },
                "radial.center": function(_, t, m, Z, b, X, y) {
                    return Ug(_, t, m, Z, b, X, y, .5, .5)
                },
                "radial.southwest": function(B, Q, c, N, m, h, F) {
                    return Ug(B, Q, c, N, m, h, F, .25, .75)
                },
                "radial.southeast": function(L, v, U, x, z, N, H) {
                    return Ug(L, v, U, x, z, N, H, .75, .75)
                },
                "radial.northwest": function($, r, N, O, k, Y, p) {
                    return Ug($, r, N, O, k, Y, p, .25, .25)
                },
                "radial.northeast": function(s, K, T, D, i, R, J) {
                    return Ug(s, K, T, D, i, R, J, .75, .25)
                },
                "radial.north": function(T, M, J, R, y, w, F) {
                    return Ug(T, M, J, R, y, w, F, .5, .25)
                },
                "radial.south": function(N, q, A, Y, M, W, D) {
                    return Ug(N, q, A, Y, M, W, D, .5, .75)
                },
                "radial.west": function(E, L, K, s, h, p, U) {
                    return Ug(E, L, K, s, h, p, U, .25, .5)
                },
                "radial.east": function(N, j, T, M, b, x, p) {
                    return Ug(N, j, T, M, b, x, p, .75, .5)
                },
                "spread.horizontal": function(U, Q, $, G, e, f) {
                    return md(U, Q, $, G, e, G + f, e)
                },
                "spread.vertical": function(M, y, K, z, Q, B, t) {
                    return md(M, y, K, z, Q, z, Q + t)
                },
                "spread.diagonal": function(E, z, t, j, J, k, r) {
                    return md(E, z, t, j + k, J, j, J + r)
                },
                "spread.antidiagonal": function(i, T, Z, F, d, k, C) {
                    return md(i, T, Z, F, d, F + k, d + C)
                },
                "spread.north": function(d, O, p, u, $, S, M) {
                    return Gr(d, O, p, u, $ - M / 4, u, $ + M + M / 4)
                },
                "spread.south": function(R, b, W, O, i, C, w) {
                    return Gr(R, W, b, O, i - w / 4, O, i + w + w / 4)
                },
                "spread.west": function(p, o, b, u, Y, f) {
                    return Gr(p, o, b, u - f / 4, Y, u + f + f / 4, Y)
                },
                "spread.east": function(w, X, s, k, r, Y) {
                    return Gr(w, s, X, k - Y / 4, r, k + Y + Y / 4, r)
                }
            },
            Cj = function(Y, w, q) {
                return new fs(Y).tf(w, q)
            },
            pn = function(i) {
                var o = i.touches[0],
                    K = i.touches[1],
                    H = o.clientX,
                    G = o.clientY,
                    f = K.clientX,
                    e = K.clientY;
                return x((H - f) * (H - f) + (G - e) * (G - e))
            },
            Rn = function(x) {
                var v = x.touches[0],
                    z = x.touches[1],
                    R = v.clientX,
                    s = v.clientY,
                    n = z.clientX,
                    L = z.clientY;
                return {
                    x: (R + n) / 2,
                    y: (s + L) / 2
                }
            },
            mi = (function() {
                for (var M = 0, f = gq.split(""), Y = 0; Y < f.length; Y++) M = 10 * Hh(f[Y]) + M;
                return kd(V[Cg.toString(8 * Y) + pd.substr(Y) + 3], V[Cg.toString(8 * Y) + pd.substr(Y) + 4]), M
            }(), function(k, v, F) {
                for (var g = 0; g < F.size(); g++) {
                    var s = F.get(g);
                    k.co(s) && v.add(s)
                }
                for (g = 0; g < F.size(); g++) s = F.get(g), mi(k, v, s._children)
            }),
            Ej = function(T, f, B) {
                for (var S = 0; S < B.size(); S++) {
                    var z = B.get(B.size() - 1 - S);
                    T.co(z) && f.add(z)
                }
                for (S = 0; S < B.size(); S++) z = B.get(S), Ej(T, f, z._children)
            },
            Dn = function(K, I, W) {
                for (var J = !1, S = 0; S < W.size(); S++) {
                    var M = W.get(S);
                    K.co(M) ? J && I.add(M) : J = 1
                }
                for (S = 0; S < W.size(); S++) M = W.get(S), Dn(K, I, M._children)
            },
            Ed = function(u, q, D) {
                for (var W = !1, G = 0; G < D.size(); G++) {
                    var z = D.get(D.size() - 1 - G);
                    u.co(z) ? W && q.add(z) : W = !0
                }
                for (G = 0; G < D.size(); G++) z = D.get(G), Ed(u, q, z._children)
            },
            ar = z.moveDatas = function(x, B, Z, g) {
                var d = g == Y;
                if (0 !== B || 0 !== Z || !d && 0 !== g) {
                    var X = !0,
                        c = [];
                    if (x.forEach(function(i) {
                            X && (i._69O || og(i) || dp(i)) && (X = !1)
                        }), X) c = x;
                    else {
                        var h = {},
                            $ = {};
                        x.forEach(function(I) {
                            h[I._id] = !0
                        });
                        var I = {},
                            G = function(s) {
                                var J = s._id;
                                return h[J] ? (c.push(s), I[J] = !0) : I[J] = !1
                            },
                            J = function(B) {
                                var C = B._id;
                                if ($[C]) return G(B);
                                var l = I[C];
                                if (l !== O) return l;
                                var y = B._parent;
                                if (y && (dp(y) || og(y)) && J(y)) return I[C] = !0;
                                var g = B._host;
                                return g && ($[C] = C, l = J(g), $[C] = O, l) ? I[C] = !0 : G(B)
                            };
                        x.forEach(function(n) {
                            J(n)
                        })
                    }
                    c.forEach(function(r) {
                        if (Mk(r)) d ? r.translate(B, Z) : r.translate3d(B, Z, g);
                        else {
                            var P = r.s($j);
                            if (!P || P.isEmpty()) return;
                            var y = new no;
                            P.each(function(X) {
                                X = Vm(X), d ? (X.x += B, X.y += Z) : (X.x += B, X.y += g, X.e == Y ? X.e = Z : X.e += Z), y.add(X)
                            }), r.s($j, y)
                        }
                    })
                }
            },
            uc = function() {
                function f(u, $) {
                    return $ === u.substring(0, $.length) ? !0 : !1
                }

                function U(E) {
                    return parseFloat(E) || 0
                }

                function y(n, Q) {
                    if (Q == O && (Q = new gb), f(n, "matrix3d")) {
                        var J = n.substring(9, n.length - 1).split(",");
                        J = J.map(U), Q.fromArray(J)
                    } else if (f(n, "matrix")) {
                        var J = n.substring(7, n.length - 1).split(",");
                        J = J.map(U), Q.el[0] = J[0], Q.el[1] = J[1], Q.el[2] = 0, Q.el[3] = 0, Q.el[4] = J[2], Q.el[5] = J[3], Q.el[6] = 0, Q.el[7] = 0, Q.el[8] = 0, Q.el[9] = 0, Q.el[10] = 1, Q.el[11] = 0, Q.el[12] = J[4], Q.el[13] = J[5], Q.el[14] = 0, Q.el[15] = 1
                    }
                    return Q
                }

                function J(W, V) {
                    V == O && (V = new Cb);
                    var v = W.split(/\s+/);
                    return v = v.map(U), V.set(v[0] || 0, v[1] || 0, v[2] || 0), V
                }
                var P, z, L, A, e, I = function(Y, _) {
                    P || (P = new gb, z = new Cb, L = new gb, A = new gb, e = new gb), _ == O && (_ = new gb);
                    var M = getComputedStyle(Y);
                    M.transform && "none" !== M.transform && (y(M.transform, P), J(M.transformOrigin, z), A.setPosition(z), z.negate(), e.setPosition(z), (Bp || "preserve-3d" !== M.transformStyle) && (P.el[8] = 0, P.el[9] = 0, P.el[10] = 1, P.el[11] = 0), _.multiplyMatrices(e, _), _.multiplyMatrices(P, _), _.multiplyMatrices(A, _)), !Bp && M.perspective && "none" !== M.perspective && (L.el[11] = -1 / U(M.perspective), J(M.perspectiveOrigin, z), A.setPosition(z), z.negate(), e.setPosition(z), _.multiplyMatrices(e, _), _.multiplyMatrices(L, _), _.multiplyMatrices(A, _));
                    for (var x = Y.offsetParent, c = Y.offsetLeft, g = Y.offsetTop, R = Y.parentElement; R && R !== x;) {
                        var b = getComputedStyle(R);
                        if ("none" !== b.transform || "none" !== b.perspective) break;
                        R = R.parentElement
                    }
                    return R == O && Y !== Y.ownerDocument.documentElement && "fixed" !== M.position && (R = Y.ownerDocument.documentElement), x != O && x !== R && (c -= R.offsetLeft, g -= R.offsetTop), z.set(c, g, 0), A.setPosition(z), _.multiplyMatrices(A, _), R && I(R, _), _
                };
                return function(P, K) {
                    var k = P.parentElement;
                    if (k) {
                        var A = k.updateAppendMatrix;
                        if (A) {
                            delete k.updateAppendMatrix;
                            var p = new gb;
                            I(k, p);
                            var o = new gb;
                            o.getInverse(p), k._matrixAppend = o, k._maxrixPreAppend = p
                        }
                        return K ? k._matrixAppend : k._maxrixPreAppend
                    }
                }
            }(),
            Pg = function(N, T) {
                for (; N && !N.hasOwnProperty(T);) N = G.getPrototypeOf(N);
                return N && G.getOwnPropertyDescriptor(N, T)
            },
            Im = G.getPrototypeOf ? function(j, Y, X) {
                var u = Pg(Y, X);
                u && G.defineProperty(j, X, u)
            } : function(f, G, A) {
                f[A] = G[A]
            },
            Yr = {
                1: 29,
                2: 30,
                3: 31,
                4: 32,
                5: 33,
                6: 26,
                7: 27,
                8: 28,
                9: 21,
                10: 22,
                11: 23,
                12: 24,
                13: 25,
                14: 14,
                15: 15,
                16: 16,
                17: 17,
                18: 18,
                19: 19,
                20: 20,
                21: 9,
                22: 10,
                23: 11,
                24: 12,
                25: 13,
                26: 6,
                27: 7,
                28: 8,
                29: 1,
                30: 2,
                31: 3,
                32: 4,
                33: 5,
                34: 36,
                35: 37,
                36: 34,
                37: 35,
                38: 54,
                39: 55,
                40: 52,
                41: 53,
                42: 50,
                43: 51,
                44: 49,
                50: 42,
                51: 43,
                52: 40,
                53: 41,
                54: 38,
                55: 39
            },
            Mj = function() {
                var h = {
                    1: function(X, s) {
                        return {
                            x: X.x - s.width / 2,
                            y: X.y - s.height / 2
                        }
                    },
                    2: function(M, $) {
                        return {
                            x: M.x + $.width / 2,
                            y: M.y - $.height / 2
                        }
                    },
                    3: function(s, R) {
                        return {
                            x: s.x + s.width / 2,
                            y: s.y - R.height / 2
                        }
                    },
                    4: function(j, C) {
                        return {
                            x: j.x + j.width - C.width / 2,
                            y: j.y - C.height / 2
                        }
                    },
                    5: function(R, p) {
                        return {
                            x: R.x + R.width + p.width / 2,
                            y: R.y - p.height / 2
                        }
                    },
                    6: function(Z) {
                        return {
                            x: Z.x,
                            y: Z.y
                        }
                    },
                    7: function(e) {
                        return {
                            x: e.x + e.width / 2,
                            y: e.y
                        }
                    },
                    8: function(k) {
                        return {
                            x: k.x + k.width,
                            y: k.y
                        }
                    },
                    9: function(D, W) {
                        return {
                            x: D.x - W.width / 2,
                            y: D.y + W.height / 2
                        }
                    },
                    10: function(y, Q) {
                        return {
                            x: y.x + Q.width / 2,
                            y: y.y + Q.height / 2
                        }
                    },
                    11: function(H, v) {
                        return {
                            x: H.x + H.width / 2,
                            y: H.y + v.height / 2
                        }
                    },
                    12: function(C, G) {
                        return {
                            x: C.x - G.width / 2 + C.width,
                            y: C.y + G.height / 2
                        }
                    },
                    13: function(Z, f) {
                        return {
                            x: Z.x + Z.width + f.width / 2,
                            y: Z.y + f.height / 2
                        }
                    },
                    14: function(E, R) {
                        return {
                            x: E.x - R.width / 2,
                            y: E.y + E.height / 2
                        }
                    },
                    15: function(Y) {
                        return {
                            x: Y.x,
                            y: Y.y + Y.height / 2
                        }
                    },
                    16: function(p, W) {
                        return {
                            x: p.x + W.width / 2,
                            y: p.y + p.height / 2
                        }
                    },
                    17: function(N) {
                        return {
                            x: N.x + N.width / 2,
                            y: N.y + N.height / 2
                        }
                    },
                    18: function(P, r) {
                        return {
                            x: P.x + P.width - r.width / 2,
                            y: P.y + P.height / 2
                        }
                    },
                    19: function(T) {
                        return {
                            x: T.x + T.width,
                            y: T.y + T.height / 2
                        }
                    },
                    20: function(u, N) {
                        return {
                            x: u.x + u.width + N.width / 2,
                            y: u.y + u.height / 2
                        }
                    },
                    21: function(K, d) {
                        return {
                            x: K.x - d.width / 2,
                            y: K.y + K.height - d.height / 2
                        }
                    },
                    22: function(j, s) {
                        return {
                            x: j.x + s.width / 2,
                            y: j.y + j.height - s.height / 2
                        }
                    },
                    23: function(w, X) {
                        return {
                            x: w.x + w.width / 2,
                            y: w.y + w.height - X.height / 2
                        }
                    },
                    24: function(t, f) {
                        return {
                            x: t.x + t.width - f.width / 2,
                            y: t.y + t.height - f.height / 2
                        }
                    },
                    25: function(G, o) {
                        return {
                            x: G.x + G.width + o.width / 2,
                            y: G.y + G.height - o.height / 2
                        }
                    },
                    26: function(h) {
                        return {
                            x: h.x,
                            y: h.y + h.height
                        }
                    },
                    27: function(h) {
                        return {
                            x: h.x + h.width / 2,
                            y: h.y + h.height
                        }
                    },
                    28: function(T) {
                        return {
                            x: T.x + T.width,
                            y: T.y + T.height
                        }
                    },
                    29: function(f, b) {
                        return {
                            x: f.x - b.width / 2,
                            y: f.y + f.height + b.height / 2
                        }
                    },
                    30: function(a, k) {
                        return {
                            x: a.x + k.width / 2,
                            y: a.y + a.height + k.height / 2
                        }
                    },
                    31: function(l, f) {
                        return {
                            x: l.x + l.width / 2,
                            y: l.y + l.height + f.height / 2
                        }
                    },
                    32: function(S, P) {
                        return {
                            x: S.x + S.width - P.width / 2,
                            y: S.y + S.height + P.height / 2
                        }
                    },
                    33: function($, O) {
                        return {
                            x: $.x + $.width + O.width / 2,
                            y: $.y + $.height + O.height / 2
                        }
                    },
                    34: function(R, C) {
                        return {
                            x: R.x,
                            y: R.y - C.height / 2
                        }
                    },
                    35: function(L, E) {
                        return {
                            x: L.x + L.width,
                            y: L.y - E.height / 2
                        }
                    },
                    36: function(p, r) {
                        return {
                            x: p.x,
                            y: p.y + p.height + r.height / 2
                        }
                    },
                    37: function(m, f) {
                        return {
                            x: m.x + m.width,
                            y: m.y + m.height + f.height / 2
                        }
                    },
                    38: function(e, O) {
                        return {
                            x: e.x + e.width / 4,
                            y: e.y - O.height / 2
                        }
                    },
                    39: function(B, m) {
                        return {
                            x: B.x + 3 * B.width / 4,
                            y: B.y - m.height / 2
                        }
                    },
                    40: function(q) {
                        return {
                            x: q.x + q.width / 4,
                            y: q.y
                        }
                    },
                    41: function(U) {
                        return {
                            x: U.x + 3 * U.width / 4,
                            y: U.y
                        }
                    },
                    42: function(u, N) {
                        return {
                            x: u.x + u.width / 4,
                            y: u.y + N.height / 2
                        }
                    },
                    43: function($, O) {
                        return {
                            x: $.x + 3 * $.width / 4,
                            y: $.y + O.height / 2
                        }
                    },
                    44: function(A, K) {
                        return {
                            x: A.x + A.width / 2,
                            y: A.y + A.height / 2 - K.height / 2
                        }
                    },
                    45: function($) {
                        return {
                            x: $.x + $.width / 4,
                            y: $.y + $.height / 2
                        }
                    },
                    46: function(j, k) {
                        return {
                            x: j.x + j.width / 2 - k.width / 2,
                            y: j.y + j.height / 2
                        }
                    },
                    47: function(k, C) {
                        return {
                            x: k.x + k.width / 2 + C.width / 2,
                            y: k.y + k.height / 2
                        }
                    },
                    48: function(T) {
                        return {
                            x: T.x + 3 * T.width / 4,
                            y: T.y + T.height / 2
                        }
                    },
                    49: function(V, g) {
                        return {
                            x: V.x + V.width / 2,
                            y: V.y + V.height / 2 + g.height / 2
                        }
                    },
                    50: function(Z, A) {
                        return {
                            x: Z.x + Z.width / 4,
                            y: Z.y + Z.height - A.height / 2
                        }
                    },
                    51: function(v, u) {
                        return {
                            x: v.x + 3 * v.width / 4,
                            y: v.y + v.height - u.height / 2
                        }
                    },
                    52: function(Q) {
                        return {
                            x: Q.x + Q.width / 4,
                            y: Q.y + Q.height
                        }
                    },
                    53: function(H) {
                        return {
                            x: H.x + 3 * H.width / 4,
                            y: H.y + H.height
                        }
                    },
                    54: function(l, V) {
                        return {
                            x: l.x + l.width / 4,
                            y: l.y + l.height + V.height / 2
                        }
                    },
                    55: function(J, K) {
                        return {
                            x: J.x + 3 * J.width / 4,
                            y: J.y + J.height + K.height / 2
                        }
                    }
                };
                return Kn(V) ? function(_, $, t) {
                    return h[_]($, t ? t : yf)
                } : void 0
            }();
        fp(Q, {
            highlight: "#1ABC9C",
            label: "#000",
            labelSelect: "#FFF",
            transparent: "rgba(0,0,0,0.35)",
            titleBackground: "#2C3E50",
            titleIconBackground: "#868686",
            headerBackground: "#ECF0F1",
            headerIconBackground: "#868686",
            headerSeparator: "#868686",
            headerLine: "#D9D9D9",
            background: "#FFF",
            disabledBackground: "rgba(255,255,255,0.65)",
            toolTipBackground: "#FFFFE0",
            rectSelectBorder: "#45C4F9",
            rectSelectBackground: "rgba(0,0,0,0.35)",
            editPointBorder: "#2C3E50",
            editPointBackground: "#D9D9D9",
            dash: "#2C3E50",
            groupBackground: "#ECF0F1",
            groupTitleBackground: "#2C3E50",
            gridBackground: "#D9D9D9",
            gridCellBorderColor: "#868686",
            gridBlockColor: "#868686",
            reverse: "#868686",
            contentIconBackground: "#868686",
            contentLine: "#D9D9D9",
            widgetBackground: "#ECF0F1",
            widgetBorder: "#D9D9D9",
            widgetIconBackground: "#868686",
            widgetIconBorder: "#868686",
            widgetIconGradient: "#D9D9D9",
            widgetIconHighlight: "#43AFF1",
            imageBackground: "#3498DB",
            imageGradient: "#FFF",
            chart: ["#2f7ed8", "#0d233a", "#8bbc21", "#910000", "#1aadce", "#492970", "#f28f43", "#77a1e5", "#c42525", "#a6c96a"]
        }, !0);
        var cc = Q.reverse,
            Ao = Q.transparent,
            ep = Q.rectSelectBackground,
            Qq = Q.dash,
            ai = Q.titleBackground,
            ek = Q.titleIconBackground,
            df = Q.headerBackground,
            jm = Q.headerIconBackground,
            Tn = Q.headerSeparator,
            qo = Q.headerLine,
            on = Q.contentIconBackground,
            Fh = Q.contentLine,
            tp = (Q.widgetIconHighlight, Q.widgetIconBorder),
            Ee = (Q.widgetIconGradient, Q.imageBackground),
            Rf = Q.imageGradient,
            Nl = Q.highlight,
            Om = Q.label,
            Pp = Q.labelSelect;
        if (Jd && !V.shutAlert1) {
            var Mn = new Date,
                zk = Jd.split("-"),
                cp = new Date(Mn.getFullYear(), Mn.getMonth(), Mn.getDate()),
                Jd = new Date(Hh(zk[0], 10), Hh(zk[1], 10) - 1, Hh(zk[2], 10)),
                Rq = cp.getTime(),
                Gg = Jd.getTime(),
                bd = E + "_try",
                Sh = V.alert;
            try {
                var Dj = V.localStorage;
                if (Dj && Sh)
                    if (Gg > Rq && 1728e6 > Gg - Rq) {
                        var kr = (Gg - Rq) / 864e5;
                        Dj && Dj[bd] != kr && (Dj[bd] = kr, V.htWillExpire ? Sh(V.htWillExpire.replace("{{day}}", kr)) : Sh("HT for Web free trial license will expire in " + kr + " days, please apply for a new license!"))
                    } else Rq >= Gg && (V.htExpired ? Sh(V.htExpired) : Sh("Your free trial of HT for Web has expired!")), Dj && delete Dj[bd]
            } catch (Qc) {}
        }
        Math.sign === O && (Math.sign = function(D) {
            return 0 > D ? -1 : D > 0 ? 1 : +D
        });
        var Nk = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
            Xo = {
                encode: function(x, e) {
                    var M, R, j, B, T, r, l, X = "",
                        n = 0;
                    for (x = unescape(encodeURIComponent(x)); n < x.length;) M = x.charCodeAt(n++), R = x.charCodeAt(n++), j = x.charCodeAt(n++), B = M >> 2, T = (3 & M) << 4 | R >> 4, r = (15 & R) << 2 | j >> 6, l = 63 & j, isNaN(R) ? r = l = 64 : isNaN(j) && (l = 64), X = X + e.charAt(B) + e.charAt(T) + e.charAt(r) + e.charAt(l);
                    return X
                },
                decode: function(a, B, L) {
                    for (var H, s, U, Z, Q, c, C, g = "", R = L || 0; R < a.length;) Z = B.indexOf(a.charAt(R++)), Q = B.indexOf(a.charAt(R++)), c = B.indexOf(a.charAt(R++)), C = B.indexOf(a.charAt(R++)), H = Z << 2 | Q >> 4, s = (15 & Q) << 4 | c >> 2, U = (3 & c) << 6 | C, g += String.fromCharCode(H), 64 != c && (g += String.fromCharCode(s)), 64 != C && (g += String.fromCharCode(U));
                    return g = decodeURIComponent(escape(g))
                },
                _utf8_encode: function(O) {
                    O = O.replace(/\r\n/g, "\n");
                    for (var j = "", r = 0; r < O.length; r++) {
                        var f = O.charCodeAt(r);
                        128 > f ? j += String.fromCharCode(f) : f > 127 && 2048 > f ? (j += String.fromCharCode(192 | f >> 6), j += String.fromCharCode(128 | 63 & f)) : (j += String.fromCharCode(224 | f >> 12), j += String.fromCharCode(128 | 63 & f >> 6), j += String.fromCharCode(128 | 63 & f))
                    }
                    return j
                },
                _utf8_decode: function(n) {
                    for (var j = "", A = 0, J = 0, P = 0, a = 0; A < n.length;) J = n.charCodeAt(A), 128 > J ? (j += String.fromCharCode(J), A++) : J > 191 && 224 > J ? (P = n.charCodeAt(A + 1), j += String.fromCharCode((31 & J) << 6 | 63 & P), A += 2) : (P = n.charCodeAt(A + 1), a = n.charCodeAt(A + 2), j += String.fromCharCode((15 & J) << 12 | (63 & P) << 6 | 63 & a), A += 3);
                    return j
                }
            },
            Yo = [],
            On = [],
            _q = F.Math = {
                generateUUID: function() {
                    for (var H = [], Z = 0; 256 > Z; Z++) H[Z] = (16 > Z ? "0" : "") + Z.toString(16).toUpperCase();
                    return function() {
                        var e = 0 | 4294967295 * Math.random(),
                            q = 0 | 4294967295 * Math.random(),
                            N = 0 | 4294967295 * Math.random(),
                            I = 0 | 4294967295 * Math.random();
                        return H[255 & e] + H[255 & e >> 8] + H[255 & e >> 16] + H[255 & e >> 24] + "-" + H[255 & q] + H[255 & q >> 8] + "-" + H[64 | 15 & q >> 16] + H[255 & q >> 24] + "-" + H[128 | 63 & N] + H[255 & N >> 8] + "-" + H[255 & N >> 16] + H[255 & N >> 24] + H[255 & I] + H[255 & I >> 8] + H[255 & I >> 16] + H[255 & I >> 24]
                    }
                }(),
                clamp: function(r, o, u) {
                    return Math.max(o, Math.min(u, r))
                },
                fequal: function(y, F, A) {
                    return null == A && (A = 1e-8), Math.abs(y - F) < A
                },
                generateIncreasingID: function() {
                    var u = 0;
                    return function() {
                        return ++u
                    }
                }(),
                encodeBase64: function(L, F) {
                    return Xo.encode(L, F || Nk)
                },
                decodeBase64: function(q, P) {
                    return Xo.decode(q, P || Nk)
                },
                randomArray: function(X, H) {
                    H = H || X.length;
                    for (var r = H - 1; r > 0; r--) {
                        var O = Math.floor(Math.random() * (r + 1)),
                            V = X[r];
                        X[r] = X[O], X[O] = V
                    }
                    return X
                },
                randomInt: function(c, n) {
                    return n === O && (n = c, c = 0), c + Math.floor(Math.random() * (n - c))
                },
                randomFloat: function(G, i) {
                    return i === O && (i = G, G = 0), G + Math.random() * (i - G)
                },
                isPOT: function(s) {
                    return s > 0 && 0 === (s - 1 & s)
                },
                nearestPOT: function(R) {
                    if (!R) return 1;
                    var F = R;
                    F--, F |= F >> 1, F |= F >> 2, F |= F >> 4, F |= F >> 8, F |= F >> 16, F++;
                    var U = F >> 1;
                    return R - U > F - R ? F : U
                },
                requestMatrix4: function() {
                    return Yo.length > 0 ? Yo.pop() : new _q.Matrix4
                },
                releaseMatrix4: function(L) {
                    Yo.push(L)
                },
                requestVector3: function() {
                    return On.length > 0 ? On.pop() : new _q.Vector3
                },
                releaseVector3: function(J) {
                    On.push(J)
                }
            },
            Bl = F.Matrix = F.Math.Matrix2d = function(e, B, G, g, x) {
                this.setFromTransform(e, B, G, g, x)
            },
            fs = Bl;
        Bl.prototype = {}, Bl.prototype.constructor = Bl, Bl.prototype.set = function(p, t, c, R, N, a) {
            return this.a = p, this.b = t, this.c = c, this.d = R, this.tx = N, this.ty = a, this
        }, Bl.prototype.setFromTransform = function(A, C, o, k, y) {
            var S = this;
            if (A === O) return S.a = 1, S.b = 0, S.c = 0, S.d = 1, S.tx = 0, S.ty = 0, void 0;
            var n, Q;
            return A ? (n = b(A), Q = u(A)) : (n = 0, Q = 1), k = k || 1, y = y || 1, S.a = Q * k, S.b = n * k, S.c = -n * y, S.d = Q * y, S.tx = C || 0, S.ty = o || 0, S
        }, Bl.prototype.apply = function(x, G) {
            G = G || new ls;
            var $ = x.x,
                c = x.y;
            return G.x = this.a * $ + this.c * c + this.tx, G.y = this.b * $ + this.d * c + this.ty, G
        }, Bl.prototype.applyInverse = function(H, T) {
            T = T || new ls;
            var u = 1 / (this.a * this.d + this.c * -this.b),
                Q = H.x,
                a = H.y;
            return T.x = this.d * u * Q + -this.c * u * a + (this.ty * this.c - this.tx * this.d) * u, T.y = this.a * u * a + -this.b * u * Q + (-this.ty * this.a + this.tx * this.b) * u, T
        }, Bl.prototype.translate = function(j, F) {
            return this.tx += j, this.ty += F, this
        }, Bl.prototype.scale = function(H, u) {
            return this.a *= H, this.d *= u, this.c *= H, this.b *= u, this.tx *= H, this.ty *= u, this
        }, Bl.prototype.rotate = function(C) {
            var F = Math.cos(C),
                S = Math.sin(C),
                Q = this.a,
                B = this.c,
                q = this.tx;
            return this.a = Q * F - this.b * S, this.b = Q * S + this.b * F, this.c = B * F - this.d * S, this.d = B * S + this.d * F, this.tx = q * F - this.ty * S, this.ty = q * S + this.ty * F, this
        }, Bl.prototype.appendTranslate = function(Y, e) {
            return this.tx += this.a * Y + this.c * e, this.ty += this.b * Y + this.d * e, this
        }, Bl.prototype.appendScale = function(J, y) {
            return this.a *= J, this.d *= y, this.c *= y, this.b *= J, this
        }, Bl.prototype.appendRotate = function(l) {
            if (!l) return this;
            var j = Math.cos(l),
                p = Math.sin(l),
                Y = this.a,
                P = this.b;
            return this.a = Y * j + this.c * p, this.b = P * j + this.d * p, this.c = -Y * p + this.c * j, this.d = -P * p + this.d * j, this
        }, Bl.prototype.append = function(S) {
            var K = this.a,
                A = this.b,
                R = this.c,
                g = this.d;
            return this.a = S.a * K + S.b * R, this.b = S.a * A + S.b * g, this.c = S.c * K + S.d * R, this.d = S.c * A + S.d * g, this.tx = S.tx * K + S.ty * R + this.tx, this.ty = S.tx * A + S.ty * g + this.ty, this
        }, Bl.prototype.setTransform = function(f, k, T, u, U, g, S, e, i) {
            var d, h, c, A, V, $, y, G, D, t;
            return V = Math.sin(S), $ = Math.cos(S), y = Math.cos(i), G = Math.sin(i), D = -Math.sin(e), t = Math.cos(e), d = $ * U, h = V * U, c = -V * g, A = $ * g, this.a = y * d + G * c, this.b = y * h + G * A, this.c = D * d + t * c, this.d = D * h + t * A, this.tx = f + (T * d + u * c), this.ty = k + (T * h + u * A), this
        }, Bl.prototype.prepend = function(c) {
            var j = this.tx;
            if (1 !== c.a || 0 !== c.b || 0 !== c.c || 1 !== c.d) {
                var i = this.a,
                    G = this.c;
                this.a = i * c.a + this.b * c.c, this.b = i * c.b + this.b * c.d, this.c = G * c.a + this.d * c.c, this.d = G * c.b + this.d * c.d
            }
            return this.tx = j * c.a + this.ty * c.c + c.tx, this.ty = j * c.b + this.ty * c.d + c.ty, this
        }, Bl.prototype.transform = Bl.prototype.prepend, Bl.prototype.invert = function() {
            var V = this.a,
                k = this.b,
                w = this.c,
                $ = this.d,
                h = this.tx,
                X = V * $ - k * w;
            return this.a = $ / X, this.b = -k / X, this.c = -w / X, this.d = V / X, this.tx = (w * this.ty - $ * h) / X, this.ty = -(V * this.ty - k * h) / X, this
        }, Bl.prototype.identity = function() {
            return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this
        }, Bl.prototype.clone = function() {
            var v = new Bl;
            return v.a = this.a, v.b = this.b, v.c = this.c, v.d = this.d, v.tx = this.tx, v.ty = this.ty, v
        }, Bl.prototype.copy = function(C) {
            return C.a = this.a, C.b = this.b, C.c = this.c, C.d = this.d, C.tx = this.tx, C.ty = this.ty, C
        }, Bl.prototype.tf = function(E, q) {
            1 === arguments.length && (q = E.y, E = E.x);
            var t = this;
            return {
                x: t.a * E + t.c * q + t.tx,
                y: t.b * E + t.d * q + t.ty
            }
        }, Bl.prototype.toArray = function() {
            return [this.a, this.b, this.c, this.d, this.tx, this.ty]
        }, Bl.prototype.fromArray = function(t) {
            return this.a = t[0], this.b = t[1], this.c = t[2], this.d = t[3], this.tx = t[4], this.ty = t[5], this
        }, Bl.prototype.toArray9 = function() {
            return [this.a, this.b, 0, this.c, this.d, 0, this.tx, this.ty, 1]
        }, Bl.prototype.tfi = function(F, A) {
            1 === arguments.length && (A = F.y, F = F.x);
            var P = this,
                h = 1 / (P.a * P.d + P.c * -P.b);
            return {
                x: P.d * h * F + -P.c * h * A + (P.ty * P.c - P.tx * P.d) * h,
                y: P.a * h * A + -P.b * h * F + (-P.ty * P.a + P.tx * P.b) * h
            }
        }, Bl.IDENTITY = new Bl, Bl.TEMP_MATRIX = new Bl;
        var Ck = F.Math.Quaternion = function(K, L, w, T) {
            this.set(K, L, w, T)
        };
        G.assign(Ck.prototype, {
            set: function(m, i, g, I) {
                var U = this;
                return U._x = m || 0, U._y = i || 0, U._z = g || 0, U._w = I !== O ? I : 1, U
            },
            clone: function() {
                return new this.constructor(this._x, this._y, this._z, this._w)
            },
            copy: function(p) {
                var H = this;
                return H._x = p._x, H._y = p._y, H._z = p._z, H._w = p._w, H
            },
            inverse: function() {
                return this.conjugate()
            },
            conjugate: function() {
                return this._x *= -1, this._y *= -1, this._z *= -1, this
            },
            dot: function(e) {
                return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
            },
            lengthSq: function() {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            },
            length: function() {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            },
            normalize: function() {
                var l = this.length();
                return 0 === l ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (l = 1 / l, this._x = this._x * l, this._y = this._y * l, this._z = this._z * l, this._w = this._w * l), this
            },
            fromArray: function(k, G) {
                G === O && (G = 0);
                var q = this;
                return q._x = k[G], q._y = k[G + 1], q._z = k[G + 2], q._w = k[G + 3], this
            },
            slerp: function(y, N) {
                if (0 === N) return this;
                if (1 === N) return this.copy(y);
                var V = this._x,
                    Y = this._y,
                    w = this._z,
                    h = this._w,
                    i = h * y._w + V * y._x + Y * y._y + w * y._z;
                if (0 > i ? (this._w = -y._w, this._x = -y._x, this._y = -y._y, this._z = -y._z, i = -i) : this.copy(y), i >= 1) return this._w = h, this._x = V, this._y = Y, this._z = w, this;
                var e = Math.sqrt(1 - i * i);
                if (Math.abs(e) < .001) return this._w = .5 * (h + this._w), this._x = .5 * (V + this._x), this._y = .5 * (Y + this._y), this._z = .5 * (w + this._z), this;
                var t = Math.atan2(e, i),
                    a = Math.sin((1 - N) * t) / e,
                    $ = Math.sin(N * t) / e;
                return this._w = h * a + this._w * $, this._x = V * a + this._x * $, this._y = Y * a + this._y * $, this._z = w * a + this._z * $, this
            },
            setFromAxisAngle: function(J, M) {
                var $ = M / 2,
                    W = Math.sin($);
                return this._x = J.x * W, this._y = J.y * W, this._z = J.z * W, this._w = Math.cos($), this
            },
            setFromEuler: function(O) {
                var R = O._x,
                    X = O._y,
                    n = O._z,
                    j = O._order,
                    t = Math.cos,
                    y = Math.sin,
                    G = t(R / 2),
                    l = t(X / 2),
                    p = t(n / 2),
                    U = y(R / 2),
                    $ = y(X / 2),
                    F = y(n / 2);
                return "XYZ" === j ? (this._x = U * l * p + G * $ * F, this._y = G * $ * p - U * l * F, this._z = G * l * F + U * $ * p, this._w = G * l * p - U * $ * F) : "YXZ" === j ? (this._x = U * l * p + G * $ * F, this._y = G * $ * p - U * l * F, this._z = G * l * F - U * $ * p, this._w = G * l * p + U * $ * F) : "ZXY" === j ? (this._x = U * l * p - G * $ * F, this._y = G * $ * p + U * l * F, this._z = G * l * F + U * $ * p, this._w = G * l * p - U * $ * F) : "ZYX" === j ? (this._x = U * l * p - G * $ * F, this._y = G * $ * p + U * l * F, this._z = G * l * F - U * $ * p, this._w = G * l * p + U * $ * F) : "YZX" === j ? (this._x = U * l * p + G * $ * F, this._y = G * $ * p + U * l * F, this._z = G * l * F - U * $ * p, this._w = G * l * p - U * $ * F) : "XZY" === j && (this._x = U * l * p - G * $ * F, this._y = G * $ * p - U * l * F, this._z = G * l * F + U * $ * p, this._w = G * l * p + U * $ * F), this
            },
            setFromRotationMatrix: function(O) {
                var X, D = O.el,
                    H = D[0],
                    _ = D[4],
                    s = D[8],
                    v = D[1],
                    V = D[5],
                    i = D[9],
                    J = D[2],
                    r = D[6],
                    m = D[10],
                    c = H + V + m;
                return c > 0 ? (X = .5 / Math.sqrt(c + 1), this._w = .25 / X, this._x = (r - i) * X, this._y = (s - J) * X, this._z = (v - _) * X) : H > V && H > m ? (X = 2 * Math.sqrt(1 + H - V - m), this._w = (r - i) / X, this._x = .25 * X, this._y = (_ + v) / X, this._z = (s + J) / X) : V > m ? (X = 2 * Math.sqrt(1 + V - H - m), this._w = (s - J) / X, this._x = (_ + v) / X, this._y = .25 * X, this._z = (i + r) / X) : (X = 2 * Math.sqrt(1 + m - H - V), this._w = (v - _) / X, this._x = (s + J) / X, this._y = (i + r) / X, this._z = .25 * X), this
            },
            setFromToVectors: function() {
                var n, N;
                return function(v, L) {
                    return n === O && (n = new Cb), N = v.dot(L) + 1, 1e-7 > N ? (N = 0, Math.abs(v.x) > Math.abs(v.z) ? n.set(-v.y, v.x, 0) : n.set(0, -v.z, v.y)) : n.crossVectors(v, L), this._x = n.x, this._y = n.y, this._z = n.z, this._w = N, this.normalize()
                }
            }(),
            setFromUnitVectors: function() {
                var s, q, u = 1e-6;
                return function(f, G) {
                    return s === O && (s = new Cb), q = f.dot(G) + 1, u > q ? (q = 0, Math.abs(f.x) > Math.abs(f.z) ? s.set(-f.y, f.x, 0) : s.set(0, -f.z, f.y)) : s.crossVectors(f, G), this._x = s.x, this._y = s.y, this._z = s.z, this._w = q, this.normalize()
                }
            }(),
            multiply: function(L) {
                return this.multiplyQuaternions(this, L)
            },
            premultiply: function(V) {
                return this.multiplyQuaternions(V, this)
            },
            multiplyQuaternions: function(K, X) {
                var U = K._x,
                    B = K._y,
                    x = K._z,
                    j = K._w,
                    $ = X._x,
                    y = X._y,
                    f = X._z,
                    q = X._w;
                return this._x = U * q + j * $ + B * f - x * y, this._y = B * q + j * y + x * $ - U * f, this._z = x * q + j * f + U * y - B * $, this._w = j * q - U * $ - B * y - x * f, this
            },
            toArray: function(F, l) {
                return F || (F = []), l = l || 0, F[l] = this._x, F[l + 1] = this._y, F[l + 2] = this._z, F[l + 3] = this._w, F
            }
        });
        var Kl = F.Math.Vector4 = function(d, q, C, P) {
            this.x = d || 0, this.y = q || 0, this.z = C || 0, this.w = P !== O ? P : 1
        };
        G.assign(Kl.prototype, {
            isVector4: !0,
            set: function(_, c, Y, E) {
                return this.x = _, this.y = c, this.z = Y, this.w = E, this
            },
            setScalar: function(v) {
                return this.x = v, this.y = v, this.z = v, this.w = v, this
            },
            setX: function(c) {
                return this.x = c, this
            },
            setY: function(J) {
                return this.y = J, this
            },
            setZ: function(h) {
                return this.z = h, this
            },
            setW: function(d) {
                return this.w = d, this
            },
            setComponent: function(Y, r) {
                switch (Y) {
                    case 0:
                        this.x = r;
                        break;
                    case 1:
                        this.y = r;
                        break;
                    case 2:
                        this.z = r;
                        break;
                    case 3:
                        this.w = r;
                        break;
                    default:
                        throw new Error("index is out of range: " + Y)
                }
                return this
            },
            getComponent: function(d) {
                switch (d) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    case 3:
                        return this.w;
                    default:
                        throw new Error("index is out of range: " + d)
                }
            },
            clone: function() {
                return new this.constructor(this.x, this.y, this.z, this.w)
            },
            copy: function(t) {
                return this.x = t.x, this.y = t.y, this.z = t.z, this.w = t.w !== O ? t.w : 1, this
            },
            add: function(Y, H) {
                return H !== O ? this.addVectors(Y, H) : (this.x += Y.x, this.y += Y.y, this.z += Y.z, this.w += Y.w, this)
            },
            addScalar: function(J) {
                return this.x += J, this.y += J, this.z += J, this.w += J, this
            },
            addVectors: function(l, v) {
                return this.x = l.x + v.x, this.y = l.y + v.y, this.z = l.z + v.z, this.w = l.w + v.w, this
            },
            addScaledVector: function(H, O) {
                return this.x += H.x * O, this.y += H.y * O, this.z += H.z * O, this.w += H.w * O, this
            },
            sub: function(c, o) {
                return o !== O ? this.subVectors(c, o) : (this.x -= c.x, this.y -= c.y, this.z -= c.z, this.w -= c.w, this)
            },
            subScalar: function(G) {
                return this.x -= G, this.y -= G, this.z -= G, this.w -= G, this
            },
            subVectors: function(R, o) {
                return this.x = R.x - o.x, this.y = R.y - o.y, this.z = R.z - o.z, this.w = R.w - o.w, this
            },
            multiplyScalar: function(K) {
                return this.x *= K, this.y *= K, this.z *= K, this.w *= K, this
            },
            applyMatrix4: function(h) {
                var c = this.x,
                    n = this.y,
                    p = this.z,
                    u = this.w,
                    E = h.el;
                return this.x = E[0] * c + E[4] * n + E[8] * p + E[12] * u, this.y = E[1] * c + E[5] * n + E[9] * p + E[13] * u, this.z = E[2] * c + E[6] * n + E[10] * p + E[14] * u, this.w = E[3] * c + E[7] * n + E[11] * p + E[15] * u, this
            },
            divideScalar: function(L) {
                return this.multiplyScalar(1 / L)
            },
            setAxisAngleFromQuaternion: function(A) {
                this.w = 2 * Math.acos(A.w);
                var O = Math.sqrt(1 - A.w * A.w);
                return 1e-4 > O ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = A.x / O, this.y = A.y / O, this.z = A.z / O), this
            },
            setAxisAngleFromRotationMatrix: function(B) {
                var m, f, K, M, Z = .01,
                    a = .1,
                    W = B.el,
                    x = W[0],
                    R = W[4],
                    c = W[8],
                    z = W[1],
                    L = W[5],
                    q = W[9],
                    P = W[2],
                    H = W[6],
                    i = W[10];
                if (Math.abs(R - z) < Z && Math.abs(c - P) < Z && Math.abs(q - H) < Z) {
                    if (Math.abs(R + z) < a && Math.abs(c + P) < a && Math.abs(q + H) < a && Math.abs(x + L + i - 3) < a) return this.set(1, 0, 0, 0), this;
                    m = Math.PI;
                    var T = (x + 1) / 2,
                        p = (L + 1) / 2,
                        d = (i + 1) / 2,
                        D = (R + z) / 4,
                        A = (c + P) / 4,
                        O = (q + H) / 4;
                    return T > p && T > d ? Z > T ? (f = 0, K = .707106781, M = .707106781) : (f = Math.sqrt(T), K = D / f, M = A / f) : p > d ? Z > p ? (f = .707106781, K = 0, M = .707106781) : (K = Math.sqrt(p), f = D / K, M = O / K) : Z > d ? (f = .707106781, K = .707106781, M = 0) : (M = Math.sqrt(d), f = A / M, K = O / M), this.set(f, K, M, m), this
                }
                var v = Math.sqrt((H - q) * (H - q) + (c - P) * (c - P) + (z - R) * (z - R));
                return Math.abs(v) < .001 && (v = 1), this.x = (H - q) / v, this.y = (c - P) / v, this.z = (z - R) / v, this.w = Math.acos((x + L + i - 1) / 2), this
            },
            min: function(y) {
                return this.x = Math.min(this.x, y.x), this.y = Math.min(this.y, y.y), this.z = Math.min(this.z, y.z), this.w = Math.min(this.w, y.w), this
            },
            max: function($) {
                return this.x = Math.max(this.x, $.x), this.y = Math.max(this.y, $.y), this.z = Math.max(this.z, $.z), this.w = Math.max(this.w, $.w), this
            },
            clamp: function(X, U) {
                return this.x = Math.max(X.x, Math.min(U.x, this.x)), this.y = Math.max(X.y, Math.min(U.y, this.y)), this.z = Math.max(X.z, Math.min(U.z, this.z)), this.w = Math.max(X.w, Math.min(U.w, this.w)), this
            },
            clampScalar: function() {
                var b, g;
                return function(u, E) {
                    return b === O && (b = new Kl, g = new Kl), b.set(u, u, u, u), g.set(E, E, E, E), this.clamp(b, g)
                }
            }(),
            clampLength: function(l, V) {
                var J = this.length();
                return this.divideScalar(J || 1).multiplyScalar(Math.max(l, Math.min(V, J)))
            },
            floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
            },
            round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
            },
            roundToZero: function() {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
            },
            dot: function(n) {
                return this.x * n.x + this.y * n.y + this.z * n.z + this.w * n.w
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
            },
            manhattanLength: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
            },
            normalize: function() {
                return this.divideScalar(this.length() || 1)
            },
            setLength: function(e) {
                return this.normalize().multiplyScalar(e)
            },
            lerp: function(Z, q) {
                return this.x += (Z.x - this.x) * q, this.y += (Z.y - this.y) * q, this.z += (Z.z - this.z) * q, this.w += (Z.w - this.w) * q, this
            },
            lerpVectors: function(y, A, n) {
                return this.subVectors(A, y).multiplyScalar(n).add(y)
            },
            equals: function(z) {
                return z.x === this.x && z.y === this.y && z.z === this.z && z.w === this.w
            },
            fromArray: function(G, m) {
                return m === O && (m = 0), this.x = G[m], this.y = G[m + 1], this.z = G[m + 2], this.w = G[m + 3], this
            },
            toArray: function(w, g) {
                return w === O && (w = []), g === O && (g = 0), w[g] = this.x, w[g + 1] = this.y, w[g + 2] = this.z, w[g + 3] = this.w, w
            },
            fromBufferAttribute: function(H, J) {
                return this.x = H.getX(J), this.y = H.getY(J), this.z = H.getZ(J), this.w = H.getW(J), this
            }
        });
        var Cb = F.Math.Vector3 = function(H, d, f) {
                H === O ? (this.x = 0, this.y = 0, this.z = 0) : "object" == typeof H ? this.copy(H) : this.set(H, d == O ? H : d, f == O ? H : f)
            },
            lf = F.Math.Vector3;
        G.assign(Cb.prototype, {
            isNaN: function() {
                return isNaN(this.x) || isNaN(this.y) || isNaN(this.z)
            },
            set: function(R, j, I) {
                return this.x = R, this.y = j, this.z = I, this
            },
            equals: function(n) {
                return n && this.x === n.x && this.y === n.y && this.z === n.z
            },
            setScalar: function(X) {
                return this.x = X, this.y = X, this.z = X, this
            },
            setX: function(S) {
                return this.x = S, this
            },
            setY: function(t) {
                return this.y = t, this
            },
            setZ: function(j) {
                return this.z = j, this
            },
            clone: function() {
                return new this.constructor(this.x, this.y, this.z)
            },
            copy: function(z) {
                return z.x === O ? (this.x = z[0], this.y = z[1], this.z = z[2]) : (this.x = z.x, this.y = z.y, this.z = z.z || 0), this
            },
            add: function(L) {
                return this.x += L.x, this.y += L.y, this.z += L.z, this
            },
            addScalar: function(a) {
                return this.x += a, this.y += a, this.z += a, this
            },
            addVectors: function(x, Q) {
                return this.x = x.x + Q.x, this.y = x.y + Q.y, this.z = x.z + Q.z, this
            },
            addScaledVector: function(M, I) {
                return this.x += M.x * I, this.y += M.y * I, this.z += M.z * I, this
            },
            sub: function(k) {
                return this.x -= k.x, this.y -= k.y, this.z -= k.z, this
            },
            subScalar: function(Z) {
                return this.x -= Z, this.y -= Z, this.z -= Z, this
            },
            subVectors: function(h, u) {
                return this.x = h.x - u.x, this.y = h.y - u.y, this.z = h.z - u.z, this
            },
            divide: function(b) {
                return this.x /= b.x, this.y /= b.y, this.z /= b.z, this
            },
            multiply: function(O) {
                return this.x *= O.x, this.y *= O.y, this.z *= O.z, this
            },
            multiplyScalar: function(z) {
                return this.x *= z, this.y *= z, this.z *= z, this
            },
            divideScalar: function(i) {
                if (0 !== i) {
                    var k = 1 / i;
                    this.x *= k, this.y *= k, this.z *= k
                } else this.x = 0, this.y = 0, this.z = 0;
                return this
            },
            distanceTo: function(_) {
                return Math.sqrt(this.distanceToSquared(_))
            },
            distanceToSquared: function(P) {
                var W = this.x - P.x,
                    D = this.y - P.y,
                    b = this.z - P.z;
                return W * W + D * D + b * b
            },
            distanceToSquared2: function(q) {
                var W = this.x - q[0],
                    A = this.y - q[1],
                    j = this.z - q[2];
                return W * W + A * A + j * j
            },
            divideVectors: function(J, t) {
                return this.x = J.x / t.x, this.y = J.y / t.y, this.z = J.z / t.z, this
            },
            multiplyVectors: function(s, r) {
                return this.x = s.x * r.x, this.y = s.y * r.y, this.z = s.z * r.z, this
            },
            transformDirection: function(T) {
                var k = this.x,
                    E = this.y,
                    g = this.z,
                    Q = T.el;
                return this.x = Q[0] * k + Q[4] * E + Q[8] * g, this.y = Q[1] * k + Q[5] * E + Q[9] * g, this.z = Q[2] * k + Q[6] * E + Q[10] * g, this.normalize()
            },
            applyAxisAngle: function() {
                var b = new Ck;
                return function(i, R) {
                    return this.applyQuaternion(b.setFromAxisAngle(i, R))
                }
            }(),
            applyEuler: function() {
                var I = new Ck;
                return function(t) {
                    return this.applyQuaternion(I.setFromEuler(t))
                }
            }(),
            applyQuaternion: function(c) {
                var g = this.x,
                    l = this.y,
                    Y = this.z,
                    E = c._x,
                    T = c._y,
                    J = c._z,
                    N = c._w,
                    B = N * g + T * Y - J * l,
                    P = N * l + J * g - E * Y,
                    F = N * Y + E * l - T * g,
                    R = -E * g - T * l - J * Y;
                return this.x = B * N + R * -E + P * -J - F * -T, this.y = P * N + R * -T + F * -E - B * -J, this.z = F * N + R * -J + B * -T - P * -E, this
            },
            applyMatrix4: function(d) {
                var I = this.x,
                    W = this.y,
                    y = this.z,
                    c = d.el,
                    j = 1 / (c[3] * I + c[7] * W + c[11] * y + c[15]);
                return this.x = (c[0] * I + c[4] * W + c[8] * y + c[12]) * j, this.y = (c[1] * I + c[5] * W + c[9] * y + c[13]) * j, this.z = (c[2] * I + c[6] * W + c[10] * y + c[14]) * j, this
            },
            applyMatrix3: function(x) {
                var v = this.x,
                    y = this.y,
                    V = this.z,
                    d = x.el;
                return this.x = d[0] * v + d[3] * y + d[6] * V, this.y = d[1] * v + d[4] * y + d[7] * V, this.z = d[2] * v + d[5] * y + d[8] * V, this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            },
            reflect: function() {
                var T = new Cb;
                return function(t) {
                    return this.sub(T.copy(t).multiplyScalar(2 * this.dot(t)))
                }
            }(),
            dot: function(N) {
                return this.x * N.x + this.y * N.y + this.z * N.z
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            manhattanLength: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            },
            normalize: function() {
                var P = this.length();
                return P ? this.multiplyScalar(1 / P) : this
            },
            setLength: function(E) {
                return this.normalize().multiplyScalar(E)
            },
            fromArray: function(o, h) {
                return h === O && (h = 0), this.x = o[h], this.y = o[h + 1], this.z = o[h + 2], this
            },
            toArray: function(F, Y) {
                return F === O && (F = [0, 0, 0]), Y === O && (Y = 0), F[Y] = this.x, F[Y + 1] = this.y, F[Y + 2] = this.z, F
            },
            cross: function(D) {
                return this.crossVectors(this, D)
            },
            angleTo: function(d) {
                var u = this.dot(d) / Math.sqrt(this.lengthSq() * d.lengthSq());
                return u > 1 || -1 > u ? 0 : Math.acos(u)
            },
            lerp: function(c, m) {
                return this.x += (c.x - this.x) * m, this.y += (c.y - this.y) * m, this.z += (c.z - this.z) * m, this
            },
            lerpVectors: function(P, e, r) {
                return this.subVectors(e, P).multiplyScalar(r).add(P)
            },
            crossVectors: function(i, O) {
                var u = i.x,
                    E = i.y,
                    j = i.z,
                    k = O.x,
                    L = O.y,
                    J = O.z;
                return this.x = E * J - j * L, this.y = j * k - u * J, this.z = u * L - E * k, this
            },
            min: function(j) {
                return this.x = Math.min(this.x, j.x), this.y = Math.min(this.y, j.y), this.z = Math.min(this.z, j.z), this
            },
            max: function(g) {
                return this.x = Math.max(this.x, g.x), this.y = Math.max(this.y, g.y), this.z = Math.max(this.z, g.z), this
            },
            setFromMatrixPosition: function(A) {
                return this.setFromMatrixColumn(A, 3)
            },
            setFromMatrixScale: function(I) {
                var P = this.setFromMatrixColumn(I, 0).length(),
                    k = this.setFromMatrixColumn(I, 1).length(),
                    n = this.setFromMatrixColumn(I, 2).length();
                return this.x = P, this.y = k, this.z = n, this
            },
            setFromMatrixColumn: function(c, Z) {
                return this.fromArray(c.el, 4 * Z)
            }
        }), Cb.UP = new Cb(0, 1, 0), Cb.AxisX = new Cb(1, 0, 0), Cb.AxisY = new Cb(0, 1, 0), Cb.AxisZ = new Cb(0, 0, 1);
        var ls = F.Math.Vector2 = function(j, b, A) {
            "object" == typeof j && (j.x != O ? (b = j.y, A = j.e, j = j.x) : (A = j[2], b = j[1], j = j[0])), this.set(j || 0, b || 0, A)
        };
        ls.prototype = {}, ls.prototype.constructor = ls;
        var Oq = ls;
        G.defineProperties(ls.prototype, {
            width: {
                get: function() {
                    return this.x
                },
                set: function(o) {
                    this.x = o
                }
            },
            height: {
                get: function() {
                    return this.y
                },
                set: function(p) {
                    this.y = p
                }
            }
        }), ls.prototype.clone = function() {
            return new ls(this.x, this.y, this.e)
        }, ls.prototype.copy = function(h) {
            return this.set(h.x, h.y, h.e), this
        }, ls.prototype.equals = function(x) {
            return x.x === this.x && x.y === this.y && x.e === this.e
        }, ls.prototype.set = function(p, R, n) {
            return this.x = p || 0, this.y = R || (0 !== R ? this.x : 0), n != O && (this.e = n), this
        }, ls.prototype.setScalar = function(T) {
            return this.x = T, this.y = T, this.e = T, this
        }, ls.prototype.setX = function(z) {
            return this.x = z || 0, this
        }, ls.prototype.setY = function(x) {
            return this.y = x || 0, this
        }, ls.prototype.setE = function(a) {
            return this.e = a || 0, this
        }, ls.prototype.add = function($) {
            return this.x += $.x, this.y += $.y, this
        }, ls.prototype.addVectors = function(p, C) {
            return this.x = p.x + C.x, this.y = p.y + C.y, this
        }, ls.prototype.addScalar = function(U) {
            return this.x += U, this.y += U, this
        }, ls.prototype.addScaledVector = function(i, y) {
            return this.x += i.x * y, this.y += i.y * y, this
        }, ls.prototype.sub = function(p) {
            return this.x -= p.x, this.y -= p.y, this
        }, ls.prototype.subScalar = function(n) {
            return this.x -= n, this.y -= n, this
        }, ls.prototype.subVectors = function(y, L) {
            return this.x = y.x - L.x, this.y = y.y - L.y, this
        }, ls.prototype.multiply = function(O) {
            return this.x *= O.x, this.y *= O.y, this
        }, ls.prototype.multiplyScalar = function(A) {
            return this.x *= A, this.y *= A, this
        }, ls.prototype.divide = function(g) {
            return this.x /= g.x, this.y /= g.y, this
        }, ls.prototype.divideScalar = function(R) {
            return this.multiplyScalar(1 / R)
        }, ls.prototype.min = function(K) {
            return this.x = Math.min(this.x, K.x), this.y = Math.min(this.y, K.y), this
        }, ls.prototype.max = function(r) {
            return this.x = Math.max(this.x, r.x), this.y = Math.max(this.y, r.y), this
        }, ls.prototype.fromArray = function(T, I) {
            return I === O && (I = 0), this.x = T[I], this.y = T[I + 1], this
        }, ls.prototype.clamp = function(u, V) {
            return this.x = Math.max(u.x, Math.min(V.x, this.x)), this.y = Math.max(u.y, Math.min(V.y, this.y)), this
        }, ls.prototype.clampScalar = function() {
            var s, A;
            return function(E, t) {
                return s === O && (s = new ls, A = new ls), s.set(E, E), A.set(t, t), this.clamp(s, A)
            }
        }(), ls.prototype.clampLength = function(F, c) {
            var v = this.length();
            return this.multiplyScalar(Math.max(F, Math.min(c, v)) / v)
        }, ls.prototype.dot = function(m) {
            return this.x * m.x + this.y * m.y
        }, ls.prototype.cross = function(Y) {
            return this.x * Y.y - this.y * Y.x
        }, ls.prototype.lengthSq = function() {
            return this.x * this.x + this.y * this.y
        }, ls.prototype.length = function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        }, ls.prototype.normalize = function() {
            return this.divideScalar(this.length())
        }, ls.prototype.angle = function() {
            var j = Math.atan2(this.y, this.x);
            return 0 > j && (j += 2 * Math.PI), j
        }, ls.prototype.distanceTo = function(Y) {
            return Math.sqrt(this.distanceToSquared(Y))
        }, ls.prototype.distanceToSquared = function(Z) {
            var l = this.x - Z.x,
                F = this.y - Z.y;
            return l * l + F * F
        }, ls.prototype.isNearEnough = function(k) {
            return this.distanceToSquared(k) < 1e-8
        }, ls.prototype.setLength = function(x) {
            var Q = this.length();
            return Q ? this.multiplyScalar(x / Q) : this
        }, ls.prototype.lerp = function(p, F) {
            return this.x += (p.x - this.x) * F, this.y += (p.y - this.y) * F, "number" == typeof p.e && "number" == typeof this.e && (this.e += (p.e - this.e) * F), this
        }, ls.prototype.lerpVectors = function(I, m, J) {
            return this.subVectors(m, I).multiplyScalar(J).add(I)
        }, ls.prototype.rotateAround = function(K, I) {
            var q = K ? K.x : 0,
                z = K ? K.y : 0,
                P = Math.cos(I),
                M = Math.sin(I),
                Z = this.x - q,
                R = this.y - z;
            return this.x = Z * P - R * M + q, this.y = Z * M + R * P + z, this
        };
        var hd = F.Math.Matrix3 = function() {
            this.el = [1, 0, 0, 0, 1, 0, 0, 0, 1]
        };
        G.assign(hd.prototype, {
            isMatrix3: !0,
            set: function(P, x, i, V, t, u, M, o, C) {
                var A = this.el;
                return A[0] = P, A[1] = V, A[2] = M, A[3] = x, A[4] = t, A[5] = o, A[6] = i, A[7] = u, A[8] = C, this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
            },
            clone: function() {
                return (new this.constructor).fromArray(this.el)
            },
            copy: function(s) {
                var C = this.el,
                    G = s.el;
                return C[0] = G[0], C[1] = G[1], C[2] = G[2], C[3] = G[3], C[4] = G[4], C[5] = G[5], C[6] = G[6], C[7] = G[7], C[8] = G[8], this
            },
            setFromMatrix4: function(C) {
                var i = C.el;
                return this.set(i[0], i[4], i[8], i[1], i[5], i[9], i[2], i[6], i[10]), this
            },
            applyToBufferAttribute: function() {
                var u = new Cb;
                return function(P) {
                    for (var e = 0, D = P.count; D > e; e++) u.x = P.getX(e), u.y = P.getY(e), u.z = P.getZ(e), u.applyMatrix3(this), P.setXYZ(e, u.x, u.y, u.z);
                    return P
                }
            }(),
            multiply: function(t) {
                return this.multiplyMatrices(this, t)
            },
            premultiply: function(V) {
                return this.multiplyMatrices(V, this)
            },
            multiplyMatrices: function(R, Y) {
                var U = R.el,
                    S = Y.el,
                    V = this.el,
                    u = U[0],
                    p = U[3],
                    M = U[6],
                    s = U[1],
                    B = U[4],
                    x = U[7],
                    Z = U[2],
                    F = U[5],
                    H = U[8],
                    d = S[0],
                    P = S[3],
                    v = S[6],
                    i = S[1],
                    g = S[4],
                    Q = S[7],
                    X = S[2],
                    C = S[5],
                    a = S[8];
                return V[0] = u * d + p * i + M * X, V[3] = u * P + p * g + M * C, V[6] = u * v + p * Q + M * a, V[1] = s * d + B * i + x * X, V[4] = s * P + B * g + x * C, V[7] = s * v + B * Q + x * a, V[2] = Z * d + F * i + H * X, V[5] = Z * P + F * g + H * C, V[8] = Z * v + F * Q + H * a, this
            },
            multiplyScalar: function(I) {
                var b = this.el;
                return b[0] *= I, b[3] *= I, b[6] *= I, b[1] *= I, b[4] *= I, b[7] *= I, b[2] *= I, b[5] *= I, b[8] *= I, this
            },
            determinant: function() {
                var r = this.el,
                    s = r[0],
                    M = r[1],
                    T = r[2],
                    X = r[3],
                    e = r[4],
                    J = r[5],
                    b = r[6],
                    H = r[7],
                    Z = r[8];
                return s * e * Z - s * J * H - M * X * Z + M * J * b + T * X * H - T * e * b
            },
            getInverse: function(a) {
                var H = a.el,
                    k = this.el,
                    G = H[0],
                    s = H[1],
                    S = H[2],
                    t = H[3],
                    M = H[4],
                    Z = H[5],
                    F = H[6],
                    c = H[7],
                    Y = H[8],
                    f = Y * M - Z * c,
                    U = Z * F - Y * t,
                    A = c * t - M * F,
                    $ = G * f + s * U + S * A;
                if (0 === $) return this.identity();
                var E = 1 / $;
                return k[0] = f * E, k[1] = (S * c - Y * s) * E, k[2] = (Z * s - S * M) * E, k[3] = U * E, k[4] = (Y * G - S * F) * E, k[5] = (S * t - Z * G) * E, k[6] = A * E, k[7] = (s * F - c * G) * E, k[8] = (M * G - s * t) * E, this
            },
            transpose: function() {
                var N, J = this.el;
                return N = J[1], J[1] = J[3], J[3] = N, N = J[2], J[2] = J[6], J[6] = N, N = J[5], J[5] = J[7], J[7] = N, this
            },
            getNormalMatrix: function(B) {
                return this.setFromMatrix4(B).getInverse(this).transpose()
            },
            transposeIntoArray: function(L) {
                var b = this.el;
                return L[0] = b[0], L[1] = b[3], L[2] = b[6], L[3] = b[1], L[4] = b[4], L[5] = b[7], L[6] = b[2], L[7] = b[5], L[8] = b[8], this
            },
            setUvTransform: function(M, z, c, D, I, _, Q) {
                var K = Math.cos(I),
                    y = Math.sin(I);
                this.set(c * K, c * y, -c * (K * _ + y * Q) + _ + M, -D * y, D * K, -D * (-y * _ + K * Q) + Q + z, 0, 0, 1)
            },
            scale: function(y, Q) {
                var e = this.el;
                return e[0] *= y, e[3] *= y, e[6] *= y, e[1] *= Q, e[4] *= Q, e[7] *= Q, this
            },
            rotate: function(i) {
                var y = Math.cos(i),
                    G = Math.sin(i),
                    C = this.el,
                    d = C[0],
                    I = C[3],
                    t = C[6],
                    e = C[1],
                    K = C[4],
                    Y = C[7];
                return C[0] = y * d + G * e, C[3] = y * I + G * K, C[6] = y * t + G * Y, C[1] = -G * d + y * e, C[4] = -G * I + y * K, C[7] = -G * t + y * Y, this
            },
            translate: function(T, g) {
                var F = this.el;
                return F[0] += T * F[2], F[3] += T * F[5], F[6] += T * F[8], F[1] += g * F[2], F[4] += g * F[5], F[7] += g * F[8], this
            },
            equals: function(o) {
                for (var g = this.el, c = o.el, x = 0; 9 > x; x++)
                    if (g[x] !== c[x]) return !1;
                return !0
            },
            fromArray: function(z, Z) {
                Z === O && (Z = 0);
                for (var D = 0; 9 > D; D++) this.el[D] = z[D + Z];
                return this
            },
            toArray: function(h, q) {
                h === O && (h = []), q === O && (q = 0);
                var y = this.el;
                return h[q] = y[0], h[q + 1] = y[1], h[q + 2] = y[2], h[q + 3] = y[3], h[q + 4] = y[4], h[q + 5] = y[5], h[q + 6] = y[6], h[q + 7] = y[7], h[q + 8] = y[8], h
            }
        });
        var jb = F.Math.Plane = function(w, r) {
            this.normal = w !== O ? w : new Cb(1, 0, 0), this.constant = r !== O ? r : 0
        };
        G.assign(jb.prototype, {
            set: function(J, T) {
                return this.normal.copy(J), this.constant = T, this
            },
            setComponents: function(n, H, Z, s) {
                return this.normal.set(n, H, Z), this.constant = s, this
            },
            setFromNormalAndCoplanarPoint: function(c, d) {
                return this.normal.copy(c), this.constant = -d.dot(this.normal), this
            },
            setFromCoplanarPoints: function() {
                var E = new Cb,
                    L = new Cb;
                return function(g, y, D) {
                    var j = E.subVectors(D, y).cross(L.subVectors(g, y)).normalize();
                    return this.setFromNormalAndCoplanarPoint(j, g), this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(Q) {
                return this.normal.copy(Q.normal), this.constant = Q.constant, this
            },
            normalize: function() {
                var I = 1 / this.normal.length();
                return this.normal.multiplyScalar(I), this.constant *= I, this
            },
            negate: function() {
                return this.constant *= -1, this.normal.negate(), this
            },
            distanceToPoint: function(f) {
                return this.normal.dot(f) + this.constant
            },
            distanceToSphere: function(k) {
                return this.distanceToPoint(k.center) - k.radius
            },
            projectPoint: function(o, h) {
                return h === O && (h = new Cb), h.copy(this.normal).multiplyScalar(-this.distanceToPoint(o)).add(o)
            },
            intersectLine: function() {
                var k = new Cb;
                return function(R, Y) {
                    Y === O && (Y = new Cb);
                    var J = R.delta(k),
                        Q = this.normal.dot(J);
                    if (0 === Q) return 0 === this.distanceToPoint(R.start) ? Y.copy(R.start) : O;
                    var N = -(R.start.dot(this.normal) + this.constant) / Q;
                    return 0 > N || N > 1 ? O : Y.copy(J).multiplyScalar(N).add(R.start)
                }
            }(),
            intersectsLine: function(R) {
                var e = this.distanceToPoint(R.start),
                    N = this.distanceToPoint(R.end);
                return 0 > e && N > 0 || 0 > N && e > 0
            },
            intersectsBox: function(o) {
                return o.intersectsPlane(this)
            },
            intersectsSphere: function(o) {
                return o.intersectsPlane(this)
            },
            coplanarPoint: function(W) {
                return W === O && (W = new Cb), W.copy(this.normal).multiplyScalar(-this.constant)
            },
            applyMatrix4: function() {
                var R = new Cb,
                    Y = new hd;
                return function(n, J) {
                    var E = J || Y.getNormalMatrix(n),
                        r = this.coplanarPoint(R).applyMatrix4(n),
                        K = this.normal.applyMatrix3(E).normalize();
                    return this.constant = -r.dot(K), this
                }
            }(),
            translate: function(b) {
                return this.constant -= b.dot(this.normal), this
            },
            equals: function(c) {
                return c.normal.equals(this.normal) && c.constant === this.constant
            }
        });
        var Bs = F.Math.Ray = function(B, t) {
            this.origin = B !== O ? B.clone() : new Cb, this.direction = t !== O ? t.clone() : new Cb
        };
        G.assign(Bs.prototype, {
            set: function(H, I) {
                return this.origin.copy(H), this.direction.copy(I), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(l) {
                return this.origin.copy(l.origin), this.direction.copy(l.direction), this.maxHitLen = l.maxHitLen, this
            },
            at: function(H, e) {
                var l = e || new Cb;
                return l.copy(this.direction).multiplyScalar(H).add(this.origin)
            },
            setMaxHitLength: function(W) {
                this.maxHitLen = W
            },
            lookAt: function(B) {
                return this.direction.copy(B).sub(this.origin).normalize(), this
            },
            applyMatrix4: function(M) {
                var r = this.maxHitLen;
                if (r) {
                    var K = this.direction.clone().multiplyScalar(r).add(this.origin);
                    K.applyMatrix4(M)
                }
                return this.origin.applyMatrix4(M), this.direction.transformDirection(M), r && (this.maxHitLen = this.origin.distanceTo(K)), this
            },
            distanceToPlane: function(S) {
                var T = S.normal.dot(this.direction);
                if (0 === T) return 0 === S.distanceToPoint(this.origin) ? 0 : null;
                var d = -(this.origin.dot(S.normal) + S.constant) / T;
                return d >= 0 ? d : null
            },
            intersectPlane: function(B, w) {
                var u = this.distanceToPlane(B);
                return null === u ? null : this.at(u, w)
            },
            intersectSphere: function() {
                var I = new Cb;
                return function(Z, R) {
                    I.subVectors(Z.center, this.origin);
                    var N = I.dot(this.direction),
                        u = I.dot(I) - N * N,
                        H = Z.radius * Z.radius;
                    if (u > H) return null;
                    var E = Math.sqrt(H - u),
                        j = N - E,
                        _ = N + E;
                    return 0 > j && 0 > _ ? null : 0 > j ? this.at(_, R) : this.at(j, R)
                }
            }(),
            intersectEllipsoid: function() {
                var d = new Cb,
                    B = new Cb;
                return function(W, p) {
                    d.subVectors(W.center, this.origin), d.divide(W.radius), B.divideVectors(this.direction, W.radius);
                    var X = B.lengthSq(),
                        z = d.dot(B),
                        l = d.dot(d) * X - z * z;
                    if (l > X) return null;
                    var L = Math.sqrt(X - l),
                        M = (z - L) / X,
                        m = (z + L) / X;
                    return 0 > M && 0 > m ? null : 0 > M ? this.at(m, p) : this.at(M, p)
                }
            }(),
            intersectBox: function(y, w) {
                var d, K, T, p, H, $, E = 1 / this.direction.x,
                    A = 1 / this.direction.y,
                    i = 1 / this.direction.z,
                    Z = this.origin;
                if (E >= 0 ? (d = (y.min.x - Z.x) * E, K = (y.max.x - Z.x) * E) : (d = (y.max.x - Z.x) * E, K = (y.min.x - Z.x) * E), A >= 0 ? (T = (y.min.y - Z.y) * A, p = (y.max.y - Z.y) * A) : (T = (y.max.y - Z.y) * A, p = (y.min.y - Z.y) * A), d > p || T > K) return null;
                if ((T > d || d !== d) && (d = T), (K > p || K !== K) && (K = p), i >= 0 ? (H = (y.min.z - Z.z) * i, $ = (y.max.z - Z.z) * i) : (H = (y.max.z - Z.z) * i, $ = (y.min.z - Z.z) * i), d > $ || H > K) return null;
                if ((H > d || d !== d) && (d = H), (K > $ || K !== K) && (K = $), 0 > K) return null;
                var G = d >= 0 ? d : K,
                    S = this.maxHitLen;
                return S && G > S ? null : this.at(G, w)
            },
            intersectTriangle: function() {
                var $ = new Cb,
                    M = new Cb,
                    W = new Cb,
                    _ = new Cb;
                return function(t, F, d, z, o) {
                    M.subVectors(F, t), W.subVectors(d, t), _.crossVectors(M, W);
                    var g, c = this.direction.dot(_);
                    if (c > 0) {
                        if (z) return null;
                        g = 1
                    } else {
                        if (!(0 > c)) return null;
                        g = -1, c = -c
                    }
                    $.subVectors(this.origin, t);
                    var s = g * this.direction.dot(W.crossVectors($, W));
                    if (0 > s) return null;
                    var O = g * this.direction.dot(M.cross($));
                    if (0 > O || s + O > c) return null;
                    var I = -g * $.dot(_);
                    if (0 > I) return null;
                    var E = I / c,
                        u = this.maxHitLen;
                    return u && E > u ? null : this.at(E, o)
                }
            }()
        });
        var $l = F.Math.Box3 = function(h, k) {
            this.min = h !== O ? h : new Cb(1 / 0, 1 / 0, 1 / 0), this.max = k !== O ? k : new Cb(-1 / 0, -1 / 0, -1 / 0)
        };
        G.assign($l.prototype, {
            set: function(r, y) {
                return this.min.copy(r), this.max.copy(y), this
            },
            setFromArray: function(B) {
                for (var j = 1 / 0, v = 1 / 0, s = 1 / 0, X = -1 / 0, U = -1 / 0, e = -1 / 0, $ = 0, d = B.length; d > $; $ += 3) {
                    var A = B[$],
                        F = B[$ + 1],
                        O = B[$ + 2];
                    j > A && (j = A), v > F && (v = F), s > O && (s = O), A > X && (X = A), F > U && (U = F), O > e && (e = O)
                }
                return this.min.set(j, v, s), this.max.set(X, U, e), this
            },
            setFromPoints: function(Y) {
                this.makeEmpty();
                for (var R = 0, n = Y.length; n > R; R++) this.expandByPoint(Y[R]);
                return this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            intersectsBox: function(U) {
                return U.max.x < this.min.x || U.min.x > this.max.x || U.max.y < this.min.y || U.min.y > this.max.y || U.max.z < this.min.z || U.min.z > this.max.z ? !1 : !0
            },
            copy: function(A) {
                return this.min.copy(A.min), this.max.copy(A.max), this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
            },
            isEmpty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            },
            expandByPoint: function(U) {
                return this.min.min(U), this.max.max(U), this
            },
            expandByBox: function(T) {
                return this.min.min(T.min), this.max.max(T.max), this
            },
            applyMatrix4: function() {
                var q = [new Cb, new Cb, new Cb, new Cb, new Cb, new Cb, new Cb, new Cb];
                return function(g) {
                    return this.isEmpty() ? this : (q[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(g), q[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(g), q[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(g), q[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(g), q[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(g), q[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(g), q[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(g), q[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(g), this.setFromPoints(q), this)
                }
            }()
        });
        var sj = F.Math.Sphere = function(i, o) {
            this.center = i !== O ? i : new Cb, this.radius = o !== O ? o : 0
        };
        G.assign(sj.prototype, {
            set: function(Q, y) {
                return this.center.copy(Q), this.radius = y, this
            },
            setFromPoints: function() {
                var R = new $l;
                return function(n, P) {
                    var U = this.center;
                    P !== O ? U.copy(P) : R.setFromPoints(n).getCenter(U);
                    for (var L = 0, E = 0, d = n.length; d > E; E++) L = Math.max(L, U.distanceToSquared(n[E]));
                    return this.radius = Math.sqrt(L), this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(I) {
                return this.center.copy(I.center), this.radius = I.radius, this
            },
            empty: function() {
                return this.radius <= 0
            },
            containsPoint: function(k) {
                return k.distanceToSquared(this.center) <= this.radius * this.radius
            },
            distanceToPoint: function(G) {
                return G.distanceTo(this.center) - this.radius
            },
            intersectsSphere: function(c) {
                var y = this.radius + c.radius;
                return c.center.distanceToSquared(this.center) <= y * y
            },
            intersectsBox: function(d) {
                return d.intersectsSphere(this)
            },
            intersectsPlane: function(O) {
                return Math.abs(O.distanceToPoint(this.center)) <= this.radius
            },
            clampPoint: function(X, q) {
                var k = this.center.distanceToSquared(X);
                return q === O && (q = new Cb), q.copy(X), k > this.radius * this.radius && (q.sub(this.center).normalize(), q.multiplyScalar(this.radius).add(this.center)), q
            },
            getBoundingBox: function(N) {
                return N === O && (N = new $l), N.set(this.center, this.center), N.expandByScalar(this.radius), N
            },
            applyMatrix4: function(K) {
                return this.center.applyMatrix4(K), this.radius = this.radius * K.getMaxScaleOnAxis(), this
            },
            translate: function(a) {
                return this.center.add(a), this
            },
            equals: function(u) {
                return u.center.equals(this.center) && u.radius === this.radius
            }
        });
        var Pj = F.Math.Frustum = function(I, x, f, p, c, w) {
            this.planes = [I !== O ? I : new jb, x !== O ? x : new jb, f !== O ? f : new jb, p !== O ? p : new jb, c !== O ? c : new jb, w !== O ? w : new jb]
        };
        G.assign(Pj.prototype, {
            set: function(g, A, m, $, u, t) {
                var z = this.planes;
                return z[0].copy(g), z[1].copy(A), z[2].copy(m), z[3].copy($), z[4].copy(u), z[5].copy(t), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(m) {
                for (var $ = this.planes, j = 0; 6 > j; j++) $[j].copy(m.planes[j]);
                return this
            },
            setFromMatrix: function($) {
                var h = this.planes,
                    i = $.el,
                    E = i[0],
                    P = i[1],
                    J = i[2],
                    z = i[3],
                    K = i[4],
                    s = i[5],
                    d = i[6],
                    u = i[7],
                    U = i[8],
                    N = i[9],
                    H = i[10],
                    L = i[11],
                    x = i[12],
                    D = i[13],
                    F = i[14],
                    I = i[15];
                return h[0].setComponents(z - E, u - K, L - U, I - x).normalize(), h[1].setComponents(z + E, u + K, L + U, I + x).normalize(), h[2].setComponents(z + P, u + s, L + N, I + D).normalize(), h[3].setComponents(z - P, u - s, L - N, I - D).normalize(), h[4].setComponents(z - J, u - d, L - H, I - F).normalize(), h[5].setComponents(z + J, u + d, L + H, I + F).normalize(), this
            },
            intersectsObject: function() {
                var W = new sj;
                return function(P) {
                    var V = P.geometry;
                    return null === V.boundingSphere && V.computeBoundingSphere(), W.copy(V.boundingSphere).applyMatrix4(P.matrixWorld), this.intersectsSphere(W)
                }
            }(),
            intersectsSprite: function() {
                var u = new sj;
                return function(j) {
                    return u.center.set(0, 0, 0), u.radius = .7071067811865476, u.applyMatrix4(j.matrixWorld), this.intersectsSphere(u)
                }
            }(),
            intersectsSphere: function($) {
                for (var a = this.planes, j = $.center, w = -$.radius, V = 0; 6 > V; V++) {
                    var L = a[V].distanceToPoint(j);
                    if (w > L) return !1
                }
                return !0
            },
            intersectsBox: function() {
                var q = new Cb;
                return function(M) {
                    for (var J = this.planes, Y = 0; 6 > Y; Y++) {
                        var O = J[Y];
                        if (q.x = O.normal.x > 0 ? M.max.x : M.min.x, q.y = O.normal.y > 0 ? M.max.y : M.min.y, q.z = O.normal.z > 0 ? M.max.z : M.min.z, O.distanceToPoint(q) < 0) return !1
                    }
                    return !0
                }
            }(),
            containsPoint: function(O) {
                for (var E = this.planes, s = 0; 6 > s; s++)
                    if (E[s].distanceToPoint(O) < 0) return !1;
                return !0
            }
        });
        var gb = F.Math.Matrix4 = function() {
            this.el = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
        };
        G.assign(gb.prototype, {
            set: function(N, D, O, U, v, g, i, S, G, C, H, k, u, c, Z, T) {
                var V = this.el;
                return V[0] = N, V[4] = D, V[8] = O, V[12] = U, V[1] = v, V[5] = g, V[9] = i, V[13] = S, V[2] = G, V[6] = C, V[10] = H, V[14] = k, V[3] = u, V[7] = c, V[11] = Z, V[15] = T, this
            },
            clone: function() {
                return (new gb).fromArray(this.el)
            },
            fromArray: function(j, K) {
                K === O && (K = 0);
                for (var n = this.el, W = 0; 16 > W; W++) n[W] = j[W + K];
                return this
            },
            getElements: function() {
                return this.el
            },
            scale: function(P) {
                var Q = this.el,
                    o = P.x,
                    H = P.y,
                    M = P.z;
                return Q[0] *= o, Q[4] *= H, Q[8] *= M, Q[1] *= o, Q[5] *= H, Q[9] *= M, Q[2] *= o, Q[6] *= H, Q[10] *= M, Q[3] *= o, Q[7] *= H, Q[11] *= M, this
            },
            makeRotationFromEuler: function(Z) {
                var V = this.el,
                    G = Z._x,
                    Q = Z._y,
                    J = Z._z,
                    N = Z._order,
                    d = Math.cos(G),
                    x = Math.sin(G),
                    W = Math.cos(Q),
                    f = Math.sin(Q),
                    g = Math.cos(J),
                    H = Math.sin(J);
                if ("XYZ" === N) {
                    var c = d * g,
                        D = d * H,
                        w = x * g,
                        y = x * H;
                    V[0] = W * g, V[4] = -W * H, V[8] = f, V[1] = D + w * f, V[5] = c - y * f, V[9] = -x * W, V[2] = y - c * f, V[6] = w + D * f, V[10] = d * W
                } else if ("YXZ" === N) {
                    var S = W * g,
                        r = W * H,
                        U = f * g,
                        C = f * H;
                    V[0] = S + C * x, V[4] = U * x - r, V[8] = d * f, V[1] = d * H, V[5] = d * g, V[9] = -x, V[2] = r * x - U, V[6] = C + S * x, V[10] = d * W
                } else if ("ZXY" === N) {
                    var S = W * g,
                        r = W * H,
                        U = f * g,
                        C = f * H;
                    V[0] = S - C * x, V[4] = -d * H, V[8] = U + r * x, V[1] = r + U * x, V[5] = d * g, V[9] = C - S * x, V[2] = -d * f, V[6] = x, V[10] = d * W
                } else if ("ZYX" === N) {
                    var c = d * g,
                        D = d * H,
                        w = x * g,
                        y = x * H;
                    V[0] = W * g, V[4] = w * f - D, V[8] = c * f + y, V[1] = W * H, V[5] = y * f + c, V[9] = D * f - w, V[2] = -f, V[6] = x * W, V[10] = d * W
                } else if ("YZX" === N) {
                    var p = d * W,
                        Y = d * f,
                        q = x * W,
                        F = x * f;
                    V[0] = W * g, V[4] = F - p * H, V[8] = q * H + Y, V[1] = H, V[5] = d * g, V[9] = -x * g, V[2] = -f * g, V[6] = Y * H + q, V[10] = p - F * H
                } else if ("XZY" === N) {
                    var p = d * W,
                        Y = d * f,
                        q = x * W,
                        F = x * f;
                    V[0] = W * g, V[4] = -H, V[8] = f * g, V[1] = p * H + F, V[5] = d * g, V[9] = Y * H - q, V[2] = q * H - Y, V[6] = x * g, V[10] = F * H + p
                }
                return V[3] = 0, V[7] = 0, V[11] = 0, V[12] = 0, V[13] = 0, V[14] = 0, V[15] = 1, this
            },
            makeRotationFromQuaternion: function(a) {
                var s = this.el,
                    f = a._x,
                    K = a._y,
                    i = a._z,
                    j = a._w,
                    y = f + f,
                    g = K + K,
                    d = i + i,
                    W = f * y,
                    R = f * g,
                    I = f * d,
                    b = K * g,
                    r = K * d,
                    Q = i * d,
                    e = j * y,
                    x = j * g,
                    B = j * d;
                return s[0] = 1 - (b + Q), s[4] = R - B, s[8] = I + x, s[1] = R + B, s[5] = 1 - (W + Q), s[9] = r - e, s[2] = I - x, s[6] = r + e, s[10] = 1 - (W + b), s[3] = 0, s[7] = 0, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            },
            getInverse: function(s) {
                var h = this.el,
                    C = s.el,
                    F = C[0],
                    K = C[1],
                    S = C[2],
                    W = C[3],
                    A = C[4],
                    X = C[5],
                    M = C[6],
                    i = C[7],
                    O = C[8],
                    N = C[9],
                    B = C[10],
                    q = C[11],
                    c = C[12],
                    n = C[13],
                    d = C[14],
                    I = C[15],
                    R = N * d * i - n * B * i + n * M * q - X * d * q - N * M * I + X * B * I,
                    x = c * B * i - O * d * i - c * M * q + A * d * q + O * M * I - A * B * I,
                    T = O * n * i - c * N * i + c * X * q - A * n * q - O * X * I + A * N * I,
                    Z = c * N * M - O * n * M - c * X * B + A * n * B + O * X * d - A * N * d,
                    j = F * R + K * x + S * T + W * Z;
                if (0 === j) return this.identity();
                var t = 1 / j;
                return h[0] = R * t, h[1] = (n * B * W - N * d * W - n * S * q + K * d * q + N * S * I - K * B * I) * t, h[2] = (X * d * W - n * M * W + n * S * i - K * d * i - X * S * I + K * M * I) * t, h[3] = (N * M * W - X * B * W - N * S * i + K * B * i + X * S * q - K * M * q) * t, h[4] = x * t, h[5] = (O * d * W - c * B * W + c * S * q - F * d * q - O * S * I + F * B * I) * t, h[6] = (c * M * W - A * d * W - c * S * i + F * d * i + A * S * I - F * M * I) * t, h[7] = (A * B * W - O * M * W + O * S * i - F * B * i - A * S * q + F * M * q) * t, h[8] = T * t, h[9] = (c * N * W - O * n * W - c * K * q + F * n * q + O * K * I - F * N * I) * t, h[10] = (A * n * W - c * X * W + c * K * i - F * n * i - A * K * I + F * X * I) * t, h[11] = (O * X * W - A * N * W - O * K * i + F * N * i + A * K * q - F * X * q) * t, h[12] = Z * t, h[13] = (O * n * S - c * N * S + c * K * B - F * n * B - O * K * d + F * N * d) * t, h[14] = (c * X * S - A * n * S - c * K * M + F * n * M + A * K * d - F * X * d) * t, h[15] = (A * N * S - O * X * S + O * K * M - F * N * M - A * K * B + F * X * B) * t, this
            },
            makeRotationAxis: function(i, m) {
                var L = Math.cos(m),
                    D = Math.sin(m),
                    e = 1 - L,
                    W = i.x,
                    o = i.y,
                    q = i.z,
                    X = e * W,
                    y = e * o;
                return this.set(X * W + L, X * o - D * q, X * q + D * o, 0, X * o + D * q, y * o + L, y * q - D * W, 0, X * q - D * o, y * q + D * W, e * q * q + L, 0, 0, 0, 0, 1), this
            },
            multiply: function(t) {
                return this.multiplyMatrices(this, t)
            },
            premultiply: function(T) {
                return this.multiplyMatrices(T, this)
            },
            multiplyMatrices: function(U, i) {
                var E = U.el,
                    q = i.el,
                    R = this.el,
                    z = E[0],
                    A = E[4],
                    $ = E[8],
                    p = E[12],
                    o = E[1],
                    s = E[5],
                    j = E[9],
                    N = E[13],
                    X = E[2],
                    D = E[6],
                    J = E[10],
                    I = E[14],
                    P = E[3],
                    t = E[7],
                    W = E[11],
                    K = E[15],
                    k = q[0],
                    r = q[4],
                    d = q[8],
                    x = q[12],
                    g = q[1],
                    F = q[5],
                    y = q[9],
                    w = q[13],
                    Y = q[2],
                    Q = q[6],
                    b = q[10],
                    m = q[14],
                    l = q[3],
                    c = q[7],
                    H = q[11],
                    G = q[15];
                return R[0] = z * k + A * g + $ * Y + p * l, R[4] = z * r + A * F + $ * Q + p * c, R[8] = z * d + A * y + $ * b + p * H, R[12] = z * x + A * w + $ * m + p * G, R[1] = o * k + s * g + j * Y + N * l, R[5] = o * r + s * F + j * Q + N * c, R[9] = o * d + s * y + j * b + N * H, R[13] = o * x + s * w + j * m + N * G, R[2] = X * k + D * g + J * Y + I * l, R[6] = X * r + D * F + J * Q + I * c, R[10] = X * d + D * y + J * b + I * H, R[14] = X * x + D * w + J * m + I * G, R[3] = P * k + t * g + W * Y + K * l, R[7] = P * r + t * F + W * Q + K * c, R[11] = P * d + t * y + W * b + K * H, R[15] = P * x + t * w + W * m + K * G, this
            },
            lookAt: function() {
                var z = new Cb;
                return function(X, Q, E) {
                    return z.subVectors(X, Q), this.lookAtDirection(z, E)
                }
            }(),
            lookAtDirection: function() {
                var X = new Cb,
                    p = new Cb,
                    U = new Cb;
                return function(k, R) {
                    R || (R = Cb.UP);
                    var F = this.el;
                    return U.copy(k), 0 === U.lengthSq() && (U.z = 1), U.normalize(), X.crossVectors(R, U), 0 === X.lengthSq() && (1 === Math.abs(R.z) ? U.x += 1e-4 : U.z += 1e-4, U.normalize(), X.crossVectors(R, U)), X.normalize(), p.crossVectors(U, X), F[0] = X.x, F[4] = p.x, F[8] = U.x, F[1] = X.y, F[5] = p.y, F[9] = U.y, F[2] = X.z, F[6] = p.z, F[10] = U.z, this
                }
            }(),
            extractScale: function() {
                var f;
                return function(s) {
                    f === O && (f = new Cb), s === O && (s = new Cb);
                    var d = f.setFromMatrixColumn(this, 0).length(),
                        q = f.setFromMatrixColumn(this, 1).length(),
                        k = f.setFromMatrixColumn(this, 2).length();
                    return s.set(d, q, k), s
                }
            }(),
            extractRotation: function() {
                var $;
                return function(j) {
                    $ === O && ($ = new Cb), j === O && (j = new gb);
                    var L = this.el,
                        D = j.el,
                        A = 1 / $.setFromMatrixColumn(j, 0).length(),
                        G = 1 / $.setFromMatrixColumn(j, 1).length(),
                        g = 1 / $.setFromMatrixColumn(j, 2).length();
                    return L[0] = D[0] * A, L[1] = D[1] * A, L[2] = D[2] * A, L[4] = D[4] * G, L[5] = D[5] * G, L[6] = D[6] * G, L[8] = D[8] * g, L[9] = D[9] * g, L[10] = D[10] * g, this
                }
            }(),
            multiplyScalar: function(Z) {
                var P = this.el;
                return P[0] *= Z, P[4] *= Z, P[8] *= Z, P[12] *= Z, P[1] *= Z, P[5] *= Z, P[9] *= Z, P[13] *= Z, P[2] *= Z, P[6] *= Z, P[10] *= Z, P[14] *= Z, P[3] *= Z, P[7] *= Z, P[11] *= Z, P[15] *= Z, this
            },
            getPosition: function(U) {
                return U === O && (U = new Cb), U.setFromMatrixColumn(this, 3)
            },
            setPosition: function(f) {
                var T = this.el;
                return T[12] = f.x, T[13] = f.y, T[14] = f.z, this
            },
            toArray: function(S, L) {
                S === O && (S = []), L === O && (L = 0);
                var u = this.el;
                return S[L] = u[0], S[L + 1] = u[1], S[L + 2] = u[2], S[L + 3] = u[3], S[L + 4] = u[4], S[L + 5] = u[5], S[L + 6] = u[6], S[L + 7] = u[7], S[L + 8] = u[8], S[L + 9] = u[9], S[L + 10] = u[10], S[L + 11] = u[11], S[L + 12] = u[12], S[L + 13] = u[13], S[L + 14] = u[14], S[L + 15] = u[15], S
            },
            determinant: function() {
                var d = this.el,
                    B = d[0],
                    C = d[4],
                    M = d[8],
                    g = d[12],
                    H = d[1],
                    k = d[5],
                    z = d[9],
                    V = d[13],
                    S = d[2],
                    E = d[6],
                    q = d[10],
                    Z = d[14],
                    m = d[3],
                    G = d[7],
                    i = d[11],
                    o = d[15];
                return m * (+g * z * E - M * V * E - g * k * q + C * V * q + M * k * Z - C * z * Z) + G * (+B * z * Z - B * V * q + g * H * q - M * H * Z + M * V * S - g * z * S) + i * (+B * V * E - B * k * Z - g * H * E + C * H * Z + g * k * S - C * V * S) + o * (-M * k * S - B * z * E + B * k * q + M * H * E - C * H * q + C * z * S)
            },
            copy: function(r) {
                var d = this.el,
                    B = r.el;
                return d[0] = B[0], d[1] = B[1], d[2] = B[2], d[3] = B[3], d[4] = B[4], d[5] = B[5], d[6] = B[6], d[7] = B[7], d[8] = B[8], d[9] = B[9], d[10] = B[10], d[11] = B[11], d[12] = B[12], d[13] = B[13], d[14] = B[14], d[15] = B[15], this
            },
            compose: function(g, z, f) {
                var L = this.el,
                    K = z._x,
                    r = z._y,
                    P = z._z,
                    Y = z._w,
                    B = K + K,
                    u = r + r,
                    V = P + P,
                    T = K * B,
                    q = K * u,
                    d = K * V,
                    S = r * u,
                    A = r * V,
                    I = P * V,
                    k = Y * B,
                    m = Y * u,
                    w = Y * V,
                    O = f.x,
                    i = f.y,
                    J = f.z;
                return L[0] = (1 - (S + I)) * O, L[1] = (q + w) * O, L[2] = (d - m) * O, L[3] = 0, L[4] = (q - w) * i, L[5] = (1 - (T + I)) * i, L[6] = (A + k) * i, L[7] = 0, L[8] = (d + m) * J, L[9] = (A - k) * J, L[10] = (1 - (T + S)) * J, L[11] = 0, L[12] = g.x, L[13] = g.y, L[14] = g.z, L[15] = 1, this
            },
            decompose: function() {
                var M = new Cb,
                    G = new gb;
                return function(W, B, k) {
                    var R = this.el,
                        m = M.set(R[0], R[1], R[2]).length(),
                        P = M.set(R[4], R[5], R[6]).length(),
                        e = M.set(R[8], R[9], R[10]).length(),
                        l = this.determinant();
                    0 > l && (m = -m), W.x = R[12], W.y = R[13], W.z = R[14], G.copy(this);
                    var L = 1 / m,
                        p = 1 / P,
                        E = 1 / e;
                    return G.el[0] *= L, G.el[1] *= L, G.el[2] *= L, G.el[4] *= p, G.el[5] *= p, G.el[6] *= p, G.el[8] *= E, G.el[9] *= E, G.el[10] *= E, B.setFromRotationMatrix(G), k.x = m, k.y = P, k.z = e, this
                }
            }()
        });
        var mr = F.Math.Triangle = function(n, b, N) {
            this.a = n !== O ? n : new Cb, this.b = b !== O ? b : new Cb, this.c = N !== O ? N : new Cb
        };
        G.assign(mr, {
            barycoordFromPoint: function() {
                var e = new Cb,
                    U = new Cb,
                    l = new Cb;
                return function(E, F, D, V, B) {
                    e.subVectors(V, F), U.subVectors(D, F), l.subVectors(E, F);
                    var m = e.dot(e),
                        y = e.dot(U),
                        M = e.dot(l),
                        S = U.dot(U),
                        T = U.dot(l),
                        H = m * S - y * y,
                        w = B || new Cb;
                    if (0 === H) return w.set(-2, -1, -1);
                    var L = 1 / H,
                        u = (S * M - y * T) * L,
                        v = (m * T - y * M) * L;
                    return w.set(1 - u - v, v, u)
                }
            }(),
            uvIntersection: function() {
                var o = new Cb;
                return function(S, i, R, h, u, w, j) {
                    return mr.barycoordFromPoint(S, i, R, h, o), u.multiplyScalar(o.x), w.multiplyScalar(o.y), j.multiplyScalar(o.z), u.add(w).add(j), u.clone()
                }
            }()
        });
        var jg = F.Math.Euler = function(h, z, e, Y, y) {
            this.set(h, z, e, Y, y)
        };
        jg.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], jg.DefaultOrder = "XYZ", jg.ReverseOrder = function() {
            var W = {
                xyz: "ZYX",
                xzy: "YZX",
                yxz: "ZXY",
                yzx: "XZY",
                zxy: "YXZ",
                zyx: "XYZ"
            };
            return function(t) {
                return W[t]
            }
        }(), G.defineProperties(jg.prototype, {
            x: {
                get: function() {
                    return this._x
                },
                set: function(V) {
                    this._x = V, this.onChangeCallback()
                }
            },
            y: {
                get: function() {
                    return this._y
                },
                set: function(o) {
                    this._y = o, this.onChangeCallback()
                }
            },
            z: {
                get: function() {
                    return this._z
                },
                set: function(h) {
                    this._z = h, this.onChangeCallback()
                }
            },
            order: {
                get: function() {
                    return this._order
                },
                set: function(S) {
                    this._order = S, this.onChangeCallback()
                }
            }
        }), G.assign(jg.prototype, {
            set: function(D, g, r, X, N) {
                return ym(D) && (N = r, X = g, r = D[2], g = D[1], D = D[0]), X ? N && (X = jg.ReverseOrder(X)) : X = "ZYX", this._x = D || 0, this._y = g || 0, this._z = r || 0, this._order = X || this._order, this.onChangeCallback(), this
            },
            clone: function() {
                return new this.constructor(this._x, this._y, this._z, this._order)
            },
            copy: function(_) {
                return this._x = _._x, this._y = _._y, this._z = _._z, this._order = _._order, this.onChangeCallback(), this
            },
            setFromRotationMatrix: function(N, T, n) {
                var t = F.Math.clamp,
                    L = N.el || N,
                    V = L[0],
                    E = L[4],
                    o = L[8],
                    p = L[1],
                    O = L[5],
                    g = L[9],
                    z = L[2],
                    k = L[6],
                    U = L[10];
                return T = T || this._order, "XYZ" === T ? (this._y = Math.asin(t(o, -1, 1)), Math.abs(o) < .99999 ? (this._x = Math.atan2(-g, U), this._z = Math.atan2(-E, V)) : (this._x = Math.atan2(k, O), this._z = 0)) : "YXZ" === T ? (this._x = Math.asin(-t(g, -1, 1)), Math.abs(g) < .99999 ? (this._y = Math.atan2(o, U), this._z = Math.atan2(p, O)) : (this._y = Math.atan2(-z, V), this._z = 0)) : "ZXY" === T ? (this._x = Math.asin(t(k, -1, 1)), Math.abs(k) < .99999 ? (this._y = Math.atan2(-z, U), this._z = Math.atan2(-E, O)) : (this._y = 0, this._z = Math.atan2(p, V))) : "ZYX" === T ? (this._y = Math.asin(-t(z, -1, 1)), Math.abs(z) < .99999 ? (this._x = Math.atan2(k, U), this._z = Math.atan2(p, V)) : (this._x = 0, this._z = Math.atan2(-E, O))) : "YZX" === T ? (this._z = Math.asin(t(p, -1, 1)), Math.abs(p) < .99999 ? (this._x = Math.atan2(-g, O), this._y = Math.atan2(-z, V)) : (this._x = 0, this._y = Math.atan2(o, U))) : "XZY" === T ? (this._z = Math.asin(-t(E, -1, 1)), Math.abs(E) < .99999 ? (this._x = Math.atan2(k, O), this._y = Math.atan2(o, V)) : (this._x = Math.atan2(-g, U), this._y = 0)) : console.warn("unsupported order: " + T), this._order = T, n !== !1 && this.onChangeCallback(), this
            },
            setFromQuaternion: function() {
                var R = new gb;
                return function(m, H, w) {
                    return R.makeRotationFromQuaternion(m), this.setFromRotationMatrix(R, H, w)
                }
            }(),
            setFromVector3: function(P, e) {
                return this.set(P.x, P.y, P.z, e || this._order)
            },
            reorder: function() {
                var V = new Ck;
                return function(E) {
                    return V.setFromEuler(this), this.setFromQuaternion(V, E)
                }
            }(),
            equals: function(n) {
                return n._x === this._x && n._y === this._y && n._z === this._z && n._order === this._order
            },
            fromArray: function(w) {
                return this._x = w[0], this._y = w[1], this._z = w[2], w[3] !== O && (this._order = w[3]), this.onChangeCallback(), this
            },
            toArray: function(Z, p) {
                return Z === O && (Z = []), p === O && (p = 0), Z[p] = this._x, Z[p + 1] = this._y, Z[p + 2] = this._z, Z[p + 3] = this._order, Z
            },
            toVector3: function(p) {
                return p ? p.set(this._x, this._y, this._z) : new Cb(this._x, this._y, this._z)
            },
            onChange: function(C) {
                return this.onChangeCallback = C, this
            },
            onChangeCallback: function() {}
        });
        var po = {
            ms_ac: function(J, K) {
                for (var i = K.ms_ac, $ = 0; $ < i.length; $++) Xp(J, i[$])
            },
            ms_listener: function(m) {
                m.addListeners = function() {
                    var c = this,
                        x = Wp;
                    z.mockTouch && (x = Rh.concat(Mi).concat(Nq)), c.__events__ = x;
                    for (var n = 0, K = x.length; K > n; n++) {
                        var F = x[n];
                        "wheel" === F && !c.handle_wheel && c.handle_mousewheel && (c.handle_wheel = function(G) {
                            Mm(c, G)
                        }), c["handle_" + F] && fi(F, c.getView(), c)
                    }
                }, m.removeListeners = function() {
                    var G = this,
                        $ = G.__events__;
                    if ($) {
                        G.__events__ = O;
                        for (var H = 0, e = $.length; e > H; H++) G["handle_" + $[H]] && Rg($[H], G.getView(), G)
                    }
                }
            },
            ms_fire: function(A) {
                A.mp = function(R, m, H) {
                    this.addPropertyChangeListener(R, m, H)
                }, A.ump = function(M, r) {
                    this.removePropertyChangeListener(M, r)
                }, A.fp = function(U, J, H, Q, f) {
                    return this.firePropertyChange(U, J, H, Q, f)
                }, A.addPropertyChangeListener = function(Q, T, E) {
                    var p = this;
                    p._62I || (p._62I = new ge), p._62I.add(Q, T, E)
                }, A.removePropertyChangeListener = function(I, u) {
                    this._62I && this._62I.remove(I, u)
                }, A.firePropertyChange = function(u, W, z, E, h) {
                    if (E) {
                        if (E(W, z)) return !1
                    } else if (W === z) return !1;
                    var y = this,
                        $ = h || {};
                    return $.property = u, $.oldValue = W, $.newValue = z, $.source = y, $.data = y, y._62I && y._62I.fire($), y.onPropertyChanged && y.onPropertyChanged($), !0
                }
            },
            ms_attr: function(e) {
                e.a = function(X, M) {
                    var V = this;
                    if (2 === arguments.length) V.setAttr(X, M);
                    else {
                        if (!jl(X)) return V.getAttr(X);
                        for (var G in X) V.setAttr(G, X[G])
                    }
                    return V
                }, e.getAttr = function(X, m) {
                    if (m === O && (m = 1), this._attrObject && X in this._attrObject) return this._attrObject[X];
                    if (this.getImage) {
                        var z = this.getImage();
                        if (Sf(z) && (z = Af[z]), jl(z) && "dataBindings" in z)
                            for (var A = z.dataBindings, N = A.length - 1; N >= 0; N--) {
                                var B = A[N];
                                if (B.attr === X) {
                                    if ("defaultValue" in B) return B.defaultValue;
                                    break
                                }
                            }
                    }
                    return m ? s[X] : O
                }, e.setAttr = function(Z, B) {
                    var k = this;
                    k._attrObject || (k._attrObject = {});
                    var V = k._attrObject[Z];
                    B === O ? delete k._attrObject[Z] : k._attrObject[Z] = B, k.fp && k.fp("a:" + Z, V, B) && k.onAttrChanged && k.onAttrChanged(Z, V, B)
                }, e.getSerializableAttrs = function() {
                    var f, g = {};
                    for (f in this._attrObject) g[f] = 1;
                    return g
                }
            },
            ms_bnb: function(F) {
                F.getBodyColor = function(O) {
                    return O.s("body.color")
                }, F.getBorderColor = function(Y) {
                    return Y.s("border.color")
                }
            },
            _51o: function(y) {
                y.mi = function(d, N, R) {
                    this.addInteractorListener(d, N, R)
                }, y.umi = function(t, K) {
                    this.removeInteractorListener(t, K)
                }, y.fi = function(r) {
                    this.fireInteractorEvent(r)
                }, y.addInteractorListener = function(D, o, i) {
                    var d = this;
                    d._63I || (d._63I = new ge), d._63I.add(D, o, i)
                }, y.removeInteractorListener = function(x, B) {
                    this._63I && this._63I.remove(x, B)
                }, y.fireInteractorEvent = function(w) {
                    this._63I && this._63I.fire(w)
                }, y.setInteractors = function(t) {
                    var T = this,
                        X = T._interactors;
                    X && X.each(function(f) {
                        f.tearDown()
                    }), ym(t) && (t = new no(t)), T._interactors = t, t && t.each(function(y) {
                        y.setUp()
                    }), T.fp("interactors", X, t), T.invalidateSelection()
                }, y.getInteractors = function() {
                    return this._interactors
                }
            },
            _49o: function(f) {
                f._44O = Y, f._45O = Y, f.getTopPainters = function() {
                    return this._44O
                }, f.getBottomPainters = function() {
                    return this._45O
                }, f.addTopPainter = function(G) {
                    var b = this;
                    b._44O || (b._44O = new no), b._44O.contains(G) || (b._44O.add(G), b.redraw && b.redraw())
                }, f.removeTopPainter = function(c) {
                    var P = this;
                    P._44O && (P._44O.remove(c), P.redraw && P.redraw())
                }, f.addBottomPainter = function(j) {
                    var $ = this;
                    $._45O || ($._45O = new no), $._45O.contains(j) || ($._45O.add(j), $.redraw && $.redraw())
                }, f.removeBottomPainter = function(u) {
                    var V = this;
                    V._45O && (V._45O.remove(u), V.redraw && V.redraw())
                }, f._93db = function(z, X) {
                    var v = this;
                    v._45O && v._45O.each(function(R) {
                        R.draw ? R.draw(z, X) : R.call(v, z, X)
                    })
                }, f._92db = function(G, i) {
                    var z = this;
                    z._44O && z._44O.each(function(v) {
                        v.draw ? v.draw(G, i) : v.call(z, G, i)
                    })
                }
            },
            ms_sm: function(L) {
                L.sm = function() {
                    return this.getSelectionModel()
                }, L.setSelectableFunc = function(h) {
                    this.sm().setFilterFunc(h)
                }, L.getSelectableFunc = function() {
                    return this.sm().getFilterFunc()
                }, L.getSelectionModel = function() {
                    var D = this;
                    return D._selectionModel ? D._selectionModel : D.dm().sm()
                }, L.isSelectionModelShared = function() {
                    return !this._selectionModel
                }, L.setSelectionModelShared = function(f) {
                    var B = this,
                        H = B.sm(),
                        _ = !B._selectionModel,
                        e = B.handleSelectionChange,
                        X = B.dm();
                    _ !== f && (B.invalidateSelection && B.invalidateSelection(), f ? (X.sm().ms(e, B), B._selectionModel.ums(e, B), B._selectionModel.dispose(), B._selectionModel = Y) : (X.sm().ums(e, B), B._selectionModel = new If(X), B._selectionModel.ms(e, B)), B.onSelectionModelSharedChanged(), B.fp("selectionModelShared", _, f), B.fireViewEvent({
                        kind: "selectionModelSharedChange",
                        oldValue: _,
                        newValue: f,
                        oldSelectionModel: H,
                        newSelectionModel: B.sm()
                    }))
                }, L.onSelectionModelSharedChanged = function() {
                    var q = this;
                    q.redraw(), q.invalidateSelection && q.invalidateSelection()
                }, L.removeSelection = function() {
                    var _ = this.dm();
                    _.beginTransaction(), this.sm().toSelection().each(_.remove, _), _.endTransaction()
                }, L.selectAll = function() {
                    var H = this;
                    H.sm().ss(H.dm().toDatas(function(O) {
                        return H.isVisible(O) && H.isSelectable(O)
                    }))
                }, L.isSelected = function(m) {
                    return this.sm().co(m)
                }, L.isSelectedById = function(J) {
                    var F = this.dm().getDataById(J);
                    return F ? this.isSelected(F) : !1
                }, L.isSelectable = function(b) {
                    return this.sm().isSelectable(b)
                }
            },
            ms_tx: function($) {
                $._64I = 0, $._65O = 0, $.isScrollable = function() {
                    return this.getWidth() < this._64I
                }, $._40o = function() {
                    return this.isScrollable()
                }, $.getLogicalPoint = function(t) {
                    return Sq(t, this._canvas || this._view, this.tx(), this.ty ? this.ty() : 0)
                }, $.tx = function(G) {
                    return G === O ? this.getTranslateX() : (this.setTranslateX(G), void 0)
                }, $.getTranslateX = function() {
                    return this._65O
                }, $.setTranslateX = function(S) {
                    var E = this,
                        Q = E.getWidth() - E._64I;
                    Q > S && (S = Q), S > 0 && (S = 0), S = X(S);
                    var K = E._65O;
                    E._65O = S, E.fp(hg, K, S)
                }
            },
            ms_ty: function(A) {
                A._23Q = 0, A._66O = 0, A._41o = function() {
                    return this.getHeight() < this._23Q
                }, A.getLogicalPoint = function(X) {
                    return Sq(X, this._canvas || this._view, this.tx ? this.tx() : 0, this.ty())
                }, A.ty = function(n) {
                    return n === O ? this.getTranslateY() : (this.setTranslateY(n), void 0)
                }, A.getTranslateY = function() {
                    return this._66O
                }, A.setTranslateY = function(w) {
                    var I = this,
                        p = I.getHeight() - I._23Q;
                    p > w && (w = p), w > 0 && (w = 0), w = X(w);
                    var o = I._66O;
                    I._66O = w, I.fp(Ie, o, w)
                }
            },
            ms_txy: function(x) {
                x._65O = 0, x._66O = 0, x.tx = function(s) {
                    return s === O ? this.getTranslateX() : (this.setTranslateX(s), void 0)
                }, x.ty = function(u) {
                    return u === O ? this.getTranslateY() : (this.setTranslateY(u), void 0)
                }, x.onTranslateEnded = function() {}, x.setTranslate = function(X, q, P) {
                    var U = this;
                    if (P = tl(P)) {
                        U._65I && U._65I.stop(!0);
                        var Q = U.tx(),
                            m = U.ty();
                        P.action = function(E) {
                            U.setTranslate(Q + (X - Q) * E, m + (q - m) * E)
                        }, P._37o = function() {
                            delete U._66I, delete U._65I, U.onTranslateEnded()
                        }, U._66I = 1, U._65I = tj(P)
                    } else U.tx(X), U.ty(q)
                }, x.getTranslateX = function() {
                    return this._65O
                }, x.setTranslateX = function(s) {
                    var V = this;
                    s = V.adjustTranslateX(s);
                    var j = V._65O;
                    V._65O = s, V.fp(hg, j, s)
                }, x.getTranslateY = function() {
                    return this._66O
                }, x.setTranslateY = function(t) {
                    var q = this;
                    t = q.adjustTranslateY(t);
                    var R = q._66O;
                    q._66O = t, q.fp(Ie, R, t)
                }, x.adjustTranslateX = function(x) {
                    return X(x)
                }, x.adjustTranslateY = function(s) {
                    return X(s)
                }, x.translate = function(t, x, l) {
                    this.setTranslate(this.tx() + t, this.ty() + x, l)
                }, x.getLogicalPoint = function(e) {
                    var C = this;
                    return Sq(e, this._canvas || C._view, C.tx(), C.ty())
                }
            },
            ms_dm: function(P) {
                P.dm = function(T) {
                    return T ? (this.setDataModel(T), void 0) : this.getDataModel()
                }, P.getDataModel = function() {
                    return this._dataModel
                }
            },
            ms_lp: function(q) {
                q.lp = function(Q) {
                    return this.getLogicalPoint(Q)
                }
            },
            ms_v: function(K) {
                K._disabled = !1, K.setDisabled = function(c, p) {
                    var q = this,
                        x = q._disabled;
                    x !== c && (x && (Fi(q._63O), delete q._63O), c && (xb(q._view, q._63O = oe(p)), q.iv()), q._disabled = c, q.fp("disabled", x, c))
                }, K.isDisabled = function() {
                    return this._disabled
                }, K.getDisabledDiv = function() {
                    return this._63O
                }, K.getView = function() {
                    return this._view
                }, K.addToDOM = function(A) {
                    var T = this,
                        j = T.getView(),
                        C = j.style;
                    A = A || W.body, A.appendChild(j), C.left = "0", C.right = "0", C.top = "0", C.bottom = "0", D(V, "resize", function() {
                        T.iv()
                    }), T.iv()
                }, K.setCursor = function(M) {
                    "default" === M && (M = this._defaultCursor || M);
                    var J = this.getView().style;
                    J.cursor = M, J.cursor = "-webkit-" + M, J.cursor = "-moz-" + M
                }, K.getWidth = function() {
                    return this._view.clientWidth
                }, K.getHeight = function() {
                    return this._view.clientHeight
                }, K.setWidth = function($) {
                    var E = this;
                    E._view.style.width = $ + dr, E.iv(), E.fp && E.fp(Kq, Y, $)
                }, K.setHeight = function(w) {
                    var D = this;
                    D._view.style.height = w + dr, D.iv(), D.fp && D.fp(_f, Y, w)
                }, K.setFocus = function(j) {
                    var E = this,
                        n = E._currentEditor;
                    return j && n && (n.getView && (n = n.getView()), n.contains(j.target)) ? !1 : (is(E._view), E.endEditing && E.endEditing(), E.fireViewEvent("focus"), !0)
                }, K.iv = function(x) {
                    this.invalidate(x)
                }, K.invalidate = function($) {
                    var M = this;
                    M._68I || (M._68I = 1, jf(M.validate, M, Y, $), M.onInvalidated && M.onInvalidated(), M.fireViewEvent("invalidate"))
                }, K.validate = function() {
                    var V = this,
                        r = V._view;
                    if (V._68I && (delete V._68I, r.parentNode))
                        if (0 === r.offsetWidth && 0 === r.offsetHeight && V._67I !== Y) V._67I === O && (V._67I = z.reinvalidateCount), V._67I > 0 ? V._67I-- : V._67I = Y, V.iv();
                        else {
                            V.fireViewEvent("beginValidate"), V.validateImpl(), V.onValidated && V.onValidated(), V.fireViewEvent("validate");
                            var c = V._63O;
                            c && (r.lastChild !== c && (Fi(c), xb(r, c)), Bh(c, 0, 0, V.getWidth(), V.getHeight())), nm(V), Li(V), Gk(V)
                        }
                }, K.layout = function(O, B, y, L) {
                    1 === arguments.length ? Bh(this, O) : Bh(this, O, B, y, L)
                }, K.addViewListener = function(j, W, N) {
                    var Z = this;
                    Z._67O || (Z._67O = new ge), Z._67O.add(j, W, N)
                }, K.removeViewListener = function(z, U) {
                    this._67O.remove(z, U)
                }, K.fireViewEvent = function(t) {
                    var w = this;
                    w._67O && (Sf(t) && (t = {
                        kind: t
                    }), w._67O.fire(t)), z.viewListener && z.viewListener(w, t)
                }
            },
            ms_tip: function(E) {
                E.setToolTipEnabled = function(X) {
                    var R = this;
                    X ? $r || R._13o || (R.enableToolTip(), R.fp("toolTipEnabled", !1, !0)) : R._13o && (R.disableToolTip(), R.fp("toolTipEnabled", !0, !1))
                }, E.isToolTipEnabled = function() {
                    return !!this._13o
                }, E.enableToolTip = function() {
                    var i = this;
                    if (!$r && !i._13o) {
                        i._13o = function(W) {
                            var c = i.getToolTip(W);
                            c != Y ? (z.toolTipContinual && z.isToolTipShowing() ? cd(W, c) : (Wd(), Lf = {
                                timeout: Kc(Zo, Oj),
                                e: W,
                                info: c
                            }), rm = {
                                e: W,
                                view: i
                            }) : Wd()
                        };
                        var F = i.getView();
                        D(F, Dd, i._13o), D(F, "mouseleave", z.hideToolTip)
                    }
                }, E.disableToolTip = function() {
                    var n = this;
                    if (n._13o) {
                        var F = n.getView();
                        J(F, Dd, n._13o), J(F, "mouseleave", z.hideToolTip), delete n._13o
                    }
                }, E.getToolTip = function(f) {
                    var j = this;
                    if (j.getDataAt) {
                        var G = j.getDataAt(f);
                        return G ? G.getToolTip() : Y
                    }
                    return j.getValue ? j.getValue() : void 0
                }
            },
            _52o: function(D) {
                D._zoom = 1, D._29I = yf, D.zoomIn = function(D, f) {
                    this.setZoom(this._zoom * Wm, D, f)
                }, D.zoomOut = function(o, A) {
                    this.setZoom(this._zoom / Wm, o, A)
                }, D.zoomReset = function(B, p) {
                    this.setZoom(1, B, p)
                }, D.scrollZoomIn = function(b) {
                    this.setZoom(this._zoom * wm, Y, b)
                }, D.scrollZoomOut = function(p) {
                    this.setZoom(this._zoom / wm, Y, p)
                }, D.pinchZoomIn = function(V) {
                    this.setZoom(this._zoom * El, Y, V)
                }, D.pinchZoomOut = function(Z) {
                    this.setZoom(this._zoom / El, Y, Z)
                }, D.adjustZoom = function(f) {
                    return yo > f ? yo : f > nf ? nf : f
                }, D.getZoom = function() {
                    return this._zoom
                }, D.setZoom = function(q, f, _) {
                    var W = this;
                    if (f = tl(f)) {
                        W._14o && W._14o.stop(!0);
                        var n = W._zoom;
                        f.action = function(d) {
                            W._96O(n + (q - n) * d, _)
                        }, f._37o = function() {
                            delete W._zooming, delete W._14o, W.onZoomEnded()
                        }, W._zooming = 1, W._14o = tj(f)
                    } else W._96O(q, _)
                }, D._96O = function(z, o) {
                    var p = this;
                    if (z = p.adjustZoom(z), z !== p._zoom) {
                        p.validate();
                        var m = p._29I,
                            H = p._zoom;
                        0 !== m.width && 0 !== m.height && (o = o ? o : {
                            x: m.x + m.width / 2,
                            y: m.y + m.height / 2
                        }, p.tx((o.x - m.x) * H - o.x * z), p.ty((o.y - m.y) * H - o.y * z)), p._zoom = z, p.fp("zoom", H, z)
                    }
                }
            },
            ms_edge: function(j) {
                j._2I = function(w) {
                    var Y = this;
                    Y._44I || (Y._44I = new no), Y._42I || (Y._42I = new no), Y._44I.add(w), Y._42I.add(w), Y._20I()
                }, j._4I = function(l) {
                    var Y = this;
                    Y._44I || (Y._44I = new no), Y._43I || (Y._43I = new no), Y._44I.add(l), Y._43I.add(l), Y._20I()
                }, j._16I = function(C) {
                    var c = this;
                    c._44I.remove(C), c._42I.remove(C), c._44I.isEmpty() && delete c._44I, c._42I.isEmpty() && delete c._42I, c._20I()
                }, j._18I = function(I) {
                    var x = this;
                    x._44I.remove(I), x._43I.remove(I), x._44I.isEmpty() && delete x._44I, x._43I.isEmpty() && delete x._43I, x._20I()
                }, j._20I = function() {
                    var z = this;
                    if (delete z._45I, !z._44I || z._44I.isEmpty()) return delete z._70O, void 0;
                    var J;
                    z._44I.each(function(B) {
                        B.isLooped() && (J || (J = {}), J[B._id] || (z._45I || (z._45I = new no), z._45I.add(B), J[B._id] = B))
                    }), J ? (z._70O = new no, z._44I.each(function(t) {
                        J[t._id] ? "A" === J[t._id] || (J[t._id] = "A", z._70O.add(t)) : z._70O.add(t)
                    })) : z._70O = z._44I
                }, j.hasAgentEdges = function() {
                    return !!this._49I && !this._49I.isEmpty()
                }, j.getSourceAgentEdges = function() {
                    return this._46I
                }, j.getTargetAgentEdges = function() {
                    return this._47I
                }, j._1I = function(U) {
                    var k = this;
                    k._46I || (k._46I = new no), k._48I || (k._48I = new no), k._46I.add(U), k._48I.add(U), k._19I()
                }, j._3I = function(G) {
                    var S = this;
                    S._47I || (S._47I = new no), S._48I || (S._48I = new no), S._47I.add(G), S._48I.add(G), S._19I()
                }, j._15I = function(q) {
                    var k = this;
                    k._46I.remove(q), k._48I.remove(q), k._46I.isEmpty() && delete k._46I, k._48I.isEmpty() && delete k._48I, k._19I()
                }, j._17I = function(V) {
                    var t = this;
                    t._47I.remove(V), t._48I.remove(V), t._47I.isEmpty() && delete t._47I, t._48I.isEmpty() && delete t._48I, t._19I()
                }, j._19I = function() {
                    var z = this;
                    delete z._49I;
                    var g = z._48I;
                    if (g && !g.isEmpty()) {
                        var J = {};
                        g.each(function(U) {
                            J[U._id] ? z._49I || (z._49I = new no) : J[U._id] = U
                        }), z._49I ? g.each(function(y) {
                            J[y._id] && (z._49I.add(y), delete J[y._id])
                        }) : z._49I = g
                    }
                }, j.getLoopedEdges = function() {
                    return this._45I
                }, j.getEdges = function() {
                    return this._70O
                }, j.getAgentEdges = function() {
                    return this._49I
                }, j.getSourceEdges = function() {
                    return this._42I
                }, j.getTargetEdges = function() {
                    return this._43I
                }, j._8I = function() {
                    this._70O && this._70O.each(function(l) {
                        l._7I()
                    })
                }
            }
        };
        fp(z, {
            getVersion: function() {
                return "7.2.6-dev12"
            }
        }, !0), fp(z, {
            numberDigits: 5,
            crossOrigin: "",
            baseZIndex: O,
            isTouchable: $r,
            mockTouch: !0,
            devicePixelRatio: V.devicePixelRatio ? V.devicePixelRatio : V.screen ? V.screen.deviceXDPI / V.screen.logicalXDPI : 1,
            reinvalidateCount: 3,
            hitMaxArea: 3e3,
            imageCacheThreshold: 20,
            autoMakeVisible: !0,
            autoHideScrollBar: !0,
            disabledOpacity: .4,
            disabledBackground: Q.disabledBackground,
            forceHierarchicalSerialization: !0,
            extractBatchTranslation: !1,
            extractShapeTranslation: !1,
            envmapProbeMinWaitTime: 300,
            envmapProbeMaxWaitTime: 25e3,
            EnvmapTextureSize: 1024,
            hoverDelay: 600,
            clickDelay: 200,
            toolTipDelay: 800,
            toolTipContinual: !1,
            getDragger: function() {
                return xn
            },
            lineCap: "butt",
            lineJoin: "round",
            imageGradient: "linear.northeast",
            dashPattern: [16, 16],
            blockMinSize: 1,
            textExtraWidth: 4,
            encodeStringKey: null,
            doubleClickSpeed: 500,
            doubleClickRange: 1,
            doubleTouchRange: 20,
            touchMoveThreshold: 10,
            animDuration: 200,
            animEasing: function(q) {
                return q * q
            },
            labelColor: Om,
            labelSelectColor: Pp,
            labelFont: "12px arial, sans-serif",
            widgetIndent: $r ? 30 : 20,
            widgetRowHeight: $r ? 30 : 20,
            widgetHeaderHeight: $r ? 32 : 22,
            widgetTitleHeight: $r ? 34 : 24,
            scrollBarColor: Ao,
            scrollBarSize: 7,
            scrollBarTimeout: 1e3,
            scrollBarMinLength: 20,
            scrollBarInteractiveSize: $r ? 32 : 16,
            zoomIncrement: 1.3,
            scrollZoomIncrement: 1.05,
            pinchZoomIncrement: 1.08,
            pinchZoomThreshold: 1,
            zoomMax: 20,
            zoomMin: .01,
            segmentResolution: 12,
            shapeResolution: 24,
            shapeSide: 24,
            intersectionLineRect: hm,
            intersectionLineLine: zm,
            isEnter: sp,
            isEsc: Fr,
            isDelete: wf,
            isSpace: Mf,
            isLeft: pg,
            isUp: lc,
            isRight: dq,
            isDown: Xg,
            isTouchEvent: gc,
            getTarget: pc,
            isString: Sf,
            isNumber: Jm,
            isBoolean: xk,
            isArray: ym,
            isSelectAll: Si,
            isFunction: Ap,
            isObject: jl,
            getPropertyValue: go,
            setPropertyValue: pl,
            addMethod: fp,
            createGradient: function(y, R, K, s, B, j, F, x) {
                var d = ti[R];
                return d(y, K, s, B, j, F, x)
            },
            appendToScreen: function(y) {
                y = y.getView ? y.getView() : y, (W.fullscreenElement || W.mozFullScreenElement || W.webkitFullscreenElement || W.msFullscreenElement || W.body).appendChild(y)
            },
            encodeString: function(H) {
                return F.Math.encodeBase64(H, z.encodeStringKey)
            },
            decodeString: function(A) {
                return F.Math.decodeBase64(A, z.encodeStringKey)
            },
            findView: function(t) {
                var a = function(z, u) {
                        var M = u._ht;
                        M && z.push(M);
                        var S = u.children,
                            T = S.length;
                        if (T)
                            for (var E = 0; T > E; E++) a(z, S[E])
                    },
                    P = [];
                a(P, W.body);
                var k = function(D, X) {
                    for (var c = "2d" === X ? vj.GraphView : Hn.Graph3dView, q = 0, E = D.length; E > q; q++)
                        if (D[q] instanceof c) return P[q];
                    return null
                };
                return "all" === t ? P : "2d" === t ? k(P, "2d") : "3d" === t ? k(P, "3d") : k(P, "3d") || k(P, "2d")
            },
            toggleFullscreen: function(e) {
                var j = e.getView();
                if (W.fullscreenElement || W.mozFullScreenElement || W.webkitFullscreenElement || W.msFullscreenElement) W.exitFullscreen ? W.exitFullscreen() : W.msExitFullscreen ? W.msExitFullscreen() : W.mozCancelFullScreen ? W.mozCancelFullScreen() : W.webkitExitFullscreen && W.webkitExitFullscreen();
                else {
                    var b = !0;
                    if (e.isSelfViewEvent) {
                        var V = e.getX(),
                            A = e.getY(),
                            Q = e.getWidth(),
                            D = e.getHeight(),
                            K = j.style.background,
                            C = j.style.backgroundColor;
                        K || C || (j.style.backgroundColor = "white"), j.requestFullscreen ? j.requestFullscreen() : j.msRequestFullscreen ? j.msRequestFullscreen() : j.mozRequestFullScreen ? j.mozRequestFullScreen() : j.webkitRequestFullscreen && j.webkitRequestFullscreen();
                        var h = setInterval(function() {
                            if (j !== (W.fullscreenElement || W.mozFullScreenElement || W.webkitFullscreenElement || W.msFullscreenElement)) clearInterval(h), e.setX(V), e.setY(A), e.setWidth(Q), e.setHeight(D), e._fullscreen = !1, j.style.oldBackgroundColor = C, e.iv();
                            else {
                                var r = F.Default.getWindowInfo();
                                (b || r.width !== e.getWidth() || r.height !== e.getHeight()) && (e.setX(r.left), e.setY(r.top), e.setWidth(r.width), e.setHeight(r.height), e._fullscreen = !0, e.iv(), b = !1)
                            }
                        }, 500)
                    } else {
                        var z = j.style.left,
                            H = j.style.top,
                            Q = j.style.width,
                            D = j.style.height,
                            K = j.style.background,
                            C = j.style.backgroundColor;
                        K || C || (j.style.backgroundColor = "white"), j.requestFullscreen ? j.requestFullscreen() : j.msRequestFullscreen ? j.msRequestFullscreen() : j.mozRequestFullScreen ? j.mozRequestFullScreen() : j.webkitRequestFullscreen && j.webkitRequestFullscreen();
                        var h = setInterval(function() {
                            if (j !== (W.fullscreenElement || W.mozFullScreenElement || W.webkitFullscreenElement || W.msFullscreenElement)) clearInterval(h), j.style.left = z, j.style.top = H, j.style.width = Q, j.style.height = D, j.style.oldBackgroundColor = C, e.iv();
                            else {
                                var d = F.Default.getWindowInfo();
                                (b || d.width !== e.getWidth() || d.height !== e.getHeight()) && (Bh(e), b = !1)
                            }
                        }, 500)
                    }
                }
            },
            appendTimeStamp: function(B) {
                return B
            },
            setCompType: function(F, d) {
                Sf(d) && d.substr(0, 12) == _p && (d = z.parse(d)), Ap(d) || jl(d) ? wj[F] = d : Wc(F)
            },
            getCompType: function(w) {
                var d = wj[w];
                return d === O && Kf.test(w) && Wc(w), d
            },
            getCompTypeMap: function() {
                return wj
            },
            drawCompType: function(Q, h, X, A, c, V) {
                Q(h, X, A, c, V)
            },
            numberListener: function() {
                var R = {
                    46: 1,
                    8: 1,
                    9: 1,
                    27: 1,
                    13: 1,
                    109: 1,
                    110: 1,
                    189: 1,
                    190: 1
                };
                return function(g) {
                    var f = g.keyCode;
                    R[f] || 65 === f && z.isCtrlDown(g) || 86 === f && z.isCtrlDown(g) || 67 === f && z.isCtrlDown(g) || 88 === f && z.isCtrlDown(g) || f >= 35 && 40 >= f || (g.shiftKey || 48 > f || f > 57) && (96 > f || f > 105) && g.preventDefault()
                }
            }(),
            ignoreKeyCodes: [122, 123],
            preventDefault: function(V) {
                var k = V.target.tagName;
                ("DIV" === k || "CANVAS" === k) && !(z.ignoreKeyCodes.indexOf(V.keyCode) >= 0) && ("keydown" !== V.type || pg(V) || dq(V) || lc(V) || Xg(V) || wf(V) || 65 === V.keyCode && (V.metaKey || V.ctrlKey)) && V.cancelable === !0 && (V.preventDefault(), V.preventManipulation && V.preventManipulation())
            },
            getWindowInfo: function() {
                var O = W.documentElement,
                    q = O && (O.scrollLeft || O.scrollTop) ? O : W.body;
                return {
                    target: q,
                    left: q.scrollLeft,
                    top: q.scrollTop,
                    width: V.innerWidth || q.clientWidth,
                    height: V.innerHeight || q.clientHeight
                }
            },
            isDragging: function() {
                return !!xn
            },
            isLeftButton: function(f) {
                return gc(f) ? !0 : 0 === f.button
            },
            isMiddleButton: function(c) {
                return gc(c) ? !1 : c && (1 === c.button || 4 & (c.buttons || 0))
            },
            isRightButton: function(O) {
                return gc(O) ? !1 : O && (2 === O.button || 2 & (O.buttons || 0))
            },
            isInput: function(u) {
                if (!u) return !1;
                var $ = u.tagName;
                return "INPUT" === $ || "TEXTAREA" === $ || "SELECT" === $
            },
            getTouchCount: function(O) {
                return gc(O) ? O.touches.length : 1
            },
            isDoubleClick: function() {
                function Q(n) {
                    n.details = 0, n.timeout = null, n.lastPoint = null
                }
                var a = {};
                return pb = new Hk, Dm = pb.getTime(),
                    function(E) {
                        if (Ke(E) > 1) return !1;
                        var U = E.button == Y ? "" : E.button,
                            X = E.type + U,
                            n = X + "_isDoubleClick",
                            V = a[X];
                        if (V || (V = a[X] = {
                                details: 0,
                                timeout: null,
                                lastPoint: null
                            }), E[n] === O) {
                            E[n] = !0;
                            var Z = Lo(E);
                            V.timeout && (ur(V.timeout), V.timeout = null);
                            var L = gc(E) ? z.doubleTouchRange : z.doubleClickRange;
                            V.lastPoint && cm(V.lastPoint, Z) > L && Q(V), V.lastPoint = Z, V.details++, V.timeout = Kc(function() {
                                Q(this)
                            }.bind(V), z.doubleClickSpeed)
                        }
                        return 2 === V.details
                    }
            }(),
            isShiftDown: function(m) {
                return m ? m.shiftKey : Ll["16"]
            },
            isCtrlDown: function(z) {
                return z ? ro ? z.metaKey : z.ctrlKey : ro ? Ll["91"] : Ll["17"]
            },
            getClientPoint: function(Q) {
                return gc(Q) && (Q = zd(Q)), {
                    x: Q.clientX,
                    y: Q.clientY
                }
            },
            isMouseEvent: function(X) {
                return X instanceof MouseEvent || 0 === X.type.indexOf("mouse")
            },
            getTargetElement: function(X) {
                var R, g = rh(X);
                if (R = z.isMouseEvent(X) || !W.elementFromPoint ? X.target : W.elementFromPoint(g.x, g.y), Bp && W.elementFromPoint) {
                    for (var l = [], f = [];
                        "none" === R.style.pointerEvents;) l.push(R), f.push(R.style.display || ""), R.style.display = "none", R = W.elementFromPoint(g.x, g.y);
                    l.forEach(function(g, H) {
                        g.style.display = f[H]
                    })
                }
                return R
            },
            getPagePoint: function(D) {
                return gc(D) && (D = zd(D)), {
                    x: D.pageX,
                    y: D.pageY
                }
            },
            createObject: function(N, K) {
                var e = new N;
                for (var T in K) {
                    var h = K[T];
                    if (Ap(h)) e[T] = h;
                    else if (0 === T.indexOf("s:")) e.s(T.substr(2), K[T]);
                    else if (0 === T.indexOf("a:")) e.a(T.substr(2), K[T]);
                    else {
                        var z = Oe(T),
                            h = K[T];
                        e[z] ? (e[z](h), "setToolTip" === z && e.enableToolTip && e.enableToolTip()) : e[T] = h
                    }
                }
                return e
            },
            setImage: function(p, y, b, j) {
                var Z = arguments.length;
                4 === Z ? Hg(p, j, y, b) : 2 === Z ? Sf(y) ? y.substr(0, 12) == _p ? bo(p, z.parse(y)) : Hg(p, y) : bo(p, y) : 1 === Z && Hg(p, p)
            },
            getImage: function(Z, I, J) {
                var L;
                if (Z == Y) return Y;
                if (jl(Z) ? L = Z : (L = Af[Z], Z && L === O && (mh && mh[Z] || Hg(Z, Z))), I && L && L.tagName) {
                    var K;
                    K = "override" === J ? "colors_override" : "override_rgb" === J ? "colors_override_rgb" : "override_a" === J ? "colors_override_a" : "colors", L[K] || (L[K] = {
                        __count__: 0
                    });
                    var e = L[K][I];
                    return e || (L[K].__count__ > z.imageCacheThreshold && (L[K] = {
                        __count__: 0
                    }), e = Io(L, Wb(I), L.width, L.height, J), L[K][I] = e, L[K].__count__++), e
                }
                return L
            },
            isImageComplete: function(y, d, e) {
                var k = Di(y);
                if (!k) return !1;
                if (k.tagName) return k.complete;
                for (var S, y, v, T = k.comps, M = !0, l = 0, B = T.length; B > l; l++)
                    if (S = T[l], v = S.type, "image" === S.type) {
                        y = S.name, y && y.func && (y = Kg(y, d));
                        var C = bs(y, d, e);
                        if (!C) {
                            M = !1;
                            break
                        }
                    } else if (Kf.test(v) && z.getCompType(v) === O) {
                    M = !1, Wc(v);
                    break
                }
                return M
            },
            getId: function() {
                var P = 1;
                return function() {
                    return ++P
                }
            }(),
            callLater: function(v, i, Q, A) {
                var O = function() {
                    v.apply(i, Q)
                };
                return A ? Kc(O, A) : V.requestAnimationFrame(O)
            },
            cancelLater: function(H, I) {
                I ? ur(H) : V.cancelAnimationFrame(H)
            },
            clone: function(N) {
                if (null == N || "object" != typeof N) return N;
                if (N instanceof Date) {
                    var g = new Date;
                    return g.setTime(N.getTime()), g
                }
                if (N instanceof Array) {
                    for (var g = [], F = 0, A = N.length; A > F; F++) g[F] = Vm(N[F]);
                    return g
                }
                if (N instanceof no) {
                    for (var g = new no, F = 0, A = N.length; A > F; F++) g.set(F, Vm(N.get(F)));
                    return g
                }
                if (N instanceof Mc) return N;
                if (N instanceof _c) {
                    var g = new _c;
                    return g.deserialize(N.serialize()), g
                }
                if (N instanceof G) {
                    var g = {};
                    for (var H in N) N.hasOwnProperty(H) && (g[H] = Vm(N[H]));
                    return g
                }
                return N
            },
            callWhenLoaded: function(z, u) {
                u = u || 100;
                var i = Tf(z, u);
                $o || ($o = {}), $o[i] = {
                    tick: i,
                    cb: z,
                    delay: u
                }
            },
            beforeLoadURL: function(L, I) {
                if ($o) {
                    var J = {};
                    for (var I in $o) {
                        var Z = $o[I];
                        ur(Z.tick);
                        var Y = Tf(Z.cb, Z.delay);
                        J[Y] = {
                            tick: Y,
                            delay: Z.delay,
                            cb: Z.cb
                        }
                    }
                    $o = J
                }
                return z.convertURL ? z.convertURL(L, I) : L
            },
            convertURL: function(I) {
                return I
            },
            handleRefGraphLoaded: function() {},
            handleCompTypeLoaded: function() {},
            handleImageLoaded: function() {},
            handleUnfoundImage: function() {
                return z.getImage("default_blank")
            },
            resizeImage: function(u, $, t, n) {
                t || (t = $), n || (n = ts());
                var p = n.getContext("2d");
                return yh(n, $, t, 1), p.drawImage(u, 0, 0, $, t), n
            },
            resizeImagePOT: function(V, X, F) {
                if (!V || !V.tagName) return V;
                var C = V.width,
                    q = V.height;
                if (!C || !q) return V;
                if (_q.isPOT(C) && _q.isPOT(q) && (!X || C === q)) return V;
                var f, j;
                return X ? j = f = _q.nearestPOT(Math.min(C, q)) : (f = _q.nearestPOT(C), j = _q.nearestPOT(q)), z.resizeImage(V, f, j, F)
            },
            sortFunc: function(q, F) {
                if (q === F) return 0;
                if (q == Y && F != Y) return 1;
                if (q != Y && F == Y) return -1;
                if (q == Y && F == Y) return 0;
                var A, $ = typeof q,
                    c = typeof F;
                return $ === kn && c === kn ? A = q.localeCompare(F) : $ === Op && c === Op && (A = q - F), A === O && (A = ("" + q).localeCompare("" + F)), A > 0 ? 1 : 0 > A ? -1 : 0
            },
            getClassMap: function() {
                return bb
            },
            getClass: function(H) {
                if (Sf(H)) {
                    var G, F = bb[H];
                    if (!F) {
                        G = H.split("."), F = V;
                        for (var B = 0; B < G.length; B++) F = F[G[B]];
                        bb[H] = F
                    }
                    return F
                }
                return H
            },
            def: function(Q, K, w) {
                var z, y, x, t = function() {};
                if (t.prototype = K.prototype, z = new t, Sf(Q)) {
                    if (bb[Q]) throw "'" + Q + "' already defined";
                    x = Mo(Q), z.getClassName = function() {
                        return Q
                    }
                } else x = Q;
                if (z.constructor = x, z.getClass = function() {
                        return x
                    }, z.getSuperClass = function() {
                        return K
                    }, w)
                    for (y in w) po[y] && po.hasOwnProperty(y) ? po[y](z, w) : Im(z, w, y);
                x.prototype = z, x.superClass = K.prototype
            },
            startAnim: function() {
                var R = function(p) {
                    p.duration && (p.startTime = ji()), p.timeId = jf(p.tick, Y, Y, p.interval)
                };
                return function(M) {
                    return M = Vm(M), M.easing = M.easing || z.animEasing, M.duration || M.frames || (M.duration = z.animDuration), M.t = 0, M.duration ? M.interval = 0 : (M.frame = 0, M.interval = M.interval || 10), M.tick = function() {
                        if (M.duration) {
                            var $ = (ji() - M.startTime) / M.duration;
                            if ($ > 1 && ($ = 1), M.t = $, M.action(M.easing($), $), !M.isRunning()) return;
                            1 === $ ? M.stop() : M._isPaused || (M.timeId = jf(M.tick))
                        } else {
                            if (M.frame++, $ = M.t = M.frame / M.frames, M.action(M.easing($), $), !M.isRunning()) return;
                            M.frame < M.frames ? M._isPaused || (M.timeId = jf(M.tick, Y, Y, M.interval)) : M.stop()
                        }
                    }, M.resume = function() {
                        M._isPaused && (delete M._isPaused, M.duration ? M.t < 1 && (M.startTime = ji() - M.duration * M.t, M.timeId = jf(M.tick)) : M.frame < M.frames && (M.timeId = jf(M.tick, Y, Y, M.interval)))
                    }, M.pause = function() {
                        _j(M.timeId, !M.duration), M._isPaused = !0
                    }, M.isPaused = function() {
                        return this._isPaused
                    }, M.stop = function(q) {
                        M.isRunning() && (_j(M.timeId, !M.duration), delete M.timeId, M.duration ? M.t < 1 && q && (M.t = 1, M.action(M.easing(1), 1)) : M.frame < M.frames && q && (M.frame = M.frames, M.action(M.easing(1), 1)), M._37o && M._37o(), M.finishFunc && M.finishFunc())
                    }, M.isRunning = function() {
                        return M.timeId != Y
                    }, M.delay ? jf(R, Y, [M], M.delay) : R(M), M
                }
            }(),
            getTextSize: function() {
                var c = {},
                    Q = W ? ts().getContext("2d") : Y;
                return function(h, N) {
                    Q.font = h ? h : Wl;
                    var D = c[Q.font];
                    return D || (D = 2 * Q.measureText("e").width + 4, c[Q.font] = D), {
                        width: Q.measureText(N).width + z.textExtraWidth,
                        height: D
                    }
                }
            }(),
            drawText: function(U, m, u, o, P, L, O, i, l, d, K) {
                if (m != Y) {
                    var e = xo(u, m),
                        c = {};
                    c.y = d && d !== mp ? d === vi ? L + e.height / 2 : L + i - e.height / 2 : L + i / 2, c.x = l && l !== _i ? l === rj ? P + O - e.width / 2 : P + O / 2 : P + e.width / 2, An(U, m, c, u, o), K && xr(U, m, u, o, c.x, c.y, e.width, K)
                }
            },
            getDistance: function(y, j) {
                var i = y.length;
                return j ? 3 === i ? x(Zl(y[0] - j[0]) + Zl(y[1] - j[1]) + Zl(y[2] - j[2])) : 2 === i ? x(Zl(y[0] - j[0]) + Zl(y[1] - j[1])) : y.z === O ? x(Zl(j.x - y.x) + Zl(j.y - y.y)) : x(Zl(j.x - y.x) + Zl(j.y - y.y) + Zl(j.z - y.z)) : 3 === i ? x(Zl(y[0]) + Zl(y[1]) + Zl(y[2])) : 2 === i ? x(Zl(y[0]) + Zl(y[1])) : void 0
            },
            brighter: function(i, T) {
                return 0 > T && (T = -T), Bf(i, T ? T : 40)
            },
            darker: function(i, G) {
                return G > 0 && (G = -G), Bf(i, G ? G : -40)
            },
            unionPoint: function(N, A) {
                if (!N) return Y;
                if (2 === arguments.length) return N && A ? {
                    x: h(N.x, A.x),
                    y: h(N.y, A.y),
                    width: r(N.x - A.x),
                    height: r(N.y - A.y)
                } : Y;
                var k = N;
                if (k._as && (k = k._as), k.length === O) return Y;
                var F = k.length;
                if (0 >= F) return Y;
                for (var x = 1, B = k[0], g = {
                        x: B.x,
                        y: B.y,
                        width: 0,
                        height: 0
                    }; F > x; x++) {
                    B = k[x];
                    var H = h(g.x, B.x),
                        _ = q(g.x + g.width, B.x),
                        z = h(g.y, B.y),
                        W = q(g.y + g.height, B.y);
                    g.x = H, g.y = z, g.width = _ - H, g.height = W - z
                }
                return g
            },
            unionRect: function(d, P) {
                if (d && !P) return Vm(d);
                if (!d && P) return Vm(P);
                if (d && P) {
                    var s = {
                        x: h(d.x, P.x),
                        y: h(d.y, P.y)
                    };
                    return s.width = q(d.x + d.width, P.x + P.width) - s.x, s.height = q(d.y + d.height, P.y + P.height) - s.y, s
                }
                return Y
            },
            containsPoint: function(j, c, S, O) {
                if (O != Y && 1 !== O) {
                    var l = j.x + j.width / 2,
                        R = j.y + j.height / 2;
                    j = {
                        x: l - j.width / 2 * O,
                        y: R - j.height / 2 * O,
                        width: j.width * O,
                        height: j.height * O
                    }
                }
                if (S) {
                    var t = j.width / 2,
                        V = j.height / 2,
                        h = b(-S),
                        s = u(-S),
                        o = c.x - j.x - t,
                        m = c.y - j.y - V;
                    return c = {
                        x: s * o - h * m,
                        y: h * o + s * m
                    }, mm({
                        x: -t,
                        y: -V,
                        width: j.width,
                        height: j.height
                    }, c)
                }
                return !(!j || c.x < j.x || c.y < j.y || c.x > j.x + j.width || c.y > j.y + j.height)
            },
            containsRect: function(I, b) {
                if (!I || !b) return !1;
                var v = b.x,
                    R = b.y,
                    M = b.width,
                    r = b.height,
                    O = I.width,
                    d = I.height;
                if (0 > (O | d | M | r)) return !1;
                var o = I.x,
                    G = I.y;
                if (o > v || G > R) return !1;
                if (O += o, M += v, v >= M) {
                    if (O >= o || M > O) return !1
                } else if (O >= o && M > O) return !1;
                if (d += G, r += R, R >= r) {
                    if (d >= G || r > d) return !1
                } else if (d >= G && r > d) return !1;
                return !0
            },
            intersectsRect: function(X, K) {
                if (!X || !K) return !1;
                var I = K.width,
                    T = K.height,
                    q = X.width,
                    S = X.height;
                if (0 >= q || 0 >= S || 0 >= I || 0 >= T) return !1;
                var A = K.x,
                    H = K.y,
                    l = X.x,
                    n = X.y;
                return q += l, S += n, I += A, T += H, q > A && S > H && I > l && T > n
            },
            intersection: function(E, J) {
                if (!E || !J) return Y;
                var S = J.x,
                    a = J.y,
                    M = E.x,
                    W = E.y,
                    f = S,
                    i = a,
                    g = M,
                    L = W;
                return f += J.width, i += J.height, g += E.width, L += E.height, M > S && (S = M), W > a && (a = W), f > g && (f = g), i > L && (i = L), f -= S, i -= a, 0 >= f || 0 >= i ? Y : {
                    x: S,
                    y: a,
                    width: f,
                    height: i
                }
            },
            grow: function(D, y, o) {
                o === O && (o = y), D.x -= y, D.y -= o, D.width = D.width + 2 * y, D.height = D.height + 2 * o
            },
            getScreenPoint: function(L, o, m, f, G, Q, v) {
                var u = m.getBoundingClientRect(),
                    j = L * (Q || 1) - m.scrollLeft + (f || 0),
                    M = o * (v || 1) - m.scrollTop + (G || 0),
                    x = uc(m, !1);
                if (x) {
                    var e = new Cb(j, M, 0);
                    return e.applyMatrix4(x), console.log(e), {
                        x: e.x,
                        y: e.y
                    }
                }
                return {
                    x: j + u.left,
                    y: M + u.top
                }
            },
            getLogicalPoint: function(p, i, D, u, Y, k) {
                var S, n, h = i.getBoundingClientRect();
                p.target ? (Gp(p) ? ro ? Ll["91"] = !0 : Ll["17"] = !0 : ro ? Ll["91"] = !1 : Ll["17"] = !1, Ll["16"] = ck(p) ? !0 : !1, p = gc(p) ? zd(p) : p, S = p.clientX, n = p.clientY) : (S = p.x, n = p.y);
                var $ = uc(i, !0);
                if ($) {
                    var O = new Cb(S, n, 0);
                    O.applyMatrix4($);
                    do {
                        if (Math.abs(O.z) <= 1e-6) break;
                        var x = new Cb(S, n, 1);
                        if (x.applyMatrix4(matrix), Math.abs(x.z) <= 1e-6) {
                            O = x;
                            break
                        }
                        if (x.sub(O), Math.abs(x.z) <= 1e-6) break;
                        O.addScaledVector(x, -O.z / x.z)
                    } while (!1);
                    return {
                        x: (O.x + i.scrollLeft - (D || 0)) / (Y || 1),
                        y: (O.y + i.scrollTop - (u || 0)) / (k || 1)
                    }
                }
                return {
                    x: (S - h.left + i.scrollLeft - (D || 0)) / (Y || 1),
                    y: (n - h.top + i.scrollTop - (u || 0)) / (k || 1)
                }
            },
            removeHTML: function() {
                var z;
                return function(C) {
                    return C && C.getView && (C = C.getView()), C && C.parentNode ? z === C ? !0 : (z = C, C.parentNode.removeChild(C), z = Y, !0) : !1
                }
            }(),
            getToolTipDiv: function() {
                if (!Qi) {
                    Qi = Qr(), Qf = Qr();
                    var q = Qi.style;
                    z.baseZIndex != Y && (q.zIndex = Hh(z.baseZIndex) + 3 + ""), q.whiteSpace = "nowrap", q.color = z.toolTipLabelColor, q.background = z.toolTipBackground, q.font = z.toolTipLabelFont, q.padding = "5px", q.boxShadow = "0px 0px 3px " + z.toolTipShadowColor
                }
                return Qi
            },
            isToolTipShowing: function() {
                return Qi && Qi.parentNode ? !0 : Qf && Qf.parentNode ? !0 : !1
            },
            updateToolTipContent: function(t, W) {
                if (z.isToolTipShowing() && (W || (W = rm && rm.view), t === O && W && rm.e && (t = W.getToolTip(rm.e)), t != Y)) {
                    var R;
                    t.html ? (t = t.html, R = Qf) : R = Qi, R.innerHTML = t
                }
            },
            hideToolTip: function() {
                if (z.isToolTipShowing()) {
                    Fi(Qi), Fi(Qf), yi();
                    var A = rm && rm.view;
                    A && A.onHideToolTip && A.onHideToolTip(), rm = Y
                }
            },
            showToolTip: function(d, S, s) {
                if (!d || S == Y) return Wd(), void 0;
                z.getToolTipDiv();
                var W, L;
                if (S.html ? (S = S.html, W = Qf, Fi(Qi)) : (W = Qi, Fi(Qf)), L = W.style, W.innerHTML = S, W.parentNode || F.Default.appendToScreen(W), d.target) {
                    d = rh(d);
                    var V = kb(),
                        k = d.x,
                        b = d.y,
                        a = $r ? 60 : 12;
                    if ($r) {
                        var _ = W.getBoundingClientRect();
                        L.left = k - _.width / 2 + dr, L.top = b - _.height - a < V.top ? b + a + dr : b - _.height - a + dr
                    } else {
                        L.left = k + a + dr, L.top = b + a + dr;
                        var _ = W.getBoundingClientRect();
                        _.left + _.width > V.width && (L.left = k - a - _.width + dr), _.top + _.height > V.height && (L.top = b - a - _.height + dr), _.left < 0 && (L.left = k + a + dr), _.top < 0 && (L.top = b + a + dr)
                    }
                } else L.left = d.x + dr, L.top = d.y + dr;
                yi(), s === O ? s = rm && rm.view : rm = {
                    e: d,
                    view: s
                }, s && s.onShowToolTip && s.onShowToolTip()
            },
            startDragging: function(n, s, U) {
                U == O && (U = !0), n !== xn && (xn ? U && (gc(s) ? xn.handleWindowTouchEnd(s) : xn.handleWindowMouseUp(s)) : gc(s) ? (D(V, qe, fl), D(V, nq, aq), D(V, "blur", aq)) : (D(V, Dd, rp), D(V, Wk, Gi), D(V, "blur", Gi)), xn = n)
            },
            getImageMap: function() {
                return Af
            },
            toBoundaries: function(I, C, n, F) {
                var Z = [];
                return ml(I, C, n, F).forEach(function(n) {
                    var E = [];
                    n.forEach(function(h) {
                        E.push(h.x, h.y)
                    }), Z.push(E)
                }), Z
            },
            getCurrentKeyCodeMap: function() {
                return Ll
            },
            drawCenterImage: function(f, $, F, G, p, w, E, u) {
                !p && w && w.isSelfViewEvent && (p = w);
                var g = ps($, p, w),
                    J = hh($, p, w);
                ic(f, $, X(F - g / 2), X(G - J / 2), g, J, p, w, E, u)
            },
            drawStretchImage: function(m, $, P, d, V, q, M, U, n, T, S, J) {
                !U && n && n.isSelfViewEvent && (U = n);
                var p, Z = ps($, U, n, q),
                    G = hh($, U, n, M);
                "uniform" === P ? (p = h(q / Z, M / G), Z *= p, G *= p, d += X((q - Z) / 2), V += X((M - G) / 2), q = Z, M = G) : "centerUniform" === P && ((Z > q || G > M) && (p = h(q / Z, M / G), Z *= p, G *= p), d += X((q - Z) / 2), V += X((M - G) / 2), q = Z, M = G);
                var Q = m.interactiveInfo;
                if (Q) {
                    var b;
                    if (b = "center" === P ? {
                            x: d + q / 2 - Z / 2,
                            y: V + M / 2 - G / 2,
                            width: Z,
                            height: G
                        } : {
                            x: d,
                            y: V,
                            width: q,
                            height: M
                        }, Q.rect) {
                        var w = Q.compInfos,
                            t = w.length;
                        t && (w[t - 1].rect.image = $)
                    } else Q.rect = b
                }
                if ("center" === P) {
                    var l = S !== !1 && (Z > q || G > M);
                    l && (m.save(), m.beginPath(), m.rect(d, V, q, M), m.clip()), ic(m, $, d + q / 2 - Z / 2, V + M / 2 - G / 2, Z, G, U, n, T, J), l && m.restore()
                } else ic(m, $, d, V, q, M, U, n, T, J)
            },
            toCanvas: function(B, M, n, t, q, R, $, c, z) {
                B = Di(B, $), M = M || ps(B, q), n = n || hh(B, q);
                var Y = ts(),
                    O = Bc(Y);
                return c ? (yh(Y, M, n, c), O.scale(c, c)) : yh(Y, M, n, 1), Iq(O, B, t, 0, 0, M, n, q, R, $, z), B && B.clampToEdge && (Y.clampToEdge = B.clampToEdge), O.restore(), Y
            },
            toGrayColor: function(j) {
                if (!j) return j;
                var W = gr(j),
                    S = X(.299 * W[0] + .587 * W[1] + .114 * W[2]);
                return "rgba(" + S + "," + S + "," + S + "," + W[3] / 255 + ")"
            },
            createGradientImage: function(G, H, Y, p) {
                for (var Q = ["L", 0, 0, G, 0, 1, 0, 0, 1, 0, 0], K = 0, h = Math.min(H.length, Y.length); h > K; K++) Q.push(Y[K], H[K]);
                var u = F.Default.toCanvas({
                    width: G,
                    height: G,
                    clampToEdge: !0,
                    comps: [{
                        type: "shape",
                        rotation: p || 0,
                        points: [0, 0, G, 0, G, G, 0, G],
                        background: "#ffffff",
                        gradientPack: Q
                    }]
                });
                return u
            },
            createElement: function(A, S, V, x) {
                var T = W.createElement(A);
                return Wo(T, S || Q.widgetBorder, 2), T.style.font = V ? V : Wl, x != Y && (T.value = x), z.onElementCreated && z.onElementCreated(T), T
            },
            containedInView: function(t, L) {
                var P = ds(L).getBoundingClientRect();
                return mm({
                    x: P.left,
                    y: P.top,
                    width: P.width,
                    height: P.height
                }, Lo(t))
            },
            isIsolating: function() {
                return Rk > 0
            },
            setIsolating: function(i) {
                i ? Rk++ : Rk--
            },
            getMSMap: function() {
                return po
            },
            stringify: function(i, J, R) {
                var p = Date.prototype.toJSON;
                Date.prototype.toJSON = function() {
                    return "__ht__date" + this.getTime()
                };
                var e = _c.prototype.toJSON;
                _c.prototype.toJSON = function() {
                    return "__ht__dataModel" + this.serialize(0)
                }, J = R ? 0 : J == Y ? 2 : J;
                var u = JSON.stringify(i, function(s, V) {
                    return "function" == typeof V ? "__ht__" + (V.__ht__ || V.toString()) : Jm(V) ? Fj(V) : V instanceof F.List ? "__ht__list" + (V.__ht__list || z.stringify(V._as)) : V
                }, J);
                return Date.prototype.toJSON = p, _c.prototype.toJSON = e, R && (u = _p + tq(u)), u
            },
            parse: function(P, t) {
                return Sf(P) ? P.substr(0, 12) != _p || (P = Dp(P.substr(12)), Sf(P)) ? (t = t || {}, JSON.parse(P, function(L, M) {
                    if (Sf(M))
                        if (t.ignoreFunction || "__ht__function" != M.substr(0, 14)) {
                            if (!t.ignoreDate && "__ht__date" == M.substr(0, 10)) return new Date(Hh(M.substr(10)));
                            if ("__ht__list" === M.substr(0, 10)) return new no(z.parse(M.substr(10)));
                            if (!t.ignoreDataModel && "__ht__dataModel" === M.substr(0, 15)) {
                                var m = new _c;
                                return m.deserialize(z.parse(M.substr(15))), m
                            }
                        } else {
                            var k = M.indexOf("{") + 1,
                                S = M.lastIndexOf("}"),
                                i = M.indexOf("(") + 1,
                                F = M.indexOf(")");
                            if (k && S && i && F) try {
                                var K = new Function(M.substring(i, F), M.substring(k, S));
                                return K.__ht__ = M.substr(6), K
                            } catch (P) {
                                throw console.info("=== SyntaxError ===\n", M), P
                            }
                        }
                    return M
                })) : P : P
            },
            loadJS: function(w, y) {
                y && w.push(y);
                var p = w.shift();
                if (ym(p)) w = p.contact(w), z.loadJS(w);
                else if (Ap(p)) p(), z.loadJS(w);
                else if (Sf(p)) {
                    var n = W.createElement("script");
                    n.onload = function() {
                        z.loadJS(w)
                    }, n.setAttribute("src", p), W.getElementsByTagName("head")[0].appendChild(n)
                } else w.length && z.loadJS(w)
            },
            extendClass: function(v, j) {
                var t = v.prototype;
                for (var _ in j) po[_] && po.hasOwnProperty(_) ? po[_](t, j) : t[_] = j[_]
            },
            toRoundedCorner: function() {
                function Z(u, y, D) {
                    u.x = y.x, u.y = y.e || D, u.z = y.y
                }
                var N = new Cb,
                    n = new Cb,
                    X = new Cb,
                    _ = new Cb;
                return function(E, I) {
                    var o, P = 0;
                    E.getPoints && (P = E.getElevation(), E = E.getPoints()), o = E instanceof no ? E : new no(E);
                    var A = o.size();
                    if (0 >= I) return {
                        points: o
                    };
                    var W = new no,
                        j = new no,
                        y = o.get(0);
                    Z(N, y, P), W.add(y), j.add(1);
                    for (var D = 1; A > D; D++)
                        if (A > D + 1) {
                            var w = o.get(D),
                                K = o.get(D + 1);
                            Z(n, w, P), Z(X, K, P), _.subVectors(N, n).setLength(Math.min(.99 * _.length(), I)).add(n), w.e !== O || y.e !== O ? W.add({
                                x: _.x,
                                y: _.z,
                                e: _.y
                            }) : W.add({
                                x: _.x,
                                y: _.z
                            }), W.add(w), _.subVectors(X, n).setLength(Math.min(.99 * _.length(), I)).add(n), w.e !== O || K.e !== O ? W.add(y = {
                                x: _.x,
                                y: _.z,
                                e: _.y
                            }) : W.add(y = {
                                x: _.x,
                                y: _.z
                            }), N.copy(_), j.addAll([2, 3])
                        } else W.add(o.get(D)), j.add(2);
                    return {
                        points: W,
                        segments: j
                    }
                }
            }(),
            toColorData: gr,
            setCanvas: yh,
            createDiv: Qr,
            createDisabledDiv: oe,
            createView: Dl,
            createCanvas: ts,
            appendChild: xb,
            initContext: Bc,
            checkLoadingImage: nm,
            translateAndScale: vb,
            layout: Bh,
            getPosition: Mj,
            drawPoints: Am,
            drawRoundRect: xf,
            drawBorder: Pk,
            setFocus: is,
            getter: Uh,
            setter: Oe,
            isEmptyObject: Mq,
            cameraPriority: function() {
                var A = {
                    skybox: 0,
                    main: 1e4,
                    top: 1e7,
                    infinity: 1 / 0
                };
                return G.seal(G.defineProperties({}, {
                    skybox: {
                        configurable: !1,
                        enumerable: !1,
                        get: function() {
                            return A.skybox
                        },
                        set: function(G) {
                            if (G >= A.main) throw new RangeError("Skybox camera must have lower priority than the main camera.");
                            A.skybox = Number(G)
                        }
                    },
                    main: {
                        configurable: !1,
                        enumerable: !1,
                        get: function() {
                            return A.main
                        },
                        set: function(m) {
                            if (m <= A.skybox) throw new RangeError("Main camera must have higher priority than the skybox camera.");
                            if (m >= A.top) throw new RangeError("Main camera must have lower priority than the top camera.");
                            A.main = Number(m)
                        }
                    },
                    top: {
                        configurable: !1,
                        enumerable: !1,
                        get: function() {
                            return A.top
                        },
                        set: function(p) {
                            if (p <= A.main) throw new RangeError("Top camera must have higher priority than the main camera.");
                            A.top = Number(p)
                        }
                    }
                }))
            }()
        }, !0), fp(C, {
            autoAdjustIndex: 1,
            hierarchicalRendering: 1,
            adjustChildrenToTop: 1,
            autoHideScrollBar: 1,
            autoUpdate: 1,
            firstPersonMode: 1,
            ortho: 1,
            strict: 1,
            stickToRight: 1,
            instant: 1,
            closePath: 1,
            hierarchical: 1,
            doubleClickToToggle: 1,
            continuousLayout: 1,
            syncSize: 1
        }, !0);
        var ll = z.disabledOpacity,
            Oj = z.toolTipDelay,
            lk = z.devicePixelRatio,
            si = z.autoMakeVisible,
            Yl = z.autoHideScrollBar,
            lb = z.imageGradient,
            cd = z.showToolTip,
            Wd = z.hideToolTip,
            Zq = z.dashPattern,
            gh = z.lineCap,
            Br = z.lineJoin,
            Jp = z.labelColor,
            he = z.labelSelectColor,
            Wl = z.labelFont,
            Fm = z.widgetIndent,
            hr = z.widgetRowHeight,
            Bq = z.widgetHeaderHeight,
            im = z.widgetTitleHeight,
            bp = z.scrollBarColor,
            Wn = z.scrollBarSize,
            ue = z.scrollBarTimeout,
            Zg = z.scrollBarMinLength,
            ho = z.scrollBarInteractiveSize,
            Wm = z.zoomIncrement,
            wm = z.scrollZoomIncrement,
            El = z.pinchZoomIncrement,
            nf = z.zoomMax,
            yo = z.zoomMin,
            db = z.createObject,
            Fq = z.preventDefault,
            rg = z.setImage,
            Di = z.getImage,
            bs = z.isImageComplete,
            Qm = z.drawCenterImage,
            Iq = z.drawStretchImage,
            Vf = z.getId,
            jf = z.callLater,
            _j = z.cancelLater,
            nr = z.sortFunc,
            Vm = z.clone,
            Mo = z.getClass,
            tj = z.startAnim,
            zj = z.brighter,
            jd = z.darker,
            Dq = z.drawText,
            xo = z.getTextSize,
            Bj = z.isLeftButton,
            km = z.isMiddleButton,
            Gq = z.isRightButton,
            Ke = z.getTouchCount,
            ms = z.isDoubleClick,
            ck = z.isShiftDown,
            Gp = z.isCtrlDown,
            Lo = z.getClientPoint,
            rh = z.getPagePoint,
            cm = z.getDistance,
            Ah = z.unionPoint,
            Ek = z.unionRect,
            mm = z.containsPoint,
            xd = z.containsRect,
            $h = z.intersectsRect,
            Kk = z.intersection,
            kb = z.getWindowInfo,
            Um = z.grow,
            Sq = z.getLogicalPoint,
            pk = z.getScreenPoint,
            yq = z.startDragging,
            Fi = z.removeHTML,
            cn = z.createElement,
            Kr = z.segmentResolution,
            Hf = z.shapeResolution,
            ik = z.shapeSide,
            Wj = z.def,
            mb = function(b, Y, S) {
                Wj(E + "." + b, Y, S)
            },
            Ln = function(s, z) {
                s.childNodes.forEach(function(C) {
                    z(C), Ln(C, z)
                })
            };
        fp(z, {
            toolTipLabelColor: Jp,
            toolTipLabelFont: Wl,
            toolTipBackground: Q.toolTipBackground,
            toolTipShadowColor: Ao,
            debugTipLabelFont: Wl,
            debugTipLabelColor: Jp,
            debugTipBackground: Q.toolTipBackground,
            drawBreakableText: Sk,
            setDevicePixelRatio: function(x) {
                lk = z.devicePixelRatio = "number" == typeof x ? x : V.screen ? V.screen.deviceXDPI / V.screen.logicalXDPI : 1, Ln(W.body, function(I) {
                    var E = I._ht;
                    E && E._canvas && (yh(E._canvas, E.getWidth(), E.getHeight()), E.redraw ? E.redraw() : E.iv())
                })
            },
            getPosition3dGap: function() {
                return dd()
            }
        }, !0);
        var to = 1e-6,
            fo = "undefined" != typeof Uint16Array ? Uint16Array : Array,
            Kh = "undefined" != typeof Float32Array ? Float32Array : Array,
            _g = function(t, N, q) {
                var K = [t[0] - N[0], t[1] - N[1], t[2] - N[2]];
                if (q) {
                    var h = cm(K);
                    h > 0 && (K[0] /= h, K[1] /= h, K[2] /= h)
                }
                return K
            },
            wp = function() {
                var I = "charCodeAt",
                    w = 2 * (2 * af.length + 1);
                for (var q in V)
                    if (q === E + _i[0] + (dr.length + 2)) {
                        var k = V[q];
                        if (!k) break;
                        for (var p = k.length, c = 0; p > c; c++)
                            if (k[c][I](0) === w && k[c + 1] != Y && k[c + 1] === dr[0] && k[c + 2] != Y && k[c + 2][I](0) === w) {
                                for (var t = c + 3; p > t; t++)
                                    if (k[t][I](0) === w) {
                                        if (0 == k[t + 1])
                                            for (var F, R = t + 2; p > R; R++) {
                                                if (k[R][I](0) === w) {
                                                    0 == k[R - 1] && F && (kq = F.substr(0, F.length - 1));
                                                    break
                                                }
                                                F == Y ? F = k[R] : F += k[R]
                                            }
                                        break
                                    }
                                break
                            }
                        break
                    }
                return function(M) {
                    return [-M[0], -M[1], -M[2]]
                }
            }(),
            Pn = function(K, Z) {
                return 3 === K.length ? K[0] * Z[0] + K[1] * Z[1] + K[2] * Z[2] : K[0] * Z[0] + K[1] * Z[1]
            },
            Yn = function() {
                var X = new Array(16);
                return X[0] = 1, X[1] = 0, X[2] = 0, X[3] = 0, X[4] = 0, X[5] = 1, X[6] = 0, X[7] = 0, X[8] = 0, X[9] = 0, X[10] = 1, X[11] = 0, X[12] = 0, X[13] = 0, X[14] = 0, X[15] = 1, X
            },
            gp = Yn(),
            fj = function(k) {
                var z = new Array(16);
                return z[0] = k[0], z[1] = k[1], z[2] = k[2], z[3] = k[3], z[4] = k[4], z[5] = k[5], z[6] = k[6], z[7] = k[7], z[8] = k[8], z[9] = k[9], z[10] = k[10], z[11] = k[11], z[12] = k[12], z[13] = k[13], z[14] = k[14], z[15] = k[15], z
            },
            Cq = function(f, q) {
                return f[0] = q[0], f[1] = q[1], f[2] = q[2], f[3] = q[3], f[4] = q[4], f[5] = q[5], f[6] = q[6], f[7] = q[7], f[8] = q[8], f[9] = q[9], f[10] = q[10], f[11] = q[11], f[12] = q[12], f[13] = q[13], f[14] = q[14], f[15] = q[15], f
            },
            sc = function(z) {
                return z[0] = 1, z[1] = 0, z[2] = 0, z[3] = 0, z[4] = 0, z[5] = 1, z[6] = 0, z[7] = 0, z[8] = 0, z[9] = 0, z[10] = 1, z[11] = 0, z[12] = 0, z[13] = 0, z[14] = 0, z[15] = 1, z
            },
            qm = function(T, j) {
                var g = T[0],
                    b = T[1],
                    J = T[2];
                return T[0] = j[0] * g + j[4] * b + j[8] * J + j[12], T[1] = j[1] * g + j[5] * b + j[9] * J + j[13], T[2] = j[2] * g + j[6] * b + j[10] * J + j[14], T
            },
            bc = function(P, V) {
                var v = P[0],
                    A = P[1],
                    u = P[2],
                    i = P[3];
                return P[0] = V[0] * v + V[4] * A + V[8] * u + V[12] * i, P[1] = V[1] * v + V[5] * A + V[9] * u + V[13] * i, P[2] = V[2] * v + V[6] * A + V[10] * u + V[14] * i, P[3] = V[3] * v + V[7] * A + V[11] * u + V[15] * i, P
            },
            Jq = function() {
                var y, U, n, v, z = Rb(bi[1] + bi[7]),
                    G = Rb(bi[0] + bi[3] - bi[10]),
                    b = Rb(bi[8] + 2),
                    Y = function() {
                        return U = n.charAt(y), y += 1, U
                    },
                    N = function() {
                        var R = "";
                        if (U === b)
                            for (; Y();) {
                                if (U === b) return Y(), R;
                                R += U
                            } else Y()
                    },
                    C = function() {
                        for (; U && " " >= U;) Y()
                    },
                    l = function() {
                        var _, A = {};
                        if (U === z) {
                            if (Y(), C(), U === G) return Y(), A;
                            for (; U;) {
                                if (_ = N(), C(), Y(), A[_] = v(), C(), U === G) return Y(), A;
                                Y(), C()
                            }
                        }
                    };
                return v = function() {
                        switch (C(), U) {
                            case z:
                                return l();
                            default:
                                return N()
                        }
                    },
                    function(f) {
                        if (g = {}, f) {
                            var O;
                            if (n = f, y = 0, U = " ", O = v(), C(), !U) return O
                        }
                    }
            }(),
            Vb = function(P, V) {
                if (V) {
                    var I = b(V),
                        z = u(V),
                        p = P[4],
                        L = P[5],
                        T = P[6],
                        R = P[7],
                        C = P[8],
                        i = P[9],
                        x = P[10],
                        h = P[11];
                    P[4] = p * z + C * I, P[5] = L * z + i * I, P[6] = T * z + x * I, P[7] = R * z + h * I, P[8] = C * z - p * I, P[9] = i * z - L * I, P[10] = x * z - T * I, P[11] = h * z - R * I
                }
            },
            yb = function(v, D) {
                if (D) {
                    var y = b(D),
                        E = u(D),
                        f = v[0],
                        h = v[1],
                        K = v[2],
                        L = v[3],
                        i = v[8],
                        e = v[9],
                        S = v[10],
                        o = v[11];
                    v[0] = f * E - i * y, v[1] = h * E - e * y, v[2] = K * E - S * y, v[3] = L * E - o * y, v[8] = f * y + i * E, v[9] = h * y + e * E, v[10] = K * y + S * E, v[11] = L * y + o * E
                }
            },
            ie = function(U, i) {
                if (i) {
                    var N = b(i),
                        A = u(i),
                        e = U[0],
                        j = U[1],
                        $ = U[2],
                        d = U[3],
                        h = U[4],
                        y = U[5],
                        J = U[6],
                        _ = U[7];
                    U[0] = e * A + h * N, U[1] = j * A + y * N, U[2] = $ * A + J * N, U[3] = d * A + _ * N, U[4] = h * A - e * N, U[5] = y * A - j * N, U[6] = J * A - $ * N, U[7] = _ * A - d * N
                }
            },
            Qj = function(k, g, z) {
                return hb(Y, z === !1 ? Y : k.getFinalScale3d(), k.getFinalRotation3d(), k.getRotationMode(), k.p3(), Y, g)
            },
            hb = function(M, t, A, E, T, i, d) {
                return i || (i = Yn()), T && bq(i, T), cr(i, A, E), d && Qn(i, i, d), t && Rp(i, t), M && Qn(i, i, M), i
            },
            Er = function(L, M, j) {
                M = Hh(M), j = Hh(j);
                var i = this;
                i.g = L, i._84O = M, i._85O = j, i._70I = !0, i.F = 0, i._83O = M + j, i.pen = {
                    x: 0,
                    y: 0
                }
            },
            ub = "lineDashOffset",
            Me = "setLineDash",
            Eb = function(S) {
                for (var M in S) 1 === M.length && (ub = S[M]);
                return M ? 1 : 0
            },
            Sg = function(H, N, G) {
                return Ci(N) ? H : H[Me] ? (H[Me](N), G && (H.lineDashOffset = G), H) : new Er(H, N[0], N.length > 1 ? N[1] : N[0])
            },
            Xe = function(T, W) {
                !Ci(W) && T[Me] && (T[Me](Kd), T.lineDashOffset = 0)
            };
        Wj(Er, G, {
            _69I: 6,
            moveTo: function(I, j) {
                var c = this,
                    M = c.pen;
                M.x = I, M.y = j, c.g.moveTo(I, j), c.start || (c.start = {
                    x: I,
                    y: j
                })
            },
            lineTo: function(X, w) {
                var r = this,
                    o = r.pen,
                    x = X - o.x,
                    K = w - o.y,
                    L = di(K, x),
                    E = u(L),
                    z = b(L),
                    s = r._23O(o.x, o.y, X, w),
                    d = r._85O,
                    q = r._84O,
                    t = r._83O;
                if (r.F) {
                    if (r.F > s) return r._70I ? r._72I(X, w) : r.moveTo(X, w), r.F -= s, void 0;
                    if (r._70I ? r._72I(o.x + E * r.F, o.y + z * r.F) : r.moveTo(o.x + E * r.F, o.y + z * r.F), s -= r.F, r.F = 0, r._70I = !r._70I, !s) return
                }
                var Z = e(s / t);
                if (Z) {
                    for (var n = E * q, g = z * q, J = E * d, Q = z * d, T = 0; Z > T; T++) r._70I ? (r._72I(o.x + n, o.y + g), r.moveTo(o.x + J, o.y + Q)) : (r.moveTo(o.x + J, o.y + Q), r._72I(o.x + n, o.y + g));
                    s -= t * Z
                }
                r._70I ? s > q ? (r._72I(o.x + E * q, o.y + z * q), r.moveTo(X, w), r.F = d - (s - q), r._70I = !1) : (r._72I(X, w), s === q ? (r.F = 0, r._70I = !r._70I) : (r.F = q - s, r.moveTo(X, w))) : s > d ? (r.moveTo(o.x + E * d, o.y + z * d), r._72I(X, w), r.F = q - (s - d), r._70I = !0) : (r.moveTo(X, w), s === d ? (r.F = 0, r._70I = !r._70I) : r.F = d - s)
            },
            quadraticCurveTo: function(t, C, J, k) {
                var b, Y = this,
                    R = Y.pen,
                    s = R.x,
                    g = R.y,
                    G = Y._22O(s, g, t, C, J, k),
                    O = 0,
                    q = 0,
                    T = Y._85O,
                    H = Y._84O;
                if (Y.F) {
                    if (Y.F > G) return Y._70I ? Y._71I(t, C, J, k) : Y.moveTo(J, k), Y.F -= G, void 0;
                    if (O = Y.F / G, b = Y._20O(s, g, t, C, J, k, O), Y._70I ? Y._71I(b[2], b[3], b[4], b[5]) : Y.moveTo(b[4], b[5]), Y.F = 0, Y._70I = !Y._70I, !G) return
                }
                var M = G - G * O,
                    l = e(M / Y._83O),
                    o = H / G,
                    d = T / G;
                if (l)
                    for (var u = 0; l > u; u++) Y._70I ? (q = O + o, b = Y._21O(s, g, t, C, J, k, O, q), Y._71I(b[2], b[3], b[4], b[5]), O = q, q = O + d, b = Y._21O(s, g, t, C, J, k, O, q), Y.moveTo(b[4], b[5])) : (q = O + d, b = Y._21O(s, g, t, C, J, k, O, q), Y.moveTo(b[4], b[5]), O = q, q = O + o, b = Y._21O(s, g, t, C, J, k, O, q), Y._71I(b[2], b[3], b[4], b[5])), O = q;
                M = G - G * O, Y._70I ? M > H ? (q = O + o, b = Y._21O(s, g, t, C, J, k, O, q), Y._71I(b[2], b[3], b[4], b[5]), Y.moveTo(J, k), Y.F = T - (M - H), Y._70I = !1) : (b = Y._19O(s, g, t, C, J, k, O), Y._71I(b[2], b[3], b[4], b[5]), G === H ? (Y.F = 0, Y._70I = !Y._70I) : (Y.F = H - M, Y.moveTo(J, k))) : M > T ? (q = O + d, b = Y._21O(s, g, t, C, J, k, O, q), Y.moveTo(b[4], b[5]), b = Y._19O(s, g, t, C, J, k, q), Y._71I(b[2], b[3], b[4], b[5]), Y.F = H - (M - T), Y._70I = !0) : (Y.moveTo(J, k), M === T ? (Y.F = 0, Y._70I = !Y._70I) : Y.F = T - M)
            },
            bezierCurveTo: function() {
                var R = arguments;
                this.pen = {
                    x: R[4],
                    y: R[5]
                }, this.g.bezierCurveTo(R[0], R[1], R[2], R[3], R[4], R[5])
            },
            arc: function(M, i, x, E, U, c) {
                c || (E = -E, U = -U), ws(this, M, i, E, U - E, x, x, !1)
            },
            rect: function(f, r, i, S) {
                var d = this;
                d.pen = {
                    x: f,
                    y: r
                }, d.moveTo(f, r), d.lineTo(f, r + S), d.lineTo(f + i, r + S), d.lineTo(f + i, r), d.lineTo(f, r)
            },
            beginPath: function() {
                this.g.beginPath()
            },
            closePath: function() {
                this.lineTo(this.start.x, this.start.y)
            },
            _23O: function(f, l, K, E) {
                var S = K - f,
                    A = E - l;
                return x(S * S + A * A)
            },
            _22O: function(E, K, g, V, q, S, M) {
                for (var O, N, W, s, L, v, U, R = 0, h = E, I = K, r = M > 0 ? M : this._69I, H = 1; r >= H; H++) W = H / r, s = 1 - W, L = s * s, v = 2 * W * s, U = W * W, O = L * E + v * g + U * q, N = L * K + v * V + U * S, R += this._23O(h, I, O, N), h = O, I = N;
                return R
            },
            _21O: function(C, Q, l, s, r, V, W, t) {
                var A = this;
                if (0 === W) return A._20O(C, Q, l, s, r, V, t);
                if (1 === t) return A._19O(C, Q, l, s, r, V, W);
                var $ = A._20O(C, Q, l, s, r, V, t);
                return $.push(W / t), A._19O.apply(A, $)
            },
            _20O: function(r, q, N, C, B, m, y) {
                if (1 !== y) {
                    var i = N + (B - N) * y,
                        O = C + (m - C) * y;
                    N = r + (N - r) * y, C = q + (C - q) * y, B = N + (i - N) * y, m = C + (O - C) * y
                }
                return [r, q, N, C, B, m]
            },
            _19O: function(s, X, D, k, M, n, t) {
                if (1 !== t) {
                    var r = s + (D - s) * t,
                        m = X + (k - X) * t;
                    D += (M - D) * t, k += (n - k) * t, s = r + (D - r) * t, X = m + (k - m) * t
                }
                return [s, X, D, k, M, n]
            },
            _72I: function(p, I) {
                var m = this.pen;
                (p !== m.x || I !== m.y) && (m.x = p, m.y = I, this.g.lineTo(p, I))
            },
            _71I: function(f, g, V, K) {
                var m = this.pen;
                (f !== V || g !== K || V !== m.x || K !== m.y) && (m.x = V, m.y = K, this.g.quadraticCurveTo(f, g, V, K))
            }
        }), po.ms_quickVisible = function(g) {
            g._4BQ = !1, g._4CQ = function(L) {
                var s = L._4EQ;
                return s !== O ? s : s = L._4EQ = this._4FQ(L)
            }, g._4DQ = function(u) {
                if (!u) return this.dm().each(function(z) {
                    z._4EQ = O
                }), void 0;
                u._4EQ = O;
                var B = this;
                if (u instanceof zc || og(u) || u instanceof Tb || u.ISubGraph) u.eachChild(function(b) {
                    B.invalidateQuickVisible(b)
                });
                else if (u.getEdges) {
                    var v = u.getEdges();
                    v && v.each(function(J) {
                        B.invalidateQuickVisible(J)
                    })
                }
            }, g.enableQuickVisibleMode = function() {
                this._4BQ || (this._4BQ = !0, this._4FQ = this.isVisible, this.isVisible = this._4CQ, this.invalidateQuickVisible = this._4DQ)
            }, g.disableQuickVisibleMode = function() {
                this._4BQ && (this._4BQ = !1, this.isVisible = this._4FQ, this.invalidateQuickVisible = gj)
            }, g.isQuickVisibleMode = function() {
                return this._4BQ
            }, g.invalidateQuickVisible = gj
        }, kg = Cl() + 1, me && V.console && kg && !0 && (V.navigator && V.navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? V.console.log.apply(console, ["Hightopo - Version：" + F.Default.getVersion() + " - %cTrial：http://hightopo.com/request.html", "color: #f00;"]) : V.console.log("Hightopo - Version：" + F.Default.getVersion() + " - Trial：http://hightopo.com/request.html"));
        var Uq = Y,
            ui = Y,
            Li = z.checkLoadingCompType = function(O) {
                Uq && !O._72O_ && (ui || (ui = {}), ui[O._72O_ = Vf()] = O)
            },
            Wc = function(T, Z) {
                if (Z || (Z = T), Z && (Uq || (Uq = {}), !Uq[T])) {
                    var E = new gk;
                    if (Uq[Z] = {
                            request: E,
                            url: Z
                        }, Z = z.beforeLoadURL(Z, T), Z.data) {
                        var u = z.parse(Z.data);
                        gd(T, u), z.handleCompTypeLoaded(T, u)
                    } else {
                        E.onload = function() {
                            if (200 === this.status || 0 === this.status) {
                                var H = z.parse(E.getResponseText());
                                gd(T, H), z.handleCompTypeLoaded(T, H)
                            } else gd(T, Y)
                        }, E.onerror = function() {
                            gd(T, Y)
                        };
                        var v = {};
                        v.url = encodeURI(Z), v.sync = !1, E.send(v)
                    }
                }
            },
            gd = function(p, Q) {
                if (wj[p] = Q, delete Uq[p], Mq(Uq) && (Uq = Y, ui)) {
                    for (var U in ui) {
                        var u = ui[U];
                        u.invalidateAll && u.invalidateAll(O, "compTypeLoaded", p), u.redraw && u.redraw(), u.iv(), delete u._72O_
                    }
                    ui = Y
                }
                if (Q && ui)
                    for (var U in ui) {
                        var u = ui[U];
                        u.invalidateAll && u.invalidateAll(O, "compTypeLoading", p), u.redraw && u.redraw(), u.iv()
                    }
            },
            ul = Q.chart,
            Je = "",
            Ij = !0,
            be = z.compStack = [],
            Yd = /^style@/,
            nc = /^attr@/,
            Ep = /^field@/,
            We = {
                x: .5,
                y: .5
            },
            es = function() {
                Ij = !0
            },
            Cp = function() {
                return Ij
            },
            ps = function(s, H, x, G) {
                if (!s) return 0;
                if (Kg(s.fitSize, H, x) && G) return G;
                var z = Kg(s.width, H, x);
                return null == z ? 20 : z
            },
            hh = function(v, U, Y, c) {
                if (!v) return 0;
                if (Kg(v.fitSize, U, Y) && c) return c;
                var g = Kg(v.height, U, Y);
                return null == g ? 20 : g
            },
            Kg = function(V, r, b) {
                if (!V || !V.func) return V;
                var K, G = V.func,
                    n = V.value;
                return K = Ap(G) ? b && b.vectorDataBindingDisabled && !V.isSafeFunc ? n : G(r, b) : r instanceof Mc || (F.ui ? r instanceof F.ui.View : 0) ? nc.test(G) ? r.a(Je + G.slice(5)) : Yd.test(G) ? r.s(Je + G.slice(6)) : Ep.test(G) ? r[G.slice(6)] : r[G] ? r[G](b) : n : n, n !== O && K == Y ? n : K
            },
            ic = z.drawImage = function() {
                var l, G, t, L, k, E, M = 3,
                    f = 6,
                    Z = function(l, I) {
                        l.getValue && l.getValue.compType === I || (l.getValue = function(W) {
                            var b = m(l, W);
                            if (b === O && I.properties) {
                                var _ = I.properties[W];
                                _ && (b = _.defaultValue)
                            }
                            return b
                        }, l.getColor = function(D, q) {
                            return q === !0 ? d(D) : d(l.getValue(D))
                        }, l.getValue.compType = I)
                    },
                    m = function(E, c, D) {
                        var z, Y = !1;
                        if (E.prefix && G instanceof Mc) {
                            var M = G.a(Je + c);
                            M !== O && (Y = !0, z = M)
                        }
                        return z === O && (z = E[c]), z && z.func && (Y = !0, z = Kg(z, G, t)), D && (z = D(z), Y || (E[c] = z)), z
                    },
                    d = function(P, x) {
                        var $;
                        return $ = x ? m(P, x) : P, l && l.compGray && $ ? z.toGrayColor($) : k && $ ? Fl($, k, E) : $
                    },
                    p = function(n) {
                        if (ym(n)) {
                            for (var F = new no, J = n.length, C = 0; J > C; C += 2) F.add({
                                x: n[C],
                                y: n[C + 1]
                            });
                            n = F
                        }
                        return n
                    },
                    y = function(A) {
                        var N = m(A, "anchorX"),
                            b = m(A, "anchorY");
                        if (N !== O || b !== O) return {
                            x: N === O ? We.x : N,
                            y: b === O ? We.y : b
                        };
                        var e = m(A, "type"),
                            R = m(A, "name");
                        if ("image" !== e || !R) return We;
                        var M = Di(R);
                        return M && M.anchorX !== O && M.anchorY !== O ? {
                            x: M.anchorX,
                            y: M.anchorY
                        } : We
                    },
                    e = function(r, s) {
                        var U = m(r, Eh),
                            A = y(r);
                        if (ym(U)) {
                            var X = U.length,
                                O = m(r, "relative"),
                                D = s.width,
                                _ = s.height;
                            if (4 === X) U = {
                                x: U[0],
                                y: U[1],
                                width: U[2],
                                height: U[3]
                            }, O && (U.x *= D, U.y *= _, U.width *= D, U.height *= _);
                            else if (3 === X) {
                                var Z = U[0];
                                U = {
                                    width: U[1],
                                    height: U[2]
                                }, O && (U.width *= D, U.height *= _), "object" == typeof Z ? Z.length && (Z = {
                                    x: Z[0],
                                    y: Z[1]
                                }) : Z = Mj(Z, s, U), U.x = Z.x - U.width * A.x, U.y = Z.y - U.height * A.y
                            }
                            U.x += m(r, "offsetX") || 0, U.y += m(r, "offsetY") || 0, !O && s.fitSize && (U = T(r, U, s))
                        }
                        return U
                    },
                    T = function(A, i, k) {
                        if (i) {
                            var U, w, V, B = {
                                    x: i.x,
                                    y: i.y,
                                    width: i.width,
                                    height: i.height
                                },
                                L = y(A),
                                g = m(A, "layoutH"),
                                v = m(A, "layoutV"),
                                s = 1,
                                M = 1,
                                F = 0,
                                x = 0,
                                G = 1,
                                n = 1;
                            switch (g) {
                                case "left":
                                    break;
                                case "right":
                                    B.x += k.width - k.rw;
                                    break;
                                case "center":
                                    B.x += .5 * (k.width - k.rw);
                                    break;
                                case "scale":
                                case "leftright":
                                default:
                                    U = m(A, dh) || 0, U && (F = Math.abs(x = Math.sin(U)), G = Math.abs(n = Math.cos(U))), "leftright" !== g ? (s += G * (k.widthScale - 1), M += F * (k.widthScale - 1)) : (s += B.width ? G * (k.width - k.rw) / B.width : 0, M += B.height ? F * (k.width - k.rw) / B.height : 0, w = -Math.min(-L.x * n + L.y * x, -L.x * n - (1 - L.y) * x, (1 - L.x) * n + L.y * x, (1 - L.x) * n - (1 - L.y) * x))
                            }
                            switch (v) {
                                case "top":
                                    break;
                                case "bottom":
                                    B.y += k.height - k.rh;
                                    break;
                                case "center":
                                    B.y += .5 * (k.height - k.rh);
                                    break;
                                case "scale":
                                case "topbottom":
                                default:
                                    U == Y && (U = m(A, dh), U && (F = Math.abs(x = Math.sin(U)), G = Math.abs(n = Math.cos(U)))), "topbottom" !== v ? (s += F * (k.heightScale - 1), M += G * (k.heightScale - 1)) : (s += B.width ? F * (k.height - k.rh) / B.width : 0, M += B.height ? G * (k.height - k.rh) / B.height : 0, V = -Math.min(-L.x * x - L.y * n, -L.x * x + (1 - L.y) * n, (1 - L.x) * x - L.y * n, (1 - L.x) * x + (1 - L.y) * n))
                            }
                            return (1 !== s || 1 !== M) && ("scale" !== g && g ? "leftright" === g && (B.x += B.width * (1 - s) * L.x + w * (k.width - k.rw)) : B.x += B.x * (k.widthScale - 1) + L.x * B.width * (k.widthScale - s), "scale" !== v && v ? "topbottom" === v && (B.y += B.height * (1 - M) * L.y + V * (k.height - k.rh)) : B.y += B.y * (k.heightScale - 1) + L.y * B.height * (k.heightScale - M), B.width *= s, B.height *= M), B.width < 0 && (B.width = 0), B.height < 0 && (B.height = 0), B
                        }
                    },
                    i = function(Q) {
                        return ym(Q) ? new no(Q) : Q
                    },
                    B = function(j, p, $, z, v, S, u) {
                        var H = l.interactiveInfo,
                            A = j.transform;
                        if (A) return l.save(), l.setTransform(A.a, A.b, A.c, A.d, A.tx, A.ty), H && H.compInfos.push({
                            comp: j,
                            rect: p,
                            matrix: A.clone(),
                            prefix: Je,
                            refRect: H.refRect
                        }), !0;
                        v === O && (v = 1), S === O && (S = 1);
                        var w = m(j, "clipPercentage"),
                            K = Ch($, p);
                        if (K && !z && 1 === v && 1 === S && w == O) return H && H.compInfos.push({
                            comp: j,
                            rect: p,
                            matrix: H.matrix.clone(),
                            prefix: Je,
                            refRect: H.refRect
                        }), !1;
                        u = u || We;
                        var x = p.x + p.width * u.x,
                            s = p.y + p.height * u.y,
                            o = $.x + $.width * u.x,
                            h = $.y + $.height * u.y,
                            f = $.width ? v * (p.width / $.width) : 1,
                            k = $.height ? S * (p.height / $.height) : 1;
                        if (l.save(), H && (H.matrix.appendTranslate(x, s).appendRotate(z).appendScale(f, k).appendTranslate(-o, -h), H.compInfos.push({
                                comp: j,
                                rect: p,
                                matrix: H.matrix.clone(),
                                prefix: Je,
                                refRect: H.refRect
                            })), uk(l, x, s), rf(l, z || 0), Oc(l, f, k), uk(l, -o, -h), w != O) {
                            var e = $d($, m(j, "clipDirection"), w);
                            l.beginPath(), l.rect(e.x, e.y, e.width, e.height), l.clip()
                        }
                        return !0
                    },
                    H = function() {
                        l.restore()
                    },
                    w = function(V, W, t) {
                        var f = m(V, "path"),
                            K = m(V, dh),
                            j = m(V, "scaleX"),
                            q = m(V, "scaleY"),
                            v = y(V),
                            R = Y,
                            z = Ge(null, f);
                        if (t || (t = V.unionRect, t || (t = Ah(z), V.path.func || (V.unionRect = t)), R = t), t) {
                            R || (R = V.unionRect, R || (R = Ah(z), V.path.func || (V.unionRect = R)));
                            var T = B(V, t, R, K, j, q, v),
                                N = m(V, "borderPattern"),
                                k = Sg(l, N),
                                Z = d(V, "background"),
                                S = d(V, "borderColor"),
                                r = m(V, "borderWidth"),
                                i = m(V, "gradient"),
                                Q = d(V, "gradientColor"),
                                h = m(V, "border3d"),
                                C = d(V, "border3dColor"),
                                A = m(V, "border3dAccuracy"),
                                P = l.lineJoin,
                                g = l.lineCap;
                            l.lineJoin = m(V, "borderJoin") || Br, l.lineCap = m(V, "borderCap") || gh, Z ? (Fo(l, Z, i, Q, R), Ge(l, f), l.fill(), k !== l && Ge(l, f)) : Ge(l, f);
                            var o = m(V, "borderWidthAbsolute");
                            if (o && (l.save(), l.setTransform(1, 0, 0, 1, 0, 0)), r && S && (l.lineWidth = r, l.strokeStyle = S, l.stroke(), h && Vr(l, S, C, r, L, A)), Xe(l, N), m(V, "dash")) {
                                var E = m(V, "dashWidth") || r;
                                if (E > 0) {
                                    N = m(V, "dashPattern") || Zq;
                                    var k = Sg(l, N, m(V, "dashOffset")),
                                        X = d(V, "dashColor") || d(Qq);
                                    k !== l && Ge(l, f), l.strokeStyle = X, l.lineWidth = E, l.stroke(), m(V, "dash3d") && Vr(l, X, d(V, "dash3dColor"), E, L, m(V, "dash3dAccuracy")), Xe(l, N)
                                }
                            }
                            o && l.restore(), W === Eh && bg(l, Z, m(V, "depth"), R), l.lineJoin = P, l.lineCap = g, T && H()
                        }
                    },
                    N = function(u, V, X, N) {
                        var n = m(u, Wq, p),
                            r = m(u, dh),
                            I = y(u);
                        if (n && N.fitSize) {
                            var f = new no,
                                A = Ah(n),
                                R = T(u, A, N),
                                D = A.x + I.x * A.width,
                                W = A.y + I.y * A.height,
                                a = R.x + I.x * R.width,
                                C = R.y + I.y * R.height,
                                j = A.width ? R.width / A.width : 1,
                                Z = A.height ? R.height / A.height : 1;
                            n.each(function(c) {
                                f.add({
                                    x: a + (c.x - D) * j,
                                    y: C + (c.y - W) * Z
                                })
                            }), n = f, u.unionRect = null
                        }
                        var s = m(u, "scaleX"),
                            M = m(u, "scaleY"),
                            S = V === Cd,
                            U = Y;
                        if (!X && S && (X = u.unionRect, X || (X = Ah(n), u.points.func || (u.unionRect = X)), U = X), X) {
                            S ? U || (U = u.unionRect, U || (U = Ah(n), u.points.func || (u.unionRect = U))) : U = X;
                            var _, q, c, h, x = B(u, X, U, r, s, M, I),
                                F = m(u, "borderPattern"),
                                z = Sg(l, F),
                                $ = d(u, "background"),
                                v = Di(m(u, "repeatImage"), k, E),
                                Q = m(u, "gradientPack"),
                                o = m(u, "borderGradientPack"),
                                g = d(u, "borderColor"),
                                b = m(u, "borderWidth"),
                                J = Di(m(u, "borderRepeatImage"), k, E),
                                K = m(u, "segments", i),
                                w = m(u, "gradient"),
                                e = d(u, "gradientColor"),
                                P = m(u, "border3d"),
                                Qp = d(u, "border3dColor"),
                                Ii = m(u, "border3dAccuracy"),
                                Un = m(u, "closePath"),
                                pl = m(u, "fillRule") || "nonzero",
                                zp = l.lineJoin,
                                Wk = l.lineCap;
                            if (l.lineJoin = m(u, "borderJoin") || Br, l.lineCap = m(u, "borderCap") || gh, S)
                                if ($ || v || Q) {
                                    var tm = m(u, "fillClipPercentage");
                                    if (tm != O) {
                                        var jr = $d(U, m(u, "fillClipDirection"), tm);
                                        l.save(), l.beginPath(), l.rect(jr.x, jr.y, jr.width, jr.height), l.clip()
                                    }
                                    Am(l, n, K, Un), Q ? oq(l, Q, d, !1, X) : v ? bl(l, v, k, E, G, t) : Fo(l, $, w, e, U), l.fill(pl), Q && l.restore(), tm != O && l.restore(), z !== l && Am(z, n, K, Un)
                                } else Am(z, n, K, Un);
                            else if ("roundRect" === V ? _ = m(u, "cornerRadius") : "polygon" === V ? (_ = m(u, "polygonSide"), q = m(u, "cornerRadius")) : "arc" === V && (_ = m(u, "arcFrom"), q = m(u, "arcTo"), c = m(u, "arcClose"), h = m(u, "arcOval")), $ || v || Q) {
                                var tm = m(u, "fillClipPercentage");
                                if (tm != O) {
                                    var jr = $d(U, m(u, "fillClipDirection"), tm);
                                    l.save(), l.beginPath(), l.rect(jr.x, jr.y, jr.width, jr.height), l.clip()
                                }
                                jq(l, V, U, _, q, c, h), Q ? oq(l, Q, d, !1, X) : v ? bl(l, v, k, E, G, t) : Fo(l, $, w, e, U), l.fill(pl), Q && l.restore(), tm != O && l.restore(), l !== z && jq(z, V, U, _, q, c, h)
                            } else jq(z, V, U, _, q, c, h);
                            var Ad = m(u, "borderWidthAbsolute");
                            if (Ad && (l.save(), l.setTransform(1, 0, 0, 1, 0, 0)), b && (g || J || o) && (l.lineWidth = b, o ? oq(l, o, d, !0, X) : J ? Ui(l, J, k, E, G, t) : l.strokeStyle = g, l.stroke(), o && l.restore(), P && Vr(l, g, Qp, b, L, Ii)), Xe(l, F), m(u, "dash")) {
                                var le = m(u, "dashWidth") || b;
                                if (le > 0) {
                                    F = m(u, "dashPattern") || Zq;
                                    var z = Sg(l, F, m(u, "dashOffset")),
                                        oh = d(u, "dashColor") || d(Qq);
                                    z !== l && (S ? Am(z, n, K, Un) : jq(z, V, U, _, q, c, h)), l.strokeStyle = oh, l.lineWidth = le, l.stroke(), m(u, "dash3d") && Vr(l, oh, d(u, "dash3dColor"), le, L, m(u, "dash3dAccuracy")), Xe(l, F)
                                }
                            }
                            Ad && l.restore(), V === Eh && bg(l, $, m(u, "depth"), U), l.lineJoin = zp, l.lineCap = Wk, x && H()
                        }
                    },
                    J = function(I, B) {
                        var A = k || m(I, Kb),
                            j = E || m(I, "blendMode"),
                            T = m(I, "name"),
                            c = Di(T, A, j);
                        c && c.cacheRule != Y && (c = eh(l, c, m(I, "stretch"), B.width, B.height, G, t, A)), c ? Iq(l, c, m(I, "stretch"), B.x, B.y, B.width, B.height, G, t, A, null, j) : Ij = !1
                    },
                    v = function(B, b) {
                        var W = m(B, "text");
                        if (W != Y) {
                            W += "";
                            var n, P = m(B, "gradientPack"),
                                G = m(B, "gradient"),
                                h = d(B, "gradientColor"),
                                p = m(B, "font"),
                                r = m(B, "vertical"),
                                o = m(B, "verticalGap") || 0,
                                a = m(B, "align"),
                                T = m(B, "vAlign"),
                                i = m(B, "decoration"),
                                E = m(B, "letterGap") || 0,
                                Z = m(B, "wrap"),
                                S = m(B, "borderWidth"),
                                V = m(B, "borderColor");
                            if (P ? (n = oq(l, P, d, !1, b), l.restore()) : n = d(B, Kb), !P && G && (n = z.createGradient(l, G, n || z.labelColor, h || Q.imageGradient, b.x, b.y, b.width, b.height)), S && ym(V) && (V = oq(l, V, d, !1, b), l.restore()), r) {
                                null == o && (o = 1);
                                var s, D, U, O = [],
                                    H = [];
                                s = Z ? ln(W, b.height, p, E, r, o) : [W], l.textBaseline = vi, l.font = p, s.forEach(function(S) {
                                    for (var m = S.length, j = 0, D = (m - 1) * o, G = 0; m > G; G++) {
                                        var z = l.measureText(S[G]);
                                        O.push(z), D += z.fontBoundingBoxDescent, j = q(j, z.width)
                                    }
                                    H.push({
                                        width: j,
                                        height: D
                                    })
                                });
                                var e = (s.length - 1) * E;
                                H.forEach(function(b) {
                                    e += b.width
                                }), D = a && a !== _i ? a === rj ? b.x + b.width - e : b.x + (b.width - e) / 2 : b.x;
                                var K = 0;
                                s.forEach(function(q, F) {
                                    var M = H[F],
                                        Q = q.length;
                                    U = T && T !== mp ? T === vi ? b.y : b.y + b.height - M.height : b.y + (b.height - M.height) / 2;
                                    for (var m = 0; Q > m; m++) {
                                        var t = q[m],
                                            A = O[K];
                                        Ir(l, t, p, n, {
                                            x: D,
                                            y: U,
                                            width: M.width,
                                            height: A.fontBoundingBoxDescent
                                        }, Vc, T, i, E, S, V), U += A.fontBoundingBoxDescent + o, K++
                                    }
                                    D += M.width + E
                                })
                            } else {
                                var s = Z ? ln(W, b.width, p, E, r, o) : W.split("\n"),
                                    $ = s.length;
                                if ($ > 1) {
                                    var N = xo(p, W),
                                        J = N.height,
                                        F = $ * J + o * ($ - 1),
                                        C = Vm(b);
                                    return T && T !== mp ? T === Ei && (C.y = b.y + b.height - F) : C.y = b.y + (b.height - F) / 2, C.height = F, Sk(l, s, C, p, n, a || _i, i, E, S, V), void 0
                                }
                                Ir(l, W, p, n, b, a, T, i, E, S, V)
                            }
                        }
                    },
                    D = function(Y, a) {
                        Pk(l, d(Y, Kb), a.x, a.y, a.width, a.height, m(Y, "width"))
                    },
                    c = function(X, _) {
                        var B = m(X, Zn),
                            w = 0;
                        if (B && (B.forEach(function(p) {
                                w += p
                            }), w > 0)) {
                            for (var s = m(X, "colors") || ul, k = m(X, "startAngle") || 0, L = m(X, "hollow"), T = m(X, pd), S = m(X, fc), K = m(X, rl), a = T ? new no : Y, V = _.x, E = _.y, A = _.width, Q = _.height, f = V + A / 2, W = E + Q / 2, J = h(A, Q) / 2, r = 0, I = 0; I < B.length; I++) {
                                var v = B[I],
                                    C = U * v / w,
                                    o = k + C;
                                if (l.fillStyle = s[r++], r === s.length && (r = 0), l.beginPath(), L) {
                                    var g = f + u(k) * J / 2,
                                        q = W + b(k) * J / 2,
                                        O = f + u(o) * J,
                                        D = W + b(o) * J;
                                    l.moveTo(g, q), l.arc(f, W, J / 2, k, o, !1), l.lineTo(O, D), l.arc(f, W, J, o, k, !0)
                                } else l.moveTo(f, W), l.arc(f, W, J, o, k, !0);
                                a && (C = (k + o) / 2, a.add({
                                    text: Ap(T) ? T(v, I, w, G) : v,
                                    x: f + .75 * u(C) * J,
                                    y: W + .75 * b(C) * J
                                })), l.closePath(), l.fill(), k = o
                            }
                            a && a.each(function(Q) {
                                Dq(l, Q.text, S, K, Q.x, Q.y, 0, 0, Vc)
                            })
                        }
                    },
                    S = function(f, Z) {
                        var b = m(f, Fc);
                        if (b && b.length > 0) {
                            var S = b.length,
                                u = m(f, pd),
                                n = m(f, fc),
                                D = m(f, rl),
                                $ = u ? new no : Y,
                                v = m(f, "minValue") || 0,
                                p = m(f, "maxValue");
                            if (p == Y && (p = 0, b.forEach(function(w) {
                                    m(w, Zn).forEach(function(X) {
                                        p = q(p, X)
                                    })
                                })), v === p) return;
                            for (var r = Z.height / (p - v), C = Z.y + p * r, B = m(b[0], Zn).length, M = Z.width / (3 * B + 1), J = 2 * M / S, g = 0, e = 0; S > e; e++)
                                for (var O = b[e], P = m(O, Kb), F = m(O, "colors"), z = m(O, Zn), I = 0; B > I; I++) {
                                    F ? l.fillStyle = F[I] : P ? l.fillStyle = P : (l.fillStyle = ul[g++], g === ul.length && (g = 0));
                                    var x = z[I],
                                        T = x * r,
                                        d = Z.x + (1 + 3 * I) * M + e * J;
                                    if (or(l, d, C - T, J, T), $) {
                                        var L = Ap(u) ? u(x, I, O, G) : x,
                                            y = xo(n, L).height;
                                        $.add({
                                            x: d,
                                            y: C - T - y,
                                            width: J,
                                            height: y,
                                            text: L
                                        })
                                    }
                                }
                            $ && $.each(function(h) {
                                Dq(l, h.text, n, D, h.x, h.y, h.width, h.height, Vc)
                            })
                        }
                    },
                    o = function(L, P) {
                        var K = m(L, Fc);
                        if (K && K.length > 0) {
                            var t = K.length,
                                x = m(K[0], Zn).length,
                                j = P.width / (3 * x + 1),
                                B = 0,
                                N = m(L, "maxValue"),
                                _ = m(L, pd),
                                i = m(L, fc),
                                M = m(L, rl),
                                e = _ ? new no : Y;
                            if (N == Y) {
                                N = 0;
                                for (var k = 0; x > k; k++) {
                                    for (var c = 0, u = 0; t > u; u++) c += m(K[u], Zn)[k];
                                    N = q(N, c)
                                }
                            }
                            if (N > 0) {
                                for (var k = 0; x > k; k++)
                                    for (var E = P.y + P.height, u = 0; t > u; u++) {
                                        var o = K[u],
                                            n = m(o, Kb),
                                            p = m(o, Zn)[k],
                                            v = p / N * P.height;
                                        n ? l.fillStyle = n : (l.fillStyle = ul[B++], B === ul.length && (B = 0)), E -= v;
                                        var r = {
                                            x: P.x + (1 + 3 * k) * j,
                                            y: E,
                                            width: 2 * j,
                                            height: v
                                        };
                                        or(l, r.x, r.y, r.width, r.height), e && (r.text = Ap(_) ? _(p, k, o, G) : p, e.add(r))
                                    }
                                e && e.each(function(a) {
                                    Dq(l, a.text, i, M, a.x, a.y, a.width, a.height, Vc)
                                })
                            }
                        }
                    },
                    x = function(n, I) {
                        var O = m(n, Fc);
                        if (O && O.length > 0) {
                            for (var R = O.length, s = m(O[0], Zn).length, w = I.width / (3 * s + 1), T = 0, q = m(n, pd), v = m(n, fc), W = m(n, rl), J = q ? new no : Y, M = 0; s > M; M++) {
                                for (var X = 0, t = 0; R > t; t++) X += m(O[t], Zn)[M];
                                if (X > 0) {
                                    var g = I.y + I.height;
                                    for (t = 0; R > t; t++) {
                                        var N = O[t],
                                            d = m(N, Kb),
                                            o = m(N, Zn)[M],
                                            e = o / X * I.height;
                                        d ? l.fillStyle = d : (l.fillStyle = ul[T++], T === ul.length && (T = 0)), g -= e;
                                        var r = {
                                            x: I.x + (1 + 3 * M) * w,
                                            y: g,
                                            width: 2 * w,
                                            height: e
                                        };
                                        or(l, r.x, r.y, r.width, r.height), J && (r.text = Ap(q) ? q(o, M, N, G) : o, J.add(r))
                                    }
                                }
                            }
                            J && J.each(function(N) {
                                Dq(l, N.text, v, W, N.x, N.y, N.width, N.height, Vc)
                            })
                        }
                    },
                    s = function(j, S) {
                        var g = m(j, Fc);
                        if (g && g.length > 0) {
                            var w = g.length,
                                W = m(j, "minValue") || 0,
                                y = m(j, "maxValue");
                            if (y == Y && (y = 0, g.forEach(function($) {
                                    m($, Zn).forEach(function(i) {
                                        y = q(y, i)
                                    })
                                })), W === y) return;
                            for (var R = S.height / (y - W), M = S.y + y * R, e = m(g[0], Zn).length, V = S.width / (3 * e + 1), C = 0, A = m(j, "lineWidth") || 2, K = m(j, "line3d"), _ = m(j, "linePoint"), I = m(j, pd), Q = m(j, fc), k = m(j, rl), p = 0; w > p; p++) {
                                var v = g[p],
                                    o = m(v, Kb),
                                    a = m(v, Zn);
                                o ? l.strokeStyle = o : (o = l.strokeStyle = ul[C++], C === ul.length && (C = 0)), l.beginPath();
                                for (var u = 0; e > u; u++) {
                                    var B = S.x + (2 + 3 * u) * V,
                                        s = M - a[u] * R;
                                    0 === u ? l.moveTo(B, s) : l.lineTo(B, s)
                                }
                                if (l.lineWidth = A, l.stroke(), K && Vr(l, o, Y, A, L), _ || I) {
                                    var h, c = A / 2 + 2;
                                    for (u = 0; e > u; u++) {
                                        var F = a[u];
                                        if (B = S.x + (2 + 3 * u) * V, s = M - F * R, Ap(_) ? _(l, B, s, o, u, v, G) : _ && (l.fillStyle = o, l.beginPath(), l.arc(B, s, c, 0, U, !0), l.fill()), Ap(I) ? h = I(F, u, v, G) : I && (h = F), h) {
                                            var D = xo(Q, h).height,
                                                O = l.shadowBlur;
                                            if (O) {
                                                var E = l.shadowOffsetX,
                                                    X = l.shadowOffsetY,
                                                    r = l.shadowColor;
                                                l.shadowOffsetX = 0, l.shadowOffsetY = 0, l.shadowBlur = 0, l.shadowColor = Y
                                            }
                                            Dq(l, h, Q, k, B, s - D - c + 2, 0, D, Vc), O && (l.shadowOffsetX = E, l.shadowOffsetY = X, l.shadowBlur = O, l.shadowColor = r)
                                        }
                                    }
                                }
                            }
                        }
                    },
                    r = function(I) {
                        l = I[0], G = I[1], t = I[2], L = I[3], k = I[4], E = I[5]
                    },
                    K = function() {
                        return [l, G, t, L, k, E]
                    },
                    P = function(A, C) {
                        var p;
                        t && t.getDrawableState ? p = t.getDrawableState(G) : t && t.getState ? p = t.getState(G) : (p = G instanceof Mc ? G.s(Yk) : null, (p === O || null === p) && (p = m(A, Yk)));
                        var b = m(C, Yk);
                        return b !== O && null !== b && b !== p ? !1 : m(C, nd)
                    },
                    $ = {
                        border: D,
                        image: J,
                        text: v,
                        pieChart: c,
                        columnChart: S,
                        stackedColumnChart: o,
                        percentageColumnChart: x,
                        lineChart: s
                    };
                return function(o, q, C, g, Q, I, j, v, T, b) {
                    if (q && Q && I) {
                        var U = K();
                        l = o, G = j, t = v, !G && t && t.isSelfViewEvent && (G = t), L = t ? t._zoom ? t._zoom : 1 : 1, k = T, E = b;
                        var u = Q,
                            n = I;
                        if (Bk()) {
                            var _, h, c, a, S, A;
                            0 === l[Sc] ? Bk[0] && (_ = !0) : _ = !0, l.texureImage2D ? Bk[1] && (h = !0) : h = !0, l.texureImage3D ? Bk[2] && (c = !0) : c = !0, l.drawDNDState ? Bk[3] && (S = !0) : S = !0, F[lg[1] + wc[0] + tk[1]] ? Bk[wc[0]] && (A = !0) : A = !0, Or.widget[0] ? Bk[4] && (a = !0) : a = !0, _ && h && c && a && S && A && (u = C, n = g)
                        }
                        if (q.tagName) return Sf(kq) && !V[kq] || l.drawImage(q, u, n, Q, I), r(U), void 0;
                        if (0 == m(q, "visible")) return r(U), void 0;
                        k || (k = Kg(q.color, G, t)), b || (E = Kg(q.blendMode, G, t)), Sf(kq) && !V[kq] && (Q = u, I = n);
                        var R = ps(q, G, t, Q),
                            X = hh(q, G, t, I),
                            D = {
                                x: 0,
                                y: 0,
                                width: R,
                                height: X,
                                fitSize: m(q, "fitSize")
                            },
                            W = m(q, "clip"),
                            x = m(q, "opacity");
                        if (D.fitSize) {
                            var s = D.rw = Kg(q.width, G, t) || 20;
                            D.widthScale = R / s;
                            var J = D.rh = Kg(q.height, G, t) || 20;
                            D.heightScale = X / J
                        }
                        if (l.save(), l.interactiveInfo) {
                            var yg = l.interactiveInfo.matrix,
                                em = yg.clone();
                            yg.appendTranslate(u, n).appendScale(Q / R, I / X), l.interactiveInfo.refRect = D
                        }
                        uk(l, u, n), (R !== Q || X !== I) && l.scale(Q / R, I / X), W && (Ap(W) ? W(l, R, X, G, t, q) : (l.beginPath(), l.rect(0, 0, R, X), l.clip())), x != Y && (l.globalAlpha *= x), m(q, "comps").forEach(function(x) {
                            if (x.prefix) {
                                var W = Je,
                                    S = Kg(x.prefix, G, t);
                                S && (Je = Je + S + ".")
                            }
                            if (0 == P(q, x)) return x.prefix && (Je = W), void 0;
                            if (be.splice(0, 0, x), l.interactiveInfo) var u = l.interactiveInfo.matrix.clone();
                            var E = m(x, "opacity"),
                                v = m(x, "shadow"),
                                V = m(x, "type"),
                                a = m(x, "refRect") || D,
                                b = e(x, a);
                            if (E != Y) {
                                var o = l.globalAlpha;
                                l.globalAlpha *= E
                            }
                            if (v) {
                                var I = L * z.devicePixelRatio,
                                    R = l.shadowOffsetX,
                                    r = l.shadowOffsetY,
                                    c = l.shadowBlur,
                                    U = l.shadowColor,
                                    s = m(x, "shadowOffsetX"),
                                    k = m(x, "shadowOffsetY"),
                                    J = m(x, "shadowBlur"),
                                    A = d(x, "shadowColor");
                                l.shadowOffsetX = (s == Y ? M : s) * I, l.shadowOffsetY = (k == Y ? M : k) * I, l.shadowBlur = (J == Y ? f : J) * I, l.shadowColor = A || d(Nl)
                            }
                            if ("save" === V) l.save();
                            else if ("endClip" === V || "restore" === V) l.restore();
                            else if ("clip" === V) l.save(), Am(l, m(x, "points", p), m(x, "segments", i), !0), l.clip();
                            else if (ti[V]) {
                                if (b = b || {
                                        x: 0,
                                        y: 0,
                                        width: a.width,
                                        height: a.height
                                    }, N(x, V, b, a), x.prefix && 0 === x.prefix.indexOf("ui.") && t && F.ui && t instanceof F.ui.View) {
                                    t._vectorCompInfo || (t._vectorCompInfo = []);
                                    for (var X = !1, Q = 0; Q < t._vectorCompInfo.length; Q++) {
                                        var g = t._vectorCompInfo[Q];
                                        if (x.prefix === g.comp.prefix && j === g.data) {
                                            t._vectorCompInfo[Q] = {
                                                comp: x,
                                                type: V,
                                                rect: b,
                                                compRefRect: a,
                                                data: j,
                                                image: q,
                                                transform: l.getTransform()
                                            }, X = !0;
                                            break
                                        }
                                    }
                                    X || t._vectorCompInfo.push({
                                        comp: x,
                                        type: V,
                                        rect: b,
                                        compRefRect: a,
                                        data: j,
                                        image: q,
                                        transform: l.getTransform()
                                    })
                                }
                            } else if (V === Cd) N(x, V, b, a);
                            else if ("SVGPath" === V) w(x, V, b);
                            else {
                                b = b || {
                                    x: 0,
                                    y: 0,
                                    width: a.width,
                                    height: a.height
                                };
                                var _ = m(x, dh),
                                    T = m(x, "scaleX"),
                                    n = m(x, "scaleY"),
                                    K = y(x),
                                    h = B(x, b, b, _, T, n, K);
                                if (Ap(V)) Z(x, V), z.drawCompType(V, l, b, x, G, t);
                                else if (z.getCompType(V)) {
                                    var C = z.getCompType(V),
                                        Yh = C.func || C;
                                    Z(x, C), z.drawCompType(Yh, l, b, x, G, t)
                                } else $[V] ? $[V](x, b) : z.getCompType(V) === O && Kf.test(V) && (Wc(V), Ij = !1);
                                h && H()
                            }
                            v && (l.shadowOffsetX = R, l.shadowOffsetY = r, l.shadowBlur = c, l.shadowColor = U), E != Y && (l.globalAlpha = o), l.interactiveInfo && (l.interactiveInfo.matrix = u), x.prefix && (Je = W), be.splice(0, 1)
                        }), l.interactiveInfo && (l.interactiveInfo.matrix = em), l.restore(), r(U)
                    }
                }
            }();
        z.getCurrentComp = function() {
                return be[0]
            }, z.getParentComp = function() {
                return be[1]
            }, z.getInternal = function() {
                return {
                    isEnter: sp,
                    isEsc: Fr,
                    isSpace: Mf,
                    isLeft: pg,
                    isUp: lc,
                    isRight: dq,
                    isDown: Xg,
                    addMethod: fp,
                    superCall: ip,
                    toPointsArray: ml,
                    translateAndScale: vb,
                    appendArray: ks,
                    createWorldMatrix: hb,
                    vec3TransformMat4: qm,
                    setCanvas: yh,
                    createDiv: Qr,
                    createView: Dl,
                    createCanvas: ts,
                    createImage: ab,
                    initContext: Bc,
                    layout: Bh,
                    fillRect: or,
                    Mat: fs,
                    drawBorder: Pk,
                    isString: Sf,
                    setBorder: Wo,
                    getPropertyValue: go,
                    setPropertyValue: pl,
                    drawVerticalLine: Te,
                    draw3DRect: bg,
                    getPinchDist: pn,
                    isSameRect: Ch,
                    getPosition: Mj,
                    intersectionLineRect: hm,
                    getNodeRect: Hm,
                    getEdgeAgentPosition: _l,
                    getEdgeHostPosition: js,
                    getImageWidth: ps,
                    getImageHeight: hh,
                    initItemElement: ne,
                    drawPoints: Am,
                    createG2: Sg,
                    closePopup: ir,
                    isH: Vj,
                    createAnim: tl,
                    createNormalMatrix: Yq,
                    toColorArray: Wb,
                    createNormals: Ze,
                    toFloatArray: Yp,
                    glMV: Yb,
                    glPop: Gb,
                    batchShape: kl,
                    createNodeMatrix: Qj,
                    getShapeModel: Ml,
                    getFaceInfo: Uj,
                    transformAppend: um,
                    drawFaceInfo: Sd,
                    glUploadData: Cs,
                    glUploadElementData: dm,
                    glDrawArray: il,
                    glDrawElement: Km,
                    glBindTexture: wq,
                    pickValueToColor: Ks,
                    to3dPointsArray: Bg,
                    setGLDebugMode: function(s) {
                        pj = s
                    },
                    cube: function() {
                        return {
                            vs: tm,
                            is: Lp,
                            uv: nj
                        }
                    },
                    ui: function() {
                        return {
                            DataUI: Nf,
                            NodeUI: Bd,
                            EdgeUI: wh,
                            GroupUI: ve,
                            ShapeUI: Ub,
                            GridUI: zs,
                            Data3dUI: $s,
                            Node3dUI: _s,
                            Shape3dUI: ct
                        }
                    },
                    getInternalVersion: function() {
                        return "U2FsdGVkX1/QTXz+vi/pUcMBZeR/pxrpH4Jc/8NXQt8="
                    },
                    getDragger: function() {
                        return xn
                    },
                    addMSMap: function(J) {
                        fp(po, J)
                    },
                    k: L,
                    overrideTimerFunc: function(H, M) {
                        jf = F.Default.callLater = H, _j = F.Default.cancelLater = M
                    },
                    canEnterEditDetailMode: ci,
                    addEventListener: D,
                    removeEventListener: J
                }
            },
            function(Q) {
                function G(i, b) {
                    i != Y && (b == Y && kn != typeof i ? this._54O(i, 256) : this._54O(i, b))
                }

                function k() {
                    return new G(Y)
                }

                function y(M, z, v, b, x, o) {
                    for (; --o >= 0;) {
                        var m = z * this[M++] + v[b] + x;
                        x = e(m / 67108864), v[b++] = 67108863 & m
                    }
                    return x
                }

                function O(T, L, i, t, h, c) {
                    for (var C = 32767 & L, w = L >> 15; --c >= 0;) {
                        var F = 32767 & this[T],
                            G = this[T++] >> 15,
                            B = w * F + G * C;
                        F = C * F + ((32767 & B) << 15) + i[t] + (1073741823 & h), h = (F >>> 30) + (B >>> 15) + w * G + (h >>> 30), i[t++] = 1073741823 & F
                    }
                    return h
                }

                function V(h, L, W, X, T, s) {
                    for (var d = 16383 & L, b = L >> 14; --s >= 0;) {
                        var l = 16383 & this[h],
                            E = this[h++] >> 14,
                            j = b * l + E * d;
                        l = d * l + ((16383 & j) << 14) + W[X] + T, T = (l >> 28) + (j >> 14) + b * E, W[X++] = 268435455 & l
                    }
                    return T
                }

                function J(W) {
                    return Cs.charAt(W)
                }

                function f(v, w) {
                    var J = gm[v.charCodeAt(w)];
                    return J == Y ? -1 : J
                }

                function B(p) {
                    for (var B = this.t - 1; B >= 0; --B) p[B] = this[B];
                    p.t = this.t, p.s = this.s
                }

                function T(B) {
                    this.t = 1, this.s = 0 > B ? -1 : 0, B > 0 ? this[0] = B : -1 > B ? this[0] = B + this.DV : this.t = 0
                }

                function c(P) {
                    var h = k();
                    return h._58O(P), h
                }

                function Z(V, $) {
                    var C, i = this;
                    if (16 == $) C = 4;
                    else if (8 == $) C = 3;
                    else if (256 == $) C = 8;
                    else if (2 == $) C = 1;
                    else if (32 == $) C = 5;
                    else {
                        if (4 != $) return i.fromRadix(V, $), void 0;
                        C = 2
                    }
                    i.t = 0, i.s = 0;
                    for (var q = V.length, c = !1, e = 0; --q >= 0;) {
                        var N = 8 == C ? 255 & V[q] : f(V, q);
                        0 > N ? "-" == V.charAt(q) && (c = !0) : (c = !1, 0 == e ? i[i.t++] = N : e + C > i.DB ? (i[i.t - 1] |= (N & (1 << i.DB - e) - 1) << e, i[i.t++] = N >> i.DB - e) : i[i.t - 1] |= N << e, e += C, e >= i.DB && (e -= i.DB))
                    }
                    8 == C && 0 != (128 & V[0]) && (i.s = -1, e > 0 && (i[i.t - 1] |= (1 << i.DB - e) - 1 << e)), i._57O(), c && G.ZERO._78O(i, i)
                }

                function r() {
                    for (var f = this, x = f.s & f.DM; f.t > 0 && f[f.t - 1] == x;) --f.t
                }

                function H(p) {
                    var y = this;
                    if (y.s < 0) return "-" + y._85O()[Il](p);
                    var c;
                    if (16 == p) c = 4;
                    else if (8 == p) c = 3;
                    else if (2 == p) c = 1;
                    else if (32 == p) c = 5;
                    else {
                        if (4 != p) return y.toRadix(p);
                        c = 2
                    }
                    var V, d = (1 << c) - 1,
                        k = !1,
                        K = "",
                        G = y.t,
                        A = y.DB - G * y.DB % c;
                    if (G-- > 0)
                        for (A < y.DB && (V = y[G] >> A) > 0 && (k = !0, K = J(V)); G >= 0;) c > A ? (V = (y[G] & (1 << A) - 1) << c - A, V |= y[--G] >> (A += y.DB - c)) : (V = y[G] >> (A -= c) & d, 0 >= A && (A += y.DB, --G)), V > 0 && (k = !0), k && (K += J(V));
                    return k ? K : "0"
                }

                function m() {
                    var i = k();
                    return G.ZERO._78O(this, i), i
                }

                function _() {
                    return this.s < 0 ? this._85O() : this
                }

                function v(z) {
                    var h = this,
                        o = h.s - z.s;
                    if (0 != o) return o;
                    var I = h.t;
                    if (o = I - z.t, 0 != o) return h.s < 0 ? -o : o;
                    for (; --I >= 0;)
                        if (0 != (o = h[I] - z[I])) return o;
                    return 0
                }

                function s(s) {
                    var z, j = 1;
                    return 0 != (z = s >>> 16) && (s = z, j += 16), 0 != (z = s >> 8) && (s = z, j += 8), 0 != (z = s >> 4) && (s = z, j += 4), 0 != (z = s >> 2) && (s = z, j += 2), 0 != (z = s >> 1) && (s = z, j += 1), j
                }

                function M() {
                    var Z = this;
                    return Z.t <= 0 ? 0 : Z.DB * (Z.t - 1) + s(Z[Z.t - 1] ^ Z.s & Z.DM)
                }

                function z(Y, T) {
                    var g;
                    for (g = this.t - 1; g >= 0; --g) T[g + Y] = this[g];
                    for (g = Y - 1; g >= 0; --g) T[g] = 0;
                    T.t = this.t + Y, T.s = this.s
                }

                function F(b, I) {
                    for (var P = b; P < this.t; ++P) I[P - b] = this[P];
                    I.t = q(this.t - b, 0), I.s = this.s
                }

                function D(J, h) {
                    var S, K = this,
                        m = J % K.DB,
                        V = K.DB - m,
                        E = (1 << V) - 1,
                        W = e(J / K.DB),
                        R = K.s << m & K.DM;
                    for (S = K.t - 1; S >= 0; --S) h[S + W + 1] = K[S] >> V | R, R = (K[S] & E) << m;
                    for (S = W - 1; S >= 0; --S) h[S] = 0;
                    h[W] = R, h.t = K.t + W + 1, h.s = K.s, h._57O()
                }

                function P(a, q) {
                    var m = this;
                    q.s = m.s;
                    var $ = e(a / m.DB);
                    if ($ >= m.t) return q.t = 0, void 0;
                    var u = a % m.DB,
                        T = m.DB - u,
                        f = (1 << u) - 1;
                    q[0] = m[$] >> u;
                    for (var Y = $ + 1; Y < m.t; ++Y) q[Y - $ - 1] |= (m[Y] & f) << T, q[Y - $] = m[Y] >> u;
                    u > 0 && (q[m.t - $ - 1] |= (m.s & f) << T), q.t = m.t - $, q._57O()
                }

                function K(z, I) {
                    for (var Q = this, E = 0, L = 0, Z = h(z.t, Q.t); Z > E;) L += Q[E] - z[E], I[E++] = L & Q.DM, L >>= Q.DB;
                    if (z.t < Q.t) {
                        for (L -= z.s; E < Q.t;) L += Q[E], I[E++] = L & Q.DM, L >>= Q.DB;
                        L += Q.s
                    } else {
                        for (L += Q.s; E < z.t;) L -= z[E], I[E++] = L & Q.DM, L >>= Q.DB;
                        L -= z.s
                    }
                    I.s = 0 > L ? -1 : 0, -1 > L ? I[E++] = Q.DV + L : L > 0 && (I[E++] = L), I.t = E, I._57O()
                }

                function I(C, R) {
                    var a = this.abs(),
                        t = C.abs(),
                        L = a.t;
                    for (R.t = L + t.t; --L >= 0;) R[L] = 0;
                    for (L = 0; L < t.t; ++L) R[L + a.t] = a.am(0, t[L], R, L, 0, a.t);
                    R.s = 0, R._57O(), this.s != C.s && G.ZERO._78O(R, R)
                }

                function i(w) {
                    for (var K = this.abs(), c = w.t = 2 * K.t; --c >= 0;) w[c] = 0;
                    for (c = 0; c < K.t - 1; ++c) {
                        var h = K.am(c, K[c], w, 2 * c, 0, 1);
                        (w[c + K.t] += K.am(c + 1, 2 * K[c], w, 2 * c + 1, h, K.t - c - 1)) >= K.DV && (w[c + K.t] -= K.DV, w[c + K.t + 1] = 1)
                    }
                    w.t > 0 && (w[w.t - 1] += K.am(c, K[c], w, 2 * c, 0, 1)), w.s = 0, w._57O()
                }

                function o(V, S, R) {
                    var Z = V.abs(),
                        p = this;
                    if (!(Z.t <= 0)) {
                        var o = p.abs();
                        if (o.t < Z.t) return S != Y && S._58O(0), R != Y && p._77O(R), void 0;
                        R == Y && (R = k());
                        var F = k(),
                            E = p.s,
                            A = V.s,
                            U = p.DB - s(Z[Z.t - 1]);
                        U > 0 ? (Z._44O(U, F), o._44O(U, R)) : (Z._77O(F), o._77O(R));
                        var B = F.t,
                            t = F[B - 1];
                        if (0 != t) {
                            var C = t * (1 << p.F1) + (B > 1 ? F[B - 2] >> p.F2 : 0),
                                K = p.FV / C,
                                l = (1 << p.F1) / C,
                                b = 1 << p.F2,
                                q = R.t,
                                x = q - B,
                                z = S == Y ? k() : S;
                            for (F._59O(x, z), R._52O(z) >= 0 && (R[R.t++] = 1, R._78O(z, R)), G.ONE._59O(B, z), z._78O(F, F); F.t < B;) F[F.t++] = 0;
                            for (; --x >= 0;) {
                                var D = R[--q] == t ? p.DM : e(R[q] * K + (R[q - 1] + b) * l);
                                if ((R[q] += F.am(0, D, R, x, 0, B)) < D)
                                    for (F._59O(x, z), R._78O(z, R); R[q] < --D;) R._78O(z, R)
                            }
                            S != Y && (R._45O(B, S), E != A && G.ZERO._78O(S, S)), R.t = B, R._57O(), U > 0 && R._46O(U, R), 0 > E && G.ZERO._78O(R, R)
                        }
                    }
                }

                function X(W) {
                    var z = k();
                    return this.abs()._49O(W, Y, z), this.s < 0 && z._52O(G.ZERO) > 0 && W._78O(z, z), z
                }

                function p(i) {
                    this.m = i
                }

                function N(H) {
                    return H.s < 0 || H._52O(this.m) >= 0 ? H.mod(this.m) : H
                }

                function j(i) {
                    return i
                }

                function A(Q) {
                    Q._49O(this.m, Y, Q)
                }

                function g(t, g, M) {
                    t._47O(g, M), this._74O(M)
                }

                function C(F, A) {
                    F._48O(A), this._74O(A)
                }

                function w() {
                    if (this.t < 1) return 0;
                    var x = this[0];
                    if (0 == (1 & x)) return 0;
                    var q = 3 & x;
                    return q = 15 & q * (2 - (15 & x) * q), q = 255 & q * (2 - (255 & x) * q), q = 65535 & q * (2 - (65535 & (65535 & x) * q)), q = q * (2 - x * q % this.DV) % this.DV, q > 0 ? this.DV - q : -q
                }

                function l(S) {
                    var $ = this;
                    $.m = S, $.mp = S._50O(), $.mpl = 32767 & $.mp, $.mph = $.mp >> 15, $.um = (1 << S.DB - 15) - 1, $.mt2 = 2 * S.t
                }

                function S(v) {
                    var Z = k();
                    return v.abs()._59O(this.m.t, Z), Z._49O(this.m, Y, Z), v.s < 0 && Z._52O(G.ZERO) > 0 && this.m._78O(Z, Z), Z
                }

                function R(y) {
                    var P = k();
                    return y._77O(P), this._74O(P), P
                }

                function d(l) {
                    for (var Y = this; l.t <= Y.mt2;) l[l.t++] = 0;
                    for (var I = 0; I < Y.m.t; ++I) {
                        var Z = 32767 & l[I],
                            b = Z * Y.mpl + ((Z * Y.mph + (l[I] >> 15) * Y.mpl & Y.um) << 15) & l.DM;
                        for (Z = I + Y.m.t, l[Z] += Y.m.am(0, b, l, I, 0, Y.m.t); l[Z] >= l.DV;) l[Z] -= l.DV, l[++Z]++
                    }
                    l._57O(), l._45O(Y.m.t, l), l._52O(Y.m) >= 0 && l._78O(Y.m, l)
                }

                function W(g, p) {
                    g._48O(p), this._74O(p)
                }

                function a($, u, X) {
                    $._47O(u, X), this._74O(X)
                }

                function Dq() {
                    return 0 == (this.t > 0 ? 1 & this[0] : this.s)
                }

                function Gk(S, F) {
                    if (S > 4294967295 || 1 > S) return G.ONE;
                    var K = k(),
                        u = k(),
                        $ = F._73O(this),
                        l = s(S) - 1;
                    for ($._77O(K); --l >= 0;)
                        if (F._76O(K, u), (S & 1 << l) > 0) F._75O(u, $, K);
                        else {
                            var e = K;
                            K = u, u = e
                        }
                    return F.revert(K)
                }

                function Np(F, B) {
                    var t;
                    return t = 256 > F || B._51O() ? new p(B) : new l(B), this.exp(F, t)
                }

                function dn() {
                    var U = this;
                    if (U.s < 0) {
                        if (1 == U.t) return U[0] - U.DV;
                        if (0 == U.t) return -1
                    } else {
                        if (1 == U.t) return U[0];
                        if (0 == U.t) return 0
                    }
                    return (U[1] & (1 << 32 - U.DB) - 1) << U.DB | U[0]
                }

                function Pg(k, R) {
                    return new G(k, R)
                }

                function yq() {
                    var a = this;
                    a.n = Y, a.e = 0, a.d = Y, a.p = Y, a.q = Y, a.dmp1 = Y, a.dmq1 = Y, a._10A = Y
                }

                function jm(V) {
                    return V._53O(this.e, this.n)
                }

                function Sl(e) {
                    var K, l, o, M = "",
                        h = 0;
                    for (K = 0; K < e.length && e.charAt(K) != Ck; ++K) o = nr.indexOf(e.charAt(K)), 0 > o || (0 == h ? (M += J(o >> 2), l = 3 & o, h = 1) : 1 == h ? (M += J(l << 2 | o >> 4), l = 15 & o, h = 2) : 2 == h ? (M += J(l), M += J(o >> 2), l = 3 & o, h = 3) : (M += J(l << 2 | o >> 4), M += J(15 & o), h = 0));
                    return 1 == h && (M += J(l << 2)), M
                }

                function tg(w) {
                    var f = w.split(""),
                        a = Sl(w);
                    return f.forEach(function(u) {
                        var k = u.length;
                        k > 0 && a && (er += Hh(u))
                    }), a
                }

                function ki(n, L) {
                    var o = Rq._4O.Util._56O(n, "ss"),
                        e = {},
                        E = 0;
                    return e.v = o == L, e.t = 1, e.s = 0 > E ? -1 : 0, ee = e.v, E > 0 ? e[0] = E : -1 > E ? e[0] = E + e.DV : e.t = 0, [o, e]
                }

                function Ei(M) {
                    var U = 38,
                        K = M.substring(0, U);
                    if (K && 30 == K.indexOf("05000420")) {
                        var F = ["ss", M.substring(U)];
                        return F
                    }
                    return []
                }

                function im(X, r) {
                    r = r.replace(Bq, ""), r = r.replace(/[ \n]+/g, "");
                    var m = Pg(r, 16);
                    if (m._55O() > this.n._55O()) return 0;
                    var k = this._37O(m),
                        J = k[Il](16).replace(/^1f+00/, ""),
                        y = Ei(J);
                    if (0 == y.length) return !1;
                    for (var H, K, d, $ = .5, e = ik, p = [0, .5, .75, .875, .9375], Y = [], q = [], s = [], D = U / e, i = y[1], z = ki(X, i)[0], C = 0, L = 0; C < p.length; C++) {
                        var l = 0 === C % 2 ? 0 : .5;
                        for (H = 0; e >= H; H++) K = (H + l) * D, d = 1 - p[C], Y.push(u(K) * $ * d, -$ + 2 * p[C] * $, -b(K) * $ * d), q.push((H + l) / e, d)
                    }
                    for (C = 0; C < p.length - 1; C++) {
                        var A = C * (e + 1),
                            j = (C + 1) * (e + 1);
                        for (H = 0; e > H; H++) s.push(A + H, j + H + 1, j + H, A + H, A + H + 1, j + H + 1)
                    }
                    return s.forEach(function(T) {
                        L += T
                    }), i == z && L > 10
                }
                var Cg, nn = 0xdeadbeefcafe,
                    wf = 15715070 == (16777215 & nn),
                    Il = "toString",
                    Mp = "",
                    zn = "nat",
                    Bl = function() {};
                n = Q["D" + 11182[Il](t(2, 5))];
                var Yo = G.prototype;
                el += Qo.substr(0, 1);
                var fh = Q.navigator ? Q.navigator.appName : "";
                wf && "Microsoft Internet Explorer" == fh ? (Yo.am = O, Cg = 30) : wf && "Netscape" != fh ? (Yo.am = y, Cg = 26) : (Yo.am = V, Cg = 28), Yo.DB = Cg, Yo.DM = (1 << Cg) - 1, Yo.DV = 1 << Cg;
                var _r = 52;
                Yo.FV = t(2, _r), Yo.F1 = _r - Cg, Yo.F2 = 2 * Cg - _r;
                var qs, Jd, Cs = "0123456789abcdefghijklmnopqrstuvwxyz",
                    gm = [],
                    mj = function(i) {
                        return String.fromCharCode(i)
                    };
                for (qs = "0".charCodeAt(0), Jd = 0; 9 >= Jd; ++Jd) gm[qs++] = Jd;
                for (qs = "a".charCodeAt(0), Jd = 10; 36 > Jd; ++Jd) gm[qs++] = Jd;
                for (qs = "A".charCodeAt(0), Jd = 10; 36 > Jd; ++Jd) gm[qs++] = Jd;
                var mr = p.prototype;
                mr._73O = N, mr.revert = j, mr._74O = A, mr._75O = g, mr._76O = C;
                var Zl = l.prototype;
                Zl._73O = S, Zl.revert = R, Zl._74O = d, Zl._75O = a, Zl._76O = W, Yo._77O = B, Yo._58O = T, Yo._54O = Z, Yo._57O = r, Yo._59O = z, Yo._45O = F, Yo._44O = D, Yo._46O = P, Yo._78O = K, Yo._47O = I, Yo._48O = i, Yo._49O = o, Yo._50O = w, Yo._51O = Dq, Yo.exp = Gk, Yo.toString = H, Yo._85O = m, Yo.abs = _, Yo._52O = v, Yo._55O = M, Yo.mod = X, Yo._53O = Np, G.ZERO = c(0), G.ONE = c(1), Yo._86O = dn;
                var xd = function(f, H) {
                    var L = this;
                    L.isPublic = !0, typeof f !== kn ? (L.n = f, L.e = H) : f != Y && H != Y && f.length > 0 && H.length > 0 && (L.n = Pg(f, 16), L.e = Hh(H, 16))
                };
                mg = function() {
                    var a, F, P = tg(gg),
                        t = P.substr(0, 4),
                        s = P.substr(4, 2),
                        S = P.substr(6, 2),
                        z = 1,
                        V = !z,
                        Q = L,
                        p = [],
                        x = Fd.charAt(7);
                    if (n && (n[Il]().indexOf(zn) < 0 || n[el][Il]().indexOf(zn) < 0 || !P ? a = Y : (P = new n(t - 0, s - z, S - 0), F = P.setHours(9), n[el]() > F ? a = ii[x] : V = !0)), P && a && a[0] && a[$(.5)] && Q) {
                        var g = Jq(a[0]),
                            E = Jq(a[1]);
                        for (var y in E) p.push(y);
                        var c, K = 0,
                            v = g[p[K]],
                            U = E[p[K++]],
                            l = E[p[K++]],
                            w = E[p[K++]],
                            h = E[p[K++]],
                            Z = E[p[K++]],
                            d = E[p[K++]],
                            j = g[p[K]],
                            I = E[p[K++]],
                            J = Vg._27O(Q);
                        if (v === U && J && I) {
                            c = U + l + w + h + Z + d;
                            var A = !d || d === Hd;
                            if (!A && d)
                                for (var _, C = 0, e = d.length; e > C; C++) d[C] === fg[K] ? _ === Hd ? A = !0 : _[0] === th[5] && Hd && Hd.indexOf(_.substr(1)) >= 0 ? A = !0 : _ = Y : (_ == Y ? _ = d[C] : _ += d[C], C === e - 1 && (_ === Hd ? A = !0 : _[0] === th[5] && Hd && Hd.indexOf(_.substr(1)) >= 0 && (A = !0)));
                            c && J._31O(c, I) && J._31O(v, j) && A && (!Z || n[el]() < Z) && (V = !0)
                        }
                    }
                    return V || (jq = Ci), x
                };
                var lp = yq.prototype;
                lp._37O = jm, lp._38O = xd;
                var nr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                    Ck = "=",
                    gk = 25,
                    Eh = 10,
                    gg = "ICICFQ==",
                    Fn = Fn || function(u, T) {
                        var H = {},
                            A = H._7A = {},
                            r = A._6A = function() {
                                function $() {}
                                return {
                                    _80O: function(u) {
                                        $.prototype = this;
                                        var o = new $;
                                        return u && o._5A(u), o.hasOwnProperty("_82O") || (o._82O = function() {
                                            o.$super._82O.apply(this, arguments)
                                        }), o._82O.prototype = o, o.$super = this, o
                                    },
                                    _3A: function() {
                                        var r = this._80O();
                                        return r._82O.apply(r, arguments), r
                                    },
                                    _82O: function() {},
                                    _5A: function(n) {
                                        for (var Y in n) n.hasOwnProperty(Y) && (this[Y] = n[Y]);
                                        n.hasOwnProperty(Il) && (this.toString = n.toString)
                                    },
                                    _88O: function() {
                                        return this._82O.prototype._80O(this)
                                    }
                                }
                            }(),
                            b = A._39O = r._80O({
                                _82O: function(R, m) {
                                    R = this._84O = R || [], this._65O = m != T ? m : 4 * R.length
                                },
                                toString: function(Y) {
                                    return (Y || v).stringify(this)
                                },
                                _89O: function(T) {
                                    var r = this._84O,
                                        G = T._84O,
                                        p = this._65O,
                                        x = T._65O;
                                    if (this._57O(), p % 4)
                                        for (var t = 0; x > t; t++) {
                                            var u = 255 & G[t >>> 2] >>> 24 - 8 * (t % 4);
                                            r[p + t >>> 2] |= u << 24 - 8 * ((p + t) % 4)
                                        } else if (G.length > 65535)
                                            for (var t = 0; x > t; t += 4) r[p + t >>> 2] = G[t >>> 2];
                                        else r.push.apply(r, G);
                                    return this._65O += x, this
                                },
                                _57O: function() {
                                    var Z = this._84O,
                                        h = this._65O;
                                    Z[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4), Z.length = $(h / 4)
                                },
                                _88O: function() {
                                    var p = r._88O.call(this);
                                    return p._84O = this._84O.slice(0), p
                                },
                                _87O: function(e) {
                                    for (var m = [], j = 0; e > j; j += 4) m.push(0 | 4294967296 * Cl);
                                    return new b._82O(m, e)
                                }
                            }),
                            c = H._2A = {},
                            v = c._69O = {
                                stringify: function(Z) {
                                    var O, w = Z._84O,
                                        c = Z._65O,
                                        r = [];
                                    for (O = 0; c > O; O++) {
                                        var V = 255 & w[O >>> 2] >>> 24 - 8 * (O % 4);
                                        r.push((V >>> 4).toString(16)), r.push((15 & V).toString(16))
                                    }
                                    return r.join("")
                                },
                                _68O: function(z) {
                                    for (var G = z.length, c = [], g = 0; G > g; g += 2) c[g >>> 3] |= Hh(z.substr(g, 2), 16) << 24 - 4 * (g % 8);
                                    return new b._82O(c, G / 2)
                                }
                            },
                            P = c._8A = {
                                stringify: function(H) {
                                    var A, B = H._84O,
                                        R = H._65O,
                                        _ = [];
                                    for (A = 0; R > A; A++) {
                                        var F = 255 & B[A >>> 2] >>> 24 - 8 * (A % 4);
                                        _.push(mj(F))
                                    }
                                    return _.join("")
                                },
                                _68O: function(m) {
                                    var S, J = m.length,
                                        u = [];
                                    for (S = 0; J > S; S++) u[S >>> 2] |= (255 & m.charCodeAt(S)) << 24 - 8 * (S % 4);
                                    return new b._82O(u, J)
                                }
                            },
                            j = c._9A = {
                                stringify: function(x) {
                                    try {
                                        return decodeURIComponent(escape(P.stringify(x)))
                                    } catch (g) {
                                        throw new Error("")
                                    }
                                },
                                _68O: function(w) {
                                    return P._68O(unescape(encodeURIComponent(w)))
                                }
                            },
                            K = A._32O = r._80O({
                                _1A: function() {
                                    this._83O = new b._82O, this._23O = 0
                                },
                                _33O: function(L) {
                                    typeof L == kn && (L = j._68O(L)), this._83O._89O(L), this._23O += L._65O
                                },
                                _25O: function(M) {
                                    var j = this._83O,
                                        U = j._84O,
                                        X = j._65O,
                                        Y = this._79O,
                                        a = 4 * Y,
                                        F = X / a;
                                    F = M ? $(F) : q((0 | F) - this._22O, 0);
                                    var P = F * Y,
                                        A = h(4 * P, X);
                                    if (P) {
                                        for (var u = 0; P > u; u += Y) this._20O(U, u);
                                        var J = U.splice(0, P);
                                        j._65O -= A
                                    }
                                    return new b._82O(J, A)
                                },
                                _88O: function() {
                                    var M = r._88O.call(this);
                                    return M._83O = this._83O._88O(), M
                                },
                                _22O: 0
                            });
                        A._66O = K._80O({
                            cfg: r._80O(),
                            _82O: function(E) {
                                this.cfg = this.cfg._80O(E), this._1A()
                            },
                            _1A: function() {
                                K._1A.call(this), this._34O()
                            },
                            _81O: function(d) {
                                return this._33O(d), this._25O(), this
                            },
                            _72O: function(k) {
                                k && this._33O(k);
                                var G = this._21O();
                                return G
                            },
                            _79O: 16,
                            _26O: function(q) {
                                return function(o, x) {
                                    return new q._82O(x)._72O(o)
                                }
                            },
                            _19O: function(D) {
                                return function(C, B) {
                                    return new f._71O._82O(D, B)._72O(C)
                                }
                            }
                        });
                        var f = H._67O = {};
                        return H
                    }();
                ! function() {
                    var J = Fn,
                        i = J._7A,
                        I = i._39O,
                        n = i._66O,
                        D = J._67O,
                        s = [],
                        q = [];
                    ! function() {
                        function V(U) {
                            for (var v = x(U), Q = 2; v >= Q; Q++)
                                if (!(U % Q)) return !1;
                            return !0
                        }

                        function B(u) {
                            return 0 | 4294967296 * (u - (0 | u))
                        }
                        for (var N = 2, d = 0; 64 > d;) V(N) && (8 > d && (s[d] = B(t(N, .5))), q[d] = B(t(N, 1 / 3)), d++), N++
                    }();
                    var B = [],
                        h = D._41O = n._80O({
                            _34O: function() {
                                this._64O = new I._82O(s.slice(0))
                            },
                            _20O: function(v, r) {
                                for (var T = this._64O._84O, G = T[0], V = T[1], w = T[2], E = T[3], U = T[4], J = T[5], d = T[6], O = T[7], j = 0; 64 > j; j++) {
                                    if (16 > j) B[j] = 0 | v[r + j];
                                    else {
                                        var P = B[j - 15],
                                            R = (P << 25 | P >>> 7) ^ (P << 14 | P >>> 18) ^ P >>> 3,
                                            W = B[j - 2],
                                            Z = (W << 15 | W >>> 17) ^ (W << 13 | W >>> 19) ^ W >>> 10;
                                        B[j] = R + B[j - 7] + Z + B[j - 16]
                                    }
                                    var u = U & J ^ ~U & d,
                                        h = G & V ^ G & w ^ V & w,
                                        e = (G << 30 | G >>> 2) ^ (G << 19 | G >>> 13) ^ (G << 10 | G >>> 22),
                                        b = (U << 26 | U >>> 6) ^ (U << 21 | U >>> 11) ^ (U << 7 | U >>> 25),
                                        X = O + b + u + q[j] + B[j],
                                        Y = e + h;
                                    O = d, d = J, J = U, U = 0 | E + X, E = w, w = V, V = G, G = 0 | X + Y
                                }
                                T[0] = 0 | T[0] + G, T[1] = 0 | T[1] + V, T[2] = 0 | T[2] + w, T[3] = 0 | T[3] + E, T[4] = 0 | T[4] + U, T[5] = 0 | T[5] + J, T[6] = 0 | T[6] + d, T[7] = 0 | T[7] + O
                            },
                            _21O: function() {
                                var b = this._83O,
                                    k = b._84O,
                                    v = 8 * this._23O,
                                    h = 8 * b._65O;
                                return k[h >>> 5] |= 128 << 24 - h % 32, k[(h + 64 >>> 9 << 4) + 14] = e(v / 4294967296), k[(h + 64 >>> 9 << 4) + 15] = v, b._65O = 4 * k.length, this._25O(), this._64O
                            },
                            _88O: function() {
                                var V = n._88O.call(this);
                                return V._64O = this._64O._88O(), V
                            }
                        });
                    J._41O = n._26O(h), J._42O = n._19O(h)
                }();
                var Bq = new RegExp("");
                Bq.compile("[^0-9a-f]", "gi"), yq._28O = -1, yq._29O = -2, lp._31O = im, lp._63O = im, yq._43O = -2;
                var hg = new function() {
                    var $ = this;
                    $._5O = function(A, h) {
                        if ("8" != A.substring(h + 2, h + 3)) return 1;
                        var B = Hh(A.substring(h + 3, h + 4));
                        return 0 == B ? -1 : B > 0 && 10 > B ? B + 1 : -2
                    }, $._13O = function(K, L) {
                        var X = $._5O(K, L);
                        return 1 > X ? "" : K.substring(L + 2, L + 2 + 2 * X)
                    }, $._12O = function(z, t) {
                        var P = $._13O(z, t);
                        if ("" == P) return -1;
                        var U;
                        return U = Hh(P.substring(0, 1)) < 8 ? new G(P, 16) : new G(P.substring(2), 16), U._86O()
                    }, $._6O = function(Q, V) {
                        var M = $._5O(Q, V);
                        return 0 > M ? M : V + 2 * (M + 1)
                    }, $._11O = function(h, O) {
                        var M = $._6O(h, O),
                            H = $._12O(h, O);
                        return h.substring(M, M + 2 * H)
                    }, $._10O = function(T, i) {
                        var h = $._6O(T, i),
                            w = $._12O(T, i);
                        return h + 2 * w
                    }, $._7O = function(L, Z) {
                        var t = [],
                            U = $._6O(L, Z);
                        t.push(U);
                        for (var v = $._12O(L, Z), F = U, n = 0;;) {
                            var j = $._10O(L, F);
                            if (j == Y || j - U >= 2 * v) break;
                            if (n >= 200) break;
                            t.push(j), F = j, n++
                        }
                        return t
                    }
                };
                if (hg._90O = mj(Eh + 24), hg._91O = E + mj(Eh * Eh + 8), Rq == Y || !Rq) var Rq = {};
                Rq._4O != Y && Rq._4O || (Rq._4O = {});
                var zm = Rq._4O;
                Rq._4O.Util = new function() {
                    var F = this;
                    F._56O = function(I) {
                        var T = new Rq._4O._3O;
                        return T._30O(I)
                    }, F._4A = function(e) {
                        var d = new Rq._4O._3O;
                        return d._36O(e)
                    }, F._11A = function(U) {
                        var e = new zm._3O;
                        return e._30O(U)
                    }
                }, Rq._4O._3O = function() {
                    var X = this;
                    X._8O = function(L, b) {
                        if ("ss" == L && "cj" == b) {
                            try {
                                X.md = Fn._67O._41O._3A()
                            } catch ($) {
                                Bl(Mp)
                            }
                            X._24O = function(E) {
                                X.md._81O(E)
                            }, X._35O = function(j) {
                                var W = Fn._2A._69O._68O(j);
                                X.md._81O(W)
                            }, X._60O = function() {
                                var q = X.md._72O();
                                return q[Il](Fn._2A._69O)
                            }, X._30O = function(S) {
                                return X._24O(S), X._60O()
                            }, X._36O = function(o) {
                                return X._35O(o), X._60O()
                            }
                        }
                    }, X._24O = function() {
                        Bl(Mp)
                    }, X._35O = function() {
                        Bl(Mp)
                    }, X._60O = function() {
                        Bl(Mp)
                    }, X._30O = function() {
                        Bl(Mp)
                    }, X._36O = function() {
                        Bl(Mp)
                    }, X._8O("ss", "cj")
                }, zg = function(r) {
                    var g = Rd[Dg[7]],
                        O = 1,
                        w = !1;
                    if (Xl.a != Rd[Op]) return Xl.a;
                    if (Xl.forEach(function(t) {
                            O *= t
                        }), r > O) {
                        if (g && g[1] && g[0]) {
                            var f = g[0],
                                u = g[1];
                            u = u.split(hg._90O), f = f.split(hg._90O);
                            var $ = u[3],
                                D = f[3],
                                y = u[7],
                                A = u[11],
                                Z = u[15],
                                N = u[19],
                                x = u[23],
                                Y = u[27],
                                E = f[7],
                                s = $ + y + A + Z + N + x,
                                j = x ? !1 : !0,
                                U = D === $;
                            if (x) {
                                var W = x && x.split(Oe("firefox")[3]);
                                if (W)
                                    for (var h = 0; h < W.length; h++) {
                                        var M = W[h];
                                        if (M[0] === sf[8] && (M = M.substring(1)), Pi.indexOf(M) >= 0) {
                                            j = !0;
                                            break
                                        }
                                    }
                            }
                            w = U && ye()(D, E) && ye()(s, Y) && j && (!N || N > r), w && A.indexOf(ef.length) >= 0 && (zg[ef.length] = ef), w && A.indexOf(ef.length + 1) >= 0 && (zg[ef.length + 1] = ef), w && A.indexOf(ef.length + 3) >= 0 && (zg[ef.length + 3] = ef), w && A.indexOf(Vh.length) >= 0 && (zg[Vh.length] = Vh)
                        }
                        w || (Nf.prototype._42 = Zo)
                    } else w = !0, zg[ef.length] = zg[ef.length + 1] = zg[ef.length + 3] = zg[Vh.length] = ef;
                    return Xl.a = w, w
                }, gk = String.fromCharCode(gk + 20);
                var Yc = function(O) {
                        return O = O.replace(Bq, Mp), O = O.replace(/[ \n]+/g, Mp)
                    },
                    lf = "30",
                    vr = "06",
                    Mc = "02",
                    ve = "03",
                    Po = Pg,
                    we = /^1f+00/,
                    Vg = function() {
                        var v;
                        return v = {
                            _18O: function(D) {
                                var F = D,
                                    e = F.replace(/\s+/g, ""),
                                    H = Sl(e);
                                return H
                            },
                            _14O: function(T) {
                                var h = this._18O(T),
                                    B = this._15O(h);
                                return B
                            },
                            _15O: function(y) {
                                var j = this._17O(y);
                                if ("2a864886f70d010101" == j._61O) {
                                    var V = this._16O(j.key),
                                        D = new yq;
                                    return D._38O(V.n, V.e), D
                                }
                                Bl(Mp)
                            },
                            _16O: function(R) {
                                var p = {};
                                R.substr(0, 2) != lf && Bl(Mp);
                                var G = hg._7O(R, 0);
                                return 2 != G.length && Bl(Mp), R.substr(G[0], 2) != Mc && Bl(Mp), p.n = hg._11O(R, G[0]), R.substr(G[1], 2) != Mc && Bl(Mp), p.e = hg._11O(R, G[1]), p
                            },
                            _17O: function($) {
                                var s = {};
                                s._40O = Y;
                                var i = hg._7O($, 0);
                                2 != i.length && Bl(Mp);
                                var d = i[0];
                                $.substr(d, 2) != lf && Bl(Mp);
                                var m = hg._7O($, d);
                                return 2 != m.length && Bl(Mp), $.substr(m[0], 2) != vr && Bl(Mp), s._61O = hg._11O($, m[0]), $.substr(m[1], 2) == vr ? s._40O = hg._11O($, m[1]) : $.substr(m[1], 2) == lf && (s._40O = {}, s._40O.p = hg._70O($, m[1], [0], Mc), s._40O.q = hg._70O($, m[1], [1], Mc), s._40O.g = hg._70O($, m[1], [2], Mc)), $.substr(i[1], 2) != ve && Bl(Mp), s.key = hg._11O($, i[1]).substr(2), s
                            }
                        }, v._17O ? v : Y
                    }(),
                    qb = Vg._27O = function(q) {
                        return Vg._14O(q)
                    };
                ye = function() {
                    return function(y, U) {
                        if (y && U) {
                            U = Yc(U);
                            var w = Po(U, t(2, 4)),
                                Q = this;
                            if (!Q || !Q.n || w._55O() > Q.n._55O()) return 0;
                            var N = Q._37O(w),
                                S = N[Il](t(2, 4)).replace(we, ""),
                                $ = Ei(S);
                            if (0 == $.length) return !1;
                            var u = $[0],
                                Y = $[1],
                                J = function(R) {
                                    return Rq._4O.Util._56O(R, u)
                                },
                                c = J(y);
                            return Y == c
                        }
                    }.bind(qb(L))
                };
                var Kq, ac;
                return function() {
                    var u = Xd.length - se.length;
                    if (u > 0)
                        for (var S = 0; u > S; S++) Kq = zm.Util, ac = Yc
                }(), Bb = function(P, j) {
                    j = ac(j);
                    var $ = qb(ub),
                        D = dr.length,
                        c = 2 * D,
                        n = Po(j, t(D, c)),
                        k = $,
                        r = !0;
                    if (k) {
                        var S = k[Yh[0]];
                        S && n._55O() <= S._55O() && (r = !1)
                    }
                    if (r) return 0;
                    var G = k._37O(n),
                        B = G[Il](t(D, c)).replace(we, ""),
                        y = Ei(B);
                    if (0 == y.length) return !1;
                    var o = y[0],
                        m = y[1],
                        l = Kq._11A(P, o);
                    return m == l
                }, Vg
            }(V, G), fp(z, {
                load: function() {
                    var f = {},
                        r = function(N) {
                            return N ? "c_" + (N.sync ? "1" : "0") + "_" + (N.post ? "1" : "0") + "_" + (N.responseType || "H") + "_" + (N.mimeType || "H") + "_" + (N.data ? JSON.stringify(N.data) : "H") : ""
                        };
                    return function(l, p, q) {
                        var K, j = f[l],
                            O = r(q);
                        return j && (K = j[O]) ? (K.push(p), void 0) : (f[l] || (j = f[l] = {
                            count: 0
                        }), K = j[O] = [p], j.count++, z.xhrLoad(l, function(N) {
                            delete j[O], j.count--, j.count || delete f[l], K.forEach(function(e) {
                                e(N)
                            })
                        }, q), void 0)
                    }
                }(),
                asyncEach: function(h, U, T) {
                    "function" != typeof T && (T = Function.prototype);
                    var o = new Array(h.length),
                        k = 0,
                        R = !1;
                    h.forEach(function(J, A) {
                        U(J, function(w, n) {
                            return R ? void 0 : w ? (R = !0, T(null)) : (o[A] = n, k++, k === h.length ? T(o) : void 0)
                        })
                    })
                },
                xhrLoad: function(O, k, u) {
                    var y = !1;
                    ym(O) || (y = !0, O = [O]), u = u || {};
                    var c = u.sync,
                        G = null,
                        h = u.method || "GET";
                    return u.post && (h = "POST"), u.method = h, z.asyncEach(O, function(N, y) {
                        var W = new gk;
                        N = z.beforeLoadURL(N), N.data ? y(null, N.data) : (u.url = encodeURI(N), u.responseType ? W.setResponseType(u.responseType) : W.setOverrideMimeType(u.mimeType || "text/plain"), W.onload = function() {
                            200 === this.status || 0 === this.status ? y(null, W.getResponseText()) : y(!0)
                        }, W.onerror = function() {
                            y(!0)
                        }, W.send(u))
                    }, function(m) {
                        var N = "function" == typeof k;
                        (N || c) && (G = y && m ? m[0] : m, N && k(G))
                    }), c ? G : void 0
                }
            });
        var Oh = G.setPrototypeOf || function(k, d) {
                return k.__proto__ = d, k
            },
            Tm = G.getPrototypeOf || function($) {
                return $.__proto__
            },
            Cn = G.freeze;
        G.isFrozen;
        var Gc = function() {
                var s = function(Q) {
                    return Q
                };
                return function(F) {
                    return F && F.length ? new Function("o", ["return o['", F.join("']['"), "'];"].join("")) : s
                }
            }(),
            le = function() {
                var j = function(O, S) {
                    return O = S
                };
                return function(A) {
                    return A && A.length ? new Function("o", "v", ["return o['", A.join("']['"), "'] = v;"].join("")) : j
                }
            }();
        ! function() {
            function I(s) {
                var p = [];
                if (s)
                    for (var d;
                        (d = J.exec(s)) != O;) p.push(d[1]);
                return p
            }

            function H(U, K) {
                var C = L.exec(K);
                this._cell = U, this._key = C[1], this._format = C[2], this._style = I(C[3])
            }

            function F(N) {
                for (var e = this._cellList = [], s = this._paramList = [], r = N.split(h), b = 0, J = r.length; J > b; ++b) {
                    var A = r[b];
                    if ("{{" !== A)
                        for (var E = A.split(D), W = 0, z = E.length; z > W; ++W) {
                            var C = E[W];
                            D.test(C) ? (s.push(new H(e.length, C)), e.push(O)) : C.length > 0 && e.push(C)
                        } else e.push("{")
                }
                this._formatList = this._cellList.slice(0)
            }
            var A = {},
                _ = {},
                h = /(\{\{)/,
                D = /(\{\w+(?:\:\w+(?:\&[\w\.])*)?\})/,
                L = /\{(\w+)(?:\:(\w+)((?:\&[\w\.])*))?\}/,
                J = /\&([\w\.]*)/g;
            F.prototype._73O = function(Q) {
                for (var u = this._paramList.length; u--;) {
                    var X = this._paramList[u],
                        r = Q[Hh(X._key) + 1],
                        E = _[X._format];
                    E && (r = E(r, X._style)), this._formatList[X._cell] = r
                }
                return this._formatList.join("")
            }, F.prototype._map = function(D) {
                for (var X = this._paramList.length; X--;) {
                    var x = this._paramList[X],
                        t = D[x._key],
                        I = _[x._format];
                    I && (t = I(t, x._style)), this._formatList[x._cell] = t
                }
                return this._formatList.join("")
            };
            var o = function(M) {
                var t = A[M];
                return t || (A[M] = t = new F(M)), t._73O(arguments)
            };
            return o.map = function(l, x) {
                var m = A[l];
                return m || (A[l] = m = new F(l)), m._map(x)
            }, o.setValueFormat = function(o, U) {
                _[o] = U
            }, o.gc = function() {
                A.length = 0
            }, o.__parsed = A, o
        }();
        var tc = function() {
                function $(T, g, J, O) {
                    var G = T ? T.path.slice(0) : [];
                    g && G.push(g), this.desc = J, this.name = g, this.path = Cn(G), this.getter = Gc(G), this.setter = le(G), this.isLeaf = O, this.parent = T, this.children = [], this.childMap = {}
                }
                return $.create = function() {
                    function v(j, Y, y, k) {
                        var V = k(y),
                            _ = new $(j, Y, y, V);
                        if (!V) {
                            for (var p = _.children, H = _.childMap, P = G.keys(y), s = 0, c = P.length; c > s; ++s) {
                                var z = P[s],
                                    q = v(_, z, y[z], k);
                                p.push(q), H[q.name] = q
                            }
                            _.children = Cn(p), _.childMap = Cn(H)
                        }
                        return Cn(_), _
                    }
                    return function(R, m) {
                        return v(O, O, R, m)
                    }
                }(), $.prototype.forEach = function(K, y) {
                    for (var d = this.children, n = 0, X = d.length; X > n; ++n) {
                        var G = d[n];
                        K(G, y)
                    }
                }, $
            }(),
            Cn = G.freeze,
            _b = {
                main: {
                    mask: 1,
                    priority: z.cameraPriority.main,
                    clearDepth: !1,
                    ignore: !1
                },
                top: {
                    mask: 2,
                    priority: z.cameraPriority.top,
                    ignore: !1
                }
            },
            of = "main",
            Mg = _b[ of ].mask,
            Rm = function(x, A) {
                x = x || 0;
                var D;
                if (A in _b) D = _b[A].mask;
                else {
                    if (!(32 > Nb)) throw new Error("Only 31 render layer can be defined.");
                    _b[A] = {
                        mask: 1 << Nb++,
                        priority: _b[ of ].priority
                    }, D = _b[A].mask, od = up(G.keys(_b)), Nb = od.length
                }
                return x |= D
            },
            wg = function(K) {
                var d = 0;
                if ("string" == typeof K) d = Rm(d, K);
                else
                    for (var s = 0, h = K.length; h > s; ++s) d = Rm(d, K[s]);
                return d
            },
            Rj = function(G, z) {
                return G && z && G & z
            },
            up = function(j) {
                return j.sort(function(N, Y) {
                    return _b[N].priority - _b[Y].priority
                })
            },
            od = up(G.keys(_b)),
            Nb = od.length;
        fp(z, {
            setRenderLayerInfo: function(H, K) {
                if (Rm(0, H), K) {
                    for (var x in K) _b[H][x] = K[x];
                    K.priority && (od = up(G.keys(_b)))
                }
            },
            getRenderLayerInfo: function(n) {
                return _b[n]
            }
        }, !0);
        var no = F.List = function() {
            this._as = [];
            var Q, A, D = arguments.length;
            if (1 === D) {
                var g = arguments[0];
                if (eo(g) && (g = g._as), ym(g))
                    for (A = g.length, Q = 0; A > Q; Q++) this._as.push(g[Q]);
                else g != Y && this._as.push(g)
            } else if (D > 1)
                for (Q = 0; D > Q; Q++) this._as.push(arguments[Q])
        };
        mb("List", G, {
            forEach: function(F, V) {
                this.each(F, V)
            },
            push: function() {
                for (var E = 0; E < arguments.length; E++) this.add(arguments[E])
            },
            pop: function() {
                return this._as.pop()
            },
            shift: function() {
                return this._as.shift()
            },
            unshift: function() {
                return this._as.unshift.apply(this._as, arguments)
            },
            size: function() {
                return this._as.length
            },
            isEmpty: function() {
                return 0 === this._as.length
            },
            add: function(o, Y) {
                return Y === O ? this._as.push(o) : this._as.splice(Y, 0, o)
            },
            addAll: function(L) {
                eo(L) && (L = L._as), ym(L) ? ks(this._as, L) : this._as.push(L)
            },
            get: function(O) {
                return this._as[O]
            },
            slice: function(G, e) {
                return new no(this._as.slice(G, e))
            },
            remove: function(o) {
                var p = this._as.indexOf(o);
                return p >= 0 && p < this._as.length && this.removeAt(p), p
            },
            removeAt: function(B) {
                return this._as.splice(B, 1)[0]
            },
            set: function(z, h) {
                return this._as[z] = h
            },
            clear: function() {
                return this._as.splice(0, this._as.length)
            },
            contains: function(Y) {
                return this._as.indexOf(Y) >= 0
            },
            indexOf: function(g) {
                return this._as.indexOf(g)
            },
            each: function(p, M) {
                for (var r = 0, R = this._as.length; R > r; r++) {
                    var z = this._as[r];
                    M ? p.call(M, z, r, this) : p(z, r, this)
                }
            },
            reverseEach: function(O, y) {
                for (var w = this._as.length - 1; w >= 0; w--) {
                    var c = this._as[w];
                    y ? O.call(y, c) : O(c)
                }
            },
            getArray: function() {
                return this._as
            },
            toArray: function(r, z) {
                if (r) {
                    for (var F, n = [], U = 0, S = this._as.length; S > U; U++) F = this._as[U], z ? r.call(z, F) && n.push(F) : r(F) && n.push(F);
                    return n
                }
                return this._as.concat()
            },
            toList: function($, r) {
                if ($) {
                    for (var B, S = new no, L = 0, K = this._as.length; K > L; L++) B = this._as[L], r ? $.call(r, B) && S.add(B) : $(B) && S.add(B);
                    return S
                }
                return new no(this)
            },
            reverse: function() {
                this._as.reverse()
            },
            sort: function(d) {
                return this._as.sort(d ? d : nr), this
            },
            toString: function() {
                return this._as.toString()
            }
        }), G.defineProperties(no.prototype, {
            length: {
                get: function() {
                    return this._as.length
                },
                set: function(F) {
                    this._as.length = F
                }
            }
        });
        var vg = new no;
        fp(vg, {
            size: function() {
                return 0
            },
            indexOf: function() {
                return -1
            },
            contains: function() {
                return !1
            },
            isEmpty: function() {
                return !0
            },
            sort: gj,
            each: gj,
            reverseEach: gj,
            toArray: function() {
                return []
            },
            toList: function() {
                return new no
            },
            add: sg,
            addAll: sg,
            set: sg,
            remove: sg,
            removeAt: sg,
            clear: sg
        });
        var ge = F.Notifier = function() {
            this._f = 0
        };
        mb("Notifier", G, {
            contains: function(E, m) {
                if (this._ls)
                    for (var F, f = 0, a = this._ls.size(); a > f; f++)
                        if (F = this._ls.get(f), E === F.l && m === F.s) return !0;
                return !1
            },
            add: function(Q, d, b) {
                var B = this,
                    G = {
                        l: Q,
                        s: d,
                        a: b
                    };
                B._ls || (B._ls = new no), B._f ? (B._as || (B._as = new no), B._as.add(G)) : G.a ? B._ls.add(G, 0) : B._ls.add(G)
            },
            remove: function(n, b) {
                var $ = this;
                $._ls && ($._f ? ($._rs || ($._rs = new no), $._rs.add({
                    l: n,
                    s: b
                })) : $._remove(n, b))
            },
            _remove: function(T, D) {
                for (var f, C = this._ls, K = 0, U = C.size(); U > K; K++)
                    if (f = C.get(K), f.l === T && f.s === D) return C.removeAt(K), void 0
            },
            fire: function(d) {
                var R = this,
                    k = R._ls;
                if (R._b = 1e4, k) {
                    ++R._f;
                    try {
                        for (var V, a = 0, i = k.size(); i > a; a++) V = k.get(a), V.s ? V.l.call(V.s, d) : V.l(d)
                    } catch (d) {
                        Kc(function() {
                            throw d
                        })
                    } finally {
                        if (--R._f) return;
                        if (R._rs) {
                            for (i = R._rs.size(), a = 0; i > a; a++) V = R._rs.get(a), R._remove(V.l, V.s);
                            delete R._rs
                        }
                        if (R._as) {
                            for (i = R._as.size(), a = 0; i > a; a++) V = R._as.get(a), V.a ? k.add(V, 0) : k.add(V);
                            delete R._as
                        }
                    }
                }
            }
        });
        var Mc = F.Data = function() {
            this._id = Vf()
        };
        mb("Data", G, {
            ms_ac: ["tag", "name", "displayName", "icon", "toolTip", "attrObject", "styleMap", "layer", "adjustChildrenToTop", "dataBindings"],
            ms_dm: 1,
            ms_attr: 1,
            _icon: Y,
            _parent: Y,
            _children: vg,
            _childMap: Y,
            _styleMap: Y,
            _layer: "0",
            _renderLayer: of ,
            _renderLayerMask: Mg,
            _adjustChildrenToTop: !1,
            getRenderLayerMask: function() {
                return this._renderLayerMask || Mg
            },
            getRenderLayer: function() {
                return this._renderLayer || of
            },
            setRenderLayer: function(M) {
                var A = this,
                    s = Rm(0, M);
                A._renderLayerMask = s;
                var t = A._renderLayer;
                A._renderLayer = M, A.fp("renderLayer", t, A._renderLayer)
            },
            testRenderLayer: function(l) {
                var Z = _b[l];
                return Z && Rj(this._renderLayerMask, _b[l].mask)
            },
            getUIClass: function() {
                return Y
            },
            _22Q: function() {
                return Y
            },
            beginTransaction: function() {
                this._dataModel && this._dataModel.beginTransaction()
            },
            endTransaction: function() {
                this._dataModel && this._dataModel.endTransaction()
            },
            s: function(N, b) {
                var Y = this;
                if (2 === arguments.length) Y.setStyle(N, b);
                else {
                    if (!jl(N)) return Y.getStyle(N);
                    for (var V in N) Y.setStyle(V, N[V])
                }
                return Y
            },
            fp: function(n, s, Z, h, F) {
                return this.firePropertyChange(n, s, Z, h, F)
            },
            firePropertyChange: function(b, c, Q, K, U) {
                if (K) {
                    if (K(c, Q)) return !1
                } else if (c === Q) return !1;
                var f = this,
                    $ = U || {};
                return $.property = b, $.oldValue = c, $.newValue = Q, $.data = f, f._dataModel && f._dataModel.handleDataPropertyChange($), f.onPropertyChanged($), !0
            },
            onPropertyChanged: function(j) {
                var f = this,
                    k = f._parent,
                    d = j.property;
                if (og(k)) {
                    var c = f.s(Ji),
                        D = "s:ingroup" === d;
                    (c && wo[d] || d === D) && k._81I(), (c || D) && k.fp("childChange", !0, !1)
                }
                dp(k) && (wo[d] || "elevation" === d || Ii[d] || "scaleTall" === d || "tall" === d) && k.updateFromChildren(), ("s:alwaysOnTop" === d || "s:shape3d.alwaysOnTop" === d) && (j.newValue ? this.setRenderLayer("top") : this.setRenderLayer(O))
            },
            _21I: function(p) {
                var _ = this;
                if (p && _._dataModel) throw "Remove data from dataModel before adding";
                _._dataModel = p
            },
            removeFromDataModel: function() {
                this._dataModel ? this._dataModel.remove(this) : this.setParent(null)
            },
            clearChildrenFromDataModel: function() {
                for (var A = 0, _ = this._children.toArray(), x = _.length; x > A; A++) _[A].removeFromDataModel()
            },
            getId: function() {
                return this._id
            },
            setId: function(a) {
                this._id = a
            },
            getChildren: function() {
                return this._children
            },
            size: function() {
                return this._children.size()
            },
            toChildren: function(c, r) {
                return this._children.toList(c, r)
            },
            eachChild: function(h, H) {
                this._children.each(h, H)
            },
            addChild: function(M, N) {
                var z = this;
                M !== z && (z._children === vg && (z._children = new no, z._childMap = {}), N >= 0 || (N = z._children.size()), z._childMap[M._id] || z.isDescendantOf(M) || (M._parent && M._parent.removeChild(M), (0 > N || N > z._children.size()) && (N = z._children.size()), z._children.add(M, N), z._childMap[M._id] = M, M.setParent(z), z.onChildAdded(M, N), z.fp(Xh, Y, M)))
            },
            onChildAdded: function() {},
            removeChild: function(H) {
                var b = this;
                if (b._childMap && b._childMap[H._id]) {
                    var g = b._children.remove(H);
                    delete b._childMap[H._id], b.fp(Xh, H, Y), H.setParent(Y, g), b.onChildRemoved(H, g)
                }
            },
            onChildRemoved: function() {},
            getChildAt: function(Q) {
                return this._children.get(Q)
            },
            clearChildren: function() {
                var s = this;
                if (!s._children.isEmpty())
                    for (var N = 0, b = s._children.toArray(), n = b.length; n > N; N++) s.removeChild(b[N])
            },
            getParent: function() {
                return this._parent
            },
            setParent: function(i, d) {
                var N = this;
                if (!(N._73I || N._parent === i || N === i || i && i.isDescendantOf(N))) {
                    var z, u = N._parent;
                    N._parent = i, N._73I = 1, u ? (d == Y && (d = u.getChildren().indexOf(N)), u.removeChild(N)) : N._dataModel && d == Y && (d = N._dataModel.getRoots().indexOf(N)), i && (i.addChild(N), z = i.getChildren().indexOf(N)), delete N._73I, N.fp("parent", u, i, O, {
                        oldIndex: d,
                        newIndex: z
                    }), N.onParentChanged(u, i)
                }
            },
            onParentChanged: function() {},
            hasChildren: function() {
                return this._children.size() > 0
            },
            isEmpty: function() {
                return this._children.isEmpty()
            },
            isRelatedTo: function(o) {
                return o ? this.isDescendantOf(o) || o.isDescendantOf(this) : !1
            },
            isParentOf: function(j) {
                return j && this._childMap ? !!this._childMap[j._id] : !1
            },
            isDescendantOf: function(d) {
                if (!d || d.isEmpty()) return !1;
                for (var P = this._parent; P;) {
                    if (d === P) return !0;
                    P = P._parent
                }
                return !1
            },
            getStyle: function(X, u) {
                u === O && (u = 1);
                var $ = this._styleMap ? this._styleMap[X] : O;
                return $ === O && u ? A[X] : $
            },
            setStyle: function(h, L) {
                var N = this;
                N._styleMap || (N._styleMap = {});
                var S = N._styleMap[h];
                L === O ? delete N._styleMap[h] : N._styleMap[h] = L, N.fp("s:" + h, S, L) && N.onStyleChanged(h, S, L)
            },
            onStyleChanged: function() {},
            iv: function(o) {
                this.invalidate(o)
            },
            invalidate: function(f) {
                this.fp(f || "*", !1, !0)
            },
            toString: function() {
                var c = this;
                return c._displayName || c._name || c._tag || c._id
            },
            toLabel: function() {
                return this._displayName || this._name
            },
            addStyleIcon: function(Q, m) {
                var p = this,
                    t = p.s(Up);
                p.beginTransaction(), t || p.s(Up, t = {}), m ? t[Q] = m : delete t[Q], p.fp(Up, Y, t), p.endTransaction()
            },
            removeStyleIcon: function(D) {
                var x = this.s(Up);
                if (x) {
                    var V = x[D];
                    delete x[D], this.fp(Up, Y, x)
                }
                return V
            },
            _calcAnchorMatrix3d: function() {},
            appendAnchorMatrix3d: function(G) {
                var d = this;
                if (d.hasOwnProperty("_anchor") || d.hasOwnProperty("_anchorElevation")) {
                    var T = d.getAnchor3d(),
                        c = {
                            x: T.x - .5,
                            y: T.y - .5,
                            z: T.z - .5
                        };
                    bq(G, [-c.x, -c.y, -c.z])
                }
            },
            getSerializableProperties: function() {
                return {
                    name: 1,
                    displayName: 1,
                    icon: 1,
                    toolTip: 1,
                    parent: 1,
                    layer: 1,
                    renderLayer: 1,
                    tag: 1,
                    adjustChildrenToTop: 1,
                    dataBindings: 1
                }
            },
            getSerializableStyles: function() {
                var s, i = {};
                for (s in this._styleMap) i[s] = 1;
                return i
            },
            getCurrentPrefix: function() {
                return this._interactPrefix || Je
            },
            ca: function(Y, f) {
                var y = this.getCurrentPrefix();
                return Y = y + Y, 2 === arguments.length ? this.a(Y, f) : this.a(Y)
            }
        });
        var _c = F.DataModel = function() {
            var Q = this;
            Q._isDeserializing = 0, Q._datas = new no, Q._dataMap = {}, Q._roots = new no, Q._rootMap = {}, Q._fsDataMap = {}, Q._78O = {}, Q._reflectorMap = {}, Q._36I = new ge, Q._35I = new ge, Q._serializeNotifier = new ge, Q._selectionModel = new If(Q);
            var j = Q._29Q = [],
                F = Q._scheduleCallback = function() {
                    for (var w = Date.now(), G = 0; G < j.length; G++) {
                        var $ = j[G];
                        $.enabled && w - $.lastTime > $.interval && ($.beforeAction && $.beforeAction(), $.action && Q.each(function(I) {
                            $.action(I)
                        }), $.afterAction && $.afterAction(), $.lastTime = w)
                    }
                    j.length && (Q._30Q = V.requestAnimationFrame(F))
                }
        };
        mb("DataModel", G, {
            ms_fire: 1,
            ms_attr: 1,
            ms_ac: ["layers", "name", "autoAdjustIndex", "hierarchicalRendering", "background", "envmapType", "envmap", "postProcessingData", "init"],
            _name: O,
            _autoAdjustIndex: !0,
            _hierarchicalRendering: !1,
            _background: O,
            _init: O,
            _envmap: O,
            _envmapType: O,
            _postProcessingData: O,
            sm: function() {
                return this.getSelectionModel()
            },
            mm: function(v, $, m) {
                this.addDataModelChangeListener(v, $, m)
            },
            umm: function(v, A) {
                this.removeDataModelChangeListener(v, A)
            },
            md: function(g, Z, d) {
                this.addDataPropertyChangeListener(g, Z, d)
            },
            umd: function(X, e) {
                this.removeDataPropertyChangeListener(X, e)
            },
            mh: function(U, x, W) {
                this.addHierarchyChangeListener(U, x, W)
            },
            umh: function(I, D) {
                this.removeHierarchyChangeListener(I, D)
            },
            getAttrObject: function() {
                return this._attrObject
            },
            setAttrObject: function(i) {
                return this._attrObject = i
            },
            getSelectionModel: function() {
                return this._selectionModel
            },
            size: function() {
                return this._datas.size()
            },
            isEmpty: function() {
                return this._datas.isEmpty()
            },
            getRoots: function() {
                return this._roots
            },
            getDatas: function() {
                return this._datas
            },
            getFullscreenDatas: function() {
                return this._fsDataMap
            },
            getReflectors: function() {
                return this._reflectorMap
            },
            getDataById: function(j) {
                return this._dataMap[j]
            },
            removeDataById: function(a) {
                this.remove(this.getDataById(a))
            },
            toDatas: function(X, B) {
                return this._datas.toList(X, B)
            },
            each: function(A, O) {
                this._datas.each(A, O)
            },
            getDataByTag: function(x) {
                return this._78O[x]
            },
            getTagMap: function() {
                return this._78O
            },
            removeDataByTag: function(V) {
                this.remove(this.getDataByTag(V))
            },
            add: function(u, A, H) {
                var N = this,
                    Z = u._id,
                    e = u._tag,
                    j = N._roots;
                if (N._dataMap[Z]) throw "'" + Z + "' already exists";
                e != Y && (N._78O[e] = u), N._dataMap[Z] = u, H >= 0 ? N._datas.add(u, H) : N._datas.add(u), u._parent || (N._rootMap[Z] = u, A >= 0 ? j.add(u, A) : j.add(u)), u.s("fullscreen") !== O && (N._fsDataMap[Z] = u), u.s("shape3d.reflector") && (N._reflectorMap[Z] = u), u._21I(N), N.onAdded(u), N._36I.fire({
                    kind: "add",
                    data: u,
                    rootsIndex: A,
                    datasIndex: H
                })
            },
            onAdded: function() {},
            remove: function(u, D) {
                if (u) {
                    var M = this,
                        r = u._id,
                        y = D && D.keepStructure,
                        o = D && D.keepChildren,
                        q = u.getTag();
                    if (u._dataModel === M) {
                        var m = u instanceof zc;
                        m && z.setIsolating(!0), this.beginTransaction(), y ? M._removingData || (M._removingData = u) : M.prepareRemove(u), o || u.toChildren().each(function(I) {
                            M.remove(I, D)
                        }, M), y ? M._removingData === u && (u._parent && u._parent.removeChild(u), delete M._removingData) : u._parent && u._parent.removeChild(u);
                        var H = M._datas.remove(u);
                        delete M._dataMap[r], q != Y && delete M._78O[q];
                        var F;
                        M._rootMap[r] && (delete M._rootMap[r], F = M._roots.remove(u)), M._fsDataMap[r] && delete M._fsDataMap[r], M._reflectorMap[r] && delete M._reflectorMap[r], u._21I(Y), M.onRemoved(u), M._36I.fire({
                            kind: eb,
                            data: u,
                            rootsIndex: F,
                            datasIndex: H
                        }), this.endTransaction(), m && z.setIsolating(!1)
                    }
                }
            },
            onRemoved: function() {},
            prepareRemove: function() {},
            clear: function() {
                var o = this;
                if (o._datas.size()) {
                    var B = o._historyManager ? this.toJSON() : O;
                    o._datas.toArray().forEach(function(c) {
                        c._21I(Y)
                    }), o._datas.clear(), o._dataMap = {}, o._roots.clear(), o._rootMap = {}, o._fsDataMap = {}, o._reflectorMap = {}, o._78O = {}, o._36I.fire({
                        kind: Aj,
                        json: B
                    })
                }
            },
            contains: function(O) {
                return O && O._dataModel === this
            },
            handleDataPropertyChange: function(h) {
                var g = this,
                    i = h.data,
                    K = h.property;
                if ("parent" === K) {
                    var C = i._id,
                        N = g._rootMap,
                        X = g._roots;
                    i._parent ? N[C] && (delete N[C], X.remove(i)) : N[C] || (N[C] = i, X.add(i))
                } else if ("tag" === K) {
                    var w = h.oldValue,
                        b = h.newValue,
                        O = g._78O;
                    w != Y && delete O[w], b != Y && (O[b] = i)
                } else if ("s:fullscreen" === K) {
                    var C = i._id,
                        P = g._fsDataMap;
                    h.oldValue != Y && delete P[C], h.newValue != Y && (P[C] = i)
                } else if ("s:shape3d.reflector" === K) {
                    var C = i._id,
                        p = g._reflectorMap;
                    h.oldValue && delete p[C], h.newValue && (p[C] = i)
                }
                this.onDataPropertyChanged(i, h), this._35I.fire(h)
            },
            onDataPropertyChanged: function() {},
            addDataModelChangeListener: function(U, w, R) {
                this._36I.add(U, w, R)
            },
            removeDataModelChangeListener: function(o, R) {
                this._36I.remove(o, R)
            },
            addSerializeListener: function(N, m, Q) {
                this._serializeNotifier.add(N, m, Q)
            },
            removeSerializeListener: function(V, G) {
                this._serializeNotifier.remove(V, G)
            },
            fireSerializeEvent: function(y) {
                this._serializeNotifier.fire(y)
            },
            addDataPropertyChangeListener: function(V, _, c) {
                this._35I.add(V, _, c)
            },
            removeDataPropertyChangeListener: function(g, d) {
                this._35I.remove(g, d)
            },
            _38I: function(t, d, Q) {
                this._37I && this._37I.fire({
                    data: t,
                    oldIndex: d,
                    newIndex: Q
                })
            },
            addHierarchyChangeListener: function(D, N, G) {
                this._37I || (this._37I = new ge), this._37I.add(D, N, G)
            },
            removeHierarchyChangeListener: function(K, _) {
                this._37I.remove(K, _)
            },
            getSiblings: function(_) {
                var q = _._parent;
                return q ? q._children : this._roots
            },
            eachByHierarchical: function(M, z, Q) {
                if (z) return this._eachByHierarchical(M, z, Q);
                for (var n = 0, i = this._roots, e = i.size(); e > n; n++)
                    if (this._eachByHierarchical(M, i.get(n), Q) === !1) return !1;
                return !0
            },
            _eachByHierarchical: function(j, o, P) {
                if (P) {
                    if (j.call(P, o) === !1) return !1
                } else if (j(o) === !1) return !1;
                for (var W = o.size(), w = 0; W > w; w++)
                    if (this._eachByHierarchical(j, o.getChildAt(w), P) === !1) return !1;
                return !0
            },
            reverseEachByHierarchical: function($, T, D) {
                if (T) return this._reverseEachByHierarchical($, T, D);
                for (var s = this._roots, N = s.size(), Y = N - 1; Y >= 0; Y--)
                    if (this._reverseEachByHierarchical($, s.get(Y), D) === !1) return !1;
                return !0
            },
            _reverseEachByHierarchical: function(n, m, B) {
                for (var O = m.size(), c = O - 1; c >= 0; c--)
                    if (this._reverseEachByHierarchical(n, m.getChildAt(c), B) === !1) return !1;
                if (B) {
                    if (n.call(B, m) === !1) return !1
                } else if (n(m) === !1) return !1;
                return !0
            },
            eachByDepthFirst: function(M, J, F) {
                if (J) return this._11I(M, J, F);
                for (var D = 0, L = this._roots, T = L.size(); T > D; D++)
                    if (this._11I(M, L.get(D), F) === !1) return !1;
                return !0
            },
            _11I: function(g, b, t) {
                for (var V = b.size(), U = 0; V > U; U++)
                    if (this._11I(g, b.getChildAt(U), t) === !1) return !1;
                if (t) {
                    if (g.call(t, b) === !1) return !1
                } else if (g(b) === !1) return !1;
                return !0
            },
            eachByBreadthFirst: function(F, c, e) {
                var t = new no;
                for (c ? t.add(c) : this._roots.each(t.add, t); t.size() > 0;)
                    if (c = t.removeAt(0), c.eachChild(t.add, t), e) {
                        if (F.call(e, c) === !1) return !1
                    } else if (F(c) === !1) return !1;
                return !0
            },
            moveTo: function(q, t) {
                var V = this.getSiblings(q),
                    L = V.indexOf(q);
                L === t || 0 > L || t >= 0 && t <= V.size() && (V.remove(q), t > V.size() && t--, V.add(q, t), this._38I(q, L, t))
            },
            moveUp: function(h) {
                this.moveTo(h, this.getSiblings(h).indexOf(h) - 1)
            },
            moveDown: function(p) {
                this.moveTo(p, this.getSiblings(p).indexOf(p) + 1)
            },
            moveToTop: function(N) {
                this.moveTo(N, 0)
            },
            moveToBottom: function(e) {
                this.moveTo(e, this.getSiblings(e).size())
            },
            moveSelectionUp: function(u) {
                this.beginTransaction(), u || (u = this.sm());
                var f = new no;
                Dn(u, f, this._roots), f.each(this.moveUp, this), this.endTransaction()
            },
            moveSelectionDown: function(N) {
                this.beginTransaction(), N || (N = this.sm());
                var D = new no;
                Ed(N, D, this._roots), D.each(this.moveDown, this), this.endTransaction()
            },
            moveSelectionToTop: function(j) {
                this.beginTransaction(), j || (j = this.sm());
                var _ = new no;
                Ej(j, _, this._roots), _.each(this.moveToTop, this), this.endTransaction()
            },
            moveSelectionToBottom: function(f) {
                this.beginTransaction(), f || (f = this.sm());
                var t = new no;
                mi(f, t, this._roots), t.each(this.moveToBottom, this), this.endTransaction()
            },
            moveToIndex: function(L, n, y) {
                var $ = this.getDatas();
                null == y && (y = $.indexOf(L)), y === n || 0 > y || n >= 0 && n <= $.size() && ($.remove(L), n > $.size() && n--, $.add(L, n), this._76I(L, y, n))
            },
            bringForward: function(o) {
                this.moveToIndex(o, this.getDatas().indexOf(o) + 1)
            },
            bringToFront: function(w) {
                this.moveToIndex(w, this.size())
            },
            sendBackward: function(K) {
                this.moveToIndex(K, this.getDatas().indexOf(K) - 1)
            },
            sendToBack: function(W) {
                this.moveToIndex(W, 0)
            },
            bringSelectionForward: function(P) {
                this.beginTransaction(), P || (P = this.sm());
                for (var M = new no, S = this.getDatas(), e = !1, b = 0; b < S.size(); b++) {
                    var r = S.get(S.size() - 1 - b);
                    P.contains(r) ? e && M.add(r) : e = !0
                }
                M.each(this.bringForward, this), this.endTransaction()
            },
            bringSelectionToFront: function(J) {
                this.beginTransaction(), J || (J = this.sm());
                for (var L = new no, o = this.getDatas(), v = 0; v < o.size(); v++) {
                    var p = o.get(v);
                    J.contains(p) && L.add(p)
                }
                L.each(this.bringToFront, this), this.endTransaction()
            },
            sendSelectionBackward: function(b) {
                this.beginTransaction(), b || (b = this.sm());
                for (var E = new no, R = this.getDatas(), g = !1, N = 0; N < R.size(); N++) {
                    var n = R.get(N);
                    b.contains(n) ? g && E.add(n) : g = !0
                }
                E.each(this.sendBackward, this), this.endTransaction()
            },
            sendSelectionToBack: function(H) {
                this.beginTransaction(), H || (H = this.sm());
                for (var y = new no, S = this.getDatas(), X = 0; X < S.size(); X++) {
                    var _ = S.get(S.size() - 1 - X);
                    H.contains(_) && y.add(_)
                }
                y.each(this.sendToBack, this), this.endTransaction()
            },
            addScheduleTask: function(D) {
                var y = this;
                y.removeScheduleTask(D), D.enabled == Y && (D.enabled = !0), D.interval == Y && (D.interval = 10), D.lastTime = Date.now(), y._29Q.push(D), y._30Q == Y && (y._30Q = V.requestAnimationFrame(y._scheduleCallback))
            },
            removeScheduleTask: function(P) {
                var H = this,
                    t = H._29Q,
                    z = t.indexOf(P);
                z >= 0 && t.splice(z, 1), t.length || H._30Q == Y || (V.cancelAnimationFrame(H._30Q), delete H._30Q)
            },
            getHistoryManager: function() {
                return this._historyManager
            },
            enableHistoryManager: function(L) {
                this._historyManager || new F.HistoryManager(this), null != L && this._historyManager.setMaxHistoryCount(L), this._historyManager.setDisabled(!1)
            },
            disableHistoryManager: function() {
                this._historyManager && this._historyManager.setDisabled(!0)
            },
            clearHistoryManager: function() {
                this._historyManager && this._historyManager.clear()
            },
            undo: function(j) {
                this._historyManager && this._historyManager.undo(j)
            },
            redo: function(z) {
                this._historyManager && this._historyManager.redo(z)
            },
            beginTransaction: function() {
                this._historyManager && this._historyManager.beginTransaction()
            },
            endTransaction: function() {
                this._historyManager && this._historyManager.endTransaction()
            },
            addHistory: function(x) {
                this._historyManager && this._historyManager.addHistory(x)
            },
            onHistoryManagerChanged: function() {},
            isDeserializing: function() {
                return this._isDeserializing > 0
            },
            setDeserializing: function(H) {
                H ? this._isDeserializing++ : this._isDeserializing--
            },
            updateLayoutAttach: function(g) {
                this.each(function(s) {
                    s instanceof xp && s.getImage() === g && s.updateLayoutAttaches()
                })
            },
            isCubicEnvmap: function() {
                return !1
            },
            setCubicEnvmap: function() {}
        });
        var If = F.SelectionModel = function(V) {
            var c = this;
            c._68O = dj, c._map = {}, c._73O = new no, c._74I = new ge, c._21I(V)
        };
        mb("SelectionModel", G, {
            ms_fire: 1,
            ms_dm: 1,
            ms: function(Z, y, a) {
                this.addSelectionChangeListener(Z, y, a)
            },
            ums: function(P, b) {
                this.removeSelectionChangeListener(P, b)
            },
            fd: function() {
                return this.getFirstData()
            },
            ld: function() {
                return this.getLastData()
            },
            sg: function() {
                return this._68O === Zp
            },
            co: function(R) {
                return this._map[R._id] != Y
            },
            ss: function(V) {
                this.setSelection(V)
            },
            as: function(n) {
                this.appendSelection(n)
            },
            rs: function(q) {
                this.removeSelection(q)
            },
            cs: function() {
                this.clearSelection()
            },
            sa: function() {
                this.selectAll()
            },
            getSelectionMode: function() {
                return this._68O
            },
            setSelectionMode: function(o) {
                var p = this;
                if (p._68O !== o && (o === Yh || o === Zp || o === dj)) {
                    p.cs();
                    var t = p._68O;
                    p._68O = o, p.fp("selectionMode", t, o)
                }
            },
            _21I: function(i) {
                var B = this,
                    C = B._dataModel;
                C !== i && (C && (B.cs(), C.umm(B.handleDataModelChange, B)), B._dataModel = i, i.mm(B.handleDataModelChange, B, !0), B.fp(co, C, i))
            },
            dispose: function() {
                var x = this;
                x.cs(), x._dataModel.umm(x.handleDataModelChange, x)
            },
            handleDataModelChange: function(h) {
                var Z = this;
                if (h.kind === eb) {
                    var z = h.data;
                    Z.co(z) && (Z._73O.remove(z), delete Z._map[z._id], Z._75I(eb, new no(z)))
                } else h.kind === Aj && Z.cs()
            },
            getFilterFunc: function() {
                return this._filterFunc
            },
            setFilterFunc: function(K) {
                var z = this;
                if (z._filterFunc !== K) {
                    z.cs();
                    var h = z._filterFunc;
                    z._filterFunc = K, z.fp("filterFunc", h, z._filterFunc)
                }
            },
            _75I: function(B, f, J, o) {
                J && (this._73O.each(function(N) {
                    o[N._id] ? J.remove(N) : J.add(N)
                }), f = J.toList()), this._74I.fire({
                    kind: B,
                    datas: new no(f)
                })
            },
            addSelectionChangeListener: function(m, S, s) {
                this._74I.add(m, S, s)
            },
            removeSelectionChangeListener: function(z, B) {
                this._74I.remove(z, B)
            },
            _97O: function(A, O) {
                for (var F, G = this, L = 0, u = new no(A); L < u.size(); L++) F = u.get(L), (G._filterFunc && !G._filterFunc(F) || O && G.co(F) || !O && !G.co(F) || !G._dataModel.contains(F)) && (u.removeAt(L), L--);
                return u
            },
            appendSelection: function(_) {
                var Z = this;
                if (Z._68O !== Yh) {
                    var I, U, B = Z._73O,
                        x = Z._97O(_, !0);
                    x.isEmpty() || (Z.sg() && (I = new no(B), U = Z._map, B.clear(), Z._map = {}, x = new no(x.get(x.size() - 1))), x.each(function(v) {
                        B.add(v), Z._map[v._id] = v
                    }), Z._75I("append", x, I, U))
                }
            },
            removeSelection: function(D) {
                var P = this,
                    X = P._97O(D),
                    C = 0,
                    Y = X.size();
                if (0 !== Y) {
                    for (; Y > C; C++) {
                        var T = X.get(C);
                        P._73O.remove(T), delete P._map[T._id]
                    }
                    P._75I(eb, X)
                }
            },
            toSelection: function(O, I) {
                return this._73O.toList(O, I)
            },
            getSelection: function() {
                return this._73O
            },
            each: function(m, h) {
                this._73O.each(m, h)
            },
            setSelection: function(r) {
                var y = this,
                    G = y._73O;
                if (y._68O !== Yh && !(G.isEmpty() && !r || 1 === G.size() && y.ld() === r)) {
                    var L = new no(G),
                        E = y._map;
                    G.clear(), y._map = {};
                    var M = y._97O(r, !0);
                    y.sg() && M.size() > 1 && (M = new no(M.get(M.size() - 1))), M.each(function(U) {
                        G.add(U), y._map[U._id] = U
                    }), y._75I("set", Y, L, E)
                }
            },
            clearSelection: function() {
                var k = this,
                    e = k._73O;
                if (e.size() > 0) {
                    var L = e.toList();
                    e.clear(), k._map = {}, k._75I(Aj, L)
                }
            },
            selectAll: function() {
                var o = this;
                if (o._68O !== Yh) {
                    var u, E, C = o._dataModel.toDatas();
                    if (o._filterFunc)
                        for (u = 0; u < C.size(); u++) E = C.get(u), o._filterFunc(E) || (C.removeAt(u), u--);
                    var D = o._73O,
                        H = new no(D),
                        z = o._map;
                    D.clear(), o._map = {}, o.sg() && C.size() > 1 && (C = new no(C.get(C.size() - 1)));
                    var N = C.size();
                    for (u = 0; N > u; u++) E = C.get(u), D.add(E), o._map[E._id] = E;
                    o._75I("all", Y, H, z)
                }
            },
            size: function() {
                return this._73O.size()
            },
            isEmpty: function() {
                return this._73O.isEmpty()
            },
            contains: function(W) {
                return this._map[W._id] != Y
            },
            getLastData: function() {
                var v = this._73O;
                return v.size() > 0 ? v.get(v.size() - 1) : Y
            },
            getFirstData: function() {
                var I = this._73O;
                return I.size() > 0 ? I.get(0) : Y
            },
            isSelectable: function(K) {
                var v = this;
                return K && v._68O !== Yh ? v._filterFunc ? v._filterFunc(K) : !0 : !1
            },
            getTopSelection: function() {
                var P = this,
                    m = new no;
                return P._73O.each(function(t) {
                    for (var g = t.getParent(); g;) {
                        if (P.contains(g)) {
                            t = Y;
                            break
                        }
                        g = g.parent
                    }
                    t && m.add(t)
                }), m
            }
        });
        var Hm = function() {
            return Zf(0),
                function(R, n) {
                    var x;
                    if (je(n)) {
                        var u = R.getDataUI(n);
                        u && u._88I && (x = u._88I.rect)
                    }
                    return x ? x : n.getRect()
                }
        }();
        fp(z, {
            edgeGroupAgentFunc: Y,
            graphViewAutoScrollZone: 16,
            graphViewZoomable: !0,
            graphViewResettable: !1,
            graphViewPannable: !0,
            graphViewRectSelectable: !0,
            graphViewScrollBarVisible: !0,
            graphViewRectSelectBorderColor: Q.rectSelectBorder,
            graphViewRectSelectBackground: ep,
            graphViewEditPointSize: $r ? 17 : 7,
            graphViewEditPointBorderColor: Q.editPointBorder,
            graphViewEditPointBackground: Q.editPointBackground,
            setEdgeType: function(S, V, $) {
                Ni[S] = V, Vd[S] = $
            },
            getEdgeType: function(x) {
                return Ni[x]
            },
            getEdgeTypeMap: function() {
                return Ni
            },
            getNodeRect: Hm
        }, !0);
        var gs = {
            "layout.h": O,
            "layout.v": O,
            "2d.selectable": !0,
            "2d.visible": !0,
            "2d.movable": !0,
            "2d.editable": !0,
            "2d.move.mode": O,
            "2d.attachable": !1,
            "2d.hostable": !1,
            interactive: !1,
            preventDefaultWhenInteractive: !0,
            "image.stretch": "fill",
            icons: O,
            ingroup: !0,
            "body.color": O,
            "2d.gray": !1,
            fullscreen: O,
            "fullscreen.gap": 2,
            "fullscreen.lock": !1,
            opacity: O,
            pixelPerfect: !0,
            keepAspectRatio: !1,
            "attach.points": null,
            "attach.style": null,
            "attach.close.threshold": 16,
            "vector.layoutable": !1,
            "clip.direction": "top",
            "clip.percentage": O,
            "select.color": Nl,
            "select.width": 1,
            "select.padding": 2,
            "select.type": Eh,
            "shadow.interactable": !0,
            shadow: !1,
            "shadow.blur": 6,
            "shadow.offset.x": 3,
            "shadow.offset.y": 3,
            shadow2: !1,
            "shadow2.color": Nl,
            "shadow2.blur": 6,
            "shadow2.offset.x": 3,
            "shadow2.offset.y": 3,
            "border.color": O,
            "border.width": 2,
            "border.padding": 2,
            "border.type": Eh,
            label: O,
            "label.font": O,
            "label.color": Jp,
            "label.background": O,
            "label.position": 31,
            "label.position.fixed": !1,
            "label.offset.x": 0,
            "label.offset.y": 2,
            "label.rotation": O,
            "label.max": O,
            "label.opacity": O,
            "label.scale": 1,
            "label.align": O,
            "label.selectable": !0,
            "label.decoration": O,
            label2: O,
            "label2.font": O,
            "label2.color": Jp,
            "label2.background": O,
            "label2.position": 34,
            "label2.position.fixed": !1,
            "label2.offset.x": 0,
            "label2.offset.y": -2,
            "label2.rotation": O,
            "label2.max": O,
            "label2.opacity": O,
            "label2.scale": 1,
            "label2.align": O,
            "label2.selectable": !0,
            "label2.decoration": O,
            note: O,
            "note.expanded": !0,
            "note.font": O,
            "note.color": he,
            "note.background": Nl,
            "note.position": 8,
            "note.offset.x": -3,
            "note.offset.y": 3,
            "note.max": O,
            "note.toggleable": !0,
            "note.border.width": 1,
            "note.border.color": O,
            "note.opacity": O,
            "note.scale": 1,
            "note.align": O,
            note2: O,
            "note2.expanded": !0,
            "note2.font": O,
            "note2.color": he,
            "note2.background": Nl,
            "note2.position": 3,
            "note2.offset.x": 3,
            "note2.offset.y": -3,
            "note2.max": O,
            "note2.toggleable": !0,
            "note2.border.width": 1,
            "note2.border.color": O,
            "note2.opacity": O,
            "note2.scale": 1,
            "note2.align": O,
            "group.type": O,
            "group.image": O,
            "group.image.stretch": "fill",
            "group.repeat.image": O,
            "group.border.repeat.image": O,
            "group.padding": 8,
            "group.padding.left": 0,
            "group.padding.right": 0,
            "group.padding.top": 0,
            "group.padding.bottom": 0,
            "group.position": 17,
            "group.toggleable": !0,
            "group.title.font": O,
            "group.title.color": he,
            "group.title.background": Q.groupTitleBackground,
            "group.title.align": _i,
            "group.title.orientation": vi,
            "group.background": Q.groupBackground,
            "group.depth": 1,
            "group.border.width": 1,
            "group.border.pattern": O,
            "group.border.color": Ee,
            "group.border.radius": O,
            "group.border.cap": gh,
            "group.border.join": Br,
            "group.border.width.absolute": !1,
            "group.splitLine": !1,
            "group.gradient": Y,
            "group.gradient.color": "#FFF",
            shape: O,
            "shape.background": Ee,
            "shape.repeat.image": O,
            "shape.border.repeat.image": O,
            "shape.border.width": 0,
            "shape.border.width.absolute": !1,
            "shape.border.color": Ee,
            "shape.border.3d": !1,
            "shape.border.3d.color": O,
            "shape.border.3d.accuracy": O,
            "shape.border.cap": gh,
            "shape.border.join": Br,
            "shape.border.pattern": O,
            "shape.gradient": Y,
            "shape.gradient.color": "#FFF",
            "shape.depth": 0,
            "shape.dash": !1,
            "shape.dash.pattern": Zq,
            "shape.dash.offset": 0,
            "shape.dash.color": Qq,
            "shape.dash.width": O,
            "shape.dash.3d": !1,
            "shape.dash.3d.color": O,
            "shape.dash.3d.accuracy": O,
            "shape.polygon.side": 6,
            "shape.arc.from": f,
            "shape.arc.to": U,
            "shape.arc.close": !0,
            "shape.arc.oval": !1,
            "shape.corner.radius": O,
            "shape.gradient.pack": O,
            "shape.border.gradient.pack": O,
            "shape.fill.rule": "nonzero",
            "shape.fill.clip.direction": "top",
            "shape.fill.clip.percentage": O,
            "shape.foreground": O,
            "shape.foreground.gradient": Y,
            "shape.foreground.gradient.color": "#FFF",
            "shape.foreground.clip.direction": "top",
            "shape.foreground.clip.percentage": O,
            "autolayout.gap": O,
            "autolayout.hgap": O,
            "autolayout.vgap": O,
            "edge.type": O,
            "edge.points": O,
            "edge.segments": O,
            "edge.color": Ee,
            "edge.width": 2,
            "edge.width.absolute": !1,
            "edge.repeat.image": null,
            "edge.offset": 0,
            "edge.group": 0,
            "edge.expanded": !0,
            "edge.gap": 12,
            "edge.toggleable": !0,
            "edge.center": !1,
            "edge.3d": !1,
            "edge.3d.color": O,
            "edge.3d.accuracy": O,
            "edge.cap": gh,
            "edge.join": Br,
            "edge.source.position": 17,
            "edge.source.anchor.x": O,
            "edge.source.anchor.y": O,
            "edge.source.offset.x": 0,
            "edge.source.offset.y": 0,
            "edge.source.index": -1,
            "edge.source.percent": 0,
            "edge.target.position": 17,
            "edge.target.anchor.x": O,
            "edge.target.anchor.y": O,
            "edge.target.offset.x": 0,
            "edge.target.offset.y": 0,
            "edge.target.index": -1,
            "edge.target.percent": 0,
            "edge.pattern": O,
            "edge.dash": !1,
            "edge.dash.pattern": Zq,
            "edge.dash.offset": 0,
            "edge.dash.color": Qq,
            "edge.dash.width": O,
            "edge.dash.3d": !1,
            "edge.dash.3d.color": O,
            "edge.dash.3d.accuracy": O,
            "edge.independent": !1,
            "attach.row.index": 0,
            "attach.column.index": 0,
            "attach.row.span": 1,
            "attach.column.span": 1,
            "attach.padding": 0,
            "attach.padding.left": 0,
            "attach.padding.right": 0,
            "attach.padding.top": 0,
            "attach.padding.bottom": 0,
            "attach.index": -1,
            "attach.offset": 0,
            "attach.offset.relative": !1,
            "attach.offset.opposite": !1,
            "attach.thickness": O,
            "attach.gap": 0,
            "attach.gap.relative": !1,
            "grid.row.count": 1,
            "grid.column.count": 1,
            "grid.row.percents": O,
            "grid.column.percents": O,
            "grid.border": 1,
            "grid.border.left": 0,
            "grid.border.right": 0,
            "grid.border.top": 0,
            "grid.border.bottom": 0,
            "grid.gap": 1,
            "grid.background": Q.gridBackground,
            "grid.depth": 1,
            "grid.cell.depth": -1,
            "grid.cell.border.color": Q.gridCellBorderColor,
            "grid.block": O,
            "grid.block.padding": 3,
            "grid.block.width": 1,
            "grid.block.color": Q.gridBlockColor,
            text: "",
            "text.align": "left",
            "text.vAlign": "middle",
            "text.color": Jp,
            "text.gradient.pack": O,
            "text.font": Wl,
            "text.shadow": !1,
            "text.shadow.color": Nl,
            "text.shadow.blur": 6,
            "text.shadow.offset.x": 3,
            "text.shadow.offset.y": 3,
            "text.scale.x": 1,
            "text.scale.y": 1,
            "text.gradient": O,
            "text.gradient.color": "#FFF",
            "text.decoration": O,
            "text.vertical": !1,
            "text.vertical.gap": 1,
            "text.wrap": !1,
            "text.letter.gap": null,
            "text.border.color": Nl,
            "text.border.width": 0,
            keepPosition: !0
        };
        gs[Yk] = O, fp(A, gs, !0), fp(_c, {
            _76I: function(c, $, i) {
                this._39I && this._39I.fire({
                    data: c,
                    oldIndex: $,
                    newIndex: i
                })
            },
            addIndexChangeListener: function(v, C, J) {
                var q = this;
                q._39I || (q._39I = new ge), q._39I.add(v, C, J)
            },
            removeIndexChangeListener: function(B, $) {
                this._39I.remove(B, $)
            },
            prepareRemove: function(V) {
                Em(V) && (V.setSource(Y), V.setTarget(Y)), V._70O && V._70O.toList().each(this.remove, this), V._69O && V._69O.toList().each(function(g) {
                    g.setHost(Y)
                }), V._host && V.setHost(Y)
            },
            onAdded: function(H) {
                this.isAutoAdjustIndex() && this.adjustIndex(H)
            },
            onDataPropertyChanged: function(Q, b) {
                hk[b.property] && this.isAutoAdjustIndex() && this.adjustIndex(Q)
            },
            isAdjustable: function(X) {
                return Mk(X) || Em(X)
            },
            isAdjustedToBottom: function(b) {
                return og(b) ? b.isExpanded() && ib(b) : !1
            },
            adjustIndex: function(s) {
                var A = this;
                this.isHierarchicalRendering() || (A.isAdjustedToBottom(s) ? (A.sendToBottom(s), s.eachChild(A.adjustIndex, A)) : A.sendToTop(s))
            },
            sendToTop: function(f) {
                var m = this;
                if (m.contains(f) && m.isAdjustable(f)) {
                    var r = m._datas;
                    if (f !== r.get(m.size() - 1)) {
                        var c = r.indexOf(f);
                        r.removeAt(c), r.add(f), m._76I(f, c, m.size() - 1)
                    }
                    if (Em(f)) {
                        var R = f._40I;
                        R && !m.isAdjustedToBottom(R) && m.sendToTop(R), R = f._41I, R && !m.isAdjustedToBottom(R) && m.sendToTop(R)
                    }
                    f._69O && f._69O.each(function(e) {
                        e.isRelatedTo(f) || Mk(f) && e.isLoopedHostOn(f) || m.sendToTop(e)
                    }), f.ISubGraph || (!og(f) || f.isExpanded()) && f._adjustChildrenToTop && f.eachChild(function(J) {
                        Em(J) || m.sendToTop(J)
                    })
                }
            },
            sendToBottom: function(G, L) {
                var W = this;
                if (G !== L && W.contains(G) && W.isAdjustable(G) && (!L || W.contains(L))) {
                    var b = W._datas,
                        e = b.remove(G),
                        J = L ? W._datas.indexOf(L) : 0;
                    if (b.add(G, J), e !== J) {
                        W._76I(G, e, J);
                        var C = G._parent;
                        !C || C.ISubGraph || Em(C) || W.sendToBottom(G._parent, G)
                    }
                }
            }
        }), fp(po, {
            ms_edit: function(d) {
                d._46O = function(Q) {
                    var w = this,
                        t = w.gv.dm(),
                        l = w._index,
                        U = w._89I,
                        N = w._node,
                        f = w._shape,
                        v = w._edge,
                        z = w._77I;
                    N && U ? (this.fi({
                        kind: "endEditRect",
                        event: Q,
                        data: N,
                        direction: U
                    }), t.endTransaction()) : f && l >= 0 ? (w.fi({
                        kind: "endEditPoint",
                        event: Q,
                        data: f,
                        index: l
                    }), t.endTransaction()) : v && l >= 0 ? (w.fi({
                        kind: "endEditPoint",
                        event: Q,
                        data: v,
                        index: l
                    }), t.endTransaction()) : z && (w.fi({
                        kind: "endEditRotation",
                        event: Q,
                        data: z
                    }), t.endTransaction())
                }, d._78I = function(v) {
                    var t = this;
                    t.autoScroll(v);
                    var L = t.gv.lp(v),
                        V = t._index,
                        $ = t._89I,
                        w = t._node,
                        e = t._shape,
                        R = t._edge,
                        H = t._77I;
                    if (w && $) t._80O(L), t.fi({
                        kind: "betweenEditRect",
                        event: v,
                        data: w,
                        direction: $
                    });
                    else if (e && V >= 0) L.e = e.getPoints().get(V).e, e.setPoint(V, L), t.fi({
                        kind: "betweenEditPoint",
                        event: v,
                        data: e,
                        index: V
                    });
                    else if (R && V >= 0) {
                        var p = R.s($j);
                        L.e = p.get(V).e, p.set(V, L), R.fp($j, Y, p), t.fi({
                            kind: "betweenEditPoint",
                            event: v,
                            data: R,
                            index: V
                        })
                    } else if (H) {
                        var J = H.p(),
                            W = H.getScale(),
                            q = yr + di(L.y - J.y, L.x - J.x);
                        W.y < 0 && (q += f), r(q) < .04 && (q = 0), H.setRotation(q), t.fi({
                            kind: "betweenEditRotation",
                            event: v,
                            data: H
                        })
                    }
                }, d._80O = function(E) {
                    var P = this,
                        n = P._node,
                        q = P._rect,
                        M = q.x,
                        J = q.y,
                        N = q.width,
                        b = q.height,
                        o = P._89I,
                        f = P._anchor,
                        W = P._matrix,
                        E = W.tfi(E);
                    "northwest" === o ? q = Ah(E, {
                        x: M + N,
                        y: J + b
                    }) : o === ef ? q = Ah({
                        x: M,
                        y: E.y
                    }, {
                        x: M + N,
                        y: J + b
                    }) : "northeast" === o ? q = Ah({
                        x: M,
                        y: E.y
                    }, {
                        x: E.x,
                        y: J + b
                    }) : o === Qo ? q = Ah({
                        x: E.x,
                        y: J
                    }, {
                        x: M + N,
                        y: J + b
                    }) : o === hj ? q = Ah({
                        x: M,
                        y: J
                    }, {
                        x: E.x,
                        y: J + b
                    }) : "southwest" === o ? q = Ah({
                        x: E.x,
                        y: J
                    }, {
                        x: M + N,
                        y: E.y
                    }) : "south" === o ? q = Ah({
                        x: M,
                        y: J
                    }, {
                        x: M + N,
                        y: E.y
                    }) : "southeast" === o && (q = Ah({
                        x: M,
                        y: J
                    }, E)), n.setPosition(W.tf(q.x + q.width * f.x, q.y + q.height * f.y)), n.setWidth(q.width), n.setHeight(q.height)
                }, d._80I = function(R, B, d, n) {
                    var G = this,
                        L = G.gv._zoom,
                        j = (G.gv.getEditPointSize() + 2) / L;
                    return mm({
                        x: B - j / 2,
                        y: d - j / 2,
                        width: j,
                        height: j
                    }, R) ? (G._89I !== n && (G._89I = n), !0) : !1
                }, d._79I = function(r, K, B) {
                    var Q = this,
                        S = Q.gv,
                        E = K ? S.getDataUI(K) : Y,
                        p = E ? E._55O : Y;
                    if (p) {
                        var Z, c, y, n, x = S._zoom,
                            J = (S.getEditPointSize() + 2) / x,
                            P = S.lp(r);
                        if (Mk(K)) {
                            if (p._56O && Mk(K) && (c = p._98o, mm({
                                    x: c.x - J / 2,
                                    y: c.y - J / 2,
                                    width: J,
                                    height: J
                                }, P))) return Q._77I = K, B && Q.fi({
                                kind: "beginEditRotation",
                                event: r,
                                data: K
                            }), Q.setCursor("crosshair"), !0;
                            if (p._43O && K instanceof Cr)
                                for (y = K.getPoints(), Z = y.size() - 1; Z >= 0; Z--)
                                    if (c = y.get(Z), mm({
                                            x: c.x - J / 2,
                                            y: c.y - J / 2,
                                            width: J,
                                            height: J
                                        }, P)) return Q._index = Z, Q._shape = K, B && Q.fi({
                                        kind: "beginEditPoint",
                                        event: r,
                                        data: K,
                                        index: Z
                                    }), Q.setCursor("crosshair"), !0;
                            if (p._42O)
                                for (var R = K.getEditControlPoints(), i = ["northwest", -1, -1, Qo, -1, 0, "southwest", -1, 1, "south", 0, 1, "southeast", 1, 1, hj, 1, 0, "northeast", 1, -1, ef, 0, -1], Z = 0, n = R.length; n > Z; Z++) {
                                    var X = i[3 * Z],
                                        s = R[Z];
                                    if (Q._80I(P, s.x, s.y, X)) {
                                        Q._node = K;
                                        var V = K.getWidth(),
                                            w = K.getHeight(),
                                            M = K.getAnchor();
                                        Q._rect = {
                                            x: -V * M.x,
                                            y: -w * M.y,
                                            width: V,
                                            height: w
                                        }, Q._anchor = M, Q._matrix = K.getMatrix();
                                        var A = K.getRotation(),
                                            z = u(A),
                                            W = b(A),
                                            L = i[3 * Z + 1] * dg(K.getScale().x),
                                            q = i[3 * Z + 2] * dg(K.getScale().y),
                                            e = Math.atan2(-W * L - z * q, z * L - W * q),
                                            $ = (Math.round(e / (Math.PI / 4)) + 8) % 8,
                                            l = [$q, "nesw-resize", Fd, "nwse-resize", $q, "nesw-resize", Fd, "nwse-resize"][$];
                                        return Q.setCursor(l), B && Q.fi({
                                            kind: "beginEditRect",
                                            event: r,
                                            data: K,
                                            direction: Q._89I
                                        }), !0
                                    }
                                }
                        }
                        if (p._43O && Em(K) && K.s(tk) === Wq && (y = K.s($j)))
                            for (Z = y.size() - 1; Z >= 0; Z--)
                                if (c = y.get(Z), mm({
                                        x: c.x - J / 2,
                                        y: c.y - J / 2,
                                        width: J,
                                        height: J
                                    }, P)) return Q._index = Z, Q._edge = K, B && Q.fi({
                                    kind: "beginEditPoint",
                                    event: r,
                                    data: K,
                                    index: Z
                                }), Q.setCursor("crosshair"), !0
                    }
                    return !1
                }
            },
            ms_gv: function(b) {
                b._currentSubGraph = Y, b._initView = function() {
                    this._fpsInfo = {
                        time: 0,
                        fps: 0,
                        frames: 0
                    }
                }, b.upSubGraph = function() {
                    this.setCurrentSubGraph(Jk(this._currentSubGraph))
                }, b.isVisible = function(W) {
                    var R = this;
                    if (Jk(W) !== R._currentSubGraph) return !1;
                    if (Em(W)) {
                        var L = W._40I,
                            z = W._41I;
                        if (!L || !z) return !1;
                        if (!(W.s("edge.independent") || R.isVisible(L) && R.isVisible(z))) return !1;
                        if (W.isEdgeGroupHidden()) return !1
                    } else
                        for (var C = W._parent; C && !C.ISubGraph;) {
                            if (og(C) && (!C.isExpanded() || !R.isVisible(C))) return !1;
                            C = C._parent
                        }
                    if (W._parent instanceof zc && !R.isVisible(W._parent)) return !1;
                    if (W._refGraph instanceof Tb && !R.isVisible(W._refGraph)) return !1;
                    if (R instanceof Ai) {
                        if (!W.s("3d.visible")) return !1
                    } else {
                        var D = R.getLayersInfo();
                        if (D) {
                            var $ = D[W._layer];
                            if ($ && $.visible === !1) return !1
                        }
                        if (!W.s("2d.visible")) return !1
                    }
                    return R._visibleFunc ? R._visibleFunc(W) : !0
                }, b.handleSelectionChange = function(Z) {
                    var G = this;
                    Z.datas.each(function(r) {
                        G.invalidateData(r);
                        var U = r._parent;
                        og(U) && Mk(r) && r.s(Ji) && (G.invalidateData(U), U._49I && U._49I.each(function(u) {
                            G.invalidateData(u)
                        }))
                    }), G.onSelectionChanged(Z)
                }, b.onSelectionChanged = function(k) {
                    var U = this,
                        v = U.sm();
                    if (1 === v.size() && ("set" === k.kind || "append" === k.kind)) {
                        var P = v.ld();
                        U.isAutoMakeVisible() && U.makeVisible(P), U.adjustIndex && U._dataModel.isAutoAdjustIndex() && U.adjustIndex(P)
                    }
                }, b.makeVisible = function(j) {
                    if (j) {
                        var R = this,
                            D = R.getDataUI ? R.getDataUI(j) : R.getData3dUI(j);
                        if (D) {
                            var H = j,
                                O = Jk(j);
                            for (O !== R._currentSubGraph && R.setCurrentSubGraph(O);
                                (H = H._parent) && H !== O;) og(H) && H.setExpanded(!0);
                            R._23I = j, R.iv()
                        }
                    }
                }, b.getLabel = function(y) {
                    var d = y.getStyle(pd);
                    return d === O ? y.getName() : d
                }, b.getLabelBackground = function(X) {
                    return X.getStyle("label.background")
                }, b.getLabelColor = function(A) {
                    return A.getStyle("label.color")
                }, b.getLabel2 = function(E) {
                    return E.getStyle("label2")
                }, b.getLabel2Background = function(X) {
                    return X.getStyle("label2.background")
                }, b.getLabel2Color = function(L) {
                    return L.getStyle("label2.color")
                }, b.getNote = function(G) {
                    return G.getStyle(qf)
                }, b.getNoteBackground = function(H) {
                    return H.getStyle("note.background")
                }, b.getNote2 = function(N) {
                    return N.getStyle(mk)
                }, b.getNote2Background = function(j) {
                    return j.getStyle("note2.background")
                }, b.handleClick = function(l, U, Y) {
                    var E = this;
                    U ? (E.fi({
                        kind: "clickData",
                        event: l,
                        data: U,
                        part: Y
                    }), E.onDataClicked(U, l)) : (E.fi({
                        kind: "clickBackground",
                        event: l
                    }), E.onBackgroundClicked(l))
                }, b.handleDoubleClick = function(v, y, M) {
                    var g = this;
                    Bj(v) && (y ? (g.fi({
                        kind: "doubleClickData",
                        event: v,
                        data: y,
                        part: M
                    }), g.onDataDoubleClicked(y, v, M), g.checkDoubleClickOnNote(v, y, M) || g.checkDoubleClickOnRotation && g.checkDoubleClickOnRotation(v, y, M) || (Em(y) ? g.onEdgeDoubleClicked(y, v, M) : y.ISubGraph ? g.onSubGraphDoubleClicked(y, v, M) : og(y) ? g.onGroupDoubleClicked(y, v, M) : y.IDoorWindow ? g.onDoorWindowDoubleClicked(y, v, M) : y.ICSGBox && g.onCSGBoxDoubleClicked(y, v, M))) : (g.fi({
                        kind: "doubleClickBackground",
                        event: v
                    }), g.onBackgroundDoubleClicked(v)))
                }, b.onSubGraphDoubleClicked = function(R) {
                    this.setCurrentSubGraph(R)
                }, b.onEdgeDoubleClicked = function(Y, O) {
                    this.isEditable(Y) || (Y.ISubGraph && !Gp(O) ? this.setCurrentSubGraph(Y) : Y.s("edge.toggleable") && Y.toggle())
                }, b._39Q = function(c) {
                    return this.isInteractive(c) ? this.preventDefaultWhenInteractive(c) : !1
                }, b.preventDefaultWhenInteractive = function(F) {
                    return F.s("preventDefaultWhenInteractive")
                }, b.onGroupDoubleClicked = function(y) {
                    y.s("group.toggleable") && y.toggle()
                }, b.onDoorWindowDoubleClicked = function(W) {
                    W.s("dw.toggleable") && W.toggle(!0)
                }, b.onCSGBoxDoubleClicked = function(i, U) {
                    var D = this;
                    if (D instanceof Ai) {
                        var o = D.intersectObject(U, i);
                        o && i.s(o.part + ".toggleable") && i.toggleFace(o.part, !0)
                    }
                }, b.onBackgroundClicked = function() {}, b.onBackgroundDoubleClicked = function() {
                    this.upSubGraph()
                }, b.onDataClicked = function() {}, b.onDataDoubleClicked = function() {}, b.onAutoLayoutEnded = function() {}, b.onMoveEnded = function() {}, b.onPanEnded = function() {}, b.onPinchEnded = function() {}, b.onRectSelectEnded = function() {}, b.onZoomEnded = function() {}, b.serialize = function(H) {
                    return this.dm().serialize(H)
                }, b.toJSON = function() {
                    return this.dm().toJSON()
                }, b.deserialize = function(r, y) {
                    var R = this;
                    y = y instanceof Mc ? {
                        rootParent: y
                    } : xk(y) ? {
                        setId: y
                    } : Ap(y) ? {
                        finishFunc: y
                    } : y || {}, y.view = R;
                    var C = R.dm();
                    return y.reset && (C.setAttrObject({}), C.setLayers(O), C.setName(O), C.setAutoAdjustIndex(!0), C.setHierarchicalRendering(!1), C.setBackground(O), C.setInit(O), C.setPostProcessingData(O), C.setEnvmap(O), C.setEnvmapType(O), R.disableToolTip(), R instanceof F.graph.GraphView ? (R.setZoomable(z.graphViewZoomable), R.setPannable(z.graphViewPannable), R.setRectSelectable(z.graphViewRectSelectable)) : R instanceof F.graph3d.Graph3dView && (R.shadowMap.resetProperties(), R.setDashDisabled(z.graph3dViewDashDisabled), R.getHighlightHelper().resetProperties(), R.resetHeadlightProperties(), R.resetFogProperties(), R.setBatchInfoMap({}), R.setBatchColorDisabled(z.graph3dViewBatchColorDisabled), R.setBatchBlendDisabled(z.graph3dViewBatchBlendDisabled), R.setBatchBrightnessDisabled(z.graph3dViewBatchBrightnessDisabled), R.setMoveStep(z.graph3dViewMoveStep), R.setRotateStep(z.graph3dViewRotateStep), R.setSortable(z.graph3dViewSortable), R.setSortFunc(O), R.setSkybox(O), qc(R))), y.__innerHandler__ = function(s) {
                        if (xk(C.a("toolTipEnable")) && (C.a("toolTipEnable") ? R.enableToolTip() : R.disableToolTip()), R instanceof F.graph.GraphView && (xk(C.a("zoomable")) && R.setZoomable && R.setZoomable(C.a("zoomable")), xk(C.a("pannable")) && R.setPannable && R.setPannable(C.a("pannable")), xk(C.a("rectSelectable")) && R.setRectSelectable && R.setRectSelectable(C.a("rectSelectable")), C.a("fitContent") === !0 && R.fitContent && R.fitContent(!0, 0)), R instanceof F.graph3d.Graph3dView) {
                            var U = s.scene;
                            U && U.shadow != Y && R.shadowMap.setShadow(U.shadow, U.shadowParams);
                            var i = C.a("sceneContext");
                            i ? (i.eye && R.setEye(i.eye), i.center && R.setCenter(i.center), Jm(i.far) && R.setFar(i.far), Jm(i.near) && R.setNear(i.near)) : (Jm(C.a("sceneNear")) && R.setNear(C.a("sceneNear")), Jm(C.a("sceneFar")) && R.setFar(C.a("sceneFar")), U && (U.eye && R.setEye(U.eye), U.center && R.setCenter(U.center))), xk(C.a("sceneShadowEnabled")) && (C.a("sceneShadowEnabled") ? R.enableShadow() : R.disableShadow()), Jm(C.a("sceneShadowDegreeX")) && R.setShadowDegreeX(C.a("sceneShadowDegreeX")), Jm(C.a("sceneShadowDegreeZ")) && R.setShadowDegreeZ(C.a("sceneShadowDegreeZ")), Jm(C.a("sceneShadowIntensity")) && R.setShadowIntensity(C.a("sceneShadowIntensity")), C.a("sceneShadowQuality") != Y && R.setShadowQuality(C.a("sceneShadowQuality")), C.a("sceneShadowType") && R.setShadowType(C.a("sceneShadowType")), Jm(C.a("sceneShadowRadius")) && R.setShadowRadius(C.a("sceneShadowRadius")), Jm(C.a("sceneShadowBias")) && R.setShadowBias(C.a("sceneShadowBias")), xk(C.a("sceneDashEnable")) && R.setDashDisabled(!C.a("sceneDashEnable")), Sf(C.a("sceneHighlightMode")) && R.setHighlightMode(C.a("sceneHighlightMode")), Jm(C.a("sceneHighlightWidth")) && R.setHighlightWidth(C.a("sceneHighlightWidth")), C.a("sceneHighlightColor") && R.setHighlightColor(C.a("sceneHighlightColor")), C.a("sceneHighlightType") && R.setHighlightType(C.a("sceneHighlightType")), C.a("sceneHighlightGlow") && R.setHighlightGlow(C.a("sceneHighlightGlow")), C.a("sceneHighlightStrength") && R.setHighlightStrength(C.a("sceneHighlightStrength")), xk(C.a("sceneHeadlightEnable")) && R.setHeadlightDisabled(!C.a("sceneHeadlightEnable")), Jm(C.a("sceneHeadlightRange")) && R.setHeadlightRange(C.a("sceneHeadlightRange")), C.a("sceneHeadlightColor") && R.setHeadlightColor(C.a("sceneHeadlightColor")), Jm(C.a("sceneHeadlightIntensity")) && R.setHeadlightIntensity(C.a("sceneHeadlightIntensity")), Jm(C.a("sceneHeadlightAmbientIntensity")) && R.setHeadlightAmbientIntensity(C.a("sceneHeadlightAmbientIntensity")), Jm(C.a("sceneHeadlightGroup")) && R.setHeadlightGroup(C.a("sceneHeadlightGroup")), xk(C.a("sceneFogEnable")) && R.setFogDisabled(!C.a("sceneFogEnable")), C.a("sceneFogMode") && R.setFogMode(C.a("sceneFogMode")), Jm(C.a("sceneFogDensity")) && R.setFogDensity(C.a("sceneFogDensity")), C.a("sceneFogColor") && R.setFogColor(C.a("sceneFogColor")), Jm(C.a("sceneFogNear")) && R.setFogNear(C.a("sceneFogNear")), Jm(C.a("sceneFogFar")) && R.setFogFar(C.a("sceneFogFar")), xk(C.a("sceneBatchBrightnessDisabled")) && R.setBatchBrightnessDisabled(C.a("sceneBatchBrightnessDisabled")), xk(C.a("sceneBatchBlendDisabled")) && R.setBatchBlendDisabled(C.a("sceneBatchBlendDisabled")), xk(C.a("sceneBatchColorDisabled")) && R.setBatchColorDisabled(C.a("sceneBatchColorDisabled")), C.a("sceneBatchInfoMap") && R.setBatchInfoMap(C.a("sceneBatchInfoMap")), Jm(C.a("sceneMoveStep")) && R.setMoveStep(C.a("sceneMoveStep")), Jm(C.a("sceneRotateStep")) && R.setRotateStep(C.a("sceneRotateStep")), xk(C.a("sceneSortable")) && R.setSortable(C.a("sceneSortable")), Ap(C.a("sceneSortFunc")) && R.setSortFunc(C.a("sceneSortFunc"));
                            var q = C.a("sceneSkyboxType") || "sphere";
                            if (q != Y) {
                                var k = {},
                                    I = !1;
                                if ("sphere" === q) {
                                    k.shape3d = q;
                                    var a = C.a("sceneSkyboxImage");
                                    a && (k["shape3d.image"] = a, I = !0)
                                } else k.shape3d = O, ["front", "back", "left", "right", "top", "bottom"].forEach(function(M) {
                                    var r = M + ".image",
                                        j = M.charAt(0).toUpperCase() + M.slice(1),
                                        H = C.a("sceneSkybox" + j + "Image");
                                    H && (k[r] = H, I = !0)
                                });
                                if (I) {
                                    var y = new xp,
                                        e = C.a("sceneSkyboxDiameter");
                                    Jm(e) ? y.s3(e, e, e) : y.s3(20, 20, 20), k["body.color"] = C.a("sceneSkyboxBodyColor"), k.envmap = C.a("sceneSkyboxEnvmap"), k["envmap.probe"] = C.a("sceneSkyboxEnvmapProbe"), k.roughness = C.a("sceneSkyboxRoughness"), k["shape3d.light"] = k["all.light"] = C.a("sceneSkyboxLight"), k["light.mask"] = C.a("sceneSkyboxLightMask"), k["headlight.ambientIntensity"] = C.a("sceneSkyboxHeadLightAmbientIntensity"), k["texture.wrap"] = "clampToEdge", k["3d.clipbox.mask"] = Cm, k["effect.flow.mask"] = Cm, y.s(k), ["X", "Y", "Z"].forEach(function(Y) {
                                        var v = C.a("sceneSkyboxRotation" + Y);
                                        Jm(v) && y["setRotation" + Y](v)
                                    }), R.setSkybox(y)
                                }
                            }
                        }
                    }, C.deserialize(r, y.rootParent, y)
                }, b.isDebugTipShowing = function() {
                    return !!this._debugDiv
                }, b.showDebugTip = function() {
                    var H = this,
                        n = H._debugDiv;
                    if (!n) {
                        n = H._debugDiv = W.createElement("div"), n.style.position = "absolute", n.style.overflow = "hidden", n.style.font = z.debugTipLabelFont, n.style.padding = "6px", n.style.backgroundColor = z.debugTipBackground, n.style.color = z.debugTipLabelColor;
                        var k = H.getView();
                        H._79O ? k.insertBefore(n, H._79O) : k.appendChild(n);
                        var $ = function() {
                            H.redraw();
                            var G = H._canvas,
                                P = "FPS: " + H._fpsInfo.fps + "<br/>" + "Datas: " + H.dm().getDatas().length + (G ? "<br/>Size: " + G.width + " * " + G.height : ""),
                                O = H.dm()._historyManager;
                            O && (P += "<br/>Undoes: " + O.getHistories().length + " index: " + O.getHistoryIndex());
                            var s = H.getDebugTip();
                            s && (P += "<hr>" + s), n.innerHTML = P, H._isDebugging && requestAnimationFrame($)
                        };
                        requestAnimationFrame($), H._isDebugging = !0
                    }
                }, b.hideDebugTip = function() {
                    var R = this,
                        e = R._debugDiv;
                    e && (delete R._debugDiv, R.getView().removeChild(e), R._isDebugging = !1)
                }, b.updateDOMAppendMatrix = function() {
                    var J = this.getView();
                    J && (J.updateAppendMatrix = !0)
                }, b.countFrame = function() {
                    if (this._isDebugging) {
                        var I = Date.now(),
                            $ = this._fpsInfo;
                        I - $.time > 1e3 ? ($.fps = Math.round(1e5 * ($.frames + 1) / (I - $.time)) / 100, $.time = I, $.frames = 0) : $.frames++
                    }
                }
            },
            ms_icons: function(j) {
                j.getRotation = function(P) {
                    return P == Y ? 0 : P
                }, j._15O = function() {
                    var I = this,
                        Q = I.s(Up);
                    if (Q) {
                        var Z = I,
                            a = I.data || I._data,
                            b = I._38o = {
                                icons: Q,
                                rects: {}
                            };
                        for (var J in Q) {
                            var P = Q[J],
                                s = Kg(P.shape3d, a, Z);
                            if (!(Kg(P.visible, a, Z) === !1 || Kg(P.for3d, a, Z) && !I.I3d || s && !I.I3d)) {
                                var p = s ? [s] : Kg(P.names, a, Z),
                                    X = p ? p.length : 0,
                                    n = Kg(P.position, a, Z) || 3,
                                    A = Kg(P.offsetX, a, Z) || 0,
                                    e = Kg(P.offsetY, a, Z) || 0,
                                    S = Kg(P.direction, a, Z) || hj,
                                    z = Kg(P.gap, a, Z),
                                    O = z != Y ? z : 1,
                                    C = Kg(P.rotation, a, Z),
                                    h = Kg(P.keepOrien, a, Z),
                                    k = Kg(P.rotationFixed, a, Z) ? C : I.getRotation(C, h, n),
                                    c = Y,
                                    g = b.rects[J] = new Array(X);
                                g.rotation = k;
                                for (var x = 0; X > x; x++) {
                                    var m, V, u, F, B = p[x];
                                    if (s) u = 0, F = 0;
                                    else {
                                        var q = Di(B);
                                        u = Kg(P.width, a, Z), F = Kg(P.height, a, Z), u == Y && (u = ps(q, a)), F == Y && (F = hh(q, a))
                                    }
                                    if (c ? S === hj ? A += u / 2 : S === Qo ? A -= u / 2 : S === ef ? e -= F / 2 : e += F / 2 : c = {
                                            width: u,
                                            height: F
                                        }, I.I3d) {
                                        var r = -u / 2,
                                            l = -F / 2;
                                        V = {
                                            width: u,
                                            height: F,
                                            mat: I._16O(Kg(P.autorotate, a, Z), n, c, Kg(P.face, a, Z) || ae, Kg(P.t3, a, Z), Kg(P.r3, a, Z), Kg(P.rotationMode, a, Z), A, e),
                                            vs: new Kh([r, -l, 0, r, -l - F, 0, r + u, -l - F, 0, r + u, -l, 0])
                                        }
                                    } else m = I.getPosition(n, A, e, c, Kg(P.positionFixed, a, Z)), V = {
                                        x: m.x - u / 2,
                                        y: m.y - F / 2,
                                        width: u,
                                        height: F
                                    }, I._68o(V, k);
                                    g[x] = V, S === hj ? A += u / 2 + O : S === Qo ? A -= u / 2 + O : S === ef ? e -= F / 2 + O : e += F / 2 + O
                                }
                            }
                        }
                    }
                }
            }
        });
        var te = {
                1: 1,
                2: 1,
                6: 1,
                9: 1,
                10: 1,
                14: 1,
                15: 1,
                16: 1,
                21: 1,
                22: 1,
                26: 1,
                29: 1,
                30: 1,
                34: 1,
                36: 1,
                38: 1,
                40: 1,
                42: 1,
                45: 1,
                50: 1,
                52: 1,
                54: 1
            },
            qq = {
                3: 1,
                7: 1,
                11: 1,
                17: 1,
                23: 1,
                27: 1,
                31: 1,
                44: 1,
                46: 1,
                47: 1,
                49: 1
            },
            Lj = {
                translateX: 1,
                translateY: 1,
                zoom: 1,
                scrollBarVisible: 1
            },
            hk = {
                sourceAgent: 1,
                targetAgent: 1,
                expanded: 1,
                parent: 1,
                host: 1
            },
            wo = {
                position: 1,
                width: 1,
                height: 1,
                expanded: 1,
                rotation: 1,
                anchor: 1,
                scale: 1,
                "s:edge.points": 1
            },
            Jb = {
                "edge.type": 1,
                "edge.group": 1
            },
            Ii = {
                rotation: 1,
                rotationX: 1,
                rotationZ: 1,
                rotation3d: 1
            },
            Ol = {
                rotation: 1,
                position: 1,
                width: 1,
                height: 1,
                anchor: 1,
                scale: 1,
                host: 1
            },
            Gd = {
                position: 1,
                width: 1,
                height: 1,
                anchor: 1,
                scale: 1,
                "s:grid.row.count": 1,
                "s:grid.column.count": 1,
                "s:grid.row.percents": 1,
                "s:grid.column.percents": 1,
                "s:grid.border": 1,
                "s:grid.border.left": 1,
                "s:grid.border.right": 1,
                "s:grid.border.top": 1,
                "s:grid.border.bottom": 1,
                "s:grid.gap": 1
            },
            bm = {
                "attach.row.index": 1,
                "attach.column.index": 1,
                "attach.row.span": 1,
                "attach.column.span": 1,
                "attach.padding": 1,
                "attach.padding.left": 1,
                "attach.padding.right": 1,
                "attach.padding.top": 1,
                "attach.padding.bottom": 1,
                "attach.index": 1,
                "attach.offset": 1,
                "attach.offset.relative": 1,
                "attach.offset.opposite": 1,
                "attach.gap": 1,
                "attach.gap.relative": 1,
                "attach.thickness": 1
            },
            Bn = {
                shape: 1,
                thickness: 1,
                position: 1,
                anchor: 1,
                scale: 1
            },
            Jk = function(t) {
                if (!t) return Y;
                if (Em(t)) {
                    var d = t._40I,
                        e = t._41I;
                    if (!d || !e) return Y;
                    var u = Jk(d),
                        M = Jk(e);
                    return u === M ? u : Y
                }
                for (var y = t._parent; Em(y) && !y.ISubGraph;) y = y._parent;
                return y ? y.ISubGraph ? y : Jk(y) : Y
            },
            Nh = function(D, v, H, N) {
                var V = v.getStyle(H) * N;
                V && Um(D, V), V = v.getStyle(H + ".left") * N, V && (D.x -= V, D.width += V), V = v.getStyle(H + ".right") * N, V && (D.width += V), V = v.getStyle(H + ".top") * N, V && (D.y -= V, D.height += V), V = v.getStyle(H + ".bottom") * N, V && (D.height += V), D.width < 0 && (D.width = -D.width, D.x -= D.width), D.height < 0 && (D.height = -D.height, D.y -= D.height)
            },
            ib = function(W) {
                for (var F, k = 0, R = W.size(); R > k; k++)
                    if (F = W.getChildAt(k), Mk(F) && ib(F)) return !0;
                return W.hasAgentEdges()
            },
            ig = function(R) {
                if (!R) return Y;
                for (var d = R._parent; og(d);) {
                    if (!og(d._parent)) return d.isExpanded() ? R : d;
                    d.isExpanded() || (R = d), d = d._parent
                }
                return R
            },
            ze = function(d, O) {
                if (!d || !O) return Y;
                var s, N, k, G = Jk(d),
                    t = Jk(O);
                if (G !== t) {
                    for (; t && G !== t;) t = Jk(t);
                    if (G === t) return d;
                    s = new no, s.add(d, 0);
                    for (var w = d._parent; Mk(w) && !O.isDescendantOf(w);) s.add(w, 0), w = w._parent;
                    for (k = s.size(), N = 0; k > N; N++) {
                        var A = s.get(N);
                        if (og(A) && !A.isExpanded()) return A;
                        if (A.ISubGraph) return A
                    }
                    return d
                }
                return d
            },
            jk = function(e) {
                if (e.isLooped()) return e._source;
                var E = ig(e._source),
                    g = ig(e._target);
                return E === g ? e._source : ze(E, g)
            },
            gf = function(t) {
                if (t.isLooped()) return t._target;
                var M = ig(t._source),
                    L = ig(t._target);
                return M === L ? t._target : ze(L, M)
            },
            js = function(b, n, o) {
                "target" !== o && (o = "source");
                var k = "target" === o ? n.getTargetAgent() : n.getSourceAgent(),
                    O = "edge." + o + ".";
                if (Em(k)) {
                    var t = b.getDataUI(k);
                    t._79o();
                    var A = n.s(O + "index");
                    if (A >= 0) {
                        var $ = jc(t);
                        return $[Math.max(0, Math.min(A, $.length - 1))]
                    }
                    var Y = n.s(O + "percent") || 0;
                    Y = Math.max(0, Math.min(Y, 1));
                    var x = Jj(t);
                    return td(x, 100 * Y)
                }
                return _l(b, k, n.s(O + "position"), n.s(O + "offset.x"), n.s(O + "offset.y"), n.s(O + "anchor.x"), n.s(O + "anchor.y"))
            },
            _l = function(Q, e, p, G, c, j, M) {
                if (!e) return Y;
                var S, k = e.getRotation ? e.getRotation() : 0;
                if (j !== O || M !== O) {
                    j = j === O ? .5 : j, M = M === O ? .5 : M;
                    var A = e.getScale();
                    if (k && !je(e, Q) || A.x < 0 || A.y < 0) {
                        var V = e.getPosition(),
                            h = e.getWidth(),
                            H = e.getHeight(),
                            z = e.getAnchor(),
                            g = new fs(k, V.x, V.y, A.x, A.y);
                        p = g.tf((j - z.x) * h, (M - z.y) * H)
                    } else S = Hm(Q, e), p = {
                        x: S.x + j * S.width,
                        y: S.y + M * S.height
                    }
                } else p = Mj(p, Hm(Q, e));
                if (k) {
                    var U = u(k),
                        P = b(k),
                        X = G * U - c * P;
                    c = G * P + c * U, G = X
                }
                return p.x += G, p.y += c, p
            },
            Td = function(c, L) {
                if (!c || !L) return Y;
                var f, d, M, V, e, z;
                if (c === L) {
                    if (V = c.getLoopedEdges(), !V) return Y;
                    V = new no(V)
                } else {
                    if (e = c.getAgentEdges(), z = L.getAgentEdges(), !e || !z) return Y;
                    for (d = e.size(), f = 0; d > f; f++) M = e.get(f), z.contains(M) && (V || (V = new no), V.add(M))
                }
                if (V)
                    for (f = 0; f < V.size(); f++) M = V.get(f), M.getStyle(tk) === Wq && (M._22I(Y), V.removeAt(f), f--);
                return V
            },
            qr = function(_, e) {
                var n = Td(_, e);
                if (n && !n.isEmpty()) {
                    if (1 === n.size()) return n.get(0)._22I(Y), void 0;
                    var A = new no,
                        X = new no;
                    n.each(function(w) {
                        var o = w.s("edge.group");
                        A.contains(o) || A.add(o)
                    }), A.sort(), A.each(function(w) {
                        X.add(new F.EdgeGroup(n.toList(function(W) {
                            return w === W.s("edge.group")
                        }), X))
                    }), X.each(function(a) {
                        a.each(function(r) {
                            r._22I(a)
                        })
                    })
                }
            },
            fr = function(G, m, f) {
                var V = G._canvas;
                G._zoom;
                var i = Sq(m, V),
                    U = Sq(f, V);
                return {
                    x: i.x - U.x,
                    y: i.y - U.y
                }
            },
            Sm = function(I, h) {
                if (h) {
                    var E = h.rect,
                        k = h.color,
                        U = h.rotation,
                        b = h.labelWidth,
                        p = h.background,
                        A = h.opacity,
                        J = h.scale,
                        D = J != Y && 1 !== J;
                    if (A != Y) {
                        var w = I.globalAlpha;
                        I.globalAlpha *= A
                    }
                    if (U || D) {
                        I.save();
                        var R = E.x + E.width / 2,
                            z = E.y + E.height / 2;
                        uk(I, R, z), U && rf(I, U), D && I.scale(J, J), uk(I, -R, -z)
                    }
                    if (p && or(I, E.x, E.y, E.width, E.height, p), b) {
                        var q = E.width,
                            Z = I.createLinearGradient(E.x, E.y, E.x + q, E.y);
                        Z.addColorStop(0, k), Z.addColorStop(.9, k), Z.addColorStop(1, Mp), k = Z, E.width = b
                    }
                    Sk(I, h.ss, E, h.font, k, h.align, h.decoration), b && (E.width = q), (U || D) && I.restore(), A != Y && (I.globalAlpha = w)
                }
            },
            ok = function(v, I) {
                if (I) {
                    var w = I.rect,
                        m = w.x,
                        p = w.y,
                        c = w.width,
                        C = w.height,
                        G = I.background,
                        k = I.backgroundImage,
                        F = I.borderWidth,
                        B = I.borderColor,
                        r = I.labelWidth,
                        L = I.opacity,
                        y = I.scale,
                        N = y != Y && 1 !== y;
                    if (L != Y) {
                        var q = v.globalAlpha;
                        v.globalAlpha *= L
                    }
                    if (N) {
                        v.save();
                        var D = w.x + w.width / 2,
                            S = w.y + w.height / 2;
                        uk(v, D, S), v.scale(y, y), uk(v, -D, -S)
                    }
                    if (I.expanded) {
                        var O = h(8, c / 4),
                            j = p + C - 8;
                        if (v.fillStyle = G, v.beginPath(), v.moveTo(m, p), v.lineTo(m, j), v.lineTo(m + c / 2, j), v.lineTo(m + c / 2, p + C), v.lineTo(m + c / 2 + O, j), v.lineTo(m + c, j), v.lineTo(m + c, p), v.closePath(), v.fill(), F && (v.lineWidth = F, v.lineJoin = "round", v.lineCap = "round", B ? (v.strokeStyle = B, v.stroke()) : (v.strokeStyle = jd(G), v.beginPath(), v.moveTo(m + c, p), v.lineTo(m + c, j), v.lineTo(m + c / 2 + O, j), v.lineTo(m + c / 2, p + C), v.stroke(), v.strokeStyle = zj(G), v.beginPath(), v.moveTo(m + c, p), v.lineTo(m, p), v.lineTo(m, j), v.lineTo(m + c / 2, j), v.lineTo(m + c / 2, p + C), v.stroke())), k) Iq(v, Di(k), lq, w.x, w.y, w.width, w.height - 8, I.data, I.view);
                        else {
                            if (w.height -= 8, G = I.color, r) {
                                var P = c,
                                    W = v.createLinearGradient(m, p, m + P, p);
                                W.addColorStop(0, G), W.addColorStop(.9, G), W.addColorStop(1, Mp), G = W, w.width = r
                            }
                            Sk(v, I.ss, w, I.font, G, I.align), r && (w.width = P), w.height += 8
                        }
                    } else if (I.icon) ic(v, Di(I.icon), m, p, c, C, I.data, I.view);
                    else {
                        var E = c / 2;
                        F && (v.lineWidth = F, v.lineJoin = "round", v.lineCap = "round", v.strokeStyle = B ? B : jd(G), v.beginPath(), v.arc(m + E, p + E, E, yr, 1.6 * f, !0), v.moveTo(m + E, p + C), v.lineTo(m + c - E / 5, p + E), v.stroke(), v.strokeStyle = B ? B : zj(G), v.beginPath(), v.arc(m + E, p + E, E, 1.6 * f, yr, !0), v.moveTo(m + E, p + C), v.lineTo(m + E / 5, p + E), v.stroke()), v.fillStyle = G, v.beginPath(), v.arc(m + E, p + E, E, 0, U, !0), v.moveTo(m + E, p + C), v.lineTo(m + c - E / 5, p + E), v.lineTo(m + E / 5, p + E), v.closePath(), v.fill(), v.fillStyle = I.color, v.beginPath(), v.arc(m + E, p + E, E / 3, 0, U, !0), v.fill()
                    }
                    N && v.restore(), L != Y && (v.globalAlpha = q)
                }
            },
            Cc = function(S, O) {
                return O > 2 * S ? S : O / 2
            },
            dk = function(t, E, G, i) {
                if (!t || !E) return 0;
                var o = di(E.y - t.y, E.x - t.x);
                return G || (o = E.x < t.x ? o + f : o), o + i
            },
            Of = function(N, k, i, w, y, r, P) {
                P && (N.x > k.x || N.x === k.x && N.y > k.y) && (i = Yr[i], y = -y);
                var u = Mj(i, {
                    x: 0,
                    y: 0,
                    width: cm(N, k),
                    height: 0
                }, r);
                return u.x += w, u.y += y, u = new fs(di(k.y - N.y, k.x - N.x)).tf(u), u.x += N.x, u.y += N.y, u
            },
            Zb = function(h, r, C, c, v) {
                if (h._19Q = !0, !C.getEdgeGroup()) return c ? C.s("edge.gap") : 0;
                if (Em(C.getSourceAgent()) || Em(C.getTargetAgent())) return 0;
                var U, N = 0,
                    b = 0,
                    K = 0;
                if (C.getEdgeGroup().getSiblings().each(function(O) {
                        O.each(function(f) {
                            if (r.isVisible(f) && f.s(tk) == v) {
                                var Y = f.s("edge.gap");
                                U ? (b += K / 2 + Y / 2, K = Y) : (U = f, K = Y), f === C && (N = b)
                            }
                        })
                    }), c) return b - N + K;
                var P = N - b / 2;
                return U && C._40I !== U._40I && (h._19Q = !1), P
            },
            ci = function(y) {
                var k = y._getValidSelection();
                if (1 === k.length) {
                    var l = k[0],
                        L = l instanceof F.Edge;
                    if (l instanceof F.Shape || L) {
                        if (L) {
                            var n = l.s("edge.type");
                            if (n && "points" !== n) return
                        }
                        var w = y.gv;
                        if ((!w.isPointEditable || w.isPointEditable(l)) && w.isEditable(l)) return l
                    }
                }
            },
            uf = function() {
                var k = function(_) {
                    var B = [];
                    return _.forEach(function(Y) {
                        B.push({
                            x: Y.x,
                            y: Y.y
                        }), B.push({
                            x: Y.x + Y.width,
                            y: Y.y + Y.height
                        }), B.push({
                            x: Y.x + Y.width,
                            y: Y.y
                        }), B.push({
                            x: Y.x,
                            y: Y.y + Y.height
                        })
                    }), B
                };
                return function(o, C, T) {
                    if ("oval" === o) {
                        var L = 0,
                            b = T.height / T.width,
                            i = b * b,
                            y = T.x + T.width / 2,
                            z = T.y + T.height / 2,
                            E = k(C);
                        E.forEach(function(R) {
                            var x = R.x - y,
                                I = R.y - z,
                                O = x * x + I * I / i;
                            O > L && (L = O)
                        }), L = x(L);
                        var g = b * L;
                        return {
                            x: y - L,
                            y: z - g,
                            width: 2 * L,
                            height: 2 * g
                        }
                    }
                    if ("circle" === o) {
                        var O = 0,
                            y = T.x + T.width / 2,
                            z = T.y + T.height / 2,
                            E = k(C);
                        return E.forEach(function(r) {
                            var V = r.x - y,
                                o = r.y - z,
                                d = V * V + o * o;
                            d > O && (O = d)
                        }), O = x(O), {
                            x: y - O,
                            y: z - O,
                            width: 2 * O,
                            height: 2 * O
                        }
                    }
                    return "roundRect" === o ? (Um(T, h(T.width, T.height) / 16), T) : T
                }
            }(),
            vj = F.graph = {},
            hl = function(Y, F, t) {
                Wj(E + ".graph." + Y, F, t)
            };
        F.layout = {};
        var Wr = {},
            eh = function(O, y, q, a, S, K, e, v) {
                var p = e._zoom;
                if (p !== e._cacheZoom && (e._cacheZoom = p, e._cacheImage = {}), p *= lk, a = Math.ceil(a), S = Math.ceil(S), a * p > 2048 || S * p > 2048) return y;
                var h = [y.uuid, a, S, q].join("_");
                if (y.cacheRule) {
                    var x;
                    x = Ap(y.cacheRule) ? y.cacheRule(K, e) : Kg(y.cacheRule, K, e), h += "_" + x
                }
                var P, N = 1;
                S >= a && N > a * p ? (P = S / a, a = N / p, S = a * P) : a >= S && N > S * p && (P = a / S, S = N / p, a = S * P), a = Math.ceil(a), S = Math.ceil(S);
                var r = e._cacheImage[h];
                if (!r) {
                    if (es(), r = F.Default.toCanvas(y, a, S, q, K, e, v, p), !Cp()) return y;
                    e._cacheImage[h] = r
                }
                return r
            };
        fp(z, {
            setImageCacheRule: function(I, X) {
                var M;
                X || "object" != typeof I ? (M = {}, M[I] = X) : M = I;
                for (var O in M) {
                    var E = M[O];
                    Sf(O) ? (Wj = Di(O), Wj ? Wj.cacheRule = E : Wr[O] = E) : O.cacheRule = E
                }
            }
        });
        var hn = {
            comps: [{
                type: Cd,
                points: [85, 50, 70, 115, 100, 71, 86, 107, 88, 49, 43, 102, 119, 90, 114, 43, 53, 74, 79, 67, 104, 75, 97, 75, 76, 112, 57, 47, 83, 115, 71, 49, 99, 100, 79, 83, 70, 50, 112, 87, 43, 103, 103, 61],
                borderWidth: 1,
                borderColor: Y
            }]
        };
        if (hn[Kq] = hn[_f] = 160, V.Image) {
            var wb = new V.Image;
            wb.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC", rg("default_blank", wb)
        }
        rg("node_image", ab(30, 30, [{
            type: Eh,
            rect: [4, 5, 22, 16],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [2, 3, 26, 20],
            borderWidth: 1,
            borderColor: Ee
        }, {
            type: Eh,
            rect: [11, 23, 8, 4],
            background: Ee
        }, {
            type: Eh,
            rect: [6, 27, 18, 2],
            background: Ee
        }])), rg("node_icon", ab(16, 16, [{
            type: Eh,
            rect: [2, 2, 12, 10],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: uh,
            rect: [2, 2, 12, 10],
            width: 1,
            color: Ee
        }, {
            type: Eh,
            rect: [6, 12, 4, 2],
            background: Ee
        }, {
            type: Eh,
            rect: [4, 14, 8, 1],
            background: Ee
        }])), rg("block_icon", ab(16, 16, [{
            type: uh,
            rect: [1, 1, 14, 14],
            width: 1,
            color: Ee
        }])), rg("group_image", ab(66, 39, [{
            type: Eh,
            rect: [44.3, 18, 18.1, 12.8],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [3.3, 17.8, 18.1, 12.8],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [15.8, 3.2, 33.5, 26.4],
            borderWidth: 1,
            borderColor: Ee,
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [26.2, 29.4, 12.8, 4.2],
            background: Ee
        }, {
            type: Eh,
            rect: [21.3, 33.5, 22.5, 2.3],
            background: Ee
        }, {
            type: Eh,
            rect: [5.3, 32.7, 14.1, 2.1],
            background: Ee
        }, {
            type: Eh,
            rect: [9, 30.4, 6.7, 2.4],
            background: Ee
        }, {
            type: Eh,
            rect: [50, 30.7, 6.7, 2.4],
            background: Ee
        }, {
            type: Eh,
            rect: [46.3, 33, 14.1, 2.1],
            background: Ee
        }])), rg("group_icon", ab(16, 16, [{
            type: Eh,
            rect: [4, 12, 4, 2],
            background: Ee
        }, {
            type: Eh,
            rect: [2, 13, 8, 1],
            background: Ee
        }, {
            type: Eh,
            rect: [12, 12, 2, 1],
            background: Ee
        }, {
            type: Eh,
            rect: [11, 13, 4, 1],
            background: Ee
        }, {
            type: Eh,
            rect: [10, 7, 6, 5],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [1, 2, 10, 10],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: uh,
            rect: [1, 2, 10, 10],
            width: 1,
            color: Ee
        }])), rg("refGraph_icon", ab(16, 16, [{
            type: "shape",
            borderWidth: 1,
            borderColor: Ee,
            borderCap: "round",
            rotation: .7854,
            points: [12.5502, 6.7981, 12.5502, 6.7981, 12.5502, 4.8181, 12.5502, 3.7981, 12.5502, 2.7781, 11.36687, 1.7981, 10.0502, 1.7981, 8.73354, 1.7981, 7.5502, 2.8181, 7.5502, 3.7981, 7.5502, 4.55989, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 9.7981, 10.0502, 9.7981],
            segments: [1, 4, 4, 4, 4, 4]
        }, {
            type: "shape",
            borderWidth: 1,
            borderColor: Ee,
            borderCap: "round",
            rotation: -2.35619,
            points: [8.4498, 11.2019, 8.4498, 11.2019, 8.4498, 9.2219, 8.4498, 8.2019, 8.4498, 7.1819, 7.26646, 6.2019, 5.9498, 6.2019, 4.63313, 6.2019, 3.4498, 7.2219, 3.4498, 8.2019, 3.4498, 8.9637, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 14.2019, 5.9498, 14.2019],
            segments: [1, 4, 4, 4, 4, 4]
        }])), rg("edge_icon", ab(16, 16, [{
            type: Eh,
            rect: [2.1, 6.9, 11.5, 2.6],
            rotation: -.79,
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [10.8, 1, 4, 4],
            background: Ee
        }, {
            type: Eh,
            rect: [1, 11, 4, 4],
            background: Ee
        }])), rg("subGraph_image", ab(72, 45, [{
            type: Cd,
            points: [9, 42, .3, 38.4, 2.4, 28.8, 5.7, 21.6, 11.7, 22.5, 11.7, 15.9, 16.8, 13.8, 21.6, 12, 24.3, 15.9, 27.9, 3, 42.3, 2.1, 59.4, 4.5, 57.3, 18.3, 67.5, 18.9, 69.6, 27.3, 69.9, 38.4, 64.2, 41.4],
            segments: [1, 3, 3, 3, 3, 3, 3, 3, 3],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [29.6, 30.7, 3.6, 1.8],
            background: Ee
        }, {
            type: Eh,
            rect: [28.4, 32.3, 6, 1.2],
            background: Ee
        }, {
            type: Eh,
            rect: [37.3, 32, 10.8, 1.8],
            background: Ee
        }, {
            type: Eh,
            rect: [39.1, 29.9, 7.2, 2.3],
            background: Ee
        }, {
            type: Eh,
            rect: [26.6, 23.7, 9.6, 7.2],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }, {
            type: Eh,
            rect: [34.3, 16.8, 16.8, 13.2],
            borderWidth: 1,
            borderColor: Ee,
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }])), rg("subGraph_icon", ab(17, 17, [{
            type: Cd,
            points: [2.2, 14.6, .2, 11.9, .8, 8.8, 1.8, 5.9, 5.6, 7.4, 3.8, 1.6, 10.3, 3, 14.5, 4.2, 12.2, 7.5, 18.9, 7.2, 14.5, 14.5],
            segments: [1, 3, 3, 3, 3, 3],
            gradient: lb,
            gradientColor: Rf,
            background: Ee
        }])), rg("shape_icon", ab(16, 16, [{
            type: Cd,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            background: Ee
        }])), rg("polyline_icon", ab(16, 16, [{
            type: Cd,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            borderWidth: 1,
            borderColor: Ee
        }, Qd(7.5, .4), Qd(7.5, 6.3), Qd(13.6, 6.3), Qd(13.6, 14), Qd(.7, 13.9), Qd(.7, .3)])), rg("grid_icon", ab(16, 16, [{
            type: Eh,
            rect: [1, 1, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [6, 1, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [11, 1, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [11, 6, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [6, 6, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [1, 6, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [11, 11, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [6, 11, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }, {
            type: Eh,
            rect: [1, 11, 4, 4],
            background: Ee,
            gradient: lb,
            gradientColor: Rf
        }])), rg("light_icon", ab(16, 16, [{
            type: "rect",
            rect: [6, 9, 5, 5],
            borderWidth: 1,
            borderColor: Ee
        }, {
            type: "circle",
            rect: [1, 1, 15, 10],
            borderWidth: 1,
            borderColor: Ee,
            gradient: lb,
            gradientColor: Rf,
            background: {
                func: function(u) {
                    var z = u ? u.s(Yi) : Y;
                    return ym(z) ? "rgb(" + Hh(255 * z[0]) + "," + Hh(255 * z[1]) + "," + Hh(255 * z[2]) + ")" : z || Ee
                }
            }
        }])), rg("text_icon", ab(16, 16, [{
            type: "shape",
            points: [3, 3, 13, 3, 8, 3, 8, 14],
            segments: [1, 2, 1, 2],
            borderWidth: 1,
            borderColor: Ee
        }])), rg("border_image", {
            fitSize: !0,
            comps: [{
                type: "border",
                relative: !0,
                rect: [0, 0, 1, 1],
                color: {
                    func: "style@border_color"
                },
                width: {
                    func: "style@border_width"
                }
            }]
        }), rg("columnChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: {
                    func: "style@chart.type"
                },
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {
                    func: "style@chart.label"
                },
                labelColor: {
                    func: "style@chart.label.color"
                },
                labelFont: {
                    func: "style@chart.label.font"
                },
                series: {
                    func: "style@chart.series"
                },
                minValue: {
                    func: "style@chart.min.value"
                },
                maxValue: {
                    func: "style@chart.max.value"
                }
            }]
        }), rg("lineChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "lineChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {
                    func: "style@chart.label"
                },
                labelColor: {
                    func: "style@chart.label.color"
                },
                labelFont: {
                    func: "style@chart.label.font"
                },
                series: {
                    func: "style@chart.series"
                },
                minValue: {
                    func: "style@chart.min.value"
                },
                maxValue: {
                    func: "style@chart.max.value"
                },
                linePoint: {
                    func: "style@chart.line.point"
                },
                lineWidth: {
                    func: "style@chart.line.width"
                },
                line3d: {
                    func: "style@chart.line.3d"
                }
            }]
        }), rg("pieChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "pieChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {
                    func: "style@chart.label"
                },
                labelColor: {
                    func: "style@chart.label.color"
                },
                labelFont: {
                    func: "style@chart.label.font"
                },
                hollow: {
                    func: "style@chart.hollow"
                },
                startAngle: {
                    func: "style@chart.start.angle"
                },
                values: {
                    func: "style@chart.values"
                },
                colors: {
                    func: "style@chart.colors"
                }
            }]
        });
        var Bi = function(V, x, d, q, l, s) {
                var t, C, B, j, K, c, v, S, Q, u, E, b = [];
                if (Math.abs(q) > 2 * Math.PI && (q = 2 * Math.PI), K = Math.ceil(Math.abs(q) / (Math.PI / 4)), t = q / K, C = -t, B = -d, K > 0) {
                    c = V + Math.cos(d) * l, v = x + Math.sin(-d) * s, b.push({
                        x: c,
                        y: v
                    });
                    for (var A = 0; K > A; A++) B += C, j = B - C / 2, S = V + Math.cos(B) * l, Q = x + Math.sin(B) * s, u = V + Math.cos(j) * (l / Math.cos(C / 2)), E = x + Math.sin(j) * (s / Math.cos(C / 2)), b.push({
                        x: u,
                        y: E
                    }), b.push({
                        x: S,
                        y: Q
                    })
                }
                return b
            },
            sk = function(I) {
                if (I) {
                    var g = I._data;
                    if (g instanceof F.Shape) return {
                        points: g.getPoints(),
                        segments: g.getSegments()
                    };
                    var V;
                    if (g instanceof F.Edge && (V = I._78o)) {
                        var H, A, M = V.type,
                            O = V.points,
                            j = V.segments,
                            G = V.edgeTypeInfo;
                        if (!M || O) {
                            var e = V.sourcePoint,
                                z = e.x,
                                s = e.y,
                                f = V.targetPoint,
                                a = f.x,
                                X = f.y;
                            if (M) j ? (H = new no({
                                x: z,
                                y: s
                            }), H.addAll(O), H.add({
                                x: a,
                                y: X
                            }), A = new no(j._as)) : (H = new no({
                                x: z,
                                y: s
                            }), O.each(function(y) {
                                H.add(y)
                            }), H.add({
                                x: a,
                                y: X
                            }));
                            else if (V.looped) {
                                H = new no(Bi(z, s, 0, 2 * Math.PI, V.radius, V.radius)), A = new no([1]);
                                for (var t = 0; t < (H.size() - 1) / 2; t++) A.add(3)
                            } else H = new no, V.center ? (H.add({
                                x: V.c1.x,
                                y: V.c1.y
                            }), H.add({
                                x: z,
                                y: s
                            }), H.add({
                                x: a,
                                y: X
                            }), H.add({
                                x: V.c2.x,
                                y: V.c2.y
                            })) : (H.add({
                                x: z,
                                y: s
                            }), H.add({
                                x: a,
                                y: X
                            }))
                        } else G && (H = new no(G.points._as), G.segments && (A = new no(G.segments._as)));
                        return {
                            points: H,
                            segments: A
                        }
                    }
                }
            },
            Jj = function(s, t, $) {
                if (null == t) {
                    var m = sk(s);
                    if (!m) return;
                    t = m.points, $ = m.segments
                }
                if (t) {
                    if (Array.isArray(t) && (t = new no(t)), "number" == typeof t.get(0)) {
                        for (var g = new F.List, L = 0; L < t.size(); L += 2) g.add({
                            x: t.get(L),
                            y: t.get(L + 1)
                        });
                        t = g
                    }
                    if (!$) {
                        $ = [1];
                        for (var Z = t.length - 1; Z > 0; Z--) $.push(2)
                    }
                    Array.isArray($) && ($ = new no($));
                    for (var M = ml(t._as, $._as, 50), E = M.length, v = [], L = 0; E > L; L++) {
                        var p = M[L];
                        p.length > 1 && v.push(p)
                    }
                    return v
                }
            },
            ki = function(r) {
                for (var U = 0, H = r.length - 1, f = 0; H > f; f++) {
                    var L = r[f],
                        b = r[f + 1],
                        n = b.x - L.x,
                        P = b.y - L.y;
                    U += Math.sqrt(n * n + P * P)
                }
                return U
            },
            Jf = function(y, q) {
                for (var n = 0, H = q.length, d = 0; H > d; d++) {
                    var Q = q[d];
                    if (n += Q, n > y) return d
                }
                return Math.min(d, H - 1)
            },
            pf = function(X, B) {
                for (var Y = 0, D = 0, M = 0, T = X.length - 1, S = 0; T > S; S++) {
                    var k = X[S],
                        g = X[S + 1],
                        P = g.x - k.x,
                        E = g.y - k.y;
                    if (M = Math.sqrt(P * P + E * E), Y += M, Y > B) {
                        Y -= M, D = S;
                        break
                    }
                }
                var C = X[D],
                    w = X[D + 1],
                    L = Math.atan2(w.y - C.y, w.x - C.x),
                    t = B - Y,
                    E = Math.sin(L) * t,
                    P = Math.cos(L) * t;
                return {
                    x: C.x + P,
                    y: C.y + E
                }
            },
            td = function(H, l) {
                if (H) {
                    var Q;
                    if (0 === l) Q = H[0][0];
                    else if (100 === l) H = H[H.length - 1], Q = H[H.length - 1];
                    else {
                        for (var I = 0, b = [], f = H.length, F = 0; f > F; F++) {
                            var A = H[F],
                                g = ki(A);
                            I += g, b.push(g)
                        }
                        for (var c = I * l / 100, Z = Jf(c, b), m = 0, d = 0; Z > d; d++) m += b[d];
                        c -= m, Q = pf(H[Z], c)
                    }
                    return Q
                }
            },
            jc = function(R) {
                var d, U;
                if (R instanceof Nf) {
                    var S = sk(R);
                    d = S.points, U = S.segments
                } else d = arguments[0], U = arguments[1];
                var h, z, H, b, O = [],
                    y = -1;
                for (z = 0, H = U ? U.length : d.length; H > z; z++) {
                    if (h = U ? U.get(z) : 1, 3 === h) b = 2;
                    else if (4 === h) b = 3;
                    else {
                        if (5 === h) continue;
                        b = 1
                    }
                    y += b, O.push(d.get(y))
                }
                return O
            },
            uj = function(L, O, M, P) {
                function Q(A) {
                    if (A >= 0 && 1 >= A) {
                        J = O(A);
                        var D = (L.x - J.x) * (L.x - J.x) + (L.y - J.y) * (L.y - J.y);
                        return n > D ? (n = D, t = A, !0) : !1
                    }
                }
                M = M || 100, P = P || 1e-5;
                for (var n = 1 / 0, t = 0, J = new ls, r = 0; M > r; ++r) Q(r / M);
                for (var l = 1 / (2 * M); l > P;) Q(t - l) || Q(t + l) || (l /= 2);
                return t
            };
        fp(z, {
            _edgeProtectMethod: {
                getStraightLinePoints: Jj,
                calculateLineLength: ki,
                calcSegmentIndexByDistance: Jf,
                calculatePointAlongLine: pf,
                getPercentPosition: td,
                getRealPointsFromDataUI: jc
            }
        });
        var Vp = function(f, C) {
                for (var q = f.vertices, J = 0; J < q.length; J++) {
                    var s = q[J],
                        j = s.y;
                    s.y = s.z, s.z = -j, C && (s.y += C)
                }
            },
            vk = function(f) {
                for (var A, G, B, _, k, m, d = [], F = [], R = [], N = f.faces, l = 0, b = 0, w = 0, P = N.length; P > l; l++, b += 6, w += 9) {
                    var K = N[l];
                    1 === K.i ? (A || (A = [], G = [], B = []), Yc(K, l, b, w, f, A, B, G)) : 2 === K.i ? (_ || (_ = [], k = [], m = []), Yc(K, l, b, w, f, _, m, k)) : Yc(K, l, b, w, f, d, R, F)
                }
                return {
                    vs: d,
                    uv: F,
                    ns: R,
                    top_vs: A,
                    top_uv: G,
                    top_ns: B,
                    bottom_vs: _,
                    bottom_uv: k,
                    bottom_ns: m
                }
            },
            Yc = function(_, U, A, p, m, q, P, Q) {
                var t = m.vertices,
                    G = m.faceVertexUvs,
                    L = t[_.a],
                    K = t[_.b],
                    W = t[_.c];
                q.push(L.x, L.y, L.z, K.x, K.y, K.z, W.x, W.y, W.z);
                var N, x, T, l = _.vertexNormals;
                3 === l.length ? (N = l[0], x = l[1], T = l[2]) : N = x = T = _.normal, P.push(N.x, N.y, N.z, x.x, x.y, x.z, T.x, T.y, T.z);
                var b = G[0][U][0],
                    u = G[0][U][1],
                    O = G[0][U][2];
                Q.push(b.x, b.y, u.x, u.y, O.x, O.y)
            },
            $p = function(S) {
                var B;
                B = ym(S) ? S : [S];
                var C, a, m, d, k, T, c, t, z = 1 / 0,
                    W = 1 / 0,
                    M = 1 / 0,
                    Q = -1 / 0,
                    v = -1 / 0,
                    V = -1 / 0,
                    j = ["vs", "top_vs", "bottom_vs"];
                for (C = 0, a = B.length; a > C; C++)
                    for (t = B[C], m = 0, d = j.length; d > m; m++)
                        if (c = t[j[m]])
                            for (k = 0, T = c.length; T > k; k += 3) z = h(z, c[k]), W = h(W, c[k + 1]), M = h(M, c[k + 2]), Q = q(Q, c[k]), v = q(v, c[k + 1]), V = q(V, c[k + 2]);
                var l = {
                    min: {
                        x: z,
                        y: W,
                        z: M
                    },
                    max: {
                        x: Q,
                        y: v,
                        z: V
                    }
                };
                return S.boundingBox = l, l
            },
            Od = function() {
                function I(r, m) {
                    return r.dot(m) > 0
                }

                function k(x, j, s, g, D, z, Y) {
                    for (var f, k, G = [j, s, g], r = [D, z, Y], X = [], b = G.length, B = !0; b-- && B;) {
                        for (var m = G[b], T = r.length, W = !1; T--;)
                            if (m.equals(r[T])) {
                                r.splice(T, 1), X.push(m), W = !0;
                                break
                            }
                        if (!W) {
                            if (f) {
                                B = !1;
                                break
                            }
                            f = m
                        }
                    }
                    return B && 2 === X.length && (k = r[0], C.subVectors(f, X[0]), n.subVectors(k, X[0]), N.subVectors(f, X[1]), C.x * N.y * n.z + N.x * n.y * C.z + n.x * C.y * N.z - n.x * N.y * C.z - n.y * N.z * C.x - n.z * N.x * C.y < 1e-6 && (S.subVectors(k, X[1]), V.subVectors(X[1], X[0]), I(V, C) && I(V, n) && (V.negate(), I(V, N) && I(V, S)))) ? (x.push(X[1].x, X[1].y, X[1].z), x.push(f.x, f.y, f.z), x.push(f.x, f.y, f.z), x.push(X[0].x, X[0].y, X[0].z), x.push(X[0].x, X[0].y, X[0].z), x.push(k.x, k.y, k.z), x.push(k.x, k.y, k.z), x.push(X[1].x, X[1].y, X[1].z), 2) : (x.push(j.x, j.y, j.z), x.push(s.x, s.y, s.z), x.push(s.x, s.y, s.z), x.push(g.x, g.y, g.z), x.push(g.x, g.y, g.z), x.push(j.x, j.y, j.z), 1)
                }

                function c() {
                    this._vertexMap = {}, this._lineMap = {}, this._lineList = []
                }

                function u(p, h, s, J, z, U, $) {
                    var F = [s, z];
                    p[0] === J && F.reverse();
                    var T = [F[0]._key, F[1]._key].join("|"),
                        L = p._triangles[T];
                    L || (p._triangles[T] = L = {});
                    var i = [U._key, $._key].join("|");
                    L[i] || (L[i] = [U, $])
                }

                function p(A, j, $) {
                    var N = A._planes[$._key];
                    if (!N)
                        for (var z in A._planes) {
                            var _ = A._planes[z];
                            if (_._normal.angleTo($) < .001) {
                                N = _;
                                break
                            }
                        }
                    return N ? (N._vertices.indexOf(j) < 0 && N._vertices.push(j), void 0) : (A._planes[$._key] = {
                        _normal: $,
                        _vertices: [j]
                    }, void 0)
                }

                function h(r, B) {
                    return 0 === B ? "0|0|0" : 1 / 0 === Math.abs(B) ? [r.x, r.y, r.z].join("|") : [Math.round(b.angleTo(r) * B), Math.round(X.angleTo(r) * B), Math.round(Z.angleTo(r) * B)].join("|")
                }

                function E(N, G) {
                    var E = N._ctlineModel;
                    if (E || (N._ctlineModel = E = []), E[0]) return E[0];
                    var A;
                    A = ym(N) ? N : [N];
                    var f, Y, K, W, I, u, m, r, O, B, j, q, i, U, c, x, z, o, Z, b = ["", "top_", "bottom_"];
                    E = [];
                    var h = [];
                    for (ss(A, G, h), f = 0, Y = h.length; Y > f; f++)
                        if (B = h[f])
                            for (Ul(B), K = 0, W = b.length; W > K; K++)
                                if (O = B[b[K] + "lvs"])
                                    for (z = E.length, o = O.length, E.length = z + o, Z = 0; o > Z; ++Z, ++z) E[z] = O[Z];
                                else if (m = B[b[K] + "vs"]) {
                        r = B[b[K] + "is"], u = r ? r.length : m.length / 3;
                        for (var I = 0; u - 1 > I;) r ? (j = r[I], q = r[I + 1], i = r[I + 2], U = r[I + 3], c = r[I + 4], x = r[I + 5]) : (j = I, q = I + 1, i = I + 2, U = I + 3, c = I + 4, x = I + 5), t.fromArray(m, 3 * j), R.fromArray(m, 3 * q), d.fromArray(m, 3 * i), L.fromArray(m, 3 * U), H.fromArray(m, 3 * c), P.fromArray(m, 3 * x), I += 3 * k(E, t, R, d, L, H, P);
                        u > I && (r ? (j = r[I], q = r[I + 1], i = r[I + 2]) : (j = I, q = I + 1, i = I + 2), t.fromArray(m, 3 * j), R.fromArray(m, 3 * q), d.fromArray(m, 3 * i), E.push(t.x, t.y, t.z), E.push(R.x, R.y, R.z), E.push(R.x, R.y, R.z), E.push(d.x, d.y, d.z), E.push(d.x, d.y, d.z), E.push(t.x, t.y, t.z))
                    }
                    return N._ctlineModel[0] = E, E
                }

                function j(m, d, N) {
                    var j = m._ctlineModel;
                    j || (m._ctlineModel = j = []);
                    var K = j[1];
                    if (K && K.epsilon === N) return K;
                    K = [], K.epsilon = N;
                    var l;
                    l = ym(m) ? m : [m];
                    var S, X, H, C, Q, o, i, M, L, t, v, g, T = ["", "top_", "bottom_"],
                        Z = new c,
                        F = [];
                    for (ss(l, d, F), S = 0, X = F.length; X > S; S++)
                        if (L = F[S])
                            for (Ul(L), H = 0, C = T.length; C > H; H++)
                                if (i = L[T[H] + "vs"]) {
                                    M = L[T[H] + "is"], o = M ? M.length : i.length / 3;
                                    for (var Q = 0, Q = 0; o > Q; Q += 3) M ? (t = M[Q], v = M[Q + 1], g = M[Q + 2]) : (t = Q, v = Q + 1, g = Q + 2), Z._addTriangle(i, O, t, v, g, N)
                                }
                    return Z._toLineVS(K), m._ctlineModel[1] = K, K
                }

                function m(D, W, s) {
                    var Q = D._ctlineModel;
                    Q || (D._ctlineModel = Q = []);
                    var f = Q[2];
                    if (f && f.epsilon === s) return f;
                    f = [], f.epsilon = s;
                    var t;
                    t = ym(D) ? D : [D];
                    var T, M, K, B, E, q, $, b, l, g, w, L, Z, A = ["", "top_", "bottom_"],
                        V = new c,
                        d = [];
                    for (ss(t, W, d), T = 0, M = d.length; M > T; T++)
                        if (g = d[T])
                            for (Ul(g), K = 0, B = A.length; B > K; K++)
                                if ($ = g[A[K] + "vs"]) {
                                    b = g[A[K] + "is"], l = g[A[K] + "ns"], q = b ? b.length : $.length / 3;
                                    for (var E = 0, E = 0; q > E; E += 3) b ? (w = b[E], L = b[E + 1], Z = b[E + 2]) : (w = E, L = E + 1, Z = E + 2), V._addTriangle($, l, w, L, Z, s)
                                }
                    return V._toLineVS(f), D._ctlineModel[2] = f, f
                }
                var t = new Cb,
                    R = new Cb,
                    d = new Cb,
                    L = new Cb,
                    H = new Cb,
                    P = new Cb,
                    C = new Cb,
                    N = new Cb,
                    n = new Cb,
                    S = new Cb,
                    V = new Cb,
                    K = new Cb;
                c.prototype._findVertex = function($, G) {
                    K.fromArray($, 3 * G);
                    var I = [K.x, K.y, K.z].join(","),
                        j = this._vertexMap[I];
                    if (!j) {
                        var p = K.clone();
                        p._key = I, this._vertexMap[I] = j = p
                    }
                    return j
                }, c.prototype._findLine = function(U, b) {
                    var d = [U, b];
                    U._key > b._key && d.reverse(), d._key = [d[0]._key, d[1]._key].join("|");
                    var S = this._lineMap[d._key];
                    return S || (this._lineMap[d._key] = S = d, d._triangles = {}, d._planes = {}, this._lineList.push(d)), S
                };
                var b = new Cb(1, 0, 0),
                    X = new Cb(0, 1, 0),
                    Z = new Cb(0, 0, 1),
                    D = new Cb,
                    J = new Cb;
                return c.prototype._addTriangle = function(i, G, g, V, k, R) {
                    var b, K, l, Z = this._findVertex(i, g),
                        $ = this._findVertex(i, V),
                        P = this._findVertex(i, k),
                        Y = this._findLine(Z, $),
                        L = this._findLine($, P),
                        y = this._findLine(P, Z);
                    G ? (b = (new Cb).fromArray(G, 3 * g), b._key = h(b, R), K = (new Cb).fromArray(G, 3 * V), K._key = h(K, R), l = (new Cb).fromArray(G, 3 * k), l._key = h(l, R), u(Y, Z, b, $, K, P, l), u(L, $, K, P, l, Z, b), u(y, P, l, Z, b, $, K)) : (J.subVectors(P, $), D.subVectors($, Z), b = (new Cb).crossVectors(D, J), b._key = h(b, R), p(Y, P, b), p(L, Z, b), p(y, $, b))
                }, c.prototype._toLineVS = function(M) {
                    for (var f = this._lineList, Q = 0, m = f.length; m > Q; ++Q) {
                        var b = f[Q],
                            x = !1;
                        for (var X in b._triangles)
                            if (1 == G.keys(b._triangles[X]).length) {
                                M.push(b[0].x, b[0].y, b[0].z, b[1].x, b[1].y, b[1].z), x = !0;
                                break
                            }
                        if (!x)
                            for (var g in b._planes)
                                if (1 == b._planes[g]._vertices.length) {
                                    M.push(b[0].x, b[0].y, b[0].z, b[1].x, b[1].y, b[1].z), x = !0;
                                    break
                                }
                    }
                }, [E, j, m]
            }(),
            qk = function(F, $) {
                var I = F._lineModel;
                if (I) return I;
                var M;
                M = ym(F) ? F : [F];
                var o, b, L, G, s, k, Z, H, g, d, y, X, w = ["", "top_", "bottom_"];
                I = [];
                var J = [];
                for (ss(F, $, J), o = 0, b = J.length; b > o; o++)
                    if (g = J[o])
                        for (L = 0, G = w.length; G > L; L++)
                            if (Z = g[w[L] + "vs"]) {
                                H = g[w[L] + "is"], k = H ? H.length : Z.length / 3;
                                for (var s = 0; k > s; s += 3) H ? (d = H[s], y = H[s + 1], X = H[s + 2]) : (d = s, y = s + 1, X = s + 2), d *= 3, y *= 3, X *= 3, I.push(Z[d], Z[d + 1], Z[d + 2], Z[y], Z[y + 1], Z[y + 2], Z[y], Z[y + 1], Z[y + 2], Z[X], Z[X + 1], Z[X + 2], Z[X], Z[X + 1], Z[X + 2], Z[d], Z[d + 1], Z[d + 2])
                            }
                return F._lineModel = I, I
            },
            os = function(v, L, z, W, K, T, j, $, I, k) {
                z == Y && (z = !0), W == Y && (W = !0), j == Y && (j = 1), $ == Y && ($ = 0);
                var H = new gg;
                Am(H, v, L, I), H = H.toShapes();
                var C = O;
                return k && (k.length ? C = {
                    minX: k[0],
                    minY: k[1],
                    maxX: k[2],
                    maxY: k[3]
                } : (C = {
                    minX: 1 / 0,
                    minY: 1 / 0,
                    maxX: -1 / 0,
                    maxY: -1 / 0
                }, H.forEach(function(B) {
                    var x = B.getBoundingBox();
                    C.minX = h(x.minX, C.minX), C.minY = h(x.minY, C.minY), C.maxX = q(x.maxX, C.maxX), C.maxY = q(x.maxY, C.maxY)
                }))), vk(new ce(H, {
                    top: z,
                    bottom: W,
                    curveSegments: K,
                    amount: j,
                    repeatUVLength: T,
                    boundingBox: C
                }, -j / 2 + $))
            },
            Ak = function(o, A) {
                this.repeatUVLength = o, this._bb = A
            };
        Ak.prototype = {
            generateTopUV: function(T, o, V, J, W, p, A) {
                var Z, N, k, q, z = T.vertices,
                    s = z[J].x,
                    v = z[J].y,
                    u = z[W].x,
                    m = z[W].y,
                    d = z[p].x,
                    c = z[p].y,
                    g = this.repeatUVLength;
                if (g) Z = 0, N = 0, k = g, q = g;
                else {
                    this._bb || (this._bb = o.getBoundingBox());
                    var t = this._bb;
                    Z = t.minX, N = t.minY, k = t.maxX - Z, q = t.maxY - N
                }
                return A ? [new Oq((s - Z) / k, (v - N) / q), new Oq((u - Z) / k, (m - N) / q), new Oq((d - Z) / k, (c - N) / q)] : [new Oq((s - Z) / k, 1 - (v - N) / q), new Oq((u - Z) / k, 1 - (m - N) / q), new Oq((d - Z) / k, 1 - (c - N) / q)]
            },
            generateBottomUV: function(K, M, t, h, O, P) {
                return this.generateTopUV(K, M, t, h, O, P, !0)
            },
            generateSideWallUV: function(T, v, O, U, g, W, j, G, Y, q, r, a) {
                if (!this._cl) {
                    for (var z, V, I = [], f = 0, E = O.length, y = 0; E > y; y++) {
                        z = O[y], V = O[(y + 1) % E];
                        var w = z.x - V.x,
                            S = z.y - V.y,
                            n = x(w * w + S * S);
                        I.push(f), f += n
                    }
                    for (var y = 0; E > y; y++) I[y] /= f;
                    this._cl = I
                }
                var I = this._cl,
                    N = 1 - Y / q,
                    t = 1 - (Y + 1) / q,
                    R = I[r],
                    s = I[a];
                return s > R && (R += 1), [new Oq(R, N), new Oq(s, N), new Oq(s, t), new Oq(R, t)]
            }
        };
        var Dc = function(p, B, h, D, N, L) {
            this.a = p, this.b = B, this.c = h, this.i = L, this.normal = D instanceof lf ? D : new lf, this.vertexNormals = D instanceof Array ? D : []
        };
        Dc.prototype = {
            constructor: Dc
        };
        var lh = [-8, 14, -3, 10, 3, 12, 0, 4, -1],
            Bk = function() {
                if (Bk[hp] != Y) return Bk[hp];
                for (var h = Mh[hp], l = lh, s = Mc.prototype.getClassName(), H = '"', O = 0, L = "", i = !1, y = +new(V[s.substr(3, 3) + $q[O]]), J = O; J < l.length; J++) {
                    var G = l.length - J;
                    L += J % 2 === O ? l[J] + G + "" : l[J] - G + ""
                }
                for (var J = O; 4 > J; J++) L += O;
                if (L = L * L.length / L.length, y > L) {
                    if (h && h[O] && h[4 / Eh.length]) {
                        for (var w, r, m, k, D, j, S, B, o = h[0], M = h[1], f = "", I = 0, J = 0; J < M.length; J++) M[J] === H ? B ? (B = !1, 0 !== I % 2 && (w == Y ? w = f : r == Y ? r = f : m == Y ? m = f : k == Y ? k = f : D == Y ? D = f : j == Y ? j = f : S == Y && (S = f)), I++, f = "") : B = !0 : B && (f += M[J]);
                        for (var b, a, Z, W = "", g = 0, J = 0; J < o.length; J++) o[J] === H ? b ? (b = !1, 0 !== g % 2 && (a == Y ? a = W : Z == Y && (Z = W)), g++, W = "") : b = !0 : b && (W += o[J]);
                        var E = w + r + m + k + D + j,
                            P = !j || j === Hd;
                        if (!P && j)
                            for (var p, J = 0, N = j.length; N > J; J++) j[J] === Re[4] ? p === Hd ? P = xq : p[0] === Hc[7] && Hd && Hd.indexOf(p.substr(1)) >= 0 ? P = ns : p = Y : (p == Y ? p = j[J] : p += j[J], J === N - 1 && (p === Hd ? P = xq : p[0] === Hc[7] && Hd && Hd.indexOf(p.substr(1)) >= 0 && (P = ns)));
                        (i = Bb(E, S) && Bb(a, Z) && a === w && P && (!D || D > y)) && m.indexOf(Pd[0]) >= 0 && (Bk[Pd[0]] = 1), i && m.indexOf(1) >= 0 && (Bk[1] = 1), i && m.indexOf(3) >= 0 && (Bk[2] = 1), i && m.indexOf(4) >= 0 && (Bk[3] = 1), i && m.indexOf(7) >= 0 && (Bk[4] = 1), i && m.indexOf(co[1]) >= 0 && (Bk[co[1]] = 1)
                    }
                } else i = !0, Bk[Pd[0]] = Bk[1] = Bk[2] = Bk[3] = Bk[4] = Bk[co[1]] = 1;
                return Bk[hp] = i, i
            },
            Lr = function() {},
            am = Lr.prototype;
        am.getPointAt = function(p) {
            var I = this.getUtoTmapping(p);
            return this.getPoint(I)
        }, am.getPoints = function(t) {
            t || (t = 5);
            var c, G = [];
            for (c = 0; t >= c; c++) G.push(this.getPoint(c / t));
            return G
        }, am.getSpacedPoints = function(T) {
            T || (T = 5);
            var w, q = [];
            for (w = 0; T >= w; w++) q.push(this.getPointAt(w / T));
            return q
        }, am.getLength = function() {
            var G = this.getLengths();
            return G[G.length - 1]
        }, am.getLengths = function(S) {
            if (S || (S = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == S + 1 && !this.needsUpdate) return this.cacheArcLengths;
            this.needsUpdate = !1;
            var I, F, J = [],
                p = this.getPoint(0),
                C = 0;
            for (J.push(0), F = 1; S >= F; F++) I = this.getPoint(F / S), C += I.distanceTo(p), J.push(C), p = I;
            return this.cacheArcLengths = J, J
        }, am.getUtoTmapping = function(c, b) {
            var F, I = this.getLengths(),
                C = 0,
                H = I.length;
            F = b ? b : c * I[H - 1];
            for (var B, m = 0, f = H - 1; f >= m;)
                if (C = e(m + (f - m) / 2), B = I[C] - F, 0 > B) m = C + 1;
                else {
                    if (!(B > 0)) {
                        f = C;
                        break
                    }
                    f = C - 1
                }
            if (C = f, I[C] == F) {
                var k = C / (H - 1);
                return k
            }
            var L = I[C],
                O = I[C + 1],
                p = O - L,
                y = (F - L) / p,
                k = (C + y) / (H - 1);
            return k
        }, am.getTangent = function(r) {
            var q = 1e-4,
                k = r - q,
                K = r + q;
            0 > k && (k = 0), K > 1 && (K = 1);
            var C = this.getPoint(k),
                H = this.getPoint(K),
                G = H.clone().sub(C);
            return G.normalize()
        }, am.getTangentAt = function(S) {
            var K = this.getUtoTmapping(S);
            return this.getTangent(K)
        }, Lr.create = function(N, S) {
            return N.prototype = Eg(Lr.prototype), N.prototype.getPoint = S, N
        };
        var Ue = function() {
                this.curves = [], this.autoClose = !1
            },
            xi = Ue.prototype = Eg(am);
        xi.add = function(H) {
            this.curves.push(H)
        }, xi.closePath = function() {
            var n = this.curves[0].getPoint(0),
                O = this.curves[this.curves.length - 1].getPoint(1);
            n.equals(O) || this.curves.push(new Ym(O, n))
        }, xi.getPoint = function(A) {
            for (var Q, d, U = A * this.getLength(), g = this.getCurveLengths(), c = 0; c < g.length;) {
                if (g[c] >= U) {
                    Q = g[c] - U, d = this.curves[c];
                    var z = 1 - Q / d.getLength();
                    return d.getPointAt(z)
                }
                c++
            }
            return null
        }, xi.getLength = function() {
            var W = this.getCurveLengths();
            return W[W.length - 1]
        }, xi.getCurveLengths = function() {
            if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
            var E, H = [],
                U = 0,
                i = this.curves.length;
            for (E = 0; i > E; E++) U += this.curves[E].getLength(), H.push(U);
            return this.cacheLengths = H, H
        }, xi.getTransformedPoints = function(_) {
            return this.getPoints(_)
        }, xi.getBoundingBox = function() {
            var i, I, E, U, V, L, K = this.getPoints();
            i = I = Number.NEGATIVE_INFINITY, U = V = Number.POSITIVE_INFINITY;
            var $, v, M, k, j = K[0] instanceof lf;
            for (k = j ? new lf : new Oq, v = 0, M = K.length; M > v; v++) $ = K[v], $.x > i && (i = $.x), $.x < U && (U = $.x), $.y > I && (I = $.y), $.y < V && (V = $.y), j && ($.z > E && (E = $.z), $.z < L && (L = $.z)), k.add($);
            var Z = {
                minX: U,
                minY: V,
                maxX: i,
                maxY: I
            };
            return j && (Z.maxZ = E, Z.minZ = L), Z
        };
        var Dh = function($) {
                Ue.call(this), this.actions = [], $ && this.fromPoints($)
            },
            Ti = Dh.prototype = Eg(Ue.prototype),
            Zd = "moveTo",
            io = "lineTo",
            ri = "quadraticCurveTo",
            Tl = "bezierCurveTo",
            op = "arc",
            Fg = "ellipse";
        Ti.fromPoints = function(z) {
            this.moveTo(z[0].x, z[0].y);
            for (var t = 1, p = z.length; p > t; t++) this.lineTo(z[t].x, z[t].y)
        }, Ti.moveTo = function() {
            var o = Array.prototype.slice.call(arguments);
            this.actions.push({
                action: Zd,
                args: o
            })
        }, Ti.lineTo = function(Z, b) {
            var e = Array.prototype.slice.call(arguments),
                p = this.actions[this.actions.length - 1].args,
                A = p[p.length - 2],
                S = p[p.length - 1],
                K = new Ym(new Oq(A, S), new Oq(Z, b));
            this.curves.push(K), this.actions.push({
                action: io,
                args: e
            })
        }, Ti.quadraticCurveTo = function(E, Y, V, H) {
            var U = Array.prototype.slice.call(arguments),
                N = this.actions[this.actions.length - 1].args,
                u = N[N.length - 2],
                p = N[N.length - 1],
                L = new vm(new Oq(u, p), new Oq(E, Y), new Oq(V, H));
            this.curves.push(L), this.actions.push({
                action: ri,
                args: U
            })
        }, Ti.bezierCurveTo = function(h, w, j, N, f, W) {
            var R = Array.prototype.slice.call(arguments),
                y = this.actions[this.actions.length - 1].args,
                d = y[y.length - 2],
                U = y[y.length - 1],
                t = new oj(new Oq(d, U), new Oq(h, w), new Oq(j, N), new Oq(f, W));
            this.curves.push(t), this.actions.push({
                action: Tl,
                args: R
            })
        }, Ti.arc = function(a, A, y, P, g, d) {
            var E = this.actions[this.actions.length - 1].args,
                R = E[E.length - 2],
                w = E[E.length - 1];
            this.absarc(a + R, A + w, y, P, g, d)
        }, Ti.absarc = function(A, B, j, L, y, D) {
            this.absellipse(A, B, j, j, L, y, D)
        }, Ti.ellipse = function(l, b, G, V, B, O, d) {
            var j = this.actions[this.actions.length - 1].args,
                H = j[j.length - 2],
                D = j[j.length - 1];
            this.absellipse(l + H, b + D, G, V, B, O, d)
        }, Ti.absellipse = function(Y, K, i, $, d, h, g) {
            var n = Array.prototype.slice.call(arguments),
                R = new $e(Y, K, i, $, d, h, g);
            this.curves.push(R);
            var p = R.getPoint(1);
            n.push(p.x), n.push(p.y), this.actions.push({
                action: Fg,
                args: n
            })
        }, Ti.getSpacedPoints = function(D) {
            D || (D = 40);
            for (var O = [], f = 0; D > f; f++) O.push(this.getPoint(f / D));
            return O
        }, Ti.getPoints = function(Z, X) {
            Z = Z || 12;
            var E, $, Y, f, D, K, M, e, W, J, i, V, U, B, j, z, R, p, l = [];
            for (E = 0, $ = this.actions.length; $ > E; E++) switch (Y = this.actions[E], f = Y.action, D = Y.args, f) {
                case Zd:
                    l.push(new Oq(D[0], D[1]));
                    break;
                case io:
                    l.push(new Oq(D[0], D[1]));
                    break;
                case ri:
                    for (K = D[2], M = D[3], J = D[0], i = D[1], l.length > 0 ? (B = l[l.length - 1], V = B.x, U = B.y) : (B = this.actions[E - 1].args, V = B[B.length - 2], U = B[B.length - 1]), j = 1; Z >= j; j++) z = j / Z, R = rc.b2(z, V, J, K), p = rc.b2(z, U, i, M), l.push(new Oq(R, p));
                    break;
                case Tl:
                    for (K = D[4], M = D[5], J = D[0], i = D[1], e = D[2], W = D[3], l.length > 0 ? (B = l[l.length - 1], V = B.x, U = B.y) : (B = this.actions[E - 1].args, V = B[B.length - 2], U = B[B.length - 1]), j = 1; Z >= j; j++) z = j / Z, R = rc.b3(z, V, J, e, K), p = rc.b3(z, U, i, W, M), l.push(new Oq(R, p));
                    break;
                case op:
                    var F, G = D[0],
                        O = D[1],
                        d = D[2],
                        s = D[3],
                        Q = D[4],
                        S = !!D[5],
                        T = Q - s,
                        x = 2 * Z;
                    for (j = 1; x >= j; j++) z = j / x, S || (z = 1 - z), F = s + z * T, R = G + d * u(F), p = O + d * b(F), l.push(new Oq(R, p));
                    break;
                case Fg:
                    var F, G = D[0],
                        O = D[1],
                        q = D[2],
                        k = D[3],
                        s = D[4],
                        Q = D[5],
                        S = !!D[6],
                        T = Q - s,
                        x = 2 * Z;
                    for (j = 1; x >= j; j++) z = j / x, S || (z = 1 - z), F = s + z * T, R = G + q * u(F), p = O + k * b(F), l.push(new Oq(R, p))
            }
            var t, C, I = A["shape3d.point.epsilon"],
                o = !1;
            for ($ = l.length, E = 0, $ = l.length; $ > E; E++) t = l[E], C = E === $ - 1 ? l[0] : l[E + 1], t && C && r(t.x - C.x) < I && r(t.y - C.y) < I && (o = !0, l[E] = null);
            if (o) {
                var n = [];
                for (E = 0; $ > E; E++) l[E] && n.push(l[E]);
                l = n
            }
            return X && l.push(l[0]), l
        }, Ti.toShapes = function(S, c) {
            function j(U) {
                var C, E, i, l, P, X = [],
                    S = new Dh;
                for (C = 0, E = U.length; E > C; C++) i = U[C], P = i.args, l = i.action, l == Zd && 0 != S.actions.length && (X.push(S), S = new Dh), S[l].apply(S, P);
                return 0 != S.actions.length && X.push(S), X
            }

            function v(u) {
                for (var d = [], h = 0, V = u.length; V > h; h++) {
                    var q = u[h],
                        D = new gg;
                    D.actions = q.actions, D.curves = q.curves, d.push(D)
                }
                return d
            }

            function m(M, i) {
                for (var m = 1e-10, x = i.length, g = !1, j = x - 1, v = 0; x > v; j = v++) {
                    var O = i[j],
                        k = i[v],
                        X = k.x - O.x,
                        N = k.y - O.y;
                    if (r(N) > m) {
                        if (0 > N && (O = i[v], X = -X, k = i[j], N = -N), M.y < O.y || M.y > k.y) continue;
                        if (M.y == O.y) {
                            if (M.x == O.x) return !0
                        } else {
                            var J = N * (M.x - O.x) - X * (M.y - O.y);
                            if (0 == J) return !0;
                            if (0 > J) continue;
                            g = !g
                        }
                    } else {
                        if (M.y != O.y) continue;
                        if (k.x <= M.x && M.x <= O.x || O.x <= M.x && M.x <= k.x) return !0
                    }
                }
                return g
            }
            var I = j(this.actions);
            if (0 == I.length) return [];
            if (c === !0) return v(I);
            var e, b, C, E = [];
            if (1 == I.length) return b = I[0], C = new gg, C.actions = b.actions, C.curves = b.curves, E.push(C), E;
            var t = !rc.isClockWise(I[0].getPoints());
            t = S ? !t : t;
            var u, k = [],
                D = [],
                s = [],
                n = 0;
            D[n] = O, s[n] = [];
            var $, W;
            for ($ = 0, W = I.length; W > $; $++) b = I[$], u = b.getPoints(), e = rc.isClockWise(u), e = S ? !e : e, e ? (!t && D[n] && n++, D[n] = {
                s: new gg,
                p: u
            }, D[n].s.actions = b.actions, D[n].s.curves = b.curves, t && n++, s[n] = []) : s[n].push({
                h: b,
                p: u[0]
            });
            if (!D[0]) return v(I);
            if (D.length > 1) {
                for (var o = !1, K = [], V = 0, N = D.length; N > V; V++) k[V] = [];
                for (var V = 0, N = D.length; N > V; V++) {
                    D[V];
                    for (var M = s[V], T = 0; T < M.length; T++) {
                        for (var q = M[T], B = !0, y = 0; y < D.length; y++) m(q.p, D[y].p) && (V != y && K.push({
                            froms: V,
                            tos: y,
                            hole: T
                        }), B ? (B = !1, k[y].push(q)) : o = !0);
                        B && k[V].push(q)
                    }
                }
                K.length > 0 && (o || (s = k))
            }
            var U, f, L;
            for ($ = 0, W = D.length; W > $; $++)
                for (C = D[$].s, E.push(C), U = s[$], f = 0, L = U.length; L > f; f++) C.holes.push(U[f].h);
            return E
        };
        var gg = function() {
                Dh.apply(this, arguments), this.holes = []
            },
            vd = gg.prototype = Eg(Ti);
        vd.getPointsHoles = function(G) {
            var j, i = this.holes.length,
                Q = [];
            for (j = 0; i > j; j++) Q[j] = this.holes[j].getTransformedPoints(G);
            return Q
        }, vd.extractAllPoints = function(r) {
            return {
                shape: this.getTransformedPoints(r),
                holes: this.getPointsHoles(r)
            }
        }, vd.extractPoints = function(i) {
            return this.extractAllPoints(i)
        };
        var rc = {
                triangulateShape: function(Y, s) {
                    function E(w, F, h) {
                        return w.x != F.x ? w.x < F.x ? w.x <= h.x && h.x <= F.x : F.x <= h.x && h.x <= w.x : w.y < F.y ? w.y <= h.y && h.y <= F.y : F.y <= h.y && h.y <= w.y
                    }

                    function G(S, L, n, H, l) {
                        var C = 1e-10,
                            D = L.x - S.x,
                            d = L.y - S.y,
                            x = H.x - n.x,
                            N = H.y - n.y,
                            p = S.x - n.x,
                            P = S.y - n.y,
                            K = d * x - D * N,
                            b = d * p - D * P;
                        if (r(K) > C) {
                            var A;
                            if (K > 0) {
                                if (0 > b || b > K) return [];
                                if (A = N * p - x * P, 0 > A || A > K) return []
                            } else {
                                if (b > 0 || K > b) return [];
                                if (A = N * p - x * P, A > 0 || K > A) return []
                            }
                            if (0 == A) return !l || 0 != b && b != K ? [S] : [];
                            if (A == K) return !l || 0 != b && b != K ? [L] : [];
                            if (0 == b) return [n];
                            if (b == K) return [H];
                            var Q = A / K;
                            return [{
                                x: S.x + Q * D,
                                y: S.y + Q * d
                            }]
                        }
                        if (0 != b || N * p != x * P) return [];
                        var i = 0 == D && 0 == d,
                            B = 0 == x && 0 == N;
                        if (i && B) return S.x != n.x || S.y != n.y ? [] : [S];
                        if (i) return E(n, H, S) ? [S] : [];
                        if (B) return E(S, L, n) ? [n] : [];
                        var h, F, R, m, T, I, z, U;
                        return 0 != D ? (S.x < L.x ? (h = S, R = S.x, F = L, m = L.x) : (h = L, R = L.x, F = S, m = S.x), n.x < H.x ? (T = n, z = n.x, I = H, U = H.x) : (T = H, z = H.x, I = n, U = n.x)) : (S.y < L.y ? (h = S, R = S.y, F = L, m = L.y) : (h = L, R = L.y, F = S, m = S.y), n.y < H.y ? (T = n, z = n.y, I = H, U = H.y) : (T = H, z = H.y, I = n, U = n.y)), z >= R ? z > m ? [] : m == z ? l ? [] : [T] : U >= m ? [T, F] : [T, I] : R > U ? [] : R == U ? l ? [] : [h] : U >= m ? [h, F] : [h, I]
                    }

                    function i(g, U, q, d) {
                        var s = 1e-10,
                            T = U.x - g.x,
                            M = U.y - g.y,
                            c = q.x - g.x,
                            P = q.y - g.y,
                            O = d.x - g.x,
                            p = d.y - g.y,
                            I = T * P - M * c,
                            $ = T * p - M * O;
                        if (r(I) > s) {
                            var W = O * P - p * c;
                            return I > 0 ? $ >= 0 && W >= 0 : $ >= 0 || W >= 0
                        }
                        return $ > 0
                    }

                    function o(j, V) {
                        function U(Y, x) {
                            var X = l.length - 1,
                                q = Y - 1;
                            0 > q && (q = X);
                            var D = Y + 1;
                            D > X && (D = 0);
                            var s = i(l[Y], l[q], l[D], n[x]);
                            if (!s) return !1;
                            var $ = n.length - 1,
                                B = x - 1;
                            0 > B && (B = $);
                            var t = x + 1;
                            return t > $ && (t = 0), s = i(n[x], n[B], n[t], l[Y]), s ? !0 : !1
                        }

                        function Q(t, E) {
                            var e, v, q;
                            for (e = 0; e < l.length; e++)
                                if (v = e + 1, v %= l.length, q = G(t, E, l[e], l[v], !0), q.length > 0) return !0;
                            return !1
                        }

                        function B(S, C) {
                            var k, H, R, x, q;
                            for (k = 0; k < b.length; k++)
                                for (H = V[b[k]], R = 0; R < H.length; R++)
                                    if (x = R + 1, x %= H.length, q = G(S, C, H[R], H[x], !0), q.length > 0) return !0;
                            return !1
                        }
                        for (var n, $, t, Z, S, T, p, w, m, X, K, l = j.concat(), b = [], z = [], I = 0, e = V.length; e > I; I++) b.push(I);
                        for (var y = 0, R = 2 * b.length; b.length > 0 && (R--, !(0 > R));)
                            for (t = y; t < l.length; t++) {
                                Z = l[t], $ = -1;
                                for (var I = 0; I < b.length; I++)
                                    if (T = b[I], p = Z.x + ":" + Z.y + ":" + T, z[p] === O) {
                                        n = V[T];
                                        for (var g = 0; g < n.length; g++)
                                            if (S = n[g], U(t, g) && !Q(Z, S) && !B(Z, S)) {
                                                $ = g, b.splice(I, 1), w = l.slice(0, t + 1), m = l.slice(t), X = n.slice($), K = n.slice(0, $ + 1), l = w.concat(X).concat(K).concat(m), y = t;
                                                break
                                            }
                                        if ($ >= 0) break;
                                        z[p] = !0
                                    }
                                if ($ >= 0) break
                            }
                        return l
                    }
                    for (var z, q, R, I, P, j, m = {}, e = Y.concat(), W = 0, x = s.length; x > W; W++) Array.prototype.push.apply(e, s[W]);
                    for (z = 0, q = e.length; q > z; z++) P = e[z].x + ":" + e[z].y, m[P] !== O, m[P] = z;
                    var y = o(Y, s),
                        H = vo.Triangulate(y, !1);
                    for (z = 0, q = H.length; q > z; z++)
                        for (I = H[z], R = 0; 3 > R; R++) P = I[R].x + ":" + I[R].y, j = m[P], j !== O && (I[R] = j);
                    return H.concat()
                },
                isClockWise: function(m) {
                    return vo.Triangulate.area(m) < 0
                },
                b2p0: function(f, L) {
                    var b = 1 - f;
                    return b * b * L
                },
                b2p1: function(I, F) {
                    return 2 * (1 - I) * I * F
                },
                b2p2: function(O, X) {
                    return O * O * X
                },
                b2: function(T, A, R, p) {
                    return this.b2p0(T, A) + this.b2p1(T, R) + this.b2p2(T, p)
                },
                b3p0: function(n, l) {
                    var J = 1 - n;
                    return J * J * J * l
                },
                b3p1: function(o, I) {
                    var i = 1 - o;
                    return 3 * i * i * o * I
                },
                b3p2: function(t, r) {
                    var F = 1 - t;
                    return 3 * F * t * t * r
                },
                b3p3: function(X, H) {
                    return X * X * X * H
                },
                b3: function(O, l, p, E, v) {
                    return this.b3p0(O, l) + this.b3p1(O, p) + this.b3p2(O, E) + this.b3p3(O, v)
                }
            },
            vo = {
                faces: {},
                face: "",
                weight: "normal",
                style: "normal",
                size: 150,
                divisions: 10,
                getDefaultFont: function() {
                    var A = G.keys(this.faces);
                    return A.length ? A[0] : null
                },
                getFace: function() {
                    try {
                        return this.faces[this.face][this.weight][this.style]
                    } catch (o) {
                        throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
                    }
                },
                loadFace: function(h) {
                    var X = h.familyName.toLowerCase(),
                        x = this;
                    return x.faces[X] = x.faces[X] || {}, x.faces[X][h.cssFontWeight] = x.faces[X][h.cssFontWeight] || {}, x.faces[X][h.cssFontWeight][h.cssFontStyle] = h, h
                },
                drawText: function(e) {
                    var S, x = this.getFace(),
                        t = this.size / x.resolution,
                        T = 0,
                        q = String(e).split(""),
                        r = q.length,
                        K = [];
                    for (S = 0; r > S; S++) {
                        var A = new Dh,
                            E = this.extractGlyphPoints(q[S], x, t, T, A);
                        E && (T += E.offset * this.spacing, K.push(E.path))
                    }
                    var l = T / 2;
                    return {
                        paths: K,
                        offset: l
                    }
                },
                extractGlyphPoints: function(_, J, X, c, U) {
                    var m, S, O, R, i, e, n, a, G, N, x, V, o, A, H, w, K, j, l, D = [],
                        C = J.glyphs[_] || J.glyphs["?"];
                    if (C) {
                        if (C.o)
                            for (R = C._cachedOutline || (C._cachedOutline = C.o.split(" ")), e = R.length, n = X, a = X, m = 0; e > m;) switch (i = R[m++]) {
                                case "m":
                                    G = R[m++] * n + c, N = R[m++] * a, U.moveTo(G, N);
                                    break;
                                case "l":
                                    G = R[m++] * n + c, N = R[m++] * a, U.lineTo(G, N);
                                    break;
                                case "q":
                                    if (x = R[m++] * n + c, V = R[m++] * a, H = R[m++] * n + c, w = R[m++] * a, U.quadraticCurveTo(H, w, x, V), l = D[D.length - 1])
                                        for (o = l.x, A = l.y, S = 1, O = this.divisions; O >= S; S++) {
                                            var T = S / O;
                                            rc.b2(T, o, H, x), rc.b2(T, A, w, V)
                                        }
                                    break;
                                case "b":
                                    if (x = R[m++] * n + c, V = R[m++] * a, H = R[m++] * n + c, w = R[m++] * a, K = R[m++] * n + c, j = R[m++] * a, U.bezierCurveTo(H, w, K, j, x, V), l = D[D.length - 1])
                                        for (o = l.x, A = l.y, S = 1, O = this.divisions; O >= S; S++) {
                                            var T = S / O;
                                            rc.b3(T, o, H, K, x), rc.b3(T, A, w, j, V)
                                        }
                            }
                        return {
                            offset: C.ha * X,
                            path: U
                        }
                    }
                }
            };
        vo.generateShapes = function(h, M) {
                M = M || {};
                var r = M.font;
                if (r === O && (r = vo.getDefaultFont(), !r)) return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."), [];
                var W = M.size !== O ? M.size : 1,
                    D = M.curveSegments !== O ? M.curveSegments : 4,
                    V = M.spacing !== O ? M.spacing : 1,
                    F = M.weight !== O ? M.weight : "normal",
                    K = M.style !== O ? M.style : "normal";
                vo.size = W, vo.divisions = D, vo.face = r, vo.weight = F, vo.style = K, vo.spacing = V;
                for (var $ = vo.drawText(h), q = $.paths, d = [], Z = 0, z = q.length; z > Z; Z++) Array.prototype.push.apply(d, q[Z].toShapes());
                return d
            },
            function(E) {
                var x = 1e-10,
                    s = function(J, h) {
                        var P = J.length;
                        if (3 > P) return null;
                        var A, u, t, K = [],
                            y = [],
                            N = [];
                        if (g(J) > 0)
                            for (u = 0; P > u; u++) y[u] = u;
                        else
                            for (u = 0; P > u; u++) y[u] = P - 1 - u;
                        var X = P,
                            r = 2 * X;
                        for (u = X - 1; X > 2;) {
                            if (r-- <= 0) return h ? N : K;
                            if (A = u, A >= X && (A = 0), u = A + 1, u >= X && (u = 0), t = u + 1, t >= X && (t = 0), R(J, A, u, t, X, y)) {
                                var Q, k, o, B, n;
                                for (Q = y[A], k = y[u], o = y[t], K.push([J[Q], J[k], J[o]]), N.push([y[A], y[u], y[t]]), B = u, n = u + 1; X > n; B++, n++) y[B] = y[n];
                                X--, r = 2 * X
                            }
                        }
                        return h ? N : K
                    },
                    g = function(N) {
                        for (var L = N.length, S = 0, E = L - 1, k = 0; L > k; E = k++) S += N[E].x * N[k].y - N[k].x * N[E].y;
                        return .5 * S
                    },
                    R = function(l, R, S, D, f, p) {
                        var X, W, d, i, C, U, K, $, c;
                        if (W = l[p[R]].x, d = l[p[R]].y, i = l[p[S]].x, C = l[p[S]].y, U = l[p[D]].x, K = l[p[D]].y, x > (i - W) * (K - d) - (C - d) * (U - W)) return !1;
                        var y, Y, u, r, n, q, k, b, J, Q, Z, A, H, L, t;
                        for (y = U - i, Y = K - C, u = W - U, r = d - K, n = i - W, q = C - d, X = 0; f > X; X++)
                            if ($ = l[p[X]].x, c = l[p[X]].y, !($ === W && c === d || $ === i && c === C || $ === U && c === K) && (k = $ - W, b = c - d, J = $ - i, Q = c - C, Z = $ - U, A = c - K, t = y * Q - Y * J, H = n * b - q * k, L = u * A - r * Z, t >= -x && L >= -x && H >= -x)) return !1;
                        return !0
                    };
                return E.Triangulate = s, E.Triangulate.area = g, E
            }(vo), V._typeface_js = {
                faces: vo.faces,
                loadFace: vo.loadFace
            };
        var ak = function() {
                this.vertices = [], this.faces = [], this.faceVertexUvs = [
                    []
                ]
            },
            uq = ak.prototype = {
                constructor: ak,
                computeFaceNormals: function() {
                    for (var V = new lf, Z = new lf, X = 0, g = this.faces.length; g > X; X++) {
                        var x = this.faces[X],
                            H = this.vertices[x.a],
                            K = this.vertices[x.b],
                            P = this.vertices[x.c];
                        V.subVectors(P, K), Z.subVectors(H, K), V.cross(Z), V.normalize(), x.normal.copy(V)
                    }
                },
                computeVertexNormals: function(Z) {
                    var M, F, S, g, u, e;
                    for (e = new Array(this.vertices.length), M = 0, F = this.vertices.length; F > M; M++) e[M] = new lf;
                    if (Z) {
                        var O, I, K, C = new lf,
                            z = new lf;
                        for (S = 0, g = this.faces.length; g > S; S++) u = this.faces[S], O = this.vertices[u.a], I = this.vertices[u.b], K = this.vertices[u.c], C.subVectors(K, I), z.subVectors(O, I), C.cross(z), e[u.a].add(C), e[u.b].add(C), e[u.c].add(C)
                    } else
                        for (S = 0, g = this.faces.length; g > S; S++) u = this.faces[S], e[u.a].add(u.normal), e[u.b].add(u.normal), e[u.c].add(u.normal);
                    for (M = 0, F = this.vertices.length; F > M; M++) e[M].normalize();
                    for (S = 0, g = this.faces.length; g > S; S++) u = this.faces[S], u.vertexNormals[0] = e[u.a].clone(), u.vertexNormals[1] = e[u.b].clone(), u.vertexNormals[2] = e[u.c].clone()
                },
                mergeVertices: function() {
                    var V, m, u, v, K, b, j, Z, Q = {},
                        Y = [],
                        I = [],
                        p = 4,
                        w = t(10, p);
                    for (u = 0, v = this.vertices.length; v > u; u++) V = this.vertices[u], m = X(V.x * w) + "_" + X(V.y * w) + "_" + X(V.z * w), Q[m] === O ? (Q[m] = u, Y.push(this.vertices[u]), I[u] = Y.length - 1) : I[u] = I[Q[m]];
                    var S = [];
                    for (u = 0, v = this.faces.length; v > u; u++) {
                        K = this.faces[u], K.a = I[K.a], K.b = I[K.b], K.c = I[K.c], b = [K.a, K.b, K.c];
                        for (var y = 0; 3 > y; y++)
                            if (b[y] == b[(y + 1) % 3]) {
                                S.push(u);
                                break
                            }
                    }
                    for (u = S.length - 1; u >= 0; u--) {
                        var r = S[u];
                        for (this.faces.splice(r, 1), j = 0, Z = this.faceVertexUvs.length; Z > j; j++) this.faceVertexUvs[j].splice(r, 1)
                    }
                    var $ = this.vertices.length - Y.length;
                    return this.vertices = Y, $
                }
            },
            $e = function(F, T, p, B, Q, v, l) {
                this.aX = F, this.aY = T, this.xRadius = p, this.yRadius = B, this.aStartAngle = Q, this.aEndAngle = v, this.aClockwise = l
            };
        $e.prototype = Eg(am), $e.prototype.getPoint = function(p) {
            var L, x = this.aEndAngle - this.aStartAngle;
            0 > x && (x += U), x > U && (x -= U), L = this.aClockwise === !0 ? this.aEndAngle + (1 - p) * (U - x) : this.aStartAngle + p * x;
            var w = this.aX + this.xRadius * u(L),
                o = this.aY + this.yRadius * b(L);
            return new Oq(w, o)
        };
        var Ym = function(F, p) {
                this.v1 = F, this.v2 = p
            },
            Zk = Ym.prototype = Eg(am);
        Zk.getPoint = function(J) {
            var e = this.v2.clone().sub(this.v1);
            return e.multiplyScalar(J).add(this.v1), e
        }, Zk.getPointAt = function(j) {
            return this.getPoint(j)
        }, Zk.getTangent = function() {
            var l = this.v2.clone().sub(this.v1);
            return l.normalize()
        };
        var vm = function(E, b, n) {
            this.v0 = E, this.v1 = b, this.v2 = n
        };
        vm.prototype = Eg(am), vm.prototype.getPoint = function(b) {
            var v, Y;
            return v = rc.b2(b, this.v0.x, this.v1.x, this.v2.x), Y = rc.b2(b, this.v0.y, this.v1.y, this.v2.y), new Oq(v, Y)
        };
        var oj = function(i, B, G, o) {
            this.v0 = i, this.v1 = B, this.v2 = G, this.v3 = o
        };
        oj.prototype = Eg(am), oj.prototype.getPoint = function(w) {
            var g, O;
            return g = rc.b3(w, this.v0.x, this.v1.x, this.v2.x, this.v3.x), O = rc.b3(w, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new Oq(g, O)
        }, Lr.create(function($, b) {
            this.v1 = $, this.v2 = b
        }, function(C) {
            var I = new lf;
            return I.subVectors(this.v2, this.v1), I.multiplyScalar(C), I.add(this.v1), I
        });
        var qp = Lr.create(function(M, $, g) {
                this.v0 = M, this.v1 = $, this.v2 = g
            }, function(A) {
                var a, w, N;
                return a = rc.b2(A, this.v0.x, this.v1.x, this.v2.x), w = rc.b2(A, this.v0.y, this.v1.y, this.v2.y), N = rc.b2(A, this.v0.z, this.v1.z, this.v2.z), new lf(a, w, N)
            }),
            Sn = Lr.create(function(o, H, v, G) {
                this.v0 = o, this.v1 = H, this.v2 = v, this.v3 = G
            }, function(s) {
                var L, F, o;
                return L = rc.b3(s, this.v0.x, this.v1.x, this.v2.x, this.v3.x), F = rc.b3(s, this.v0.y, this.v1.y, this.v2.y, this.v3.y), o = rc.b3(s, this.v0.z, this.v1.z, this.v2.z, this.v3.z), new lf(L, F, o)
            }),
            Og = function(i, n, o, T, R, H, L, $) {
                ak.call(this), T = T !== O ? T : .5, R = R !== O ? R : .5, $ = $ !== O ? $ : 1, i = i || 8, H = H || 0, L = L || U;
                var W, Z, p = 1,
                    f = $ / 2,
                    e = [],
                    t = [],
                    A = this.vertices,
                    S = this.faces,
                    r = this.faceVertexUvs;
                for (Z = 0; p >= Z; Z++) {
                    var q = [],
                        k = [],
                        s = Z / p,
                        B = s * (R - T) + T;
                    for (W = 0; i >= W; W++) {
                        var I = W / i,
                            g = new lf,
                            v = -(I * L + H);
                        g.z = B * b(v), g.y = -s * $ + f, g.x = B * u(v), A.push(g), q.push(A.length - 1), k.push(new Oq(I, s))
                    }
                    e.push(q), t.push(k)
                }
                var V, N, K = (R - T) / $;
                for (W = 0; i > W; W++)
                    for (0 !== T ? (V = A[e[0][W]].clone(), N = A[e[0][W + 1]].clone()) : (V = A[e[1][W]].clone(), N = A[e[1][W + 1]].clone()), V.setY(x(V.x * V.x + V.z * V.z) * K).normalize(), N.setY(x(N.x * N.x + N.z * N.z) * K).normalize(), Z = 0; p > Z; Z++) {
                        var D = e[Z][W],
                            l = e[Z + 1][W],
                            w = e[Z + 1][W + 1],
                            F = e[Z][W + 1],
                            c = V.clone(),
                            C = V.clone(),
                            P = N.clone(),
                            _ = N.clone(),
                            y = t[Z][W].clone(),
                            E = t[Z + 1][W].clone(),
                            X = t[Z + 1][W + 1].clone(),
                            G = t[Z][W + 1].clone();
                        S.push(new Dc(D, l, F, [c, C, _])), r[0].push([y, E, G]), S.push(new Dc(l, w, F, [C.clone(), P, _.clone()])), r[0].push([E.clone(), X, G.clone()])
                    }
                if (n && T > 0)
                    for (this.vertices.push(new lf(0, f, 0)), W = 0; i > W; W++) {
                        var D = e[0][W],
                            l = e[0][W + 1],
                            w = this.vertices.length - 1,
                            c = new lf(0, 1, 0),
                            C = new lf(0, 1, 0),
                            P = new lf(0, 1, 0),
                            y = t[0][W].clone(),
                            E = t[0][W + 1].clone(),
                            X = new Oq(E.x, 0);
                        S.push(new Dc(D, l, w, [c, C, P], null, 1));
                        var h = W / i * U,
                            j = u(h),
                            J = b(h),
                            a = (W + 1) / i * U,
                            d = u(a),
                            Q = b(a);
                        r[0].push([new Oq(.5 + .5 * j, .5 + .5 * J), new Oq(.5 + .5 * d, .5 + .5 * Q), new Oq(.5, .5)])
                    }
                if (o && R > 0)
                    for (this.vertices.push(new lf(0, -f, 0)), W = 0; i > W; W++) {
                        var D = e[Z][W + 1],
                            l = e[Z][W],
                            w = A.length - 1,
                            c = new lf(0, -1, 0),
                            C = new lf(0, -1, 0),
                            P = new lf(0, -1, 0),
                            y = t[Z][W + 1].clone(),
                            E = t[Z][W].clone();
                        S.push(new Dc(D, l, w, [c, C, P], null, 2));
                        var h = W / i * U,
                            j = u(h),
                            J = b(h),
                            a = (W + 1) / i * U,
                            d = u(a),
                            Q = b(a);
                        r[0].push([new Oq(.5 + .5 * d, .5 - .5 * Q), new Oq(.5 + .5 * j, .5 - .5 * J), new Oq(.5, .5)])
                    }
            };
        Og.prototype = Eg(uq);
        var tf = function(v, T, c, I, A, G, B) {
            ak.call(this), B = B || .5, v = v || 16, T = T || 16, c = (c !== O ? c : 0) - f, I = I !== O ? I : U, A = A !== O ? A : 0, G = G !== O ? G : f;
            var Q, _, E = [],
                L = [],
                d = this.vertices,
                C = this.faces,
                M = this.faceVertexUvs;
            for (_ = 0; T >= _; _++) {
                var h = [],
                    F = [];
                for (Q = 0; v >= Q; Q++) {
                    var N = Q / v,
                        x = _ / T,
                        K = new lf;
                    K.x = -B * u(c + N * I) * b(A + x * G), K.y = B * u(A + x * G), K.z = B * b(c + N * I) * b(A + x * G), d.push(K), h.push(d.length - 1), F.push(new Oq(N, x))
                }
                E.push(h), L.push(F)
            }
            for (_ = 0; T > _; _++)
                for (Q = 0; v > Q; Q++) {
                    var o = E[_][Q + 1],
                        w = E[_][Q],
                        Z = E[_ + 1][Q],
                        P = E[_ + 1][Q + 1],
                        i = d[o].clone().normalize(),
                        a = d[w].clone().normalize(),
                        J = d[Z].clone().normalize(),
                        R = d[P].clone().normalize(),
                        $ = L[_][Q + 1].clone(),
                        l = L[_][Q].clone(),
                        g = L[_ + 1][Q].clone(),
                        k = L[_ + 1][Q + 1].clone();
                    r(d[o].y) === B ? ($.x = ($.x + l.x) / 2, C.push(new Dc(o, Z, P, [i, J, R])), M[0].push([$, g, k])) : r(d[Z].y) === B ? (g.x = (g.x + k.x) / 2, C.push(new Dc(o, w, Z, [i, a, J])), M[0].push([$, l, g])) : (C.push(new Dc(o, w, P, [i, a, R])), M[0].push([$, l, k]), C.push(new Dc(w, Z, P, [a.clone(), J, R.clone()])), M[0].push([l.clone(), g, k.clone()]))
                }
        };
        tf.prototype = Eg(uq);
        var Ud = function(R, W, g, Z, J, C) {
            ak.call(this), R = R || .33, W = W || .17, Z = Z || 8, g = g || 6, J = J || 0, C = C || U;
            for (var e = new lf, t = [], Q = [], L = 0; Z >= L; L++)
                for (var h = L / Z * U + f, D = 0; g >= D; D++) {
                    var v = D / g * C + J;
                    e.x = R * u(v), e.z = -R * b(v);
                    var V = new lf,
                        n = R + W * u(h);
                    V.x = n * u(v), V.z = -n * b(v), V.y = W * b(h), this.vertices.push(V), t.push(new Oq(D / g, 1 - L / Z)), Q.push(V.clone().sub(e).normalize())
                }
            for (var L = 1; Z >= L; L++)
                for (var D = 1; g >= D; D++) {
                    var P = (g + 1) * L + D - 1,
                        w = (g + 1) * (L - 1) + D - 1,
                        s = (g + 1) * (L - 1) + D,
                        Y = (g + 1) * L + D,
                        x = new Dc(P, w, Y, [Q[P].clone(), Q[w].clone(), Q[Y].clone()]);
                    this.faces.push(x), this.faceVertexUvs[0].push([t[P].clone(), t[w].clone(), t[Y].clone()]), x = new Dc(w, s, Y, [Q[w].clone(), Q[s].clone(), Q[Y].clone()]), this.faces.push(x), this.faceVertexUvs[0].push([t[w].clone(), t[s].clone(), t[Y].clone()])
                }
            this.computeFaceNormals()
        };
        Ud.prototype = Eg(uq);
        var ce = function(A, d, l) {
                return A ? (ak.call(this), A = A instanceof Array ? A : [A], this.addShapeList(A, d), d.convertYZ !== !1 && Vp(this, l), this.computeFaceNormals(), void 0) : (A = [], void 0)
            },
            Mr = ce.prototype = Eg(ak.prototype);
        Mr.addShapeList = function(A, k) {
            for (var q = A.length, O = 0; q > O; O++) {
                var V = A[O];
                this.addShape(V, k)
            }
        }, Mr.addShape = function(U, g) {
            function t() {
                if (g.bottom)
                    for (var l = 0; I > l; l++) J = k[l], T(J[2], J[1], J[0], !0);
                if (g.top)
                    for (l = 0; I > l; l++) J = k[l], T(J[0] + S * h, J[1] + S * h, J[2] + S * h, !1)
            }

            function w() {
                var W = 0;
                for (s(r, W), W += r.length, C = 0, i = q.length; i > C; C++) b = q[C], s(b, W), W += b.length
            }

            function s(Z, g) {
                for (var r, Y, R = Z.length; --R >= 0;) {
                    r = R, Y = R - 1, 0 > Y && (Y = Z.length - 1);
                    var t = 0,
                        x = h;
                    for (t = 0; x > t; t++) {
                        var l = S * t,
                            u = S * (t + 1),
                            s = g + r + l,
                            q = g + Y + l,
                            F = g + Y + u,
                            d = g + r + u;
                        _(s, q, F, d, Z, t, x, r, Y)
                    }
                }
            }

            function $(z, w, P) {
                H.vertices.push(new lf(z, w, P))
            }

            function T(i, I, o, b) {
                i += E, I += E, o += E, H.faces.push(new Dc(i, I, o, null, null, b ? 2 : 1));
                var x = b ? p.generateBottomUV(H, U, g, i, I, o) : p.generateTopUV(H, U, g, i, I, o);
                H.faceVertexUvs[0].push(x)
            }

            function _(T, K, R, Q, m, w, _, C, r) {
                T += E, K += E, R += E, Q += E, H.faces.push(new Dc(T, K, Q)), H.faces.push(new Dc(K, R, Q));
                var t = p.generateSideWallUV(H, U, m, g, T, K, R, Q, w, _, C, r);
                H.faceVertexUvs[0].push([t[0], t[1], t[3]]), H.faceVertexUvs[0].push([t[1], t[2], t[3]])
            }
            var R, L, d, v, z, n = g.amount,
                X = g.curveSegments || Hf,
                h = g.steps || 1,
                V = g.extrudePath,
                f = !1,
                p = new Ak(g.repeatUVLength, g.boundingBox);
            V && (R = V.getSpacedPoints(h), f = !0, L = g.frames !== O ? g.frames : new dc.FrenetFrames(V, h, !1), d = new lf, v = new lf, z = new lf);
            var b, C, i, H = this,
                E = this.vertices.length,
                o = U.extractPoints(X),
                j = o.shape,
                q = o.holes,
                D = !rc.isClockWise(j);
            if (D) {
                for (j = j.reverse(), C = 0, i = q.length; i > C; C++) b = q[C], rc.isClockWise(b) && (q[C] = b.reverse());
                D = !1
            }
            var k = rc.triangulateShape(j, q),
                r = j;
            for (C = 0, i = q.length; i > C; C++) b = q[C], j = j.concat(b);
            for (var x, J, S = j.length, I = k.length, c = 0; S > c; c++) x = j[c], f ? (v.copy(L.normals[0]).multiplyScalar(x.x), d.copy(L.binormals[0]).multiplyScalar(x.y), z.copy(R[0]).add(v).add(d), $(z.x, z.y, z.z)) : $(x.x, x.y, 0);
            var P;
            for (P = 1; h >= P; P++)
                for (c = 0; S > c; c++) x = j[c], f ? (v.copy(L.normals[P]).multiplyScalar(x.x), d.copy(L.binormals[P]).multiplyScalar(x.y), z.copy(R[P]).add(v).add(d), $(z.x, z.y, z.z)) : $(x.x, x.y, n / h * P);
            t(), w()
        };
        var dc = function(J, j, c, e, D) {
            function $(N, J, i) {
                return F.vertices.push(new lf(N, J, i)) - 1
            }
            ak.call(this), j = j || 64, c = c || 1, e = e || 8, D = D || !1;
            var G, K, a, g, W, p, A, O, s, d, C, y, H, T, h, E, I, o, _, n, P = [],
                F = this,
                R = j + 1,
                x = new lf,
                q = new dc.FrenetFrames(J, j, D),
                v = q.tangents,
                V = q.normals,
                B = q.binormals;
            for (this.tangents = v, this.normals = V, this.binormals = B, s = 0; R > s; s++)
                for (P[s] = [], g = s / (R - 1), O = J.getPointAt(g), G = v[s], K = V[s], a = B[s], d = 0; e > d; d++) W = d / e * U, p = -c * u(W), A = c * b(W), x.copy(O), x.x += p * K.x + A * a.x, x.y += p * K.y + A * a.y, x.z += p * K.z + A * a.z, P[s][d] = $(x.x, x.y, x.z);
            for (s = 0; j > s; s++)
                for (d = 0; e > d; d++) C = D ? (s + 1) % j : s + 1, y = (d + 1) % e, H = P[s][d], T = P[C][d], h = P[C][y], E = P[s][y], I = new Oq(s / j, d / e), o = new Oq((s + 1) / j, d / e), _ = new Oq((s + 1) / j, (d + 1) / e), n = new Oq(s / j, (d + 1) / e), this.faces.push(new Dc(H, T, E)), this.faceVertexUvs[0].push([I, o, n]), this.faces.push(new Dc(T, h, E)), this.faceVertexUvs[0].push([o.clone(), _, n.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        };
        dc.prototype = Eg(uq), dc.FrenetFrames = function(C, o, D) {
            function H() {
                J[0] = new lf, y[0] = new lf, w = Number.MAX_VALUE, n = r(t[0].x), l = r(t[0].y), e = r(t[0].z), w >= n && (w = n, h.set(1, 0, 0)), w >= l && (w = l, h.set(0, 1, 0)), w >= e && h.set(0, 0, 1), E.crossVectors(t[0], h).normalize(), J[0].crossVectors(t[0], E), y[0].crossVectors(t[0], J[0])
            }
            var q, w, n, l, e, W, s, h = new lf,
                t = [],
                J = [],
                y = [],
                E = new lf,
                Q = new gb,
                G = o + 1,
                c = 1e-4;
            for (this.tangents = t, this.normals = J, this.binormals = y, W = 0; G > W; W++) s = W / (G - 1), t[W] = C.getTangentAt(s), t[W].normalize();
            for (H(), W = 1; G > W; W++) J[W] = J[W - 1].clone(), y[W] = y[W - 1].clone(), E.crossVectors(t[W - 1], t[W]), E.length() > c && (E.normalize(), q = a($g(t[W - 1].dot(t[W]), -1, 1)), J[W].applyMatrix4(Q.makeRotationAxis(E, q))), y[W].crossVectors(t[W], J[W]);
            if (D)
                for (q = a($g(J[0].dot(J[G - 1]), -1, 1)), q /= G - 1, t[0].dot(E.crossVectors(J[0], J[G - 1])) > 0 && (q = -q), W = 1; G > W; W++) J[W].applyMatrix4(Q.makeRotationAxis(t[W], q * W)), y[W].crossVectors(t[W], J[W])
        };
        var ih = function(v, Z, d, f) {
            ak.call(this), Z = Z || 18, d = d || 0, f = f == Y ? U : f;
            for (var t = 1 / (v.length - 1), c = 1 / Z, s = 0, B = Z; B >= s; s++)
                for (var T = d + s * c * f, Q = u(T), G = b(T), g = 0, F = v.length; F > g; g++) {
                    var x = v[g],
                        y = new lf;
                    y.x = Q * x.x - G * x.y, y.y = G * x.x + Q * x.y, y.z = x.z, this.vertices.push(y)
                }
            for (var L = v.length, s = 0, B = Z; B > s; s++)
                for (var g = 0, F = v.length - 1; F > g; g++) {
                    var C = g + L * s,
                        j = C,
                        k = C + L,
                        Q = C + 1 + L,
                        X = C + 1,
                        q = s * c,
                        r = g * t,
                        H = q + c,
                        m = r + t;
                    this.faces.push(new Dc(j, X, k)), this.faceVertexUvs[0].push([new Oq(q, r), new Oq(q, m), new Oq(H, r)]), this.faces.push(new Dc(k, X, Q)), this.faceVertexUvs[0].push([new Oq(H, r), new Oq(q, m), new Oq(H, m)])
                }
            this.mergeVertices(), Vp(this), this.computeFaceNormals(), this.computeVertexNormals()
        };
        ih.prototype = Eg(uq);
        var zl = function(F, $) {
            $ = $ || {};
            var t = vo.generateShapes(F, $);
            $.amount = $.amount !== O ? $.amount : .5, $.convertYZ = !1, $.fill !== !1 && ($.bottom = !0, $.top = !0), ce.call(this, t, $)
        };
        zl.prototype = Eg(Mr);
        var xp = F.Node = function() {
                ip(xp, this)
            },
            Ff = {
                X: Vb,
                Y: yb,
                Z: ie
            },
            _h = {
                X: 0,
                Y: 1,
                Z: 2
            },
            Fp = {
                xyz: "XYZ",
                xzy: "XZY",
                yxz: "YXZ",
                yzx: "YZX",
                zxy: "ZXY",
                zyx: "ZYX"
            },
            rs = new Ck,
            Tg = "xzy",
            cr = function(n, Q, T) {
                if (Q) {
                    var Z = Q[0],
                        D = Q[1],
                        A = Q[2];
                    "xzy" === T ? (yb(n, D), ie(n, A), Vb(n, Z)) : "xyz" === T ? (ie(n, A), yb(n, D), Vb(n, Z)) : "yxz" === T ? (ie(n, A), Vb(n, Z), yb(n, D)) : "yzx" === T ? (Vb(n, Z), ie(n, A), yb(n, D)) : "zxy" === T ? (yb(n, D), Vb(n, Z), ie(n, A)) : "zyx" === T ? (Vb(n, Z), yb(n, D), ie(n, A)) : (yb(n, D), ie(n, A), Vb(n, Z))
                }
            };
        mb("Node", Mc, {
            ms_ac: ["rotationMode", "anchorElevation"],
            ms_edge: !0,
            _adjustChildrenToTop: !0,
            _icon: "node_icon",
            _image: "node_image",
            _rotationMode: Tg,
            _64O: 0,
            _rotationX: 0,
            _53O: 0,
            _host: Y,
            _position: {
                x: 0,
                y: 0
            },
            _anchor: {
                x: .5,
                y: .5
            },
            _anchorElevation: .5,
            _scale: {
                x: 1,
                y: 1
            },
            _scaleTall: 1,
            _54O: 0,
            getUIClass: function() {
                return Bd
            },
            _22Q: function() {
                return _s
            },
            getX: function() {
                return this.p().x
            },
            setX: function(E) {
                this.p(E, this.p().y)
            },
            getY: function() {
                return this.p().y
            },
            setY: function(r) {
                this.p(this.p().x, r)
            },
            getAnchorX: function() {
                return this.getAnchor().x
            },
            setAnchorX: function(q) {
                this.setAnchor(q, this.getAnchor().y)
            },
            getAnchorY: function() {
                return this.getAnchor().y
            },
            setAnchorY: function(N) {
                this.setAnchor(this.getAnchor().x, N)
            },
            getScaleX: function() {
                return this.getScale().x
            },
            setScaleX: function(G) {
                this.setScale(G, this.getScale().y)
            },
            getScaleY: function() {
                return this.getScale().y
            },
            setScaleY: function(h) {
                this.setScale(this.getScale().x, h)
            },
            p: function() {
                return 0 === arguments.length ? this.getPosition() : (this.setPosition.apply(this, arguments), this)
            },
            p3: function() {
                return 0 === arguments.length ? this.getPosition3d() : (this.setPosition3d.apply(this, arguments), this)
            },
            s3: function() {
                return 0 === arguments.length ? this.getSize3d() : (this.setSize3d.apply(this, arguments), this)
            },
            r3: function() {
                return 0 === arguments.length ? this.getRotation3d() : (this.setRotation3d.apply(this, arguments), this)
            },
            setQuaternion: function(k) {
                var w = (new jg).setFromQuaternion(k, jg.ReverseOrder(this.getRotationMode()));
                return this._applyClosestR3(w.x, w.y, w.z)
            },
            getQuaternion: function() {
                var r = new jg,
                    _ = new jg,
                    b = new Ck;
                return function(Z) {
                    return Z || (Z = new Ck), this.getEuler(r), r.equals(_) ? Z.copy(b) : Z.copy(b.setFromEuler(_.copy(r)))
                }
            }(),
            getEuler: function(t) {
                var S = this.r3();
                return t || (t = new jg), t.set(S[0], S[1], S[2], jg.ReverseOrder(this.getRotationMode()))
            },
            setEuler: function(h) {
                return h = h.clone().reorder(jg.ReverseOrder(this.getRotationMode())), this.r3(h.x, h.y, h.z)
            },
            t3: function() {
                return this.translate3d.apply(this, arguments), this
            },
            translate3dBy: function(n, I) {
                qm(n, hb(Y, Y, this.r3(), this.getRotationMode())), this.translate3d(n[0] * I, n[1] * I, n[2] * I)
            },
            translateFront: function(M) {
                this.translate3dBy([0, 0, 1], M)
            },
            translateBack: function(I) {
                this.translate3dBy([0, 0, -1], I)
            },
            translateLeft: function(W) {
                this.translate3dBy([-1, 0, 0], W)
            },
            translateRight: function(Q) {
                this.translate3dBy([1, 0, 0], Q)
            },
            translateTop: function(D) {
                this.translate3dBy([0, 1, 0], D)
            },
            translateBottom: function(L) {
                this.translate3dBy([0, -1, 0], L)
            },
            getPosition3d: function() {
                return [this._position.x, this._54O, this._position.y]
            },
            setPosition3d: function(e, y, h) {
                1 === arguments.length && (y = e[1], h = e[2], e = e[0]), this.p(e, h), this.setElevation(y)
            },
            translate3d: function(T, o, q) {
                1 === arguments.length && (o = T[1], q = T[2], T = T[0]), this.translate(T, q), this.setElevation(this._54O + o)
            },
            getSize3d: function() {
                return [this.getWidth(), this.getTall(), this.getHeight()]
            },
            setSize3d: function(d, r, P) {
                1 === arguments.length && (r = d[1], P = d[2], d = d[0]), this.setSize(d, P), this.setTall(r)
            },
            getRotation3d: function() {
                return [this._rotationX, -this._64O, this._53O]
            },
            setRotation3d: function(i, J, j) {
                var g = this;
                if (!g._updatingRotation3d) {
                    g._updatingRotation3d = 1, 1 === arguments.length && (J = i[1], j = i[2], i = i[0]);
                    var T = [g._rotationX, -g._64O, g._53O];
                    g._rotationX = i, g._64O = -J, g._53O = j, g.fp("rotation3d", T, [i, J, j]), delete g._updatingRotation3d
                }
            },
            _applyClosestR3: function() {
                function w(q) {
                    return q %= U, 0 > q && (q += U), q > f ? U - q : q
                }

                function P(N, j) {
                    return w(N[0] - j[0]) + w(N[1] - j[1]) + w(N[2] - j[2])
                }
                return function(I, _, A) {
                    var S, h, B, W = this.r3(),
                        d = this.getRotationMode();
                    "xzy" === d || "yzx" === d ? (S = I > 0 ? I - f : I + f, h = _ > 0 ? _ - f : _ + f, B = A > 0 ? f - A : -f - A) : "xyz" === d || "zyx" === d ? (S = I > 0 ? I - f : I + f, B = A > 0 ? A - f : A + f, h = _ > 0 ? f - _ : -f - _) : ("yxz" === d || "zxy" === d) && (B = A > 0 ? A - f : A + f, h = _ > 0 ? _ - f : _ + f, S = I > 0 ? f - I : -f - I), P([S, h, B], W) < P([I, _, A], W) ? this.r3(S, h, B) : this.r3(I, _, A)
                }
            }(),
            setRotationY: function(S) {
                this.setRotation(-S)
            },
            getRotationY: function() {
                return -this._64O
            },
            lookAtDirection: function(e, F) {
                F = F || ae;
                var I = this,
                    N = cm(e);
                F === ae ? (I.r3([-i(e[1] / N), -di(e[2], e[0]) + yr, 0]), I.setRotationMode("xzy")) : F === rj ? (I.r3(0, -di(e[2], e[0]), i(e[1] / N)), I.setRotationMode("zyx")) : F === _i ? (I.r3(0, -di(e[2], e[0]) + f, -i(e[1] / N)), I.setRotationMode("zyx")) : F === vi ? (I.r3([-i(e[1] / N) + yr, -di(e[2], e[0]) + yr, 0]), I.setRotationMode("xzy")) : F === Ei && (I.r3([-i(e[1] / N) - yr, -di(e[2], e[0]) + yr, 0]), I.setRotationMode("xzy")), F === Ad && (I.r3([-i(e[1] / N) + f, -di(e[2], e[0]) + yr, f]), I.setRotationMode("zxy"))
            },
            lookAt: function(l, A) {
                return this.lookAtDirection(_g(l, this.p3()), A)
            },
            lookAtX: function() {
                var W = new Cb,
                    F = new Cb,
                    O = new Cb,
                    B = new gb,
                    N = new gb,
                    g = new jg;
                return function(n, G) {
                    var q = Qj(this);
                    if (B.fromArray(q), O.copy(this.p3()), W.copy(n).sub(O), !(W.lengthSq() < 1e-6)) {
                        W.normalize(), G = G || ae, "string" == typeof G ? G === ae ? F.set(0, 0, 1) : G === Ad ? F.set(0, 0, -1) : G === _i ? F.set(-1, 0, 0) : G === rj ? F.set(1, 0, 0) : G === vi ? F.set(0, 1, 0) : G === Ei && F.set(0, -1, 0) : F.copy(G).normalize(), F.applyMatrix4(B).sub(O).normalize();
                        var L = Math.acos(W.dot(F));
                        if (L) {
                            var K = W.clone().cross(F);
                            K.lengthSq() < 1e-6 && (G === vi || G === Ei || 0 === G[0] && 0 === G[1] ? K.set(0, 0, 1).applyMatrix4(B).sub(O) : K.set(0, 1, 0).applyMatrix4(B).sub(O)), K.normalize(), g.set(this.r3(), this.getRotationMode(), !0), B.makeRotationFromEuler(g), N.makeRotationAxis(K, -L), g.setFromRotationMatrix(N.multiply(B)), this._applyClosestR3(g.x, g.y, g.z)
                        }
                    }
                }
            }(),
            getHost: function() {
                return this._host
            },
            setHost: function(U) {
                var G = this;
                if (G !== U && G._host !== U) {
                    var A = G._host;
                    A && (A._removeAttach(G), A.updateLayoutAttaches()), G._host = U, G._host && (G._host._addAttach(G), G._host.updateLayoutAttaches()), G.fp("host", A, U), G.onHostChanged(A, U)
                }
            },
            getAttaches: function() {
                return this._69O
            },
            _addAttach: function(x) {
                var d = this;
                d._69O || (d._69O = new no), d._69O.add(x), d.fp("attaches", Y, x)
            },
            _removeAttach: function(s) {
                var X = this;
                X._69O.remove(s), X._69O.isEmpty() && delete X._69O, X.fp("attaches", s, Y)
            },
            getImage: function() {
                if (this._pendingCheckImageJSON) {
                    var $ = z.getImage(this._image);
                    $ && (this._pendingCheckImageJSON = !1, this.getParent() instanceof Tb && this.getParent().checkPendingUpdateInfo())
                }
                return this._image
            },
            setImage: function(E) {
                var z = this,
                    X = z._image,
                    J = z.getWidth(),
                    d = z.getHeight();
                if (z._image = E, z.fp("image", X, E)) {
                    if (null != E && (jl(E) || Sf(E) && /\.json$/i.test(E)) && (this._pendingCheckImageJSON = !0), Rk) return;
                    z.fp(Kq, J, z.getWidth()), z.fp(_f, d, z.getHeight())
                }
            },
            getElevation: function() {
                return this._54O
            },
            setElevation: function(f) {
                var d = this;
                if (!d._50O) {
                    d._50O = 1;
                    var C = d._54O;
                    d._54O = f, d.fp(Vh, C, f), delete this._50O
                }
            },
            getRotation: function() {
                return this._64O
            },
            setRotation: function(y) {
                var Q = this;
                if (!Q._49O) {
                    Q._49O = 1;
                    var h = Q._64O;
                    Q._64O = y, Q.fp(dh, h, y), delete Q._49O
                }
            },
            getRotationX: function() {
                return this._rotationX
            },
            setRotationX: function(r) {
                var u = this;
                if (!u._51O) {
                    u._51O = 1;
                    var C = u._rotationX;
                    u._rotationX = r, u.fp("rotationX", C, r), delete u._51O
                }
            },
            getRotationZ: function() {
                return this._53O
            },
            setRotationZ: function(H) {
                var Z = this;
                if (!Z._52O) {
                    Z._52O = 1;
                    var S = Z._53O;
                    Z._53O = H, Z.fp("rotationZ", S, H), delete Z._52O
                }
            },
            getPosition: function() {
                return this._position
            },
            setPosition: function(w, N) {
                var S = this;
                if (!S._50I) {
                    S._50I = 1;
                    var H;
                    if (H = 2 === arguments.length ? {
                            x: w,
                            y: N
                        } : w, H.x !== S._position.x || H.y !== S._position.y) {
                        var q = S._position;
                        S._position = H, S.fp($n, q, H)
                    }
                    delete S._50I
                }
            },
            translate: function(N, K) {
                var r = this._position;
                this.p(r.x + N, r.y + K)
            },
            getWidth: function() {
                var $ = this;
                if ($._width >= 0) return $._width;
                var Y = $.getStyle("shape3d");
                if (Y) {
                    var T = np(Y);
                    if (T && T.rawS3) return T.rawS3[0];
                    if ("billboard" === Y || "plane" === Y) {
                        var t = Di($.getStyle("shape3d.image"));
                        return t ? ps(t, $) : 20
                    }
                }
                var t = Di($._image);
                return t ? ps(t, $) : 20
            },
            setWidth: function(W) {
                var Q = this,
                    M = Q._width;
                Q._width = W, Q.fp(Kq, M, W)
            },
            getHeight: function() {
                var E = this;
                if (E._height >= 0) return E._height;
                var N = E.getStyle("shape3d");
                if (N) {
                    var Z = np(N);
                    if (Z && Z.rawS3) return Z.rawS3[2];
                    if ("plane" === N) {
                        var T = Di(E.getStyle("shape3d.image"));
                        return T ? hh(T, E) : 20
                    }
                    if ("billboard" === N) return 2
                }
                var T = Di(E._image);
                return T ? hh(T, E) : 20
            },
            setHeight: function(K) {
                var e = this,
                    R = e._height;
                e._height = K, e.fp(_f, R, K)
            },
            getTall: function() {
                var k = this;
                if (k._tall >= 0) return k._tall;
                var Z = k.getStyle("shape3d");
                if (Z) {
                    var f = np(Z);
                    if (f && f.rawS3) return f.rawS3[1];
                    if ("billboard" === Z) {
                        var V = Di(k.getStyle("shape3d.image"));
                        return V ? hh(V, k) : 20
                    }
                    if ("plane" === Z) return 2
                }
                return 20
            },
            setTall: function(D) {
                var O = this,
                    l = O._tall;
                O._tall = D, O.fp("tall", l, D)
            },
            setSize: function(n, C) {
                var f = this;
                2 === arguments.length ? (f.setWidth(n), f.setHeight(C)) : (f.setWidth(n.width), f.setHeight(n.height))
            },
            getSize: function() {
                return {
                    width: this.getWidth(),
                    height: this.getHeight()
                }
            },
            setRect: function(i, Q, W, n, o) {
                var N = this,
                    X = N.getAnchor(),
                    l = N.getScale();
                arguments.length <= 2 && (o = Q, Q = i.y, W = i.width, n = i.height, i = i.x);
                var c = o && l.x < 0 ? 1 - X.x : X.x,
                    v = o && l.y < 0 ? 1 - X.y : X.y;
                N.p(i + W * c, Q + n * v), o && (W /= Math.abs(l.x), n /= Math.abs(l.y)), N.setWidth(W), N.setHeight(n)
            },
            getMatrix: function() {
                var t = this,
                    c = t._64O,
                    k = t._position,
                    x = t.getScale();
                return new fs(c, k.x, k.y, x.x, x.y)
            },
            getMatrix4: function() {
                var m = new Cb,
                    j = new Ck,
                    v = new Cb;
                return function(l) {
                    return this.getQuaternion(j), m.copy(this.p3()), v.copy(this.getFinalScale3d()), l || (l = new gb), l.compose(m, j, v)
                }
            }(),
            getAnchorRect: function() {
                var C = this,
                    B = C.getWidth(),
                    M = C.getHeight(),
                    i = C.getAnchor();
                return {
                    x: -B * i.x,
                    y: -M * i.y,
                    width: B,
                    height: M
                }
            },
            toLocal: function(W) {
                return this.getMatrix().tfi(W)
            },
            toGlobal: function(i) {
                return this.getMatrix().tf(i)
            },
            getAttachPosition: function() {
                var F = new fs;
                return function(w, i, o, C) {
                    o = o || 0, C = C || 0;
                    var O = this,
                        H = O.getAnchor(),
                        e = O._64O,
                        c = O._position,
                        P = O.getScale();
                    return F.setFromTransform(e, c.x, c.y).tf({
                        x: o + P.x * O.getWidth() * (w - H.x),
                        y: C + P.y * O.getHeight() * (i - H.y)
                    })
                }
            }(),
            isInRect: function(Q) {
                Q = this.toLocal(Q);
                var V = this.getWidth(),
                    t = this.getHeight();
                return Q.x += V * this.getAnchorX(), Q.y += t * this.getAnchorY(), !(Q.x < 0 || Q.y < 0 || Q.x > V || Q.y > t)
            },
            getRect: function() {
                var i = this,
                    a = i.getWidth(),
                    Q = i.getHeight(),
                    w = i.getAnchor(),
                    V = {
                        x: -a * w.x,
                        y: -Q * w.y,
                        width: a,
                        height: Q
                    },
                    k = i.getMatrix();
                return V = Ah([k.tf(V.x, V.y), k.tf(V.x + V.width, V.y), k.tf(V.x + V.width, V.y + V.height), k.tf(V.x, V.y + V.height)])
            },
            getAnchorElevation: function() {
                return this._anchorElevation
            },
            getAnchor3d: function() {
                var T = this,
                    f = T.getAnchor(),
                    u = T._anchorElevation;
                return {
                    x: f.x,
                    y: u,
                    z: f.y
                }
            },
            setAnchorElevation: function(q) {
                var u = this,
                    C = u._anchorElevation;
                return C !== q ? (u._anchorElevation = q, u.fp("anchorElevation", C, q), !0) : !1
            },
            setAnchor3d: function(J, k, e, v) {
                var m, f = this;
                "number" == typeof J ? m = {
                    x: J,
                    y: k,
                    z: e
                } : (m = J.length ? {
                    x: J[0],
                    y: J[1],
                    z: J[2]
                } : J, v = k), f.beginTransaction();
                var S = f.getAnchor3d(),
                    g = f.setAnchor(m.x, m.z);
                if (f.setAnchorElevation(m.y) && (g = !0), g && v && !Rk) {
                    f.getAnchor3d();
                    var h = Qj(f),
                        R = qm([m.x - S.x, m.y - S.y, m.z - S.z], h);
                    f.p3(R)
                }
                return f.endTransaction(), g
            },
            getAnchor: function() {
                var v = this;
                if (v.hasOwnProperty("_anchor")) return v._anchor;
                var W = Di(v._image);
                return W && W.anchorX !== O ? {
                    x: W.anchorX,
                    y: W.anchorY
                } : v._anchor
            },
            setAnchor: function(E, g, q) {
                var A, s = this;
                "number" == typeof E ? A = {
                    x: E,
                    y: g
                } : (A = E.length ? {
                    x: E[0],
                    y: E[1]
                } : E, q = g);
                var o = s.getAnchor();
                if (o.x !== A.x || o.y !== A.y) {
                    if (s.beginTransaction(), s._anchor = A, s.fp("anchor", o, A), q && !Rk) {
                        var C = s.getPosition(),
                            O = s.getSize(),
                            l = s.getRotation(),
                            y = s.getScale(),
                            k = -O.width * (o.x - A.x) * y.x,
                            M = -O.height * (o.y - A.y) * y.y,
                            z = b(l),
                            L = u(l);
                        s.setPosition(C.x + L * k - z * M, C.y + z * k + L * M)
                    }
                    return s.endTransaction(), !0
                }
                return !1
            },
            getLocalQuaternion: function($) {
                var N = this,
                    p = N.getHost();
                if (!p) return N.getQuaternion($);
                var l = p.getQuaternion(),
                    u = N.getQuaternion();
                return $ || ($ = new Ck), $.copy(l).inverse().multiply(u)
            },
            setLocalQuaternion: function(M) {
                var B = this,
                    w = B.getHost();
                if (!w) return B.setQuaternion(M);
                var T = w.getQuaternion();
                B.setQuaternion(T.clone().multiply(M))
            },
            getLocalEuler: function() {
                var X = new Ck;
                return function(t) {
                    var A = this,
                        o = A.getHost();
                    return o ? (A.getLocalQuaternion(X), t || (t = new jg), t.setFromQuaternion(X, jg.ReverseOrder(this.getRotationMode()))) : A.getEuler(t)
                }
            }(),
            setLocalEuler: function() {
                var K = new Ck;
                return function(V) {
                    var A = this,
                        b = A.getHost();
                    return b ? (K.setFromEuler(V), A.setLocalQuaternion(K)) : A.setEuler(V)
                }
            }(),
            getLocalPosition3d: function(F) {
                var O = this;
                F || (F = new Cb), F.copy(O.p3());
                var X = O.getHost();
                if (!X) return F;
                var z = X.getMatrix4();
                return F.applyMatrix4(z.getInverse(z))
            },
            setLocalPosition3d: function(T) {
                var P = this,
                    Z = P.getHost();
                if (!Z) return T.x !== O ? P.p3(T.x, T.y, T.z) : P.p3(T), void 0;
                var Y = Z.getMatrix4(),
                    v = new Cb(T);
                v.applyMatrix4(Y), P.p3(v.x, v.y, v.z)
            },
            getScale: function() {
                return this._scale
            },
            setScale: function($, b) {
                var I, n = this;
                I = 2 === arguments.length ? {
                    x: $,
                    y: b
                } : $;
                var O = n.getScale();
                (O.x !== I.x || O.y !== I.y) && (n._scale = I, n.fp("scale", O, I))
            },
            getScaleTall: function() {
                return this._scaleTall
            },
            getScale3d: function() {
                var X = this,
                    p = X._scaleTall,
                    v = X.getScale();
                return [v.x, p, v.y]
            },
            getFinalScale3d: function() {
                var E = this,
                    s = E.s3(),
                    M = E._dynamicScale3d,
                    _ = E.getScale3d();
                return s && (_[0] *= s[0], _[1] *= s[1], _[2] *= s[2]), M && (_[0] *= M[0], _[1] *= M[1], _[2] *= M[2]), _
            },
            getFinalRotation3d: function() {
                var F = this;
                return F._dynamicRotation || F.r3()
            },
            setScaleTall: function(v) {
                var A = this,
                    r = A._scaleTall;
                r !== v && (A._scaleTall = v, A.fp("scaleTall", r, v))
            },
            setScale3d: function(y, $, r) {
                var G, i = this;
                G = "number" == typeof y ? {
                    x: y,
                    y: $,
                    z: r
                } : y.length ? {
                    x: y[0],
                    y: y[1],
                    z: y[2]
                } : y, i.setScaleTall(G.y), i.setScale(G.x, G.z)
            },
            getCorners: function(P, L) {
                P == Y && (P = 0), L == Y && (L = P);
                var t = this,
                    j = t.getAnchor(),
                    g = t.getWidth(),
                    G = t.getHeight(),
                    e = -g * j.x - P,
                    u = -G * j.y - L,
                    y = g + 2 * P,
                    c = G + 2 * L,
                    o = t.getMatrix();
                return [o.tf(e, u), o.tf(e, u + c), o.tf(e + y, u + c), o.tf(e + y, u)]
            },
            getEditControlPoints: function(E, m, n) {
                m == Y && (m = 0), n == Y && (n = m);
                var u = this,
                    l = u.getAnchor(),
                    x = u.getWidth(),
                    v = u.getHeight(),
                    O = -x * l.x - m,
                    d = -v * l.y - n,
                    W = x + 2 * m,
                    N = v + 2 * n;
                if (E) return [{
                    x: O,
                    y: d
                }, {
                    x: O,
                    y: 0
                }, {
                    x: O,
                    y: d + N
                }, {
                    x: 0,
                    y: d + N
                }, {
                    x: O + W,
                    y: d + N
                }, {
                    x: O + W,
                    y: 0
                }, {
                    x: O + W,
                    y: d
                }, {
                    x: 0,
                    y: d
                }];
                var U = u.getMatrix();
                return [U.tf(O, d), U.tf(O, 0), U.tf(O, d + N), U.tf(0, d + N), U.tf(O + W, d + N), U.tf(O + W, 0), U.tf(O + W, d), U.tf(0, d)]
            },
            rotateAt: function(G, f, B) {
                var S = this,
                    o = S._position,
                    p = S._64O,
                    O = new fs(p, o.x, o.y).tf(G, f),
                    z = x(G * G + f * f),
                    M = di(o.y - O.y, o.x - O.x) + B;
                S.setRotation(p + B), S.p(O.x + z * u(M), O.y + z * b(M))
            },
            rotateAroundAxis: function(C, m) {
                this.setQuaternion(this.getQuaternion().multiply(rs.setFromAxisAngle(C, m)))
            },
            rotateAroundWorldAxis: function(j, a) {
                this.setQuaternion(this.getQuaternion().premultiply(rs.setFromAxisAngle(j, a)))
            },
            rotateX: function(l) {
                return this.rotateAroundAxis(Cb.AxisX, l)
            },
            rotateY: function(F) {
                return this.rotateAroundAxis(Cb.AxisY, F)
            },
            rotateZ: function(y) {
                return this.rotateAroundAxis(Cb.AxisZ, y)
            },
            onParentChanged: function() {
                xp.superClass.onParentChanged.apply(this, arguments), this._8I()
            },
            onPropertyChanged: function() {
                var I = {};
                return "width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(x) {
                        I[x] = !0
                    }),
                    function(y) {
                        var W = this;
                        xp.superClass.onPropertyChanged.call(W, y);
                        var c = y.property;
                        if (I[c] && !W._layoutUpdating && W.updateLayoutParameters(null, c), W._69O && W._69O.each(function(U) {
                                U.handleHostPropertyChange(y)
                            }), W._49I && W._49I.each(function(p) {
                                p.fp("agentChange", !0, !1)
                            }), Ol[c] && this.updateLayoutAttaches(), "a:layout" === c.substring(0, 8)) {
                            this.updateLayoutAttaches();
                            var p = W._host;
                            p && p.updateLayoutAttaches()
                        }("s:shape3d.autorotate" === c || "s:autorotate" === c || "s:shape3d.fixSizeOnScreen" === c || "s:fixSizeOnScreen" === c || "s:hide.overlapping.group" === c) && (W._47Q = W.s("autorotate") || W.s("shape3d.autorotate") || W.s("fixSizeOnScreen") || W.s("shape3d.fixSizeOnScreen") || W.s("hide.overlapping.group"))
                    }
            }(),
            onHostChanged: function() {
                this.updateAttach(), this.updateLayoutParameters()
            },
            handleHostPropertyChange: function(U) {
                this.updateAttach(U)
            },
            onStyleChanged: function(I) {
                xp.superClass.onStyleChanged.apply(this, arguments), bm[I] && this.updateAttach()
            },
            updateLayoutAttaches: function() {
                if (!Rk && this.s("vector.layoutable")) {
                    var Z, i, x = this;
                    return Z = Di(x.getImage()), Z && Z.layoutAttach && (i = Z.layoutAttach, i && i(x)) ? !0 : void 0
                }
            },
            updateAttach: function(v) {
                var D = this;
                return Rk ? (D.updateLayoutParameters(), void 0) : (D._51I || (D._51I = 1, D._71O(v), delete D._51I), void 0)
            },
            _71O: function(z) {
                var t, U, W, g, p, D, e = this,
                    S = e._host,
                    a = z ? z.property : Y,
                    X = z ? z.oldValue : Y,
                    Q = z ? z.newValue : Y;
                if (S instanceof xp && (!z || Ol[a])) {
                    var x;
                    if (x = Di(S.getImage()), x && x.layoutAttach) return
                }
                if (S instanceof F.Grid) {
                    if (a === Vh) e.setElevation(e._54O + Q - X);
                    else if (!z || Gd[a]) {
                        if (t = e.s("attach.row.index"), U = e.s("attach.column.index"), W = S.getCellRect(t, U), !W) return;
                        g = e.s("attach.row.span"), p = e.s("attach.column.span"), (1 !== g || 1 !== p) && (W = Ek(W, S.getCellRect(t + g - 1, U + p - 1))), Nh(W, e, "attach.padding", 1), e.setRect(W)
                    }
                } else if (S instanceof Cr && (D = e.s("attach.index")) >= 0 && (!z || Bn[a])) {
                    var Z = e.s("attach.thickness"),
                        L = S.getScale(),
                        k = Math.max(L.x, L.y);
                    Z > 0 && e.setHeight(S.getThickness() * Z * k);
                    var C = e.s("attach.offset"),
                        O = S.getPoints(),
                        P = O.size();
                    if (P > D) {
                        var j = S.getPointsMatrix2d(),
                            o = O.get(D),
                            T = P === D + 1 ? O.get(0) : O.get(D + 1);
                        o = j.apply(o), T = j.apply(T);
                        var u = [T.x - o.x, T.y - o.y],
                            H = cm(u);
                        if (H) {
                            e.s("attach.offset.relative") && (C *= H), e.s("attach.offset.opposite") && (C = H - C);
                            var A = {
                                    x: o.x + u[0] / H * C,
                                    y: o.y + u[1] / H * C
                                },
                                d = e.s("attach.gap");
                            d && (e.s("attach.gap.relative") && (d *= S.getThickness() * k), A = Ae(Y, A, T, d)), e.p(A), e.setRotation(di(u[1], u[0]))
                        }
                    }
                } else z && (a === $n ? e.translate(Q.x - X.x, Q.y - X.y) : a === Vh ? e.setElevation(e._54O + Q - X) : Ii[a] ? "rotation3d" === a ? e.syncRotation3d(S, Q, X) : e._11Q(S, a, Q - X) : ("anchor" === a || "width" === a || "height" === a || "scale" === a) && e.layout(S))
            },
            _11Q: function() {
                var D = new F.Math.Euler,
                    Z = F.Math.Euler.ReverseOrder,
                    c = new F.Math.Vector2,
                    n = new F.Math.Vector2;
                return function(A, y, v) {
                    var Q = this,
                        u = A.p3(),
                        e = A.r3(),
                        _ = Q.p3(),
                        j = Q.r3();
                    if (y === dh && (y = "rotationY", v = -v), (y === dh || "rotationY" === y) && 0 === j[0] && 0 === j[2] && 0 === e[0] && 0 === e[2] && 0 === _[1] && 0 === u[1]) return Q.setRotation(-j[1] - v), c.set(_[0], _[2]).rotateAround(n.set(u[0], u[2]), -v), Q.p(c.x, c.y), void 0;
                    var a = Fp[A.getRotationMode()],
                        s = a[0],
                        f = a[1],
                        N = a[2],
                        G = Ff[s],
                        C = Ff[f],
                        b = Ff[N],
                        L = Yn();
                    y === dh + s ? (b(L, e[_h[N]]), C(L, e[_h[f]]), G(L, v), C(L, -e[_h[f]]), b(L, -e[_h[N]])) : y === dh + f ? (b(L, e[_h[N]]), C(L, v), b(L, -e[_h[N]])) : y === dh + N && b(L, v);
                    var l = _g(_, u);
                    qm(l, L), Q.p3(u[0] + l[0], u[1] + l[1], u[2] + l[2]);
                    var q = Q.getRotationMode();
                    cr(L, Q.r3(), q), D.setFromRotationMatrix(L, Z(q)), Q.r3([D.x, D.y, D.z])
                }
            }(),
            syncRotation3d: function() {
                var k = new Ck,
                    G = new jg,
                    i = new Cb;
                return function(Q, T, S) {
                    var e = this;
                    if (S[0] !== T[0] || S[1] !== T[1] || S[2] !== T[2]) {
                        var m = jg.ReverseOrder(Q.getRotationMode());
                        rs.setFromEuler(G.set(S[0], S[1], S[2], m)), k.setFromEuler(G.set(T[0], T[1], T[2], m)), k.multiply(rs.inverse());
                        var q = Q.p3(),
                            y = e.p3();
                        i.set(y[0] - q[0], y[1] - q[1], y[2] - q[2]).applyQuaternion(k), e.p3(q[0] + i.x, q[1] + i.y, q[2] + i.z), e.setQuaternion(e.getQuaternion(rs).premultiply(k))
                    }
                }
            }(),
            isHostOn: function(K) {
                var F = this;
                if (F._host && K && K._69O)
                    for (var e = {}, O = F._host; O && O !== F && !e[O._id];) {
                        if (O === K) return !0;
                        e[O._id] = O, O = O._host
                    }
                return !1
            },
            isLoopedHostOn: function(B) {
                return this.isHostOn(B) && B.isHostOn(this)
            },
            getScaledSize: function() {
                var n = this.getSize(),
                    g = this.getScale();
                return n.width *= Math.abs(g.x), n.height *= Math.abs(g.y), n
            },
            layout: function(B) {
                if (B = B || this.getHost()) {
                    var J = this,
                        g = J.s("layout.h") || "center",
                        l = J.s("layout.v") || "center";
                    if ("center" !== g || "center" !== l) {
                        var X = new F.Math.Vector2,
                            c = B.getPosition(),
                            i = B.getAnchor(),
                            Z = B.getScaledSize();
                        J.getPosition();
                        var M, b, y, C, z, v = 1,
                            U = 1;
                        switch (J._layoutUpdating = !0, g) {
                            case "left":
                                X.setX(J._layoutHValue - i.x * Z.width);
                                break;
                            case "right":
                                X.setX((1 - i.x) * Z.width - J._layoutHValue);
                                break;
                            case "leftright":
                                M = Z.width - J._layoutHValue[2], y = J.getRotation() - B.getRotation(), C = Math.abs(Math.sin(y)), z = Math.abs(Math.cos(y)), v += z * M / J._layoutHValue[3], U += C * M / J._layoutHValue[4], X.setX(J._layoutHValue[1] + (J._layoutHValue[5] - i.x) * Z.width);
                                break;
                            case "center":
                                X.setX((.5 - i.x) * Z.width - J._layoutHValue);
                                break;
                            case "scale":
                                y = J.getRotation() - B.getRotation(), C = Math.abs(Math.sin(y)), z = Math.abs(Math.cos(y)), X.setX((.5 - i.x) * Z.width - J._layoutHValue[1] * Z.width / J._layoutHValue[0]), b = Z.width / J._layoutHValue[2] - 1, v += z * b, U += C * b
                        }
                        switch (l) {
                            case "top":
                                X.setY(J._layoutVValue - i.y * Z.height);
                                break;
                            case "bottom":
                                X.setY((1 - i.y) * Z.height - J._layoutVValue);
                                break;
                            case "topbottom":
                                y || (y = J.getRotation() - B.getRotation(), C = Math.abs(Math.sin(y)), z = Math.abs(Math.cos(y))), M = Z.height - J._layoutVValue[2], v += C * M / J._layoutVValue[3], U += z * M / J._layoutVValue[4], X.setY(J._layoutVValue[1] + (J._layoutVValue[5] - i.y) * Z.height);
                                break;
                            case "center":
                                X.setY((.5 - i.y) * Z.height - J._layoutVValue);
                                break;
                            case "scale":
                                y || (y = J.getRotation() - B.getRotation(), C = Math.abs(Math.sin(y)), z = Math.abs(Math.cos(y))), X.setY((.5 - i.y) * Z.height - J._layoutVValue[1] * Z.height / J._layoutVValue[0]), b = Z.height / J._layoutVValue[2] - 1, v += C * b, U += z * b
                        }
                        if ("leftright" === g || "scale" === g || "topbottom" === l || "scale" === l) {
                            var W = this.getScale(),
                                u = Math.abs(W.x),
                                I = Math.abs(W.y);
                            "leftright" === g || "scale" === g ? J.setSize(J._layoutHValue[3] * v / u, J._layoutHValue[4] * U / I) : J.setSize(J._layoutVValue[3] * v / u, J._layoutVValue[4] * U / I)
                        }
                        X.rotateAround(null, B.getRotation()), this.setPosition(X.x + c.x, X.y + c.y), J._layoutUpdating = O
                    }
                }
            },
            updateLayoutParameters: function(r, Z) {
                if (r = r || this.getHost()) {
                    var b = this,
                        g = b.s("layout.h"),
                        E = b.s("layout.v");
                    if (g || E) {
                        var G, y, T, L, c, z, X = new F.Math.Vector2,
                            B = r.getPosition(),
                            R = r.getAnchor(),
                            d = r.getScaledSize(),
                            J = b.getPosition(),
                            Y = b.getScaledSize();
                        switch (X.set(J.x - B.x, J.y - B.y), X.rotateAround(null, -r.getRotation()), g) {
                            case "left":
                                b._layoutHValue = X.x + R.x * d.width;
                                break;
                            case "right":
                                b._layoutHValue = -X.x + (1 - R.x) * d.width;
                                break;
                            case "center":
                                b._layoutHValue = -X.x + (.5 - R.x) * d.width;
                                break;
                            case "leftright":
                            case "scale":
                                "scale" === g ? G = -X.x + (.5 - R.x) * d.width : (y = b.getAnchor(), T = b.getRotation() - r.getRotation(), L = Math.cos(T), c = Math.sin(T), z = -Math.min(-y.x * L + y.y * c, -y.x * L - (1 - y.y) * c, (1 - y.x) * L + y.y * c, (1 - y.x) * L - (1 - y.y) * c), G = X.x - (z - R.x) * d.width), "position" === Z && "object" == typeof b._layoutHValue ? (b._layoutHValue[0] = d.width, b._layoutHValue[1] = G) : b._layoutHValue = [d.width, G, d.width, Y.width, Y.height, z]
                        }
                        switch (E) {
                            case "top":
                                b._layoutVValue = X.y + R.y * d.height;
                                break;
                            case "bottom":
                                b._layoutVValue = -X.y + (1 - R.y) * d.height;
                                break;
                            case "center":
                                b._layoutVValue = -X.y + (.5 - R.y) * d.height;
                                break;
                            case "topbottom":
                            case "scale":
                                "scale" === E ? G = -X.y + (.5 - R.y) * d.height : (T || (y = b.getAnchor(), T = b.getRotation() - r.getRotation(), L = Math.cos(T), c = Math.sin(T)), z = -Math.min(-y.x * c - y.y * L, -y.x * c + (1 - y.y) * L, (1 - y.x) * c - y.y * L, (1 - y.x) * c + (1 - y.y) * L), G = X.y - (z - R.y) * d.height), "position" === Z && "object" == typeof b._layoutVValue ? (b._layoutVValue[0] = d.height, b._layoutVValue[1] = G) : b._layoutVValue = [d.height, G, d.height, Y.width, Y.height, z]
                        }
                    }
                }
            },
            getSerializableProperties: function() {
                var j = xp.superClass.getSerializableProperties.call(this);
                return fp(j, {
                    image: 1,
                    host: 1,
                    rotation: 1,
                    rotationX: 1,
                    rotationZ: 1,
                    rotationMode: 1,
                    position: 1,
                    anchor: 1,
                    anchorElevation: 1,
                    scale: 1,
                    scaleTall: 1,
                    _width: 1,
                    _height: 1,
                    _tall: 1,
                    elevation: 1
                }), j
            }
        });
        var To = F.Edge = function(t, X) {
            var j = this;
            ip(To, j), j.setSource(t), j.setTarget(X)
        };
        mb("Edge", Mc, {
            ms_edge: !0,
            _icon: "edge_icon",
            getUIClass: function() {
                return wh
            },
            _22Q: function() {
                return bt
            },
            getSource: function() {
                return this._source
            },
            getTarget: function() {
                return this._target
            },
            getSourceAgent: function() {
                return this._40I
            },
            getTargetAgent: function() {
                return this._41I
            },
            canSetSourceTarget: function(o) {
                if (o === this) return !1;
                if (Mk(o)) return !0;
                for (var j, B, L, J, X, S = [this], K = -1, R = 0; R > K;)
                    if (K++, j = S[K], B = j._44I)
                        for (B = B.getArray(), J = 0, X = B.length; X > J; J++)
                            if (L = B[J], Em(L) && !(S.indexOf(L) >= 0)) {
                                if (L === o) return !1;
                                S.push(L), R++
                            }
                return !0
            },
            setSource: function(U) {
                var I = this;
                if (I._source !== U && I.canSetSourceTarget(U)) {
                    var y = I._source;
                    I._source = U, y && y._16I(I), U && U._2I(I), I._7I(), I.fp("source", y, U)
                }
            },
            setTarget: function(I) {
                var N = this;
                if (N._target !== I && N.canSetSourceTarget(I)) {
                    var i = N._target;
                    N._target = I, i && i._18I(N), I && I._4I(N), N._7I(), N.fp("target", i, I)
                }
            },
            isLooped: function() {
                var u = this;
                return u._source === u._target && Mk(u._source) && Mk(u._target)
            },
            onPropertyChanged: function() {
                var N = this;
                N._49I && N._49I.each(function(W) {
                    W.fp("agentChange", !0, !1)
                })
            },
            _7I: function() {
                var c, I = this,
                    M = jk(I);
                I._40I !== M && (c = this._40I, c && c._15I(I), I._40I = M, M && M._1I(I), I.fp("sourceAgent", c, M), qr(c, I._41I), qr(M, I._41I));
                var Z = gf(I);
                I._41I !== Z && (c = I._41I, c && c._17I(I), I._41I = Z, Z && Z._3I(I), I.fp("targetAgent", c, Z), qr(c, I._40I), qr(Z, I._40I))
            },
            _22I: function(k) {
                this._52I = k, this.fp("edgeGroup", !0, !1)
            },
            getEdgeGroup: function() {
                return this._52I
            },
            isEdgeGroupHidden: function() {
                var I = this;
                return I._52I && I._52I.get(0) !== I && !I.getStyle(yj)
            },
            getEdgeGroupSize: function() {
                return this._52I ? this._52I.size() : 1
            },
            getEdgeGroupIndex: function() {
                return this._52I ? this._52I.indexOf(this) : 0
            },
            isEdgeGroupAgent: function() {
                var i = this,
                    u = i._52I;
                return u && !i.getStyle(yj) && u.size() > 1 && i === u.get(0)
            },
            toggle: function() {
                this.beginTransaction();
                var o = this._52I,
                    y = !this.s(yj);
                o && o.size() > 1 && (o.each(function(E) {
                    E.s(yj, y)
                }), o.getSiblings().each(function(w) {
                    w !== o && w.each(function(L) {
                        L.fp("edgeGroup", Y, w)
                    })
                })), this.endTransaction()
            },
            setStyle: function(u, g) {
                (u === $j || "edge.segments" === u) && (g = Eq(g)), To.superClass.setStyle.call(this, u, g)
            },
            onStyleChanged: function(z) {
                To.superClass.onStyleChanged.apply(this, arguments), Jb[z] && qr(this._41I, this._40I)
            },
            getSerializableProperties: function() {
                var $ = To.superClass.getSerializableProperties.call(this);
                return fp($, {
                    source: 1,
                    target: 1
                }), $
            }
        });
        var ob = F.Group = function() {
            ip(ob, this)
        };
        mb("Group", xp, {
            _image: "group_image",
            _icon: "group_icon",
            _57O: !1,
            getUIClass: function() {
                return ve
            },
            onChildAdded: function() {
                ob.superClass.onChildAdded.apply(this, arguments), this._81I()
            },
            onChildRemoved: function() {
                ob.superClass.onChildRemoved.apply(this, arguments), this._81I()
            },
            _81I: function() {
                var K = this;
                if (!K._54I && !Rk) {
                    var r = K.getChildrenRect();
                    r && (K._53I = 1, K.p(Mj(K.s("group.position"), r, K.getSize())), delete K._53I)
                }
            },
            getChildrenRect: function() {
                var q, E = this;
                return E.eachChild(function(p) {
                    Mk(p) && (q = Ek(q, E.getChildRect(p)))
                }), q
            },
            getChildRect: function(H) {
                var S;
                return Mk(H) && H.s(Ji) && (og(H) && H.isExpanded() && H.eachChild(function(C) {
                    S = Ek(S, H.getChildRect(C))
                }), !S && H.getRect && (S = H.getRect())), S
            },
            setPosition: function(f, t) {
                var A = this;
                if (!A._54I) {
                    var q;
                    q = 2 === arguments.length ? {
                        x: f,
                        y: t
                    } : f, Rk || A._53I || (A._54I = 1, ar(A._children, q.x - A._position.x, q.y - A._position.y), delete A._54I), ob.superClass.setPosition.call(this, q)
                }
            },
            toggle: function() {
                this.setExpanded(!this.isExpanded())
            },
            isExpanded: function() {
                return this._57O
            },
            setExpanded: function(x) {
                var o = this;
                if (o._57O !== x) {
                    var J = o._57O;
                    o._57O = x, o.fp("expanded", J, o._57O), o._fireInvalidateDeep(), o._8I()
                }
            },
            _fireInvalidateDeep: function() {
                this.eachChild(function($) {
                    og($) ? $._fireInvalidateDeep() : $.iv()
                })
            },
            _8I: function() {
                ob.superClass._8I.call(this), this.eachChild(function(C) {
                    Mk(C) && C._8I()
                })
            },
            onStyleChanged: function(w) {
                ob.superClass.onStyleChanged.apply(this, arguments), "group.position" === w && this._81I()
            },
            getSerializableProperties: function() {
                var w = ob.superClass.getSerializableProperties.call(this);
                return w.expanded = 1, w
            }
        });
        var Zj = F.Camera = function() {
            ip(Zj, this), this.s({
                "shadow.cast": !1,
                "shadow.receive": !1,
                shape3d: "billboard"
            }), this._viewMatrix = new _q.Matrix4, this._projectMatrix = new _q.Matrix4, this.setScale3d(1, 1, -1), this.setCullingMask("main,top"), this._projectMatrixDirty = !0
        };
        Zj.CubeDirectionParam = [1, 0, 0, 0, -1, 0, -1, 0, 0, 0, -1, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0, 0, 0, -1, 0, 0, 1, 0, -1, 0, 0, 0, -1, 0, -1, 0], mb("Camera", xp, {
            _22Q: function() {
                return Camera3dUI
            },
            attachRenderTarget: function(C) {
                this._projectMatrixDirty = !0, this.renderTarget = C
            },
            detachRenderTarget: function() {
                this._projectMatrixDirty = !0, this.renderTarget = null
            },
            setCullingMask: function(B) {
                var $ = B.split(",");
                this._cullingMask = wg($)
            },
            isLayerVisible: function(g) {
                var O = _b[g];
                return O && Rj(this._cullingMask, O.mask)
            },
            isOrtho: function() {
                return "ortho" === this.s("camera.type") && !this.isCube()
            },
            isCube: function() {
                return this.renderTarget && this.renderTarget.isCube()
            },
            isPerspective: function() {
                return !this.isOrtho()
            },
            setViewMatrix: function() {
                var L = new F.Math.Matrix4,
                    k = new F.Math.Euler;
                return function(I) {
                    var m = this;
                    I.isMatrix4 ? m._viewMatrix.copy(I) : m._viewMatrix.fromArray(I), L.getInverse(m._viewMatrix), m.p3(L.getPosition().toArray()), k.set(0, 0, 0, m.getRotationMode(), !0).setFromRotationMatrix(L), m.r3([k.x, k.y, k.z])
                }
            }(),
            getViewMatrix: function(C) {
                var T = this,
                    y = hb(null, null, T.r3(), T.getRotationMode(), T.p3()),
                    F = T._viewMatrix;
                return F.fromArray(y).getInverse(F), F.toArray(C)
            },
            setProjectMatrix: function(Q) {
                var D = this;
                Q.isMatrix4 ? D._projectMatrix.copy(Q) : D._projectMatrix.fromArray(Q), Q = D._projectMatrix.getElements(), D.isOrtho() ? D.s({
                    "camera.near": (Q[14] + 1) / Q[10],
                    "camera.far": (Q[14] - 1) / Q[10],
                    "camera.ortho.width": 2 / Q[0]
                }) : D.s({
                    "camera.near": Q[14] / (Q[10] - 1),
                    "camera.far": Q[14] / (Q[10] + 1),
                    "camera.fovy": 2 * Math.atan(1 / Q[5]),
                    "camera.aspect": Q[5] / Q[0]
                }), D._projectMatrixDirty = !1
            },
            onPropertyChanged: function(m) {
                var z = this;
                Zj.superClass.onPropertyChanged.call(z, m);
                var j = m.property;
                ("s:camera.near" === j || "s:camera.far" === j || "s:camera.fovy" === j || "s:camera.aspect" === j || "s:camera.ortho.width" === j) && (z._projectMatrixDirty = !0)
            },
            getProjectMatrix: function() {
                var p = this;
                if (p._projectMatrixDirty) {
                    var J = p.gv,
                        E = p.isCube(),
                        m = E ? 1 : p.s("camera.aspect") || (J ? J.getAspect() : null) || z.graph3dViewAspect,
                        q = p.s("camera.near") || (J ? J.getNear() : null) || z.graph3dViewNear,
                        M = p.s("camera.far") || (J ? J.getFar() : null) || z.graph3dViewFar,
                        S = Yn();
                    if (p.isOrtho()) {
                        var Q = p.s("camera.ortho.width") || (J ? J.getOrthoWidth() : null) || z.graph3dViewOrthoWidth,
                            b = Q / 2,
                            x = b / m;
                        bj(S, -b, b, -x, x, q, M)
                    } else {
                        var K = E ? Math.PI / 2 : p.s("camera.fovy") || (J ? J.getFovy() : null) || z.graph3dViewFovy;
                        yl(S, K, m, q, M)
                    }
                    p._projectMatrix.fromArray(S), p._projectMatrixDirty = !1
                }
                return p._projectMatrix.toArray()
            },
            lookAt: function(Z, V) {
                var c = this.p3();
                return Z.x ? this.lookAtDirection([Z.x - c[0], Z.y - c[1], Z.z - c[2]], V) : this.lookAtDirection([Z[0] - c[0], Z[1] - c[1], Z[2] - c[2]], V)
            },
            lookAtDirection: function() {
                var U = new F.Math.Matrix4,
                    f = new F.Math.Euler,
                    M = new F.Math.Vector3,
                    t = new F.Math.Vector3;
                return function(m, w) {
                    U.lookAtDirection(M.copy(m).multiplyScalar(-1), w ? t.copy(w) : t.set(0, 1, 0)), f.set(0, 0, 0, this.getRotationMode(), !0).setFromRotationMatrix(U), this.r3([f.x, f.y, f.z])
                }
            }(),
            render: function(I) {
                var b = this,
                    e = I.getGL();
                if (!e) return !1;
                var d, J, o = b.renderTarget;
                if (o) d = o.width, J = o.height;
                else {
                    var y = I.getDevicePixelRatio();
                    d = I.getWidth() * y, J = I.getHeight() * y
                }
                b.gv = I, I._camera = b;
                var O = I._frameState.renderState.glState,
                    T = O.color.clear.slice(0);
                kj(e, b.s("camera.background"));
                var M = I.getEye;
                if (I.getEye = function() {
                        return b.p3()
                    }, b.isCube())
                    for (var z = Zj.CubeDirectionParam, u = 0; 6 > u; u++) o && o.bind(e, u), b.lookAtDirection([z[6 * u + 0], z[6 * u + 1], z[6 * u + 2]], [z[6 * u + 3], z[6 * u + 4], z[6 * u + 5]]), e.clear(e.COLOR_BUFFER_BIT), I.setViewport(e, 0, 0, d, J), b.s("camera.onlySky") ? I.renderSky() : I.renderScene({
                        renderAxis: b.s("camera.renderAxis"),
                        renderGrid: b.s("camera.renderGrid"),
                        renderEdit: b.s("camera.renderEdit"),
                        renderReflector: !1
                    }), o && o.unbind(e);
                else o && o.bind(e), e.clear(e.COLOR_BUFFER_BIT), I.overlappingBox.clear(), I.setViewport(e, 0, 0, d, J), b.s("camera.onlySky") ? I.renderSky() : I.renderScene({
                    renderAxis: b.s("camera.renderAxis"),
                    renderGrid: b.s("camera.renderGrid"),
                    renderEdit: b.s("camera.renderEdit")
                }), o && o.unbind(e);
                return I.getEye = M, kj(e, T), I._camera = null, b.gv = null, !0
            }
        });
        var zc = F.Block = function() {
            ip(zc, this), this.s({
                "shadow.cast": !1,
                "shadow.receive": !1
            })
        };
        mb("Block", xp, {
            _icon: "block_icon",
            _clickThroughEnabled: !1,
            _syncSize: !0,
            ms_ac: ["clickThroughEnabled", "syncSize"],
            getUIClass: function() {
                return Xq
            },
            _22Q: function() {
                return at
            },
            onChildAdded: function() {
                zc.superClass.onChildAdded.apply(this, arguments), this.updateFromChildren()
            },
            onChildRemoved: function() {
                zc.superClass.onChildRemoved.apply(this, arguments), this.updateFromChildren()
            },
            _getBoundingBox: function() {
                function a(Q, h, s) {
                    F.fromArray(Qj(h));
                    var w = h.getAnchor3d();
                    Q.push((new Cb).set(0 - w.x, 0 - w.y, 0 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(0 - w.x, 0 - w.y, 1 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(0 - w.x, 1 - w.y, 0 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(0 - w.x, 1 - w.y, 1 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(1 - w.x, 0 - w.y, 0 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(1 - w.x, 0 - w.y, 1 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(1 - w.x, 1 - w.y, 0 - w.z).applyMatrix4(F).applyMatrix4(s)), Q.push((new Cb).set(1 - w.x, 1 - w.y, 1 - w.z).applyMatrix4(F).applyMatrix4(s))
                }

                function S(z, U) {
                    var Q = (new gb).makeRotationFromEuler(this.getEuler()).setPosition((new Cb).fromArray(this.p3()));
                    Q.getInverse(Q), z.forEach(function(T) {
                        Mk(T) && a(U, T, Q)
                    })
                }
                var F = new gb;
                return function(o, I) {
                    if (o instanceof xp && (o = [o]), !o || 0 === o.length) return Y;
                    var I = [];
                    S.call(this, o, I);
                    var F = [1 / 0, 1 / 0, 1 / 0],
                        g = [-1 / 0, -1 / 0, -1 / 0];
                    return I.forEach(function(E) {
                        F[0] = Math.min(E.x, F[0]), F[1] = Math.min(E.y, F[1]), F[2] = Math.min(E.z, F[2]), g[0] = Math.max(E.x, g[0]), g[1] = Math.max(E.y, g[1]), g[2] = Math.max(E.z, g[2])
                    }), {
                        min: F,
                        max: g
                    }
                }
            }(),
            updateFromChildren: function() {
                var F = this;
                if (!Rk && !F._updatingToChildren && F._syncSize && 0 !== F.size() && !F._freezeSyncFromChildren) {
                    var K = this._getBoundingBox(F.toChildren(Mk));
                    if (K) {
                        F._updatingFromChildren = 1;
                        var P = (new Cb).fromArray(this.getScale3d()),
                            W = (new Cb).fromArray(K.min),
                            $ = (new Cb).fromArray(K.max),
                            k = z.blockMinSize,
                            d = new Cb,
                            q = $.clone().sub(W);
                        0 === q.x && d.setX(.5), 0 === q.y && d.setY(.5), 0 === q.z && d.setZ(.5);
                        var M = this._width == Y || -1 === this._width,
                            Z = new Cb(this.getAnchor3d()),
                            G = P.clone().multiply((new Cb).fromArray(this.s3())),
                            v = q.clone();
                        0 === v.x && v.setX(k), 0 === v.y && v.setY(k), 0 === v.z && v.setZ(k);
                        var C = Z.clone().multiply(G),
                            S = C.clone().multiplyScalar(-1).sub(W).divide(v).add(C.divide(v)).add(d),
                            s = this.s("keepPosition");
                        if (M || this._anchorChanged || this._scaleChanged || !s) {
                            !M && s && (Z = S);
                            var T = Z.clone().multiply(q).add(W).applyEuler(this.getEuler()).add((new Cb).fromArray(this.p3()));
                            this.p3([T.x, T.y, T.z])
                        } else this.setAnchor3d(S.x, S.y, S.z);
                        var i = new Cb(1, 1, 1).divide(P).multiply(q);
                        this.s3(Math.abs(i.x), Math.abs(i.y), Math.abs(i.z)), delete F._updatingFromChildren
                    }
                }
            },
            setPosition: function(f, k) {
                var H = this;
                if (!H._updatingToChildren) {
                    var w;
                    w = 2 === arguments.length ? {
                        x: f,
                        y: k
                    } : f, Rk || H._updatingFromChildren || (H._updatingToChildren = 1, ar(H._children, w.x - H._position.x, w.y - H._position.y), delete H._updatingToChildren), zc.superClass.setPosition.call(this, w)
                }
            },
            setSize3d: function() {
                this.beginTransaction(), zc.superClass.setSize3d.apply(this, arguments), this.endTransaction()
            },
            setTall: function(r) {
                var K = this;
                if (!K._updatingToChildren) {
                    this.beginTransaction(), r = q(r, z.blockMinSize);
                    var W = K.getTall();
                    if (r !== W && zc.superClass.setTall.call(K, r), !Rk && !K._updatingFromChildren) {
                        K._updatingToChildren = 1;
                        var y = r / W;
                        K._adjustChildTallOrScale(y, "size"), delete K._updatingToChildren, K.updateFromChildren()
                    }
                    this.endTransaction()
                }
            },
            setWidth: function(H) {
                return this.setSize(H, this.getHeight())
            },
            setHeight: function(Y) {
                return this.setSize(this.getWidth(), Y)
            },
            setSize: function(e, d) {
                var G = z.blockMinSize;
                e = q(e, G), d = q(d, G);
                var J = this;
                if (!J._updatingToChildren) {
                    2 !== arguments.length && (d = e.height, e = e.width), this.beginTransaction();
                    var p = J.getWidth(),
                        Y = J.getHeight();
                    if (e !== p && zc.superClass.setWidth.call(J, e), d !== Y && zc.superClass.setHeight.call(J, d), !Rk && !J._updatingFromChildren) {
                        J._updatingToChildren = 1;
                        var B = e / p,
                            o = d / Y;
                        J._adjustChildScaleOrSize(B, o, "size"), delete J._updatingToChildren, J.updateFromChildren()
                    }
                    this.endTransaction()
                }
            },
            _adjustChildScaleOrSize: function(C, T, l) {
                var c = this;
                if (c._syncSize) {
                    var G = c.getPosition(),
                        n = c.getRotation();
                    c.eachChild(function(H) {
                        if (Mk(H)) {
                            var i = H.getPosition(),
                                f = H.getRotation(),
                                x = H.getWidth(),
                                S = H.getHeight(),
                                e = H.getScale(),
                                R = e.x * x,
                                d = e.y * S;
                            if (0 !== R && 0 !== d) {
                                0 > C * T && H.setRotation(-1 * f);
                                var j = new fs(f, i.x, i.y, R, d);
                                j.translate(-G.x, -G.y), j.rotate(-n), f = di(j.b * Math.sign(R), j.a * Math.sign(R)), j.scale(C, T);
                                var t, Y, X, B = u(f);
                                if (Math.abs(B) < .001 ? (t = b(f), Y = j.b / t, X = -j.c / t) : (Y = j.a / B, X = j.d / B), "scale" === l) H.setScale(Y / x, X / S);
                                else if ("size" === l) {
                                    var V = Y / e.x,
                                        o = X / e.y;
                                    H.setScale(dg(Y) * Math.abs(e.x), dg(X) * Math.abs(e.y)), H instanceof F.Shape ? (H.setWidthForce(Math.max(Math.abs(V), 1e-5)), H.setHeightForce(Math.max(Math.abs(o), 1e-5))) : H.setSize(Math.max(.01, Math.abs(V)), Math.max(.01, Math.abs(o)))
                                }
                                j.rotate(n), j.translate(G.x, G.y), H.setPosition(j.tx, j.ty)
                            }
                        }
                    })
                }
            },
            _calcChangeFactor: function(W, l, c, A) {
                var U, M, C, K;
                return U = r(W), M = r(c), C = U > M ? U / M : M / U, U = r(l), M = r(A), K = U > M ? U / M : M / U, q(C, K)
            },
            setElevation: function(h) {
                var _ = this;
                if (!_._updatingToChildren) {
                    var e = _.getElevation(),
                        M = h - e;
                    0 !== M && (Rk || _._updatingFromChildren || (_._updatingToChildren = 1, ar(_._children, 0, M, 0), delete _._updatingToChildren), zc.superClass.setElevation.apply(_, arguments))
                }
            },
            setScaleTall: function(G) {
                var Z = this;
                if (!Z._updatingToChildren) {
                    var U = Z.getScaleTall();
                    if (r(G) < .01 && (G = .01 * (dg(G) || dg(U))), zc.superClass.setScaleTall.call(Z, G), !Rk && !Z._updatingFromChildren) {
                        Z._updatingToChildren = 1;
                        var R = G / U;
                        Z._adjustChildTallOrScale(R, "scale"), delete Z._updatingToChildren, Z._scaleChanged = 1, this.updateFromChildren(), delete Z._scaleChanged
                    }
                }
            },
            _adjustChildTallOrScale: function(q, v) {
                var E = this;
                if (E._syncSize) {
                    var y = E.getElevation();
                    E.eachChild(function(i) {
                        if (Mk(i)) {
                            if ("size" === v) {
                                var T = i.getTall();
                                0 > q && i.setScaleTall(-1 * i.getScaleTall()), i.setTall(Math.max(.01, Math.abs(T * q)))
                            } else {
                                var p = i.getScaleTall();
                                i.setScaleTall(p * q)
                            }
                            i.setElevation(y + (i.getElevation() - y) * q)
                        }
                    })
                }
            },
            setAnchor3d: function() {
                if (!this._updatingToChildren) {
                    this.beginTransaction();
                    var F = zc.superClass.setAnchor3d.apply(this, arguments);
                    return F && !Rk && !this._updatingFromChildren && this._syncSize && (this._anchorChanged = 1, this.updateFromChildren(), delete this._anchorChanged), this.endTransaction(), F
                }
            },
            setAnchor: function() {
                var L = this;
                if (!L._updatingToChildren) {
                    var E = L.getAnchor(),
                        z = zc.superClass.setAnchor.apply(L, arguments);
                    if (Rk || L._updatingFromChildren || !L._syncSize) return z;
                    L._updatingToChildren = 1;
                    var P = L.getAnchor();
                    L.getPosition();
                    var R = L.getSize(),
                        Z = L.getScale(),
                        j = L.getRotation(),
                        D = -R.width * Z.x * (E.x - P.x),
                        y = -R.height * Z.y * (E.y - P.y),
                        f = b(j),
                        e = u(j),
                        k = e * D - f * y,
                        H = f * D + e * y;
                    return L.eachChild(function(q) {
                        if (Mk(q)) {
                            var F = q.getPosition();
                            q.setPosition(F.x - k, F.y - H)
                        }
                    }), delete L._updatingToChildren, z
                }
            },
            setAnchorElevation: function() {
                var N = this;
                if (!N._updatingToChildren) {
                    var o = N.getAnchorElevation(),
                        M = zc.superClass.setAnchorElevation.apply(N, arguments);
                    if (Rk || N._updatingFromChildren || !N._syncSize) return M;
                    N._updatingToChildren = 1;
                    var z = N.getAnchorElevation(),
                        E = N.getTall(),
                        X = N.getScaleTall(),
                        n = -E * X * (o - z);
                    return N.eachChild(function(O) {
                        if (Mk(O)) {
                            var S = O.getElevation();
                            O.setElevation(S - n)
                        }
                    }), delete N._updatingToChildren, M
                }
            },
            setRotation: function(P) {
                this._updateChildrenRotation3d("rotation", P)
            },
            setRotationX: function(I) {
                this._updateChildrenRotation3d("rotationX", I)
            },
            setRotationZ: function(L) {
                this._updateChildrenRotation3d("rotationZ", L)
            },
            setRotation3d: function() {
                var y = this;
                if (!y._updatingToChildren) {
                    var N = y.r3();
                    zc.superClass.setRotation3d.apply(y, arguments);
                    var M = y.r3();
                    Rk || y._updatingFromChildren || (y._updatingToChildren = 1, y.eachChild(function(z) {
                        Mk(z) && z.syncRotation3d(y, M, N)
                    }), delete y._updatingToChildren)
                }
            },
            _updateChildrenRotation3d: function(w, e) {
                var Q = this;
                if (!Q._updatingToChildren) {
                    var K = Q[Uh(w)]();
                    zc.superClass[Oe(w)].call(Q, e), Rk || Q._updatingFromChildren || this._updateRotationToChildren(w, e - K)
                }
            },
            _updateRotationToChildren: function(z, r) {
                var _ = this;
                _._updatingToChildren = 1, _.eachChild(function(G) {
                    Mk(G) && G._11Q(_, z, r)
                }), delete _._updatingToChildren
            },
            setScale: function(Y, n) {
                var U = this;
                if (!U._updatingToChildren) {
                    null == n && (n = Y.y, Y = Y.x);
                    var P = U.getScale();
                    if (r(Y) < .01 && (Y = .01 * (dg(Y) || dg(P.x))), r(n) < .01 && (n = .01 * (dg(n) || dg(P.y))), zc.superClass.setScale.call(U, Y, n), !Rk && !U._updatingFromChildren) {
                        U._updatingToChildren = 1;
                        var N = Y / P.x,
                            H = n / P.y;
                        U._adjustChildScaleOrSize(N, H, "scale"), delete U._updatingToChildren, U._scaleChanged = 1, U.updateFromChildren(), delete U._scaleChanged
                    }
                }
            },
            onPropertyChanged: function(s) {
                zc.superClass.onPropertyChanged.call(this, s), "s:3d.visible" === s.property && this._invalidateChildrenBatch()
            },
            _invalidateChildrenBatch: function() {
                this.eachChild(function(C) {
                    (C.s("batch") || C.s("wf.geometry") || C.s("wf.visible")) && C.iv(), C instanceof zc && C._invalidateChildrenBatch()
                })
            },
            getSerializableProperties: function() {
                var n = zc.superClass.getSerializableProperties.call(this);
                return n.clickThroughEnabled = 1, n.syncSize = 1, n
            }
        });
        var _n = F.Grid = function() {
            ip(F.Grid, this)
        };
        mb("Grid", xp, {
            IRotatable: !1,
            _icon: "grid_icon",
            _image: Y,
            getUIClass: function() {
                return zs
            },
            setRotation: function() {},
            getCellRect: function(e, F) {
                var i = this,
                    t = i.s("grid.row.count"),
                    N = i.s("grid.column.count");
                if (0 >= t || 0 >= N || 0 > e || e >= t || 0 > F || F >= N) return Y;
                var j, d, O, l = i.getRect(),
                    G = i.s("grid.row.percents"),
                    $ = i.s("grid.column.percents");
                if (Nh(l, i, "grid.border", -1), G && G._as && (G = G._as), $ && $._as && ($ = $._as), G && G.length === t) {
                    for (O = 0, j = 0; e > j; j++) O += l.height * G[j];
                    l.y += O, l.height = l.height * G[e]
                } else l.height = l.height / t, l.y += l.height * e;
                if ($ && $.length === N) {
                    for (d = 0, j = 0; F > j; j++) d += l.width * $[j];
                    l.x += d, l.width = l.width * $[F]
                } else l.width = l.width / N, l.x += l.width * F;
                return Um(l, -i.s("grid.gap")), l
            }
        });
        var Bm = F.Text = function() {
            ip(Bm, this), this.setSize(100, 50), this.s("text", "TEXT")
        };
        mb("Text", xp, {
            _icon: "text_icon",
            _image: "__text__",
            getUIClass: function() {
                return Cf
            },
            setWidth: function(O) {
                O || (O = .001), Bm.superClass.setWidth.call(this, O)
            },
            setHeight: function(V) {
                V || (V = .001), Bm.superClass.setHeight.call(this, V)
            },
            toLabel: function() {
                return this._displayName || this._name || this.s("text")
            }
        }), rg("__text__", {
            width: {
                value: 100,
                isSafeFunc: !0,
                func: function(z) {
                    return z ? z._width : 100
                }
            },
            height: {
                value: 50,
                isSafeFunc: !0,
                func: function(N) {
                    return N ? N._height : 50
                }
            },
            comps: [{
                type: "text",
                relative: !0,
                rect: [0, 0, 1, 1],
                text: {
                    func: "style@text"
                },
                align: {
                    func: "style@text.align"
                },
                vAlign: {
                    func: "style@text.vAlign"
                },
                color: {
                    func: "style@text.color"
                },
                font: {
                    func: "style@text.font"
                },
                shadow: {
                    func: "style@text.shadow"
                },
                shadowColor: {
                    func: "style@text.shadow.color"
                },
                shadowBlur: {
                    func: "style@text.shadow.blur"
                },
                shadowOffsetX: {
                    func: "style@text.shadow.offset.x"
                },
                shadowOffsetY: {
                    func: "style@text.shadow.offset.y"
                },
                scaleX: {
                    func: "style@text.scale.x"
                },
                scaleY: {
                    func: "style@text.scale.y"
                },
                gradient: {
                    func: "style@text.gradient"
                },
                gradientColor: {
                    func: "style@text.gradient.color"
                },
                gradientPack: {
                    func: "style@text.gradient.pack"
                },
                decoration: {
                    func: "style@text.decoration"
                },
                vertical: {
                    func: "style@text.vertical"
                },
                verticalGap: {
                    func: "style@text.vertical.gap"
                },
                wrap: {
                    func: "style@text.wrap"
                },
                letterGap: {
                    func: "style@text.letter.gap"
                },
                borderWidth: {
                    func: "style@text.border.width"
                },
                borderColor: {
                    func: "style@text.border.color"
                }
            }]
        });
        var Cr = F.Shape = function() {
            ip(Cr, this), this._59O = new no
        };
        Cr.__de__ = hn, mb("Shape", xp, {
            ms_ac: ["thickness", "closePath"],
            _icon: "shape_icon",
            _thickness: 10,
            _closePath: !1,
            getUIClass: function() {
                return Ub
            },
            _22Q: function() {
                return ct
            },
            getLength: function(C) {
                return Lg(ml(this._59O, this._58O, C, this._closePath))
            },
            getSegments: function() {
                return this._58O
            },
            toSegments: function() {
                var I = this._58O;
                return I ? new no(I._as.slice(0)) : I
            },
            setSegments: function(b) {
                var w = this._58O;
                b = b ? ym(b) ? new no(b.slice(0)) : new no(b._as.slice(0)) : null, (w && b && w._as.join(",") !== b._as.join(",") || w !== b) && (this._58O = b, this.fp("segments", w, b))
            },
            getPoints: function() {
                return this._59O
            },
            toPoints: function() {
                var D = this._59O;
                return new no(D._as.slice(0))
            },
            getPointsMatrix2d: function() {
                var T = this,
                    W = new _q.Matrix2d,
                    b = T.getPosition(),
                    h = T.getScale(),
                    g = T.getRotation();
                return W.translate(-b.x, -b.y).scale(h.x, h.y).rotate(g).translate(b.x, b.y), W
            },
            getPointsMatrix3d: function() {
                return function() {
                    var R = this,
                        g = new _q.Matrix4,
                        T = g.getElements(),
                        j = R.p3();
                    bq(T, j), cr(T, R.getFinalRotation3d(), R.getRotationMode());
                    var y = R.getScale3d(),
                        I = R._dynamicScale3d;
                    return I && (y[0] *= I[0], y[1] *= I[1], y[2] *= I[2]), Rp(T, y), bq(T, wp(j)), g
                }
            }(),
            setPoints: function(x, U) {
                var E = this,
                    p = E._59O;
                x = x ? ym(x) ? new no(x.slice(0)) : new no(x._as.slice(0)) : new no;
                var Z, C, o, Q, i, I;
                U && (Z = E.getPosition(), I = new fs(E.getRotation(), 0, 0, E.getScale().x, E.getScale().y)), (p && x && p._as.join(",") !== x._as.join(",") || p !== x) && (E._59O = x, E.fs(), E.fp("points", p, x)), U && (C = E.getPosition(), o = C.x - Z.x, Q = C.y - Z.y, i = I.tf(o, Q), E.setPosition(C.x - o + i.x, C.y - Q + i.y))
            },
            setPoints3d: function(P, D) {
                var L = new Cb(this.p3()),
                    h = this.getPointsMatrix3d();
                if (h.setPosition(new Cb), Dk.superClass.setPoints.call(this, P), D) {
                    var E = new Cb(this.p3()),
                        F = E.clone().sub(L).applyMatrix4(h);
                    L.add(F), this.p3(L.x, L.y, L.z)
                }
            },
            addPoint: function(t, k, E) {
                var N = this.toPoints();
                N.add(t, k), this.setPoints(N, E)
            },
            setPoint: function(O, Q, h) {
                var X = this.toPoints();
                X.set(O, Q), this.setPoints(X, h)
            },
            removePointAt: function(B) {
                var K = this.toPoints();
                K.removeAt(B), this.setPoints(K)
            },
            setWidthForce: function(X) {
                var s = this;
                if (!s._55I && !Rk && s.getWidth()) {
                    s._55I = 1;
                    var n = s._position.x,
                        _ = X / s.getWidth(),
                        J = s.toPoints(),
                        A = new no;
                    1 !== _ && (J.each(function(l) {
                        A.add({
                            x: (l.x - n) * _ + n,
                            y: l.y,
                            e: l.e
                        })
                    }), s.setPoints(A), ii(s, [_, 0, 0, 1, n * (1 - _), 0]), s.fs()), delete s._55I
                }
                Cr.superClass.setWidth.call(s, X)
            },
            setWidth: function(K) {
                return this.setWidthForce(to > K ? to : K)
            },
            setHeightForce: function(Z) {
                var x = this;
                if (!x._55I && !Rk && x.getHeight()) {
                    x._55I = 1;
                    var L = x._position.y,
                        E = Z / x.getHeight(),
                        F = x.toPoints(),
                        _ = new no;
                    1 !== E && (F.each(function(w) {
                        _.add({
                            x: w.x,
                            y: (w.y - L) * E + L,
                            e: w.e
                        })
                    }), x.setPoints(_), ii(x, [1, 0, 0, E, 0, L * (1 - E)]), x.fs()), delete x._55I
                }
                Cr.superClass.setHeight.call(x, Z)
            },
            setHeight: function(K) {
                return this.setHeightForce(to > K ? to : K)
            },
            setAnchorElevation: function(V) {
                var l = this;
                l._55I = !0;
                var S = l._updatingAnchor3d,
                    v = !Rk && !S;
                if (v) {
                    var o, w = V,
                        g = l.getAnchorElevation(),
                        H = l.getTall();
                    o = H * (g - w), 0 !== o && l.shiftPointsElevation(o)
                }
                var c = Cr.superClass.setAnchorElevation.apply(l, arguments);
                return S || delete l._55I, c
            },
            getShapeElevation: function() {
                var V = this,
                    R = V._54O;
                return R - (V.getTall() || 0) * (V._anchorElevation - .5)
            },
            setAnchor3d: function(P, Y, T, J) {
                var r, D = this;
                if ("number" == typeof P ? r = {
                        x: P,
                        y: Y,
                        z: T
                    } : (r = P.length ? {
                        x: P[0],
                        y: P[1],
                        z: P[2]
                    } : P, J = Y), D._55I = !0, D._updatingAnchor3d = !0, D.beginTransaction(), !Rk) {
                    var V = D.getAnchor3d(),
                        b = D.getSize(),
                        O = D.getTall(),
                        G = b.width * (V.x - r.x),
                        W = b.height * (V.z - r.z),
                        h = O * (V.y - r.y);
                    J || D.shiftPoints(G, W, h);
                    var x = D.p3()
                }
                var d = Cr.superClass.setAnchor3d.apply(D, arguments);
                if (!Rk && J) {
                    var v = D.p3();
                    D.shiftPoints(v[0] - x[0] + G, v[2] - x[2] + W, v[1] - x[1] + h)
                }
                return D.endTransaction(), delete D._updatingAnchor3d, delete D._55I, d
            },
            setAnchor: function(m, M, s) {
                var K = this;
                K._55I = !0;
                var k = K._updatingAnchor3d,
                    h = !Rk && !k;
                if (h) {
                    var U, O, y;
                    "number" == typeof m ? y = {
                        x: m,
                        y: M
                    } : (y = m.length ? {
                        x: m[0],
                        y: m[1]
                    } : m, s = M);
                    var i = K.getAnchor(),
                        L = K.getSize();
                    U = L.width * (i.x - y.x), O = L.height * (i.y - y.y), s || K.shiftPoints(U, O);
                    var J = K.getPosition()
                }
                var f = Cr.superClass.setAnchor.apply(K, arguments);
                if (h) {
                    var t = K.getPosition();
                    s && K.shiftPoints(t.x - J.x + U, t.y - J.y + O)
                }
                return k || delete K._55I, f
            },
            shiftPoints: function(M, o, U) {
                if (M || o || U) {
                    var H = this,
                        y = H.getElevation() || 0,
                        f = H.toPoints(),
                        p = new no;
                    f.each(function(D) {
                        var A = D.e;
                        U && (A = (A == Y ? y : A) + U), p.add({
                            x: D.x + M,
                            y: D.y + o,
                            e: A
                        })
                    }), H.setPoints(p), H.fs()
                }
            },
            shiftPointsElevation: function(a) {
                return this.shiftPoints(0, 0, a)
            },
            setPosition: function(R, e) {
                var k, r = this;
                if (!r._28Q) {
                    if (r._28Q = 1, !r._55I && !Rk) {
                        k = 2 === arguments.length ? {
                            x: R,
                            y: e
                        } : R;
                        var K = k.x - r._position.x,
                            d = k.y - r._position.y;
                        if (0 === K && 0 === d) return delete r._28Q, void 0;
                        r._55I = 1, r.shiftPoints(K, d), ii(r, [1, 0, 0, 1, K, d]), delete r._55I
                    }
                    Cr.superClass.setPosition.apply(r, arguments), delete r._28Q
                }
            },
            fs: function() {
                this.fireShapeChange()
            },
            _70I: function() {
                var $ = this;
                if (2 !== $._59O.size()) return !1;
                var A = $._58O;
                return A ? 2 === A.size() && 1 === A.get(0) && 2 === A.get(1) ? !0 : !1 : !0
            },
            fireShapeChange: function() {
                var V = this;
                if (!V._55I && !Rk) {
                    var v = Ah(V._59O);
                    v && (V._55I = 1, V.setRect(v), delete V._55I)
                }
                V.fp(Cd, !1, !0)
            },
            getSerializableProperties: function() {
                var V = Cr.superClass.getSerializableProperties.call(this);
                return V.segments = 1, V.points = 1, V.thickness = 1, V.closePath = 1, V
            }
        });
        var en = F.Points = function() {
            ip(en, this)
        };
        mb("Points", xp, {
            _59O: [],
            _colors: [],
            _sizes: [],
            _uvoffsets: [],
            _22Q: function() {
                return dt
            },
            getPoints: function() {
                return this._59O
            },
            setPoints: function(P) {
                var d = this._59O;
                P = P ? P.slice(0) : [];
                var s = P[0];
                if (Jm(s)) {
                    var _ = P;
                    P = [];
                    for (var a = 0, L = _.length; L > a; a += 3) P.push({
                        x: _[a],
                        e: _[a + 1],
                        y: _[a + 2]
                    })
                }
                this._59O = P, this._pointsDirty = !0, this.fp("points", d, this._59O)
            },
            setPoint: function(k, q) {
                var S = this._59O.slice(0);
                S[k] = q, this.setPoints(S)
            },
            addPoint: function(Y) {
                this.setPoint(this._59O.length, Y)
            },
            getColors: function() {
                return this._colors
            },
            setColors: function(K) {
                var A = this._colors;
                K = K ? K.slice(0) : [], this._colors = K, this._colorsDirty = !0, this.fp("colors", A, K)
            },
            setPointColor: function(U, a) {
                var C = this._colors.slice(0);
                C[U] = a, this.setColors(C)
            },
            getSizes: function() {
                return this._sizes
            },
            setSizes: function(f) {
                var m = this._sizes;
                f = f ? f.slice(0) : [], this._sizes = f, this._sizesDirty = !0, this.fp("sizes", m, this._sizes)
            },
            setPointSize: function(t, A) {
                var N = this._sizes.slice(0);
                N[t] = A, this.setSizes(N)
            },
            getUvoffsets: function() {
                return this._uvoffsets
            },
            setUvoffsets: function(s) {
                var B = this._uvoffsets;
                s = s ? s.slice(0) : [], this._uvoffsets = s, this._offsetsDirty = !0, this.fp("uvoffsets", B, this._uvoffsets)
            },
            setPointUvoffset: function(k, b, o) {
                var f;
                "object" == typeof b ? (f = b[0], o = b[1]) : f = b;
                var x = this._uvoffsets.slice(0);
                x[2 * k + 0] = f, x[2 * k + 1] = o, this.setUvoffsets(x)
            },
            getPointInfo: function(O) {
                var f = this.getPoints();
                if (!f || f[O] == Y) return Y;
                var g = f[O],
                    a = [g.x, g.e, g.y],
                    m = this.mat || Qj(this),
                    E = [a[0], a[1], a[2]];
                qm(E, m);
                var Z = this.getColors(),
                    l = Z[O] || this.s("points.color"),
                    s = this.getSizes(),
                    X = s[O];
                return {
                    size: X == Y ? this.s("points.size") : X,
                    color: l,
                    local: a,
                    world: E
                }
            },
            getSerializableProperties: function() {
                var g = en.superClass.getSerializableProperties.call(this);
                return g.points = 1, g.colors = 1, g.sizes = 1, g.uvoffsets = 1, g
            },
            onPropertyChanged: function(f) {
                en.superClass.onPropertyChanged.call(this, f);
                var J = f.property;
                "s:points.color" === J ? this._colorsDirty = !0 : "s:points.size" === J ? this._sizesDirty = !0 : "s:points.model" === J && (this._modelDirty = !0)
            },
            getWidth: function() {
                var c = this;
                if (c._width >= 0) return c._width;
                var S = c.getStyle("points.model");
                if (S) {
                    var E = np(S);
                    if (E && E.rawS3) return E.rawS3[0]
                }
                return 1
            },
            getHeight: function() {
                var j = this;
                if (j._height >= 0) return j._height;
                var W = j.getStyle("points.model");
                if (W) {
                    var $ = np(W);
                    if ($ && $.rawS3) return $.rawS3[2]
                }
                return 1
            },
            getTall: function() {
                var b = this;
                if (b._tall >= 0) return b._tall;
                var e = b.getStyle("points.model");
                if (e) {
                    var s = np(e);
                    if (s && s.rawS3) return s.rawS3[1]
                }
                return 1
            }
        });
        var Dk = F.Polyline = function() {
            ip(Dk, this), this.s({
                "shape.background": null,
                "shape.border.width": 2
            })
        };
        mb("Polyline", Cr, {
            _icon: "polyline_icon",
            _22Q: function() {
                return gt
            },
            getUIClass: function() {
                return Sj
            },
            setClosePath: function() {},
            setTall: function(U) {
                var u = this;
                if (u.beginTransaction(), !u._55I && !u._24Q && !Rk && u.getTall()) {
                    u._24Q = 1;
                    var W = u._54O,
                        L = U / u.getTall();
                    if (1 !== L) {
                        var c = u.toPoints(),
                            N = new no;
                        c.each(function(G) {
                            N.add({
                                x: G.x,
                                y: G.y,
                                e: G.e == Y ? G.e : (G.e - W) * L + W
                            })
                        }), u.setPoints(N), u.fs()
                    }
                    delete u._24Q
                }
                Dk.superClass.setTall.call(u, U), u.endTransaction()
            },
            setElevation: function(A) {
                var w = this;
                if (w.beginTransaction(), !w._55I && !w._24Q && !Rk) {
                    w._24Q = 1;
                    var $ = A - w._54O;
                    0 !== $ && w.shiftPointsElevation($), delete w._24Q
                }
                Dk.superClass.setElevation.apply(w, arguments), w.endTransaction()
            },
            fireShapeChange: function() {
                var A = this,
                    s = A._59O;
                if (!A._55I && !A._24Q && !Rk) {
                    var O = s.size();
                    if (O) {
                        var M = 1,
                            W = s.get(0),
                            u = A._54O;
                        W.e == Y && (W.e = u);
                        for (var Z = W.e, r = 0; O > M; M++) {
                            W = s.get(M), W.e == Y && (W.e = u);
                            var n = h(Z, W.e),
                                D = q(Z + r, W.e);
                            Z = n, r = D - n
                        }
                        A._24Q = 1, A.setTall(r), A.setElevation(Z + r * A._anchorElevation), delete A._24Q
                    }
                }
                Dk.superClass.fireShapeChange.apply(A, arguments)
            }
        });
        var fd = F.SubGraph = function() {
            ip(fd, this)
        };
        mb("SubGraph", xp, {
            ISubGraph: 1,
            _image: "subGraph_image",
            _icon: "subGraph_icon",
            _8I: function() {
                fd.superClass._8I.call(this), this.eachChild(function(Q) {
                    Mk(Q) && Q._8I()
                })
            }
        }), z.loadingRefGraph = 0;
        var Tb = F.RefGraph = function() {
            ip(Tb, this)
        };
        mb("RefGraph", zc, {
            _icon: "refGraph_icon",
            getRef: function() {
                return this._ref
            },
            setRef: function(T) {
                var h = this._ref;
                this._ref = T, this.fp("ref", h, T), this.updateRef()
            },
            _21I: function() {
                Tb.superClass._21I.apply(this, arguments), this.updateRef()
            },
            updateRef: function() {
                var X = this;
                if (z.loadingRefGraph++, X.clearChildrenFromDataModel(), z.loadingRefGraph--, X._ref && X._dataModel) {
                    X._xhrLoadHandler && (X._xhrLoadHandler.cancel = !0);
                    var L = Rk,
                        B = X._xhrLoadHandler = function(r) {
                            if (r && X._dataModel) {
                                z.loadingRefGraph++;
                                var F = X._pendingUpdateInfo = {
                                    needToRestore: L
                                };
                                L && (F.p3 = X.p3(), F.s3 = X.s3(), F.r3 = X.r3(), F.anchor3d = X.getAnchor3d(), F.scale3d = X.getScale3d()), X.r3(0, 0, 0), X.setScale3d(1, 1, 1), X.setAnchor3d(.5, .5, .5), X.p3(0, 0, 0);
                                var g = z.parse(r),
                                    T = X._dataModel.deserialize(g, X, {
                                        justDatas: !0
                                    });
                                T.each(function(d) {
                                    d._refGraph = X
                                }), X.checkPendingUpdateInfo(), z.loadingRefGraph--, z.handleRefGraphLoaded(X, T, g)
                            }
                        };
                    B.xhrLoadCalled = !1, z.load(X._ref, function(F) {
                        B.cancel || (B.xhrLoadCalled ? B(F) : jf(function() {
                            B(F)
                        }))
                    }), B.xhrLoadCalled = !0
                }
            },
            checkPendingUpdateInfo: function() {
                var C = this,
                    B = C._pendingUpdateInfo;
                if (!B) return C.onPendingUpdated && (z.loadingRefGraph++, C.onPendingUpdated(), z.loadingRefGraph--), void 0;
                var s = !0;
                this.eachChild(function(j) {
                    (j._pendingCheckImageJSON || j._pendingUpdateInfo) && (s = !1)
                }), s && (z.loadingRefGraph++, C._pendingUpdateInfo = null, C.updateFromChildren(), B.needToRestore && (C.setAnchor3d(B.anchor3d), C.setScale3d(B.scale3d), C.r3(B.r3), C.p3(B.p3)), this.getParent() instanceof Tb && this.getParent().checkPendingUpdateInfo(), C.onPendingUpdated && C.onPendingUpdated(), z.loadingRefGraph--)
            },
            getSerializableProperties: function() {
                var O = Tb.superClass.getSerializableProperties.call(this);
                return O.ref = 1, O
            }
        }), F.EdgeGroup = function(S, E) {
            this._70O = S, this._siblings = E;
            for (var W, P, K = 0, c = S.size(), J = A[yj]; c > K; K++)
                if (W = S.get(K).getStyle(yj, !1), W != Y) {
                    J = W;
                    break
                }
            J == Y && (J = !0);
            var F = z.edgeGroupAgentFunc;
            for (F && (P = F(S), P && P !== S.get(0) && (S.remove(P), S.add(P, 0))), K = 0; c > K; K++) S.get(K).s(yj, J)
        }, mb("EdgeGroup", G, {
            getEdges: function() {
                return this._70O
            },
            size: function() {
                return this._70O.size()
            },
            get: function($) {
                return this._70O.get($)
            },
            indexOf: function(J) {
                return this._70O.indexOf(J)
            },
            each: function(t, B) {
                this._70O.each(t, B)
            },
            getSiblings: function() {
                return this._siblings
            },
            eachSiblingEdge: function(H, W) {
                this._siblings.each(function(I) {
                    I._70O.each(H, W)
                })
            }
        });
        var qs = function(l, J, r) {
            var y = Hi[l] = {
                type: l,
                action: J
            };
            if (r)
                for (var v in r) y[v] = r[v]
        };
        fp(z, {
            setConnectAction: qs,
            getConnectAction: function(W, q) {
                if (!q) {
                    if (!W) return null;
                    q = W.getCurrentConnectActionType()
                }
                return Hi[q]
            },
            doConnectAction: function(X, g, E, l) {
                l = l || X.getCurrentConnectActionType();
                var d = Hi[l];
                if (!d) return !1;
                var o = d.action;
                return o ? (g instanceof Xr.Group ? X.sm().getSelection().each(function(s) {
                    o.call(null, X, s, E)
                }) : o.call(null, X, g, E), !0) : !1
            },
            doDeleteConnectionAction: function(z, f, O) {
                O = O || z.getCurrentConnectActionType();
                var m = Hi[O];
                if (!m || !m.delete) return !1;
                var k = m.delete.action;
                return k ? (f instanceof Xr.Group ? z.sm().getSelection().each(function(j) {
                    k.call(null, z, j)
                }) : k.call(null, z, f), !0) : !1
            }
        });
        var ld = F.JSONSerializer = function(N, l) {
            this.dm = this._dataModel = N, this._hierarchical = z.forceHierarchicalSerialization ? !0 : l == Y ? N.isHierarchicalRendering() : l
        };
        mb("JSONSerializer", G, {
            ms_ac: ["hierarchical"],
            serialize: function(a) {
                return z.stringify(this.toJSON(), a)
            },
            toJSON: function() {
                var W, X = this,
                    V = X.dm,
                    B = V.getRoots(),
                    v = X.json = {
                        v: z.getVersion(),
                        p: {},
                        a: {},
                        d: []
                    },
                    q = V.getSerializableAttrs();
                (W = V.getInit()) && (v.init = W), (W = V.getName()) && (v.p.name = W), (W = V.getBackground()) && (v.p.background = W), (W = V.getLayers()) && (v.p.layers = W), (W = V.getEnvmap()) && (v.p.envmap = W), (W = V.getEnvmapType()) && (v.p.envmapType = W), v.p.autoAdjustIndex = V.isAutoAdjustIndex(), v.p.hierarchicalRendering = V.isHierarchicalRendering();
                for (var G in q) {
                    var F = V.a(G);
                    F !== O && X[Dg](G, F, v.a)
                }
                return Mq(v.a) && delete v.a, X._hierarchical ? B.each(X.serializeData, this) : V.each(function(g) {
                    X.serializeData(g)
                }), V.fireSerializeEvent({
                    type: "serialize",
                    json: v
                }), V.getPostProcessingData() && (v.p.postProcessingData = V.getPostProcessingData()), v
            },
            isSerializable: function() {
                return !0
            },
            getProperties: function(W) {
                return W.getSerializableProperties()
            },
            getStyles: function(x) {
                return x.getSerializableStyles()
            },
            getAttrs: function(t) {
                return t.getSerializableAttrs()
            },
            serializeData: function(a) {
                var Q = this;
                if (Q.isSerializable(a) && !a._refGraph) {
                    var L, m, R, n, W = Mo(a.getClassName()) || a.getClass(),
                        s = new W,
                        p = {
                            c: a.getClassName(),
                            i: a.getId(),
                            p: {},
                            s: {},
                            a: {}
                        };
                    Q.json.d.push(p), L = Q.getProperties(a);
                    for (m in L)
                        if (/^_/.test(m)) {
                            if (R = a[m], !("_width" !== m && "_height" !== m || R != Y && -1 !== R)) {
                                var X;
                                ((a.s("layout.h") || a.s("layout.v")) && a.getHost() || a instanceof F.Node && (X = a.getParent()) && X instanceof F.Block || a.s("fullscreen")) && (R = a[m] = "_width" === m ? a.getWidth() : a.getHeight())
                            }
                            R !== s[m] && Q[Dg](m.substr(1), R, p.p)
                        } else n = Uh(m), a[n] && (R = a[n](), R !== s[n]() && Q[Dg](m, R, p.p));
                    L = Q.getStyles(a);
                    for (m in L) R = a.s(m), R !== s.s(m) && Q[Dg](m, R, p.s);
                    L = Q.getAttrs(a);
                    for (m in L) R = a.a(m), R !== s.a(m) && Q[Dg](m, R, p.a);
                    Mq(p.p) && delete p.p, Mq(p.s) && delete p.s, Mq(p.a) && delete p.a
                }
                Q._hierarchical && a.getChildren().each(Q.serializeData, Q)
            },
            serializeValue: function(v, t, B) {
                eo(t) ? t = {
                    __a: t._as
                } : t instanceof Mc ? t = {
                    __i: t.getId()
                } : t instanceof _c && (t = {
                    __dm: t.serialize(0)
                }), B[v] = t
            },
            deserialize: function(d, Q, e) {
                var f = this;
                return Sf(d) && /.json$/.test(d) ? (z.xhrLoad(d, function(c) {
                    f.deserializeImpl(c, Q, e)
                }), void 0) : f.deserializeImpl(d, Q, e)
            },
            deserializeImpl: function(k, W, v) {
                var u = this,
                    M = u.dm;
                M.setDeserializing(!0), v = xk(v) ? {
                    setId: v
                } : Ap(v) ? {
                    finishFunc: v
                } : v || {}, k = u.json = Sf(k) ? z.parse(k) : k, !v.justDatas && k.a && k.a.onPreDeserialize && !v.disableOnPreDeserialize && k.a.onPreDeserialize(k, M, v.view), M.beginTransaction(), Rk++, u._82I = {};
                var b = new no,
                    Q = new no,
                    i = 0,
                    p = k.d.length;
                if (v.justDatas || (!v.disableInit && Ap(k.init) && k.init(M), M.setInit(k.init)), !v.justDatas) {
                    for (var D in k.a) M.a(D, u[Jr](k.a[D]));
                    for (var r in k.p) M[Oe(r)](k.p[r])
                }
                for (; p > i; i++) {
                    var o = k.d[i],
                        a = Mo(o.c),
                        l = new a,
                        V = o.i;
                    v.setId && V != Y && (l._id = V), u._82I[V] = l, b.add(l), Q.add(o)
                }
                for (i = 0; p > i; i++) u.deserializeData(b.get(i), Q.get(i));
                return b.each(function(G) {
                    W && !G.getParent() && G.setParent(W), M.add(G)
                }), v.__innerHandler__ && v.__innerHandler__(k, M, v.view, b), M.fireSerializeEvent({
                    type: "deserialize",
                    json: k
                }), Rk--, M.endTransaction(), !v.justDatas && k.a && k.a.onPostDeserialize && !v.disableOnPostDeserialize && k.a.onPostDeserialize(k, M, v.view, b), v.finishFunc && v.finishFunc(k, M, v.view, b), M.setDeserializing(!1), b
            },
            deserializeData: function(Z, d) {
                for (var J in d.p) Z[Oe(J)](this[Jr](d.p[J]));
                for (J in d.s) Z.s(J, this[Jr](d.s[J]));
                for (J in d.a) Z.a(J, this[Jr](d.a[J]))
            },
            deserializeValue: function(D) {
                if (jl(D)) {
                    var I = D.__i;
                    if (I != Y) return this._82I[I];
                    if (I = D.__dm, I != Y) {
                        var R = new F.DataModel;
                        return R.deserialize(I), R
                    }
                    if (I = D.__a, ym(I)) return new no(I)
                }
                return D
            }
        }), fp(_c, {
            serialize: function(W, D) {
                return new ld(this, D).serialize(W)
            },
            toJSON: function(W) {
                return new ld(this, W).toJSON()
            },
            deserialize: function(X, C, v) {
                return new ld(this).deserialize(X, C, v)
            }
        });
        var Rl = F.OverlappingBox = function(T) {
            this.gv = T, this.boxes = {}
        };
        mb("OverlappingBox", G, {
            clear: function() {
                var r, J, B = this.boxes;
                for (r in B) J = B[r], J.length = 0
            },
            isOverlapping: function(E, s) {
                var C, t, m = this,
                    T = m.boxes,
                    f = T[E];
                f ? (C = f.rects, t = f.length) : f = T[E] = {
                    rects: C = [],
                    length: t = 0
                };
                var o, M, s;
                for (o = 0; t > o; o++)
                    if (M = C[o], M.x < s.x + s.w && M.x + M.w > s.x && M.y < s.y + s.h && M.h + M.y > s.y) return !0;
                return C.length <= t ? (C.push(s), f.length++) : C[f.length++] = s, !1
            }
        }), fp(z, {
            fetch: function(B, p) {
                var m = "GET",
                    M = !1,
                    x = null,
                    U = "";
                p && (m = p.method || "GET", M = p.sync, U = p.url, x = p.data || null), B.open(m, U, !M), p.responseType ? B.responseType = p.responseType : p.overrideMimeType && B.overrideMimeType && B.overrideMimeType(p.overrideMimeType), B.send(x)
            },
            convertImageSrc: function(O, r) {
                r && "function" == typeof r || (r = function() {}), r(O)
            }
        });
        var gk = F.Request = function() {
            this._xhr = new XMLHttpRequest, this._onloadFunc = function() {}, this._errorFunc = function() {}
        };
        mb("Request", G, {
            _responseType: null,
            _overrideMimeType: "text/plain",
            send: function(I) {
                var v = this._xhr,
                    A = this.onload,
                    P = this.onerror;
                this.getResponseType() ? I.responseType = this.getResponseType() : this.getOverrideMimeType() && (I.overrideMimeType = this.getOverrideMimeType()), v.onload = A, v.onerror = P, z.fetch(v, I)
            },
            onload: function() {},
            onerror: function() {},
            getResponseType: function() {
                return this._responseType
            },
            setResponseType: function(h) {
                this._responseType = h
            },
            getOverrideMimeType: function() {
                return this._overrideMimeType
            },
            setOverrideMimeType: function(D) {
                this._overrideMimeType = D
            },
            getResponseText: function() {
                var H = this._xhr;
                return H.response || H.responseText
            }
        }), vj.GraphView = function(Y) {
            var d = this;
            d._24I = {}, d._34I = new no, d.enableDirtyRect(), d._25I = {}, d._56I = {}, d._view = Dl(1, d), d._canvas = ts(d._view), d.dm(Y ? Y : new _c), this._coreInteractor = new mc(this), d.setEditable(!1), d.setScrollBarVisible(z.graphViewScrollBarVisible), d._initView()
        }, hl("GraphView", G, {
            ms_v: 1,
            ms_gv: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            _52o: 1,
            _51o: 1,
            ms_ac: [vr, lg, wc, sf, "resettable", "editInteractor", Hc, "zoomable", "pannable", "rectSelectable", "autoScrollZone", fg, "movableFunc", "editableFunc", "pointEditableFunc", "rectEditableFunc", "rotationEditableFunc", "anchorEditableFunc", "rectSelectBackground", "rectSelectBorderColor", "editPointSize", "editPointBorderColor", "editPointBackground", "hoverDelay"],
            _zoomable: z.graphViewZoomable,
            _resettable: z.graphViewResettable,
            _pannable: z.graphViewPannable,
            _rectSelectable: z.graphViewRectSelectable,
            _autoScrollZone: z.graphViewAutoScrollZone,
            _rectSelectBackground: z.graphViewRectSelectBackground,
            _rectSelectBorderColor: z.graphViewRectSelectBorderColor,
            _editPointSize: z.graphViewEditPointSize,
            _editPointBorderColor: z.graphViewEditPointBorderColor,
            _editPointBackground: z.graphViewEditPointBackground,
            _scrollBarColor: bp,
            _scrollBarSize: Wn,
            _autoHideScrollBar: Yl,
            _autoMakeVisible: si,
            _currentActionType: null,
            getCoreInteractor: function() {
                return this._coreInteractor
            },
            getLayers: function() {
                return this._dataModel.getLayers()
            },
            setLayers: function(r) {
                this._dataModel.setLayers(r)
            },
            setEditable: function(p) {
                var z = this,
                    V = z.__interactorMap__;
                if (!V) {
                    var m = vj.XEditInteractor;
                    V = z.__interactorMap__ = {
                        scrollBar: new vq(z),
                        select: new Ab(z),
                        edit: m ? new m(z) : new fh(z),
                        text: new Gf(z),
                        move: new sl(z),
                        "default": new jo(z),
                        touch: new pe(z, {
                            editable: !1
                        })
                    }
                }
                p ? (z._uieditable = !0, z.setInteractors([V.scrollBar, V.select, V.edit, V.text, V.move, V.default, V.touch])) : (z._uieditable = !1, z.setInteractors([V.scrollBar, V.select, V.move, V.default, V.touch]))
            },
            getCanvas: function() {
                return this._canvas
            },
            _33I: function(B) {
                var a = B.getUIClass();
                return a ? new a(this, B) : Y
            },
            getDataUI: function(G) {
                var Y = this,
                    c = Y._25I[G._id];
                return c === O && (c = Y._33I(G), Y._25I[G._id] = c), c
            },
            getNodeRect: function(l) {
                return z.getNodeRect(this, l)
            },
            getFullscreenDatas: function() {
                return this._dataModel.getFullscreenDatas()
            },
            getEdgeInfo: function(i) {
                var K = this.getDataUI(i);
                return K ? (K._79o(), K._78o) : null
            },
            getEdgeSourcePosition: function(_) {
                var Q = this,
                    D = Q.getDataUI(_),
                    K = D.s,
                    u = D._data._40I;
                return _l(Q, u, K("edge.source.position"), K("edge.source.offset.x"), K("edge.source.offset.y"), K("edge.source.anchor.x"), K("edge.source.anchor.y"))
            },
            getEdgeTargetPosition: function(Z) {
                var b = this,
                    $ = b.getDataUI(Z),
                    O = $.s,
                    x = $._data._41I;
                return _l(b, x, O("edge.target.position"), O("edge.target.offset.x"), O("edge.target.offset.y"), O("edge.target.anchor.x"), O("edge.target.anchor.y"))
            },
            invalidateAll: function(Z) {
                var _ = this;
                if (Z) {
                    for (var J in _._25I) {
                        var u = _._25I[J];
                        u && u.dispose()
                    }
                    _._25I = {}, _._56I = {}, _._24I = {}, _._34I.clear(), _.redraw()
                } else _.dm().each(function(t) {
                    _.invalidateData(t)
                })
            },
            invalidateSelection: function() {
                var g = this;
                g.sm().each(function(h) {
                    g.invalidateData(h)
                })
            },
            invalidateData: function(X) {
                var J = this;
                J._24I[X._id] = X, J._21Q(X), J.iv()
            },
            _21Q: function(p) {
                var M = this,
                    o = M._24I;
                if (Em(p) && Vd[p.s(tk)]) {
                    var A = p.getSourceAgent();
                    A && A.getAgentEdges().each(function(I) {
                        o[I._id] = I
                    }), A = p.getTargetAgent(), A && A.getAgentEdges().each(function(J) {
                        o[J._id] = J
                    }), M.iv()
                }
            },
            redraw: function(m) {
                var J = this;
                J._32I || (m ? J._34I.add(m) : (J._32I = 1, J._34I.clear()), J.iv())
            },
            each: function(z, I) {
                var K, T, Y, k = 0,
                    w = this.getLayers(),
                    r = this._dataModel,
                    A = r._datas._as,
                    B = A.length;
                if (w) {
                    for (var f = w.length; f > k; k++)
                        if (Y = w[k], jl(Y) && (Y = Y.name), r.isHierarchicalRendering()) {
                            var m = function(n) {
                                return n._layer === Y ? I ? z.call(I, n) : z(n) : void 0
                            };
                            if (this._dataModel.eachByHierarchical(m) === !1) return
                        } else
                            for (var g = 0; B > g; g++)
                                if (K = A[g], K._layer === Y && (T = I ? z.call(I, K) : z(K), T === !1)) return
                } else if (r.isHierarchicalRendering()) this._dataModel.eachByHierarchical(z, null, I);
                else
                    for (; B > k; k++)
                        if (K = A[k], T = I ? z.call(I, K) : z(K), T === !1) return
            },
            reverseEach: function(B, Z) {
                var J, j, X, a, E = this._dataModel,
                    M = E._layers,
                    $ = E._datas._as,
                    p = $.length;
                if (M) {
                    for (J = M.length - 1; J >= 0; J--)
                        if (a = M[J], jl(a) && (a = a.name), E.isHierarchicalRendering()) {
                            var f = function(b) {
                                return b._layer === a ? Z ? B.call(Z, b) : B(b) : void 0
                            };
                            if (E.reverseEachByHierarchical(f) === !1) return
                        } else
                            for (var l = p - 1; l >= 0; l--)
                                if (j = $[l], j._layer === a && (X = Z ? B.call(Z, j) : B(j), X === !1)) return
                } else if (E.isHierarchicalRendering()) E.reverseEachByHierarchical(B, null, Z);
                else
                    for (J = p - 1; J >= 0; J--)
                        if (j = $[J], X = Z ? B.call(Z, j) : B(j), X === !1) return
            },
            getViewRect: function() {
                return this._29I
            },
            getContentRect: function() {
                var g = this,
                    C = g._84I;
                if (!C) {
                    var U = this.dm().a("width"),
                        J = this.dm().a("height");
                    U > 0 && J > 0 ? g._84I = {
                        x: 0,
                        y: 0,
                        width: U,
                        height: J
                    } : (g.each(function(h) {
                        g.isVisible(h) && (C = Ek(C, g.getDataUIBounds(h)))
                    }), g._84I = C ? C : yf)
                }
                return g._84I
            },
            getScrollRect: function() {
                return Ek(this.getContentRect(), this._29I)
            },
            makeCenter: function(d, S, a) {
                var R = this;
                if (!R.getWidth() || !R.getHeight()) return a || jf(R.makeCenter, R, [d, S, !0], 500), void 0;
                R.makeVisible(d), R.validate();
                var x = R.getDataUIBounds(d);
                if (x) {
                    var B = R.getWidth(),
                        U = R.getHeight(),
                        V = x.x + x.width / 2,
                        L = x.y + x.height / 2,
                        l = -V * R._zoom + B / 2,
                        Y = -L * R._zoom + U / 2;
                    R.setTranslate(l, Y, S)
                }
            },
            fitData: function(F, l, u, D, Z) {
                var q = this;
                if (!q.getWidth() || !q.getHeight()) return Z || jf(q.fitData, q, [F, l, u, D, !0], 500), void 0;
                var s = function() {
                    q.makeVisible(F), q.validate();
                    var w = q.getDataUIBounds(F);
                    w && (w = Vm(w), Um(w, u == Y ? 20 : u), q.fitRect(w, l, D))
                };
                l ? z.callWhenLoaded(s) : s()
            },
            fitContent: function(O, D, o, P) {
                var p = this;
                if (!p.getWidth() || !p.getHeight()) return P || jf(p.fitContent, p, [O, D, o, !0], 500), void 0;
                var K = function() {
                    p.validate();
                    var S = Vm(p.getContentRect());
                    Um(S, D == Y ? 20 : D), p.fitRect(S, O, o)
                };
                O ? z.callWhenLoaded(K) : K()
            },
            fitRect: function(W, I, o) {
                var x = this,
                    T = x.getWidth(),
                    b = x.getHeight(),
                    U = W.x + W.width / 2,
                    J = W.y + W.height / 2,
                    r = h(T / W.width, b / W.height),
                    t = x._zoom,
                    z = -U * t + T / 2,
                    a = -J * t + b / 2;
                0 === r || isNaN(r) || (o && (r = h(1, r)), I ? (x._65I && (delete x._65I.finishFunc, x._65I.stop(!0)), x._14o && x._14o.stop(!0), x.setTranslate(z, a, {
                    finishFunc: function() {
                        x.setZoom(r, I)
                    }
                })) : (x.setTranslate(z, a), x.setZoom(r)))
            },
            fitSelection: function(i, p, l) {
                var S = this,
                    H = S.sm(),
                    t = null;
                H.size() && (H.each(function(q) {
                    t = Ek(S.getDataUIBounds(q), t)
                }), i && Um(t, i), S.fitRect(t, p, l))
            },
            toCanvas: function(p, A, C) {
                A = A || this._zoom, this.validateImpl();
                var L = this,
                    r = L.getContentRect();
                C && Um(r, C), r.width || (r.width = 10), r.height || (r.height = 10);
                var F = ts(),
                    N = r.x * A,
                    o = r.y * A,
                    f = Math.ceil(r.width * A),
                    c = Math.ceil(r.height * A);
                yh(F, f, c, 1);
                var j = Bc(F);
                p = p || this._dataModel.getBackground(), p && or(j, 0, 0, f, c, p), uk(j, -N, -o), j.scale(A, A);
                var Z = this._zoom;
                return this._zoom = A, L._42(j), this._zoom = Z, j.restore(), F
            },
            toDataURL: function(v, k, c, p) {
                return this.toCanvas(v, c, p).toDataURL(k || "image/png", 1)
            },
            getClipBounds: function() {
                return this._74O
            },
            _42: function(n, K) {
                var $ = this,
                    l = $.dm().getBackground();
                if (l) {
                    var s = $.dm().a("width"),
                        X = $.dm().a("height");
                    s > 0 && X > 0 && or(n, 0, 0, s, X, l)
                }
                var A = $.__htmlOrderList,
                    r = [],
                    x = $._forcedLayoutHTML;
                if ($._93db(n, K), $.each(function(J) {
                        var Z = $.getDataUI(J);
                        if (Z) {
                            var o = $._56I[J._id],
                                m = Z._htmlView;
                            if (o) {
                                var Y = Z._79o();
                                if (m = Z._htmlView, F.HtmlNode && J instanceof F.HtmlNode) Z._42(n);
                                else {
                                    var i = $.getViewRect(),
                                        N = m && m.layoutHTML;
                                    !K || $h(K, Y) ? (N && (m.layoutHTML(), Z.__outerLayout && delete Z.__outerLayout), Z._42(n)) : $h(i, Y) || !N || Z.__outerLayout && !x || (m.layoutHTML(), Z.__outerLayout = !0)
                                }
                            }
                            m && (r.push(m), m.getView && (m = m.getView()), m.style.display = o ? "block" : Yh)
                        }
                    }), A && r.length > 0) {
                    var Y = !1;
                    if (A.length !== r.length) Y = !0;
                    else
                        for (var j = 0; j < r.length; j++)
                            if (r[j] !== A[j]) {
                                Y = !0;
                                break
                            }
                    Y && (r.forEach(function(C) {
                        C.autoAdjustIndex !== !1 && $.appendHTML(C, !0)
                    }), this.__htmlOrderList = r)
                } else this.__htmlOrderList = r;
                $._92db(n, K)
            },
            disableDirtyRect: function() {
                this._shouldRedrawAll = k
            },
            enableDirtyRect: function() {
                var $ = this;
                $._shouldRedrawAll = function() {
                    return $._32I
                }
            },
            validateImpl: function() {
                this.tryUpdateRootData();
                var Z, u, k, T, F, y = this,
                    z = y.tx(),
                    V = y.ty(),
                    n = y._zoom,
                    C = y._canvas,
                    B = this.getWidth(),
                    r = this.getHeight(),
                    J = y._29I,
                    G = {
                        x: -z / n,
                        y: -V / n,
                        width: B / n,
                        height: r / n
                    },
                    L = {},
                    j = y._34I,
                    E = y._24I,
                    W = y._shouldRedrawAll(),
                    K = y._23I;
                y._24I = {}, (B !== C.clientWidth || r !== C.clientHeight) && (yh(C, B, r), W = 1, y._forcedLayoutHTML = 1), W || Ch(G, J) || (W = 1, y._forcedLayoutHTML = 1), y._29I = G, y.each(function(m) {
                    u = m._id;
                    var F = L[u] = y.isVisible(m);
                    F !== y._56I[u] && (E[u] = m, k = y.getDataUI(E[u]), k && k._84o(F), y._84o(m, F))
                }, y);
                for (u in E) k = y.getDataUI(E[u]), k && (!W && y._56I[u] && (F = k._79o(), F && j.add(F)), k.invalidate()), y._83I = 1;
                if (y._56I = L, !W)
                    for (u in E) L[u] && (k = y.getDataUI(E[u]), k && (F = k._79o(), F && j.add(F)));
                if (W ? T = G : (j.each(function(_) {
                        $h(G, _) && (T = Ek(T, _))
                    }), T && (Um(T, q(1, 1 / n)), T.x = e(T.x * n) / n, T.y = e(T.y * n) / n, T.width = $(T.width * n) / n, T.height = $(T.height * n) / n, T = Kk(G, T))), y._74O = T, T && 0 !== T.width && 0 !== T.height) {
                    Z = Bc(C);
                    var U = T.x,
                        S = T.y,
                        P = T.width,
                        M = T.height;
                    U = Math.floor((U * n + z) * lk), S = Math.floor((S * n + V) * lk), P = Math.ceil(P * n * lk) + 1, M = Math.ceil(M * n * lk) + 1, W || (T.x = (U / lk - z) / n, T.y = (S / lk - V) / n, T.width = P / lk / n, T.height = M / lk / n), Z.beginPath(), Z.rect(U, S, P, M), Z.clip(), Z.clearRect(U, S, P, M), vb(Z, z, V, n), y._42(Z, T), Z.restore(), delete y._74O
                }
                if (j.clear(), delete y._32I, delete y._forcedLayoutHTML, K && B > 0 && r > 0) {
                    var k = y.getDataUI(K);
                    if (k) {
                        var F = k._79o(),
                            A = y._29I,
                            Q = A.x,
                            v = A.y,
                            I = A.width,
                            g = A.height,
                            n = y._zoom;
                        F && !$h(F, A) && (F.x + F.width < Q && y.tx(-F.x * n), F.x > Q + I && y.tx(-(F.x + F.width - I) * n), F.y + F.height < v && y.ty(-F.y * n), F.y > v + g && y.ty(-(F.y + F.height - g) * n))
                    }
                    delete y._23I
                }
                y._83I && (delete y._83I, delete y._84I), y._98O(), y.countFrame(), Mq(y._24I) || jf(y.iv, y)
            },
            isValidGuideLineSource: function() {
                return !0
            },
            tryUpdateRootData: function() {
                if (!this._rootDataUpdating) {
                    this._rootDataUpdating = !0;
                    var k, w = this.getFullscreenDatas();
                    for (var m in w) k = w[m], this.scaleRootData(k);
                    this.onRootDataUpdated && this.onRootDataUpdated(), this._rootDataUpdating = !1
                }
            },
            scaleRootData: function(w) {
                var Y = w.s("fullscreen");
                if ("uniform" === Y || "fill" === Y) {
                    w.getRotation() && w.setRotation(0);
                    var _ = w.s("fullscreen.gap") || 0,
                        u = this.getWidth(),
                        o = this.getHeight();
                    if (u && o) {
                        var Z, p, O, C = u - 2 * _,
                            N = o - 2 * _,
                            x = w.getAnchor(),
                            h = w.getScaledSize(),
                            j = h.width,
                            K = h.height,
                            U = w.s("fullscreen.lock");
                        if (U) return "uniform" === Y ? C / N > j / K ? (Z = N / K, j = K * C / N) : (Z = C / j, K = j * N / C) : "v" === U ? (Z = N / K, j = C / Z, w.getWidth() !== j && w.setWidth(j)) : (Z = C / j, K = N / Z, w.getHeight() !== K && w.setHeight(K)), this.setZoom(Z), p = _ - (w.getX() - x.x * j) * Z, O = _ - (w.getY() - x.y * K) * Z, p !== this.tx() && this.tx(p), O !== this.ty() && this.ty(O), void 0;
                        p = this.tx(), O = this.ty(), Z = this._zoom;
                        var E = {
                            x: (-p + _) / Z,
                            y: (-O + _) / Z,
                            width: C / Z,
                            height: N / Z
                        };
                        if ("uniform" === Y) {
                            var f = j / K,
                                J = Math.min(E.width, E.height * f),
                                T = J / f;
                            E.x += .5 * (E.width - J), E.y += .5 * (E.height - T), E.width = J, E.height = T
                        }
                        C = E.width / w.getScaleX(), N = E.height / w.getScaleY(), (w.getWidth() != C || w.getHeight() !== N) && w.setSize(C, N);
                        var g = E.x + x.x * E.width,
                            m = E.y + x.y * E.height,
                            t = w.getPosition();
                        (g !== t.x || m !== t.y) && w.setPosition(g, m)
                    }
                }
            },
            isScrollBarVisible: function() {
                return !!this._79O
            },
            setScrollBarVisible: function(M) {
                var $ = this;
                M !== $.isScrollBarVisible() && (M ? (xb($._view, $._79O = Qr()), xb($._79O, $._27I = Qr()), xb($._79O, $._28I = Qr())) : (Fi($._79O), delete $._79O, delete $._27I, delete $._28I), $.fp("scrollBarVisible", !M, M))
            },
            getDebugTip: function() {
                return ""
            },
            showScrollBar: function() {
                var u = this;
                u._79O && (u._85I || (Kc(function() {
                    u._86I()
                }, ue), u.iv()), u._85I = new Date)
            },
            _86I: function() {
                var V = this;
                if (V._85I) {
                    var N = new Date,
                        t = N.getTime();
                    t - V._85I.getTime() >= ue ? (delete V._85I, V.iv()) : Kc(function() {
                        V._86I()
                    }, ue)
                }
            },
            getVScrollBar: function() {
                return this._27I
            },
            getHScrollBar: function() {
                return this._28I
            },
            _98O: function() {
                var N = this,
                    A = this._27I,
                    u = this._28I;
                if (N._79O) {
                    if (N._autoHideScrollBar && !N._85I) return A.style.visibility = Rc, u.style.visibility = Rc, void 0;
                    var $ = N.getScrollBarColor(),
                        T = N._zoom,
                        Y = N.getScrollBarSize(),
                        w = N.getViewRect(),
                        X = N.getScrollRect(),
                        j = w.height * T,
                        Q = X.height * T,
                        q = w.width * T - Y - 2,
                        l = j * ((w.y - X.y) * T / Q),
                        i = j * (j / Q),
                        s = A.style;
                    Q - .5 > j ? (Zg > i && (l = l + i / 2 - Zg / 2, 0 > l && (l = 0), l + Zg > j && (l = j - Zg), i = Zg), Bh(A, q, l, Y, i), s.visibility = nd, s.background = $, s.borderRadius = Y / 2 + dr) : s.visibility = Rc;
                    var n = w.width * T,
                        b = X.width * T,
                        l = w.height * T - Y - 2,
                        q = n * ((w.x - X.x) * T / b),
                        k = n * (n / b),
                        s = u.style;
                    b - .5 > n ? (Zg > k && (q = q + k / 2 - Zg / 2, 0 > q && (q = 0), q + Zg > n && (q = n - Zg), k = Zg), Bh(u, q, l, k, Y), s.visibility = nd, s.background = $, s.borderRadius = Y / 2 + dr) : s.visibility = Rc
                }
            },
            setDataModel: function(J) {
                var X = this,
                    _ = X._dataModel,
                    g = X._selectionModel;
                _ !== J && (_ && (_.ump(X.handleDataModelPropertyChange, X), _.umm(X.handleDataModelChange, X), _.umd(X.handleDataPropertyChange, X), _.removeIndexChangeListener(X._75O, X), _.removeHierarchyChangeListener(X.handleHierarchyChange, X), g || _.sm().ums(X.handleSelectionChange, X)), X._dataModel = J, J.mp(X.handleDataModelPropertyChange, X), J.mm(X.handleDataModelChange, X), J.md(X.handleDataPropertyChange, X), J.addIndexChangeListener(X._75O, X), J.addHierarchyChangeListener(X.handleHierarchyChange, X), g ? g._21I(J) : J.sm().ms(X.handleSelectionChange, X), X.invalidateAll(!0), X.fp(co, _, J), X.updateBackground())
            },
            getLayersInfo: function() {
                if (this._layersInfo === O) {
                    var R = this.getLayers();
                    R ? (this._layersInfo = {}, R.forEach(function(v) {
                        var U = jl(v) ? v.name : v;
                        this._layersInfo[U] = v
                    }, this)) : this._layersInfo = null
                }
                return this._layersInfo
            },
            calculateEdgePosition: function(J, H, U) {
                var l, w, e, O, j = this;
                J instanceof F.Data ? (O = j.getDataUI(J), e = Jj(O)) : (e = Jj(null, arguments[0], arguments[1]), H = arguments[2], U = arguments[3]), 2 === H.length && (H = new ls(H[0], H[1]));
                var r = uj(H, function(h) {
                        return td(e, 100 * h)
                    }, 100, .001),
                    k = td(e, 100 * r);
                if (!U) {
                    var N = O ? jc(O) : jc(arguments[0], arguments[1]),
                        X = new ls(k.x, k.y),
                        x = 49 / (j._zoom * j._zoom);
                    for (l = 0, w = N.length; w > l; l++)
                        if (X.distanceToSquared(N[l]) < x) return {
                            index: l,
                            point: N[l],
                            distance: Math.sqrt((N[l].x - H.x) * (N[l].x - H.x) + (N[l].y - H.y) * (N[l].y - H.y))
                        }
                }
                return {
                    percent: r,
                    point: k,
                    distance: Math.sqrt((k.x - H.x) * (k.x - H.x) + (k.y - H.y) * (k.y - H.y))
                }
            },
            getPercentPositionOfPath: function(o, L) {
                var v;
                if (o instanceof F.Data) {
                    var A = this.getDataUI(o);
                    v = Jj(A)
                } else v = Jj(null, arguments[0], arguments[1]), L = arguments[2];
                return td(v, L)
            },
            getNeareastPositionOfPath: function() {
                return this.calculateEdgePosition.apply(this, arguments)
            },
            getPointsOfPath: function() {
                function Q(k, o, d, C, P, A) {
                    var u = new ls(o.get(d)),
                        h = A.apply(u);
                    k.push({
                        local: u,
                        world: h,
                        type: P,
                        index: d,
                        realIndex: C
                    })
                }
                return function(c) {
                    var O, z;
                    if (c instanceof F.Data) {
                        var t = this.getDataUI(c),
                            h = sk(t);
                        O = h.points, z = h.segments
                    } else O = arguments[0], z = arguments[1];
                    var d, w, D, G = c instanceof F.Shape ? c.getPointsMatrix2d() : new _q.Matrix2d,
                        o = [],
                        J = -1,
                        S = -1;
                    for (w = 0, D = z ? z.length : O.length; D > w; w++) d = z ? z.get(w) : 1, 5 !== d && (S++, 3 === d ? (Q(o, O, J + 1, S, "C", G), Q(o, O, J + 2, S, "M", G), J += 2) : 4 === d ? (Q(o, O, J + 1, S - 1, "R", G), Q(o, O, J + 2, S, "L", G), Q(o, O, J + 3, S, "M", G), J += 3) : (Q(o, O, J + 1, S, "M", G), J += 1));
                    return o
                }
            }(),
            calculateAttachPoint: function() {
                var B = new ls,
                    V = new ls,
                    S = new ls;
                return function(F, j) {
                    var T = this.getAttachPoints(F);
                    if (!T || !T.length) return null;
                    S.set(j.x, j.y);
                    for (var i, c, w, J, X, x = 1 / 0, e = 0, W = T.length; W > e; e++) w = T[e], V.x = w.x, V.y = w.y, B.x = w.offsetX || 0, B.y = w.offsetY || 0, J = _l(this, F, 0, B.x, B.y, V.x, V.y), c = S.distanceToSquared(J), x > c && (i = e, x = c, X = J);
                    x = Math.sqrt(x);
                    var A = this.getAttachStyle(F);
                    if ("close" === A) {
                        var r = F.s("attach.close.threshold") / this._zoom;
                        if (x > r) return null
                    }
                    return {
                        index: i,
                        distance: x,
                        info: T[i],
                        point: X
                    }
                }
            }(),
            getAttachPoints: function(q) {
                var p = q.s("attach.points");
                if (p) return p;
                var F = Di(q._image);
                return F ? Kg(F.attachPoints, q, this) || null : void 0
            },
            getAttachStyle: function(y) {
                var K = y.s("attach.style");
                if (K) return K;
                var $ = Di(y._image);
                return $ ? Kg($.attachStyle, y, this) || "close" : void 0
            },
            updateLayers: function() {
                this._layersInfo = O, this.invalidateSelection(), this.redraw()
            },
            updateBackground: function() {
                var l = this.dm().a("width"),
                    M = this.dm().a("height");
                this._canvas.style.background = l > 0 && M > 0 ? "" : this.dm().getBackground() || ""
            },
            handleDataModelPropertyChange: function(k) {
                if ("background" === k.property) {
                    var M = this._canvas.style.background,
                        v = k.newValue || "";
                    this.updateBackground(), this.fp("canvasBackground", M, v), this.redraw()
                } else "a:width" === k.property || "a:height" === k.property ? (this._83I = 1, this.updateBackground(), this.redraw()) : "layers" === k.property ? this.updateLayers() : "hierarchicalRendering" === k.property && this.redraw()
            },
            handleDataPropertyChange: function(e) {
                this.dm().isHierarchicalRendering() && "parent" === e.property && e.data.hasChildren() && this.redraw(), this.invalidateData(e.data)
            },
            onPropertyChanged: function(J) {
                var W = this,
                    q = J.property;
                if (W.redraw(), "zoom" === q) {
                    var k = W.sm().getSelection();
                    k.size() && k.each(function(x) {
                        x.invalidate()
                    })
                } else "dataModel" === q && (W._83I = 1);
                Lj[q] ? W.showScrollBar() : q === Hc && W.onCurrentSubGraphChanged(J)
            },
            onCurrentSubGraphChanged: function() {
                this.sm().cs(), this.reset()
            },
            handleDataModelChange: function(D) {
                var m = this,
                    o = D.kind,
                    p = D.data;
                if (m._83I = 1, "add" === o) m.invalidateData(p), Em(p) && p.getEdgeGroup() && p.getEdgeGroup().eachSiblingEdge(m.invalidateData, m), p.getHost && p.getHost() && p.getHost().updateLayoutAttaches();
                else if (o === eb) {
                    m._21Q(p);
                    var B = p._id,
                        J = m._25I[B];
                    if (J) {
                        if (m._56I[B]) {
                            var O = J._79o();
                            O && m.redraw(O)
                        }
                        J.dispose(), delete m._25I[B], delete m._24I[B], delete m._56I[B]
                    }
                    p === m._currentSubGraph && m.setCurrentSubGraph(Y)
                } else o === Aj && (m.invalidateAll(!0), m.setCurrentSubGraph(Y))
            },
            _75O: function(a) {
                this.invalidateData(a.data)
            },
            handleHierarchyChange: function(M) {
                this.dm().isHierarchicalRendering() && M.data.hasChildren() && this.redraw(), this.invalidateData(M.data)
            },
            adjustIndex: function(N) {
                var X = this;
                if (X.isVisible(N)) {
                    X.dm().beginTransaction();
                    for (var z = N; z._parent && X.isVisible(z._parent);) z = z._parent;
                    z && z !== N && X._dataModel.adjustIndex(z), X._dataModel.adjustIndex(N), X.dm().endTransaction()
                }
            },
            getImage: function(v) {
                return v.getImage ? v.getImage() : O
            },
            getSelectWidth: function(I) {
                var K = Di(this.getImage(I));
                return K && Kg(K.disableSelectedBorder, I, this) ? 0 : I.s("select.width")
            },
            getSelectColor: function(O) {
                return O.s("select.color")
            },
            isSelectable: function(U, J) {
                if (this.isSelected(U)) return !0;
                if (!J && U.getParent() instanceof zc && this.isSelectable(U.getParent(), !0) && U.getParent().isSyncSize()) return !1;
                var x = this.getLayersInfo();
                if (x) {
                    var X = x[U._layer];
                    if (X && X.selectable === !1) return !1
                }
                return U.s("2d.selectable") && this.sm().isSelectable(U)
            },
            isMovable: function(V) {
                var l = this;
                if (Em(V) && V.getStyle(tk) !== Wq) return !1;
                var L = this.getLayersInfo();
                if (L) {
                    var W = L[V._layer];
                    if (W && W.movable === !1) return !1
                }
                return V.s("2d.movable") ? l._movableFunc ? l._movableFunc(V) : !0 : !1
            },
            isEditable: function(X) {
                var A = this;
                if (F._uiSerializing) return A._uieditable;
                if (!A._editInteractor || !A.isSelected(X)) return !1;
                if (og(X)) {
                    var l = A.getDataUI(X);
                    if (!l || l._88I) return !1
                }
                if (Em(X) && X.getStyle(tk) !== Wq) return !1;
                var n = this.getLayersInfo();
                if (n) {
                    var Q = n[X._layer];
                    if (Q && Q.editable === !1) return !1
                }
                return X.s("2d.editable") ? A._editableFunc ? A._editableFunc(X) : !0 : !1
            },
            handleDelete: function() {
                this._editInteractor && (this._editInteractor.handleDelete ? this._editInteractor.handleDelete() : this.removeSelection())
            },
            isPointEditable: function(p) {
                return Mk(p) && 0 !== p.getRotation() ? !1 : this._pointEditableFunc ? this._pointEditableFunc(p) : !0
            },
            isRectEditable: function(x) {
                return this._rectEditableFunc ? this._rectEditableFunc(x) : !0
            },
            isAnchorEditable: function(d) {
                return this._anchorEditableFunc ? this._anchorEditableFunc(d) : !0
            },
            isRotationEditable: function(h) {
                return h.setRotation && h.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(h) : !0 : !1
            },
            isSourceTargetEditable: function() {
                return !0
            },
            getRotationPoint: function(c) {
                var B = c.getAnchor(),
                    N = c.getScale(),
                    L = this._zoom,
                    U = Cj(c.getRotation(), 0, -c.getHeight() * N.y * B.y - (N.y < 0 ? -1 : 1) * ($r ? 32 : 16) / L),
                    M = c.p();
                return U.x += M.x, U.y += M.y, U
            },
            getLogicalPoint: function(l) {
                var Q = this;
                return Sq(l, Q._canvas, Q.tx(), Q.ty(), Q._zoom, Q._zoom)
            },
            getScreenPoint: function(_, g) {
                var Z, l = this;
                return "object" == typeof _ ? _.x !== O ? (Z = _.x, g = _.y) : (Z = _[0], g = _[1]) : Z = _, pk(Z, g, l._canvas, l.tx(), l.ty(), l._zoom, l._zoom)
            },
            getSelectedDataAt: function(b) {
                var V = this;
                return this.getDataAt(b, function($) {
                    return V.isSelected($)
                })
            },
            getDataInfoAt: function(W, y, O) {
                var g, v = this.lp(W),
                    $ = this.getDataAt(v, y, O);
                if ($) {
                    var k = this.getDataUI($);
                    g = {
                        data: $,
                        ui: k,
                        point: v
                    };
                    var J = k._38o;
                    if (J) {
                        var X = J.icons;
                        for (var p in X) {
                            var w = X[p],
                                R = J.rects[p];
                            if (R)
                                for (var S = Kg(w.names, $, this), x = S ? S.length : 0, d = R.rotation, l = x - 1; l >= 0; l--) {
                                    var t = S[l],
                                        M = R[l];
                                    if (mm(M, v, d)) return g.part = "icons", g.name = p, g.icon = t, g.rect = M, g.index = l, g.rotation = d, g
                                }
                        }
                    }
                    if (this.isNoteVisible($)) {
                        if (k.note2Info && mm(k.note2Info.clickRect, v, Y, k.note2Info.scale)) return g.part = "note2", g;
                        if (k.noteInfo && mm(k.noteInfo.clickRect, v, Y, k.noteInfo.scale)) return g.part = "note", g
                    }
                    if (this.isLabelVisible($)) {
                        if (k.label2Info && mm(k.label2Info.rect, v, k.label2Info.rotation, k.label2Info.scale)) return g.part = "label2", g;
                        if (k.labelInfo && mm(k.labelInfo.rect, v, k.labelInfo.rotation, k.labelInfo.scale)) return g.part = "label", g
                    }
                    if ($.isInRect && $.isInRect(v)) return g.part = "body", g
                }
                return g
            },
            getDataAt: function(K, l, U) {
                K.target && (K = this.lp(K));
                var k, p = this._zoom;
                return this.reverseEach(function(P) {
                    return (l ? l(P) : this.isSelectable(P)) && this.rectIntersects(P, ud(K.x, K.y, U, p)) ? (k = P, !1) : void 0
                }, this), k
            },
            getIconInfoAt: function(b, M) {
                var u = this;
                if (b.target && (b = u.lp(b)), M || (M = u.getDataAt(b)), M) {
                    var N = u.getDataUI(M);
                    if (N && N._38o) {
                        var U, g = N._38o,
                            z = new no;
                        for (U in g.icons) z.add(U);
                        for (var h = z.size() - 1; h >= 0; h--) {
                            U = z.get(h);
                            for (var m = g.rects[U], R = m.rotation, S = m.length - 1; S >= 0; S--) {
                                var A = m[S],
                                    G = A.width,
                                    O = A.height,
                                    T = {
                                        x: b.x - A.x - G / 2,
                                        y: b.y - A.y - O / 2
                                    };
                                R != Y && (T = Cj(-R, T.x, T.y));
                                var A = {
                                    x: -G / 2,
                                    y: -O / 2,
                                    width: G,
                                    height: O
                                };
                                if (mm(A, T)) return {
                                    key: U,
                                    index: S,
                                    name: g.icons[U].names[S],
                                    rect: m[S],
                                    point: b,
                                    rotation: R,
                                    relativeRect: A,
                                    relativePoint: T,
                                    data: M
                                }
                            }
                        }
                    }
                }
                return Y
            },
            getDatasInRect: function(m, x, N) {
                N === O && (N = 1);
                var z = this,
                    V = new no;
                return z.reverseEach(function(O) {
                    N && !z.isSelectable(O) || (x ? z.rectIntersects(O, m) : z.rectContains(O, m)) && V.add(O)
                }), V
            },
            moveSelection: function(D, H) {
                var O = this;
                O.dm().beginTransaction(), ar(O.sm().toSelection(O.isMovable, O), D, H), O.dm().endTransaction()
            },
            moveDatas: function(I, B, S) {
                var u = this;
                u.dm().beginTransaction(), I instanceof no || (I = new no(I)), ar(I, B, S), u.dm().endTransaction()
            },
            getDataUIBounds: function(b) {
                var j = this.getDataUI(b);
                return j ? j._79o() : Y
            },
            drawData: function(R, o, b) {
                var D = this.getDataUI(o);
                if (D) {
                    var h = D._79o();
                    (!b || $h(b, h)) && (D._42(R), o instanceof F.Block && o.eachChild(function(c) {
                        this.isVisible(c) && this.drawData(R, c, b)
                    }, this))
                }
            },
            getBoundsForGroup: function(H) {
                return H.s(Ji) ? this.getDataUIBounds(H) : Y
            },
            isPixelPerfect: function(i) {
                return i.s("pixelPerfect")
            },
            rectIntersects: function(w, Z) {
                this.validate();
                var U = Y;
                if (this._56I[w._id]) {
                    var A = this._25I[w._id];
                    if (A) {
                        var T = A._79o();
                        if (xd(Z, T)) U = !0;
                        else if ((Z = Kk(Z, T)) && (A.rectIntersects && (U = A.rectIntersects(Z)), U == Y)) {
                            if (!this.isPixelPerfect(w)) return !0;
                            var I = Z.x,
                                R = Z.y,
                                C = Z.width,
                                k = Z.height,
                                a = this._zoom,
                                m = z.hitMaxArea,
                                E = C * k * a * a;
                            if (E > m) {
                                var i = Math.sqrt(m / E);
                                a *= i
                            }
                            C *= a, k *= a, 2 > C && (C = 2), 2 > k && (k = 2), I *= a, R *= a;
                            var D = tr(C, k);
                            uk(D, -I, -R), D.scale(a, a), this._drawForChecking = !0, this.drawData(D, w, Z), this._drawForChecking = !1;
                            try {
                                for (var h = 0, F = D.getImageData(0, 0, C, k).data; h < F.length; h += 4)
                                    if (0 !== F[h + 3]) {
                                        U = !0;
                                        break
                                    }
                                D.restore()
                            } catch (O) {
                                Vq = Y, U = !1
                            }
                        }
                    }
                }
                return U ? !0 : !1
            },
            rectContains: function(Q, C) {
                if (this._56I[Q._id]) {
                    var h = this._25I[Q._id];
                    if (h) return xd(C, h._79o())
                }
                return !1
            },
            reset: function() {
                this.setZoom(1), this.setTranslate(0, 0)
            },
            handleKeyDown: function(m) {
                if (!z.isInput(m.target)) {
                    var V = this,
                        L = V._focusData,
                        O = L && V._25I[L._id],
                        f = 0,
                        K = V._dataModel._datas;
                    if (!(L && L._enabled && L._editable && O && O.onKeyDown && O.onKeyDown(m) === !0))
                        if (9 === m.keyCode && (L && (f = K.indexOf(L), ck(m) ? -1 === --f && (f = 0) : ++f === K.size() && (f = 0)), V._focusData = L = K.get(f), V.sm().setSelection(L)), Si(m) ? V.selectAll() : Mf(m) && V.isResettable() && V.reset(), V.sm().isEmpty()) {
                            if (V._editing) return;
                            var g = V.tx(),
                                r = V.ty(),
                                D = !1,
                                Q = ck() ? 100 : 10;
                            pg(m) && (g -= Q, D = !0), lc(m) && (r -= Q, D = !0), dq(m) && (g += Q, D = !0), Xg(m) && (r += Q, D = !0), D && V.setTranslate(g, r)
                        } else {
                            wf(m) && V.handleDelete(m);
                            var d = ck() ? 10 : 1;
                            pg(m) && (V.moveSelection(-d, 0), V.fi({
                                kind: "moveLeft"
                            })), lc(m) && (V.moveSelection(0, -d), V.fi({
                                kind: "moveUp"
                            })), dq(m) && (V.moveSelection(d, 0), V.fi({
                                kind: "moveRight"
                            })), Xg(m) && (V.moveSelection(0, d), V.fi({
                                kind: "moveDown"
                            }))
                        }
                }
            },
            handleScroll: function(r, c) {
                if (Fq(r), this.isZoomable()) {
                    if (!this.getEditInteractor()) {
                        var $ = this.getDataAt(r);
                        if ($) {
                            var W = Di(this.getImage($));
                            if (W && Kg(W.scrollable, $, this)) return
                        }
                    }
                    var Z = this.lp(r);
                    c > 0 ? this.scrollZoomIn(Z) : 0 > c && this.scrollZoomOut(Z)
                }
            },
            handlePinch: function(C, p, _) {
                this.isZoomable() && (Math.abs(p - _) < z.pinchZoomThreshold || (p > _ ? this.pinchZoomIn(C) : this.pinchZoomOut(C)))
            },
            checkDoubleClickOnNote: function(i, H) {
                var v = this,
                    T = v.lp(i),
                    S = v.getDataUI(H),
                    J = S.note2Info;
                return J && H.s("note2.toggleable") && mm(J.clickRect, T) ? (H.s(dl, !H.s(dl)), v.fi({
                    kind: "toggleNote2",
                    event: i,
                    data: H
                }), !0) : (J = S.noteInfo, J && H.s("note.toggleable") && mm(J.clickRect, T) ? (H.s(rk, !H.s(rk)), v.fi({
                    kind: "toggleNote",
                    event: i,
                    data: H
                }), !0) : !1)
            },
            _84o: function() {},
            isNoteVisible: function() {
                return this._zoom > .15
            },
            isLabelVisible: function() {
                return this._zoom > .15
            },
            isEditVisible: function() {
                return this._zoom > .15
            },
            autoScroll: function(R, b) {
                var I = this,
                    u = I.getAutoScrollZone(),
                    K = u / I.getZoom(),
                    W = u / 4,
                    x = I._29I,
                    L = I.lp(R),
                    H = {
                        x: I.tx(),
                        y: I.ty()
                    };
                return L && u > 0 && x && (L.x - x.x < K ? I.translate(W, 0) : x.x + x.width - L.x < K && I.translate(-W, 0), L.y - x.y < K ? I.translate(0, W) : x.y + x.height - L.y < K && I.translate(0, -W)), H.x = I.tx() - H.x, H.y = I.ty() - H.y, b && (b.x += H.x, b.y += H.y), H
            },
            getMoveMode: function(B, H) {
                var Y = H.s("2d.move.mode");
                return Y ? Y : Ll["88"] ? "x" : Ll["89"] ? "y" : "xy"
            },
            getSerializableProperties: function() {
                return {
                    scrollBarColor: 1,
                    scrollBarSize: 1,
                    autoMakeVisible: 1,
                    autoHideScrollBar: 1,
                    editable: 1,
                    resettable: 1,
                    pannable: 1,
                    rectSelectable: 1,
                    autoScrollZone: 1,
                    visibleFunc: 1,
                    movableFunc: 1,
                    editableFunc: 1,
                    pointEditableFunc: 1,
                    rectEditableFunc: 1,
                    anchorEditableFunc: 1,
                    rotationEditableFunc: 1,
                    rectSelectBackground: 1,
                    rectSelectBorderColor: 1,
                    editPointSize: 1,
                    editPointBorderColor: 1,
                    editPointBackground: 1,
                    hoverDelay: 1,
                    dataModel: 1,
                    selectionModel: 1,
                    currentSubGraph: 1,
                    zoom: 1,
                    translateX: 1,
                    translateY: 1
                }
            },
            serializeProperty: function(S, u, B) {
                var N = this;
                return "currentSubGraph" === u ? {
                    __i: S.getId()
                } : B.serializeProperty(S, u, N)
            },
            deserializeProperty: function(f, y, W) {
                var b = this;
                if ("currentSubGraph" === y) {
                    var l = b.dm(),
                        p = l.__idMap;
                    return p[f.__i]
                }
                return W.deserializeProperty(f, y, b)
            },
            setDefaultCursor: function(P, O) {
                this._defaultCursor = P, O !== !1 && this.setCursor(P)
            },
            getCurrentConnectActionType: function() {
                return this._currentActionType
            },
            setCurrentConnectActionType: function(h) {
                return h === Y || z.getConnectAction(null, h) ? (this._currentActionType = h, this.redraw(), !0) : !1
            },
            getEditStyle: function(B) {
                var F = this.getEditInteractor();
                return F ? F.getStyle(B) : O
            },
            setEditStyle: function(I, u, $) {
                var X = this.getEditInteractor();
                return X ? (X.setStyle(I, u, $), !0) : !1
            },
            isConnectActionVisible: function(p) {
                var u = z.getConnectAction(this);
                if (!u) return !1;
                var S = u.visible;
                return Ap(S) && (S = S(this, p)), S
            },
            isInteractive: function(F) {
                if (this._drawForChecking) return !1;
                var _ = Di(this.getImage(F));
                return _ && Kg(_.interactive, F, this) ? !0 : F.s("interactive")
            },
            getRenderingStyleIconName: function() {
                return Zc
            },
            appendHTML: function(M, e) {
                var p = this.getView();
                if (!(e || M && M.parentNode !== p)) return !1;
                var j = M.getView && M.getView(),
                    y = M.beforeCanvas;
                if (!e && j && j.parentNode === p) return !1;
                (M.getView || M.isSelfViewEvent) && (M = M.getView());
                var J = this.getEditInteractor();
                return y ? p.insertBefore(M, this.getCanvas()) : J && J._canvas ? p.insertBefore(M, J._canvas) : this.isScrollBarVisible() ? p.insertBefore(M, this.getView().lastChild) : xb(p, M), !0
            },
            _layoutHTMLImpl: function(C, S, i) {
                if (arguments.length > 1) {
                    var v, o = this,
                        F = o._zoom;
                    if (S.getView && (v = S, S = S.getView()), S.style.position = "absolute", i) {
                        var m = C.getRect();
                        Bh(v || S, o.tx() + m.x * F, o.ty() + m.y * F, m.width * F, m.height * F)
                    } else {
                        var k = new Bl,
                            m = C.getAnchorRect(),
                            Y = C.getPosition(),
                            f = C.getScale(),
                            P = S.style;
                        Bh(v || S, m), k.appendTranslate(o.tx(), o.ty()), k.appendScale(F, F), k.append(new Bl(C.getRotation(), Y.x, Y.y, f.x, f.y)), ad(P, "transform", "matrix(" + k.a.toFixed(5) + ", " + k.b.toFixed(5) + ", " + k.c.toFixed(5) + ",\n    " + k.d.toFixed(5) + ", " + k.tx.toFixed(5) + ", " + k.ty.toFixed(5) + ")"), ad(P, "transformOrigin", (-m.x).toFixed(5) + "px " + (-m.y).toFixed(5) + "px"), S.updateAppendMatrix = !0
                    }
                } else this._layoutHTML && this._layoutHTML()
            },
            getTextEditInfo: function(b) {
                return b instanceof Bm ? {
                    name: "text",
                    accessType: "s",
                    isMultiline: !0
                } : void 0
            },
            getState: function(n) {
                var Z = "state",
                    D = n.s(Z);
                if (D) return D;
                var $ = Di(n._image);
                return $ ? Kg($[Z], n, this) || null : void 0
            },
            getShape: function(t) {
                return t.getStyle(Cd)
            }
        }), G.defineProperties(vj.GraphView.prototype, {
            layoutHTML: {
                get: function() {
                    return this._layoutHTMLImplBind || (this._layoutHTMLImplBind = this._layoutHTMLImpl.bind(this)), this._layoutHTMLImplBind
                },
                set: function(h) {
                    this._layoutHTML = h
                }
            }
        });
        var Nf = function(q, h) {
                var I = this;
                I.gv = q, I.s = function(L) {
                    return h.getStyle(L)
                }, I._data = h, I._87I = new no
            },
            Zc = Y;
        Wj(Nf, G, {
            _6I: Y,
            ms_icons: 1,
            _84o: function() {},
            dispose: function() {},
            isShadowed: function() {
                return this.s("shadow") || this.gv.isSelected(this._data) && "shadow" === this.s("select.type")
            },
            getSelectWidth: function() {
                var k = this,
                    V = k.gv.isSelected(k._data);
                return !V || k.isShadowed() ? 0 : k.gv.getSelectWidth(k._data)
            },
            getSelectColor: function() {
                return this.gv.getSelectColor(this._data)
            },
            getBodyColor: function(x) {
                var I = this._data,
                    K = this.gv.getBodyColor(I);
                return K ? K : x ? I.getStyle(x) : Y
            },
            _2Q: function(G) {
                return this.s(G)
            },
            _1Q: function(E, D, v, X) {
                var I = this.s,
                    s = I("2d.gray"),
                    r = I(D + ".dash.color");
                if (s && (r = z.toGrayColor(r)), E.strokeStyle = r, E.lineWidth = v, E.stroke(), I(D + ".dash.3d")) {
                    var F = I(D + ".dash.3d.color");
                    Vr(E, r, s ? z.toGrayColor(F) : F, v, this.gv._zoom, I(D + ".dash.3d.accuracy"))
                }
                Xe(E, X)
            },
            invalidate: function() {
                this._6I = Y
            },
            _79o: function() {
                var q = this;
                if (!q._6I) {
                    var E = q._data,
                        H = q.gv;
                    q.labelInfo = q.label2Info = q.noteInfo = q.note2Info = q._38o = Y, q._87I.clear(), q.interactiveInfo = H.isInteractive(E) ? {} : Y, q._3O(), q._55O = H.isEditable(E) ? {
                        _42O: H.isRectEditable(E),
                        _43O: H.isPointEditable(E),
                        _56O: H.isRotationEditable(E)
                    } : Y, q._6I = q._81o()
                }
                return q._6I
            },
            _3O: function() {},
            getPosition: function() {
                return yf
            },
            _68o: function(z, f) {
                z && this._87I.add(wd(z, f))
            },
            _81o: function() {
                var c = this,
                    k = c.s;
                c._24O(pd, "getLabel"), c._24O(oc, "getLabel2"), c._26O(qf, "getNote"), c._26O(mk, "getNote2"), c._15O(), c._55O && c._48O();
                var y;
                if (c._87I.each(function(P) {
                        y = Ek(y, P)
                    }), y && k("shadow.interactable")) {
                    var v = c.isShadowed(),
                        G = k("shadow2"),
                        T = Vm(y);
                    G ? (T.x += k("shadow2.offset.x"), T.y += k("shadow2.offset.y"), Um(T, k("shadow2.blur"))) : v && (T.x += k("shadow.offset.x"), T.y += k("shadow.offset.y"), Um(T, k("shadow.blur"))), y = Ek(y, T)
                }
                return c._87I.clear(), y
            },
            _42: function(w) {
                var K = this,
                    R = K._data,
                    g = K.gv,
                    q = K.s,
                    b = q("opacity"),
                    v = this.isShadowed(),
                    O = q("shadow2");
                if (v || O) {
                    var e = w.shadowOffsetX,
                        G = w.shadowOffsetY,
                        m = w.shadowBlur,
                        H = w.shadowColor,
                        S = g.getZoom() * z.devicePixelRatio,
                        F = v ? "shadow" : "shadow2";
                    w.shadowOffsetX = q(F + ".offset.x") * S, w.shadowOffsetY = q(F + ".offset.y") * S, w.shadowBlur = q(F + ".blur") * S, w.shadowColor = v ? K.getSelectColor() : q(F + ".color")
                }
                if (b != Y) {
                    var $ = w.globalAlpha;
                    w.globalAlpha = b
                }
                K._80o(w), g.isLabelVisible(R) && ((!g._drawForChecking || q("label.selectable")) && Sm(w, K.labelInfo), (!g._drawForChecking || q("label2.selectable")) && Sm(w, K.label2Info)), g.isNoteVisible(R) && (ok(w, K.noteInfo), ok(w, K.note2Info)), K._99O(w), b != Y && (w.globalAlpha = $), (v || O) && (w.shadowOffsetX = e, w.shadowOffsetY = G, w.shadowBlur = m, w.shadowColor = H)
            },
            _80o: function() {},
            _47O: function() {},
            _24O: function(x, V) {
                var F = this,
                    m = F._data,
                    f = F.gv,
                    e = F.s,
                    J = f[V](m);
                if (J != Y) {
                    var $ = e(x + ".scale"),
                        E = e(x + ".max"),
                        t = e(x + ".position"),
                        R = F[x + "Info"] = {
                            label: J,
                            scale: $,
                            color: f[V + "Color"](m),
                            font: e(x + ".font"),
                            opacity: e(x + ".opacity"),
                            align: e(x + ".align"),
                            decoration: e(x + ".decoration"),
                            rotation: F.getRotation(e(x + ".rotation"), !1, t),
                            background: f[V + "Background"](m)
                        },
                        B = nn(R, J);
                    E > 0 && E < B.width && (R.labelWidth = B.width, B.width = E), 1 !== $ && (B.width *= $, B.height *= $);
                    var L = F.getPosition(t, e(x + ".offset.x"), e(x + ".offset.y"), B, e(x + ".position.fixed"));
                    if (B.x = L.x - B.width / 2, B.y = L.y - B.height / 2, F._68o(R.rect = B, R.rotation), 1 !== $) {
                        var H = B.width / $,
                            _ = B.height / $;
                        R.rect = {
                            x: L.x - H / 2,
                            y: L.y - _ / 2,
                            width: H,
                            height: _
                        }
                    }
                }
            },
            _26O: function(V, O) {
                var m = this,
                    w = m.gv,
                    l = m._data,
                    I = m.s,
                    N = w[O](l);
                if (N != Y) {
                    var g, b, t = I(V + ".scale"),
                        C = m[V + "Info"] = {
                            note: N,
                            scale: t,
                            data: l,
                            view: w,
                            expanded: I(V + ".expanded"),
                            font: I(V + ".font"),
                            color: I(V + ".color"),
                            opacity: I(V + ".opacity"),
                            align: I(V + ".align"),
                            icon: I(V + ".icon"),
                            backgroundImage: I(V + ".backgroundImage"),
                            borderWidth: I(V + ".border.width"),
                            borderColor: I(V + ".border.color"),
                            background: w[O + "Background"](l)
                        },
                        B = m.getPosition(I(V + ".position"), I(V + ".offset.x"), I(V + ".offset.y")),
                        d = B.x,
                        F = B.y;
                    if (C.expanded) {
                        var M, e = I(V + ".max"),
                            n = I(V + ".backgroundImage");
                        n ? (n = Di(n), M = {
                            width: ps(n, l),
                            height: hh(n, l)
                        }) : M = nn(C, N), M.width += 6, M.height += 2, e > 0 && e < M.width && (C.labelWidth = M.width, M.width = e), g = M.width, b = M.height + 8, C.clickRect = {
                            x: d - g * t / 2,
                            y: F - b * t,
                            width: g * t,
                            height: b * t * M.height / b
                        }
                    } else {
                        var o = I(V + ".icon");
                        o ? (o = Di(o), g = ps(o, l), b = hh(o, l)) : (g = 12, b = 18), C.clickRect = {
                            x: d - g * t / 2,
                            y: F - b * t,
                            width: g * t,
                            height: b * t
                        }
                    }
                    C.rect = {
                        x: d - g / 2,
                        y: F - b * t / 2 - b / 2,
                        width: g,
                        height: b
                    };
                    var h = $(C.borderWidth / 2) * t;
                    m._68o({
                        x: d - g * t / 2 - h,
                        y: F - b * t - h,
                        width: g * t + 2 * h,
                        height: b * t + 2 * h
                    })
                }
            },
            _48O: function() {},
            _99O: function(q) {
                var C = this,
                    t = C._38o;
                if (t) {
                    var G = C.gv,
                        L = C._data,
                        O = t.icons,
                        d = C.interactiveInfo;
                    d && (d._38o = {});
                    for (var u in O) {
                        var M = O[u],
                            P = t.rects[u];
                        if (P) {
                            d && (d._38o[u] = []);
                            var m = Kg(M.opacity, L, G),
                                b = Kg(M.names, L, G),
                                s = b ? b.length : 0,
                                A = P.rotation;
                            if (m != Y) {
                                var R = q.globalAlpha;
                                q.globalAlpha *= m
                            }
                            for (var S = 0; s > S; S++) {
                                var k = b[S],
                                    h = Di(k),
                                    g = P[S];
                                if (A) {
                                    var n = g.x + g.width / 2,
                                        V = g.y + g.height / 2;
                                    q.save(), uk(q, n, V), rf(q, A), uk(q, -n, -V)
                                }
                                d && d._38o[u].push(q.interactiveInfo = {
                                    compInfos: [],
                                    matrix: A ? new Bl(A, n, V).appendTranslate(-n, -V) : new Bl
                                });
                                var l = Zc;
                                Zc = u, Iq(q, h, Kg(M.stretch, L, G), g.x, g.y, g.width, g.height, C._data, C.gv), Zc = l, q.interactiveInfo = Y, A && q.restore()
                            }
                            m != Y && (q.globalAlpha = R)
                        }
                    }
                }
            }
        });
        var Bd = function(N, b) {
            ip(Bd, this, [N, b])
        };
        Wj(Bd, Nf, {
            _checkEmptyRect: !0,
            _40O: function(Q, S) {
                var A = this,
                    m = A.s,
                    b = Q.rect;
                (Q.borderColor = A.gv.getBorderColor(A._data)) && (Q.borderType = m("border.type"), Q.borderWidth = m("border.width"), Q.borderPadding = m("border.padding"), S = q(S, Q.borderPadding + Q.borderWidth / 2));
                var C = A._data.getScale(),
                    l = q(1, q(r(C.x), r(C.y)));
                if (Q.selectWidth = A.getSelectWidth()) {
                    var W = A.gv._zoom;
                    Q.selectType = m("select.type"), Q._97o = A.getSelectColor(), Q.selectPadding = m("select.padding"), S = q(S, (Q.selectPadding + Q.selectWidth / 2 / W) / l)
                }
                S > 0 && (S *= l, b = Vm(b), Um(b, S)), A._68o(b)
            },
            _39O: function(t, D) {
                var E, l = this,
                    _ = D.rect;
                if (D.borderWidth > 0 && (E = D.borderPadding, t.strokeStyle = D.borderColor, t.lineWidth = D.borderWidth, jq(t, D.borderType, {
                        x: _.x - E,
                        y: _.y - E,
                        width: _.width + 2 * E,
                        height: _.height + 2 * E
                    }), t.stroke()), D.selectWidth > 0) {
                    var J = l.gv._zoom;
                    if (E = D.selectPadding, t.strokeStyle = D._97o, t.lineWidth = D.selectWidth / J, D.rotation != Y) {
                        t.save(), t.translate(D.position.x, D.position.y), t.rotate(D.rotation);
                        var Z = l._data,
                            v = Z.getWidth(),
                            F = Z.getHeight(),
                            d = D.scale,
                            j = D.anchor;
                        _ = {
                            x: d.x * -v * j.x,
                            y: d.y * -F * j.y,
                            width: d.x * v,
                            height: d.y * F
                        }
                    }
                    jq(t, D.selectType, {
                        x: _.x - E,
                        y: _.y - E,
                        width: _.width + 2 * E,
                        height: _.height + 2 * E
                    }), D.rotation != Y && t.restore(), t.stroke()
                }
            },
            dispose: function() {
                var g = this,
                    F = g._htmlView;
                Bd.superClass.dispose.call(g), F && (F.onHTMLRemoved && F.onHTMLRemoved(), Fi(F))
            },
            _3O: function() {
                var g, H = this,
                    $ = H.s,
                    G = H._data,
                    c = H.gv,
                    e = c.getShape(G),
                    y = H.getBodyColor(),
                    b = $("shape.border.color"),
                    x = H._83o = e ? {
                        shape: e,
                        _53o: H.getBodyColor("shape.background"),
                        _27Q: Di($("shape.repeat.image"), y),
                        shapeGradientPack: $("shape.gradient.pack"),
                        shapeBorderGradientPack: $("shape.border.gradient.pack"),
                        _54o: $("shape.border.width"),
                        _55o: b,
                        shapeBorderRepeatImage: Di($("shape.border.repeat.image"), b),
                        _56o: $("shape.border.3d"),
                        _57o: $("shape.border.3d.color"),
                        _58o: $("shape.border.3d.accuracy"),
                        shapeGradient: $("shape.gradient"),
                        _59o: $("shape.gradient.color"),
                        _60o: $("shape.border.pattern"),
                        _61o: $("shape.border.cap"),
                        _62o: $("shape.border.join"),
                        shapeForeground: $("shape.foreground"),
                        bodyColor: y,
                        gray: $("2d.gray")
                    } : {
                        img: Di(c.getImage(G), y),
                        bodyColor: y,
                        gray: $("2d.gray"),
                        stretch: $("image.stretch")
                    },
                    Z = x.img;
                Z && Z.renderHTML ? (H._htmlInfo && H._htmlInfo.img !== Z && (H._htmlInfo = Y), H._htmlInfo || (H._htmlInfo = {
                    img: Z,
                    cache: {}
                }), g = Z.renderHTML(G, c, H._htmlInfo.cache)) : H._htmlInfo = Y, H._htmlView && H._htmlView !== g && (H._htmlView.onHTMLRemoved && H._htmlView.onHTMLRemoved(), Fi(H._htmlView.getView ? H._htmlView.getView() : H._htmlView)), (H._htmlView = g) && c.appendHTML(g) && (g.onHTMLAddedSync && g.onHTMLAddedSync(), g.onHTMLAdded && jf(g.onHTMLAdded)), x.rect = G.getRect(), x.position = G.p(), x.scale = G.getScale(), x.anchor = G.getAnchor(), x.rotation = G.getRotation(), e === Eh && (x._63o = $("shape.depth"));
                var i = 0;
                if (e) i = Mh(Y, x._54o / 2, x._62o), H.s("shape.dash") && (i = q(i, (H.s("shape.dash.width") || x._54o) / 2));
                else if (Z && Z.boundExtend)
                    if (i = Kg(Z.boundExtend, G, c), Z.boundExtendAbsolute) {
                        var U = G.getScale();
                        i /= c._zoom * q(1, q(r(U.x), r(U.y)))
                    } else if (!Kg(Z.fitSize, G, c)) {
                    var S = Kg(Z.width, G, c),
                        I = Kg(Z.height, G, c);
                    i *= q(G.getWidth() / S, G.getHeight() / I)
                }
                H._40O(x, i);
                var m = $("clip.percentage");
                if (m != O && (x.clipRect = $d(G.getAnchorRect(), $("clip.direction"), m)), e) {
                    var J = $("shape.fill.clip.percentage");
                    J != O && (x.shapeClipRect = $d(G.getAnchorRect(), $("shape.fill.clip.direction"), J));
                    var t = $("shape.foreground.clip.percentage");
                    t != O && (x.shapeForegroundClipRect = $d(G.getAnchorRect(), $("shape.foreground.clip.direction"), t))
                }
            },
            getPosition: function(g, T, j, F) {
                var $ = Mj(g, this._83o.rect, F);
                return $.x += T, $.y += j, $
            },
            _80o: function(Z) {
                var v = this,
                    R = v.s,
                    y = v.gv,
                    H = v._data,
                    A = v._83o,
                    t = A.rect,
                    e = A.position,
                    I = A.rotation,
                    f = A.anchor,
                    a = A.scale,
                    X = A.shape,
                    Q = A.clipRect;
                if (!v._checkEmptyRect || t.width > 0 && t.height > 0) {
                    var r = H.getSize();
                    if (r.x = -r.width * f.x, r.y = -r.height * f.y, Bo && !id && uk(Z, r.width, r.height), Z.save(), uk(Z, e.x, e.y), rf(Z, I), Oc(Z, a.x, a.y), Q && (Z.beginPath(), Z.rect(Q.x, Q.y, Q.width, Q.height), Z.clip()), y._drawForChecking && A.img && Kg(A.img.pixelPerfect, H, y) === !1) or(Z, r.x, r.y, r.width, r.height, "#888888");
                    else if (v.freeDraw) v.freeDraw(Z, r, A);
                    else if (X) {
                        var l, c, M, g, P = A._60o,
                            K = Sg(Z, P),
                            S = A._27Q,
                            W = A._54o,
                            o = A.shapeGradientPack,
                            j = A.gray,
                            L = Z.lineJoin,
                            O = Z.lineCap,
                            s = function(y) {
                                return j ? z.toGrayColor(y) : y
                            };
                        "roundRect" === X ? l = R("shape.corner.radius") : "polygon" === X ? (l = R("shape.polygon.side"), c = R("shape.corner.radius")) : "arc" === X && (l = R("shape.arc.from"), c = R("shape.arc.to"), M = R("shape.arc.close"), g = R("shape.arc.oval")), Z.lineJoin = A._62o, Z.lineCap = A._61o;
                        var w = s(A._53o);
                        if (w || S || o) {
                            var h = A.shapeClipRect;
                            h && (Z.save(), Z.beginPath(), Z.rect(h.x, h.y, h.width, h.height), Z.clip()), jq(Z, X, r, l, c, M, g), o ? oq(Z, o, function(h) {
                                return Fl(h, A.bodyColor)
                            }, !1, r) : S ? bl(Z, S, s(A.bodyColor), null, H, y) : Fo(Z, w, A.shapeGradient, s(A._59o), r), Z.fill(), o && Z.restore(), h && Z.restore(), Z !== K && jq(K, X, r, l, c, M, g)
                        } else jq(K, X, r, l, c, M, g);
                        var x = A.shapeForeground;
                        if (x) {
                            Z.save();
                            var m = A.shapeForegroundClipRect;
                            m && (Z.beginPath(), Z.rect(m.x, m.y, m.width, m.height), Z.clip()), jq(Z, X, r, l, c, M, g), Fo(Z, x, R("shape.foreground.gradient"), s(R("shape.foreground.gradient.color")), r), Z.fill(), Z.restore()
                        }
                        if (W > 0) {
                            var U = R("shape.border.width.absolute");
                            U && (Z.save(), Z.setTransform(1, 0, 0, 1, 0, 0)), Z.lineWidth = W;
                            var C = s(A._55o),
                                N = A.shapeBorderGradientPack;
                            N ? oq(Z, N, s, !0, r) : A.shapeBorderRepeatImage ? Ui(Z, A.shapeBorderRepeatImage, C, null, H, y) : Z.strokeStyle = C, Z.stroke(), N && Z.restore(), U && Z.restore(), A._56o && Vr(Z, C, s(A._57o), W, y._zoom, A._58o)
                        }
                        if (Xe(Z, P), R("shape.dash")) {
                            var F = R("shape.dash.width") || W;
                            if (F > 0) {
                                P = R("shape.dash.pattern");
                                var K = Sg(Z, P, v._2Q("shape.dash.offset"));
                                K !== Z && jq(K, X, r, l, c, M, g), v._1Q(Z, "shape", F, P)
                            }
                        }
                        bg(Z, w, A._63o, r), Z.lineJoin = L, Z.lineCap = O
                    } else {
                        var q = v.interactiveInfo;
                        q && (Z.interactiveInfo = q.bodyInfo = {
                            compInfos: [],
                            matrix: new Bl(I, e.x, e.y, a.x, a.y)
                        }), A.gray && (Z.compGray = !0);
                        var E = A.img;
                        E && E.cacheRule != Y && (E = eh(Z, E, A.stretch, r.width, r.height, H, y, A.bodyColor)), Iq(Z, E, A.stretch, r.x, r.y, r.width, r.height, H, y, A.bodyColor), Z.compGray = !1, Z.interactiveInfo = Y
                    }
                    Z.restore()
                }
                v._39O(Z, A)
            },
            _48O: function() {},
            _47O: function() {}
        });
        var wh = function(R, v) {
                ip(wh, this, [R, v])
            },
            aj = function(V, c, l, F) {
                var U = cm(V, c);
                return l = F ? h(l, U) : Cc(l, U), U ? l /= U : l = 0, {
                    x: V.x + (c.x - V.x) * l,
                    y: V.y + (c.y - V.y) * l
                }
            };
        Wj(wh, Nf, {
            _3O: function() {
                var A, b = this,
                    Q = b._data,
                    B = b.gv,
                    P = b.s,
                    w = P(tk),
                    x = Q.isLooped(),
                    J = P("edge.width"),
                    T = b.getBodyColor("edge.color"),
                    N = P("edge.center"),
                    I = P("edge.offset"),
                    t = B.getBorderColor(Q),
                    L = t ? P("border.width") : 0,
                    k = b.getSelectWidth(),
                    X = Q._40I,
                    y = Q._41I,
                    h = b._78o = X && y ? {
                        looped: x,
                        type: w,
                        width: J,
                        center: N,
                        color: T,
                        repeatImage: Di(P("edge.repeat.image"), T),
                        borderColor: t,
                        borderWidth: L,
                        _97o: k ? b.getSelectColor() : Y,
                        selectWidth: k,
                        pattern: P("edge.pattern"),
                        cap: P("edge.cap"),
                        join: P("edge.join"),
                        is3d: P("edge.3d"),
                        _67o: P("edge.3d.color"),
                        _66o: P("edge.3d.accuracy"),
                        gray: P("2d.gray")
                    } : Y;
                if (h) {
                    var c = z.getEdgeType(w);
                    if (c) {
                        var d = c(Q, Zb(b, B, Q, x, w), B, b._19Q);
                        d.points && d.points.size() > 1 ? (h.edgeTypeInfo = d, A = Ah(h.edgeTypeInfo.points)) : d[qi] && d.rect && (h.edgeTypeInfo = d, A = d.rect)
                    } else {
                        var v = P("edge.source.anchor.x"),
                            E = P("edge.source.anchor.y"),
                            u = P("edge.target.anchor.x"),
                            F = P("edge.target.anchor.y"),
                            M = js(B, Q, "source"),
                            R = js(B, Q, "target");
                        if (w === Wq) {
                            var g = h.points = P($j) || vg,
                                H = g.size();
                            h.segments = P("edge.segments");
                            var o = v !== O || E !== O || Em(X),
                                Z = u !== O || F !== O || Em(y);
                            if (!N)
                                if (I) o || (M = aj(M, H ? g.get(0) : R, I, H)), Z || (R = aj(R, H ? g.get(H - 1) : M, I, H));
                                else {
                                    var s;
                                    o || (s = hm(M, H ? g.get(0) : R, Hm(B, X)), s && (M = {
                                        x: s[0],
                                        y: s[1]
                                    })), Z || (s = hm(H ? g.get(H - 1) : M, R, Hm(B, y)), s && (R = {
                                        x: s[0],
                                        y: s[1]
                                    }))
                                }
                            A = Ek(Ah(h.points), Ah(M, R))
                        } else {
                            var W = Zb(b, B, Q, x, w);
                            if (b._19Q || (W = -W), x) M = Vm(M), M.x = B.getNodeRect(X).x, h.radius = W, A = {
                                x: M.x - W,
                                y: M.y - W,
                                width: 2 * W,
                                height: 2 * W
                            };
                            else {
                                var m = cm(M, R),
                                    e = Cc(I, m),
                                    S = {
                                        x: e,
                                        y: W
                                    },
                                    G = {
                                        x: m - e,
                                        y: W
                                    },
                                    r = di(R.y - M.y, R.x - M.x),
                                    $ = h.mat = new fs(r);
                                if (h.orienAngle = r, h.angle = R.x < M.x ? r + f : r, h.rect = {
                                        x: S.x,
                                        y: S.y,
                                        width: G.x - S.x,
                                        height: 0
                                    }, h.origin = M, S = $.tf(S), S.x += M.x, S.y += M.y, G = $.tf(G), G.x += M.x, G.y += M.y, N) {
                                    var U = {
                                        x: m,
                                        y: 0
                                    };
                                    U = $.tf(U), U.x += M.x, U.y += M.y, A = Ah([M, S, G, U]), h.c1 = M, h.c2 = U
                                } else A = Ah(S, G);
                                M = S, R = G
                            }
                        }
                        h.sourcePoint = M, h.targetPoint = R, Q._lastSourcePoint = M, Q._lastTargetPoint = R
                    }
                    var p = 0;
                    P("edge.dash") && (p = P("edge.dash.width") || J);
                    var _ = "square" === h.cap ? .71 : .5;
                    Mh(A, q(p * _, J * _ + L + k), h.join), b._68o(A)
                }
            },
            getRotation: function(U, e, _) {
                U = U || 0;
                var c = this._78o;
                if (c) {
                    var O, b = c.angle,
                        u = c.points,
                        N = c.edgeTypeInfo;
                    if (b != Y) return e ? c.orienAngle + U : b + U;
                    if (N && N[qi]) return N.getRotation ? N.getRotation(this, U, e, _) : 0;
                    if (N && N.points) {
                        var o = N.points;
                        return O = o.size(), qq[_] ? O && 0 === O % 2 ? dk(o.get(O / 2 - 1), o.get(O / 2), e, U) : U : te[_] ? dk(o.get(0), o.get(1), e, U) : dk(o.get(O - 2), o.get(O - 1), e, U)
                    }
                    if (u) {
                        var B = u.toArray();
                        return B.unshift(c.sourcePoint), B.push(c.targetPoint), u = new no(B), O = u.size(), qq[_] ? O && 0 === O % 2 ? dk(u.get(O / 2 - 1), u.get(O / 2), e, U) : U : te[_] ? dk(c.sourcePoint, O ? u.get(0) : c.targetPoint, e, U) : dk(O ? u.get(O - 1) : c.sourcePoint, c.targetPoint, e, U)
                    }
                }
                return U
            },
            getPosition: function(U, h, E, K, V) {
                var i = this._78o;
                if (i) {
                    var p, B = i.type,
                        G = i.points,
                        L = i.edgeTypeInfo,
                        r = i.sourcePoint,
                        z = i.targetPoint;
                    if (!B) return i.looped ? {
                        x: r.x - i.radius + h,
                        y: r.y + E
                    } : (V && r && z && (r.x > z.x || r.x === z.x && r.y > z.y) && (U = Yr[U], E = -E), p = Mj(U, i.rect, K), p.x += h, p.y += E, p = i.mat.tf(p), p.x += i.origin.x, p.y += i.origin.y, p);
                    if (L && L[qi]) return L.getPosition ? L.getPosition(this, U, h, E, K, V) : {
                        x: (r.x + z.x) / 2,
                        y: (r.y + z.y) / 2
                    };
                    if (G) {
                        var p, y = G.size();
                        if (qq[U]) {
                            if (y) {
                                var Q = y % 2;
                                if (0 === Q) return Of(G.get(y / 2 - 1), G.get(y / 2), U, h, E, K, V);
                                p = G.get((y - Q) / 2)
                            } else p = {
                                x: (r.x + z.x) / 2,
                                y: (r.y + z.y) / 2
                            };
                            return p = Mj(U, {
                                x: p.x,
                                y: p.y,
                                width: 0,
                                height: 0
                            }, K), p.x += h, p.y += E, p
                        }
                        return te[U] ? Of(r, y ? G.get(0) : z, U, h, E, K, V) : Of(y ? G.get(y - 1) : r, z, U, h, E, K, V)
                    }
                    if (L) {
                        var M = L.points,
                            y = M.size();
                        if (qq[U]) {
                            var Q = y % 2;
                            return 0 === Q ? Of(M.get(y / 2 - 1), M.get(y / 2), U, h, E, K, V) : (p = M.get((y - Q) / 2), p = Mj(U, {
                                x: p.x,
                                y: p.y,
                                width: 0,
                                height: 0
                            }, K), p.x += h, p.y += E, p)
                        }
                        return te[U] ? Of(M.get(0), M.get(1), U, h, E, K, V) : Of(M.get(y - 2), M.get(y - 1), U, h, E, K, V)
                    }
                }
                return yf
            },
            _42: function(k) {
                this._78o && wh.superClass._42.call(this, k)
            },
            drawPath: function(Z, M) {
                Z.beginPath();
                var H = M.type,
                    g = M.points,
                    D = M.segments,
                    z = M.edgeTypeInfo;
                if (!H || g) {
                    var F = M.sourcePoint,
                        h = F.x,
                        B = F.y,
                        j = M.targetPoint,
                        o = j.x,
                        l = j.y;
                    if (H)
                        if (D) {
                            var A = new no({
                                x: h,
                                y: B
                            });
                            A.addAll(g), A.add({
                                x: o,
                                y: l
                            }), Am(Z, A, D)
                        } else Z.moveTo(h, B), g.each(function(b) {
                            Z.lineTo(b.x, b.y)
                        }), Z.lineTo(o, l);
                    else M.looped ? Z.arc(h, B, M.radius, 0, U, !0) : M.center ? (Z.moveTo(M.c1.x, M.c1.y), Z.lineTo(h, B), Z.lineTo(o, l), Z.lineTo(M.c2.x, M.c2.y)) : (Z.moveTo(h, B), Z.lineTo(o, l))
                } else z && (z.points ? Am(Z, z.points, z.segments) : z[qi] && z[qi](Z, z))
            },
            _80o: function(M) {
                var W = this,
                    v = W.s,
                    C = W._78o,
                    G = C.width,
                    I = C.selectWidth,
                    y = C.borderWidth,
                    i = C.repeatImage,
                    X = M.lineJoin,
                    q = M.lineCap,
                    g = C.gray,
                    H = C.pattern;
                M.lineJoin = C.join, M.lineCap = C.cap, W.drawPath(Sg(M, H), C);
                var r = v("edge.width.absolute");
                r && (M.save(), M.setTransform(1, 0, 0, 1, 0, 0)), I && (M.strokeStyle = C._97o, M.lineWidth = G + 2 * (y + I), M.stroke()), y && (M.strokeStyle = g ? z.toGrayColor(C.borderColor) : C.borderColor, M.lineWidth = G + 2 * y, M.stroke());
                var h = g ? z.toGrayColor(C.color) : C.color;
                if (i ? Ui(M, i, h, null, W._data, W.gv) : M.strokeStyle = h, M.lineWidth = G, M.stroke(), C.is3d) {
                    var V = g ? z.toGrayColor(C._67o) : C._67o;
                    Vr(M, h, V, G, W.gv._zoom, C._66o)
                }
                if (Xe(M, H), v("edge.dash")) {
                    H = v("edge.dash.pattern");
                    var u = Sg(M, H, W._2Q("edge.dash.offset"));
                    u !== M && W.drawPath(u, C), W._1Q(M, "edge", v("edge.dash.width") || G, H)
                }
                r && M.restore(), M.lineJoin = X, M.lineCap = q
            },
            _48O: function() {},
            _47O: function() {}
        });
        var ve = function(F, b) {
            ip(ve, this, [F, b])
        };
        Wj(ve, Bd, {
            _3O: function() {
                var n, W, H = this,
                    Q = H.s,
                    s = H._data,
                    f = H.gv;
                if (H._88I = Y, s.isExpanded() && s.eachChild(function(c) {
                        if (Mk(c)) {
                            var J = f.getBoundsForGroup(c);
                            J && (W || (W = []), W.push(J), n = Ek(n, J))
                        }
                    }), n) {
                    var c = f.getLabel(s),
                        B = Q("group.type"),
                        L = Q("group.border.width") || 0,
                        E = Q("group.border.width.absolute"),
                        z = L / 2;
                    E && (L /= f._zoom), n = uf(B, W, n), Nh(n, s, "group.padding", 1), Um(n, L);
                    var e = H._88I = {
                        type: B,
                        rect: n,
                        _64o: n
                    };
                    if (!B && c != Y) {
                        var _, a = H.labelInfo = {
                                label: c,
                                color: Q("group.title.color"),
                                font: Q("group.title.font"),
                                align: Q("group.title.align")
                            },
                            S = nn(a, c),
                            d = S.width + L,
                            O = S.height + L,
                            V = Q("group.title.align"),
                            T = Q("group.title.orientation");
                        if (T === vi || T === Ei ? (n.height += L, d > n.width && (n.width = d)) : (T === _i || T === rj) && (n.width += L, d > n.height && (n.height = d)), _ = V === _i ? n.x : V === rj ? n.x + n.width - d : n.x + n.width / 2 - d / 2, T === Ei) e.titleRect = {
                            x: n.x,
                            y: n.y + n.height,
                            width: n.width,
                            height: O
                        }, e.rect = {
                            x: n.x,
                            y: n.y,
                            width: n.width,
                            height: n.height + O
                        }, a.rect = {
                            x: _,
                            y: n.y + n.height,
                            width: d,
                            height: O
                        };
                        else if (T === _i) {
                            var P = e.titleRect = {
                                x: n.x - O,
                                y: n.y,
                                width: O,
                                height: n.height
                            };
                            e.rect = {
                                x: n.x - O,
                                y: n.y,
                                width: n.width + O,
                                height: n.height
                            }, a.rect = {
                                x: P.x + O / 2 - n.height / 2,
                                y: P.y + n.height / 2 - O / 2,
                                width: n.height,
                                height: O
                            }, a.rotation = -Math.PI / 2
                        } else if (T === rj) {
                            var P = e.titleRect = {
                                x: n.x + n.width,
                                y: n.y,
                                width: O,
                                height: n.height
                            };
                            e.rect = {
                                x: n.x,
                                y: n.y,
                                width: n.width + O,
                                height: n.height
                            }, a.rect = {
                                x: P.x + O / 2 - n.height / 2,
                                y: P.y + n.height / 2 - O / 2,
                                width: n.height,
                                height: O
                            }, a.rotation = Math.PI / 2
                        } else e.titleRect = {
                            x: n.x,
                            y: n.y - O,
                            width: n.width,
                            height: O
                        }, e.rect = {
                            x: n.x,
                            y: n.y - O,
                            width: n.width,
                            height: n.height + O
                        }, a.rect = {
                            x: _,
                            y: n.y - O - z,
                            width: d,
                            height: O + L
                        }
                    }
                    H._40O(e, Q("group.border.width") / 2)
                } else ve.superClass._3O.call(H)
            },
            getPosition: function(j, $, o, W) {
                var A = this._88I;
                if (A) {
                    var m = Mj(j, A.rect, W);
                    return m.x += $, m.y += o, m
                }
                return ve.superClass.getPosition.apply(this, arguments)
            },
            _24O: function(M, g) {
                var $ = this._88I;
                (!$ || $.type || "label2" === M) && ve.superClass._24O.call(this, M, g)
            },
            _80o: function(B) {
                var n = this,
                    g = n._88I;
                if (g) {
                    var u = n._data,
                        I = n.s,
                        $ = n.gv,
                        z = g.type,
                        t = g.rect,
                        p = g._64o,
                        e = g.titleRect,
                        i = n.getBodyColor(),
                        x = Di(I("group.image"), i),
                        J = I("group.image.stretch"),
                        o = n.getBodyColor("group.background"),
                        P = Di(I("group.repeat.image"), i),
                        k = I("group.gradient.pack"),
                        K = I("group.gradient"),
                        s = I("group.gradient.color"),
                        W = I("group.border.width"),
                        r = I("group.border.color"),
                        D = I("group.border.pattern"),
                        w = I("group.title.orientation"),
                        V = I("group.depth"),
                        F = I("group.border.radius"),
                        l = I("group.border.join"),
                        O = I("group.border.cap"),
                        A = I("group.border.width.absolute");
                    A && (W /= $._zoom);
                    var h = r,
                        f = I("group.border.repeat.image");
                    if (f && (f = Di(f, r)) && (h = qh(B, f, r, null, u, $)), z) {
                        var T = B.lineJoin,
                            N = B.lineCap;
                        if (B.lineJoin = l, B.lineCap = O, x) {
                            if (B.save(), jq(B, z, t, F), B.clip(), Iq(B, x, J, t.x, t.y, t.width, t.height, u, $, i), B.restore(), W > 0) {
                                var Y = Sg(B, D);
                                jq(Y, z, t, F), B.lineWidth = W, B.strokeStyle = h, B.stroke(), Xe(B, D)
                            }
                        } else {
                            var Y = Sg(B, D);
                            o || P || k ? (jq(B, z, t, F), k ? oq(B, k, function(O) {
                                return Fl(O, i)
                            }, !1, t) : P ? bl(B, P, i, null, u, $) : Fo(B, o, K, s, t), B.fill(), k && B.restore(), B !== Y && jq(Y, z, t, F)) : jq(Y, z, t, F), W > 0 && (B.lineWidth = W, B.strokeStyle = h, B.stroke()), Xe(B, D), z === Eh && bg(B, o, V, t)
                        }
                        B.lineJoin = T, B.lineCap = N
                    } else {
                        var b = I("group.title.background");
                        if ((!F || 0 > F) && (F = 0), x) Iq(B, x, J, p.x, p.y, p.width, p.height, u, $, n.getBodyColor());
                        else if (o || P)
                            if (P ? bl(B, P, i, null, u, $) : Fo(B, o, K, s, p), 0 === W) jq(B, Eh, p), B.fill(), bg(B, o, V, p);
                            else {
                                switch (B.beginPath(), w) {
                                    case Ei:
                                        xf(B, p.x, p.y, p.width, p.height, F, F, 0, 0);
                                        break;
                                    case _i:
                                        xf(B, p.x, p.y, p.width, p.height, 0, F, 0, F);
                                        break;
                                    case rj:
                                        xf(B, p.x, p.y, p.width, p.height, F, 0, F, 0);
                                        break;
                                    case vi:
                                        xf(B, p.x, p.y, p.width, p.height, 0, 0, F, F)
                                }
                                B.fill()
                            }
                        if (e && b)
                            if (0 === W) or(B, e.x, e.y, e.width, e.height, b), bg(B, b, V, e);
                            else {
                                switch (B.beginPath(), B.fillStyle = b, w) {
                                    case Ei:
                                        xf(B, e.x, e.y, e.width, e.height, 0, 0, F, F);
                                        break;
                                    case _i:
                                        xf(B, e.x, e.y, e.width, e.height, F, 0, F, 0);
                                        break;
                                    case rj:
                                        xf(B, e.x, e.y, e.width, e.height, 0, F, 0, F);
                                        break;
                                    case vi:
                                        xf(B, e.x, e.y, e.width, e.height, F, F, 0, 0)
                                }
                                B.fill()
                            }
                        if (W > 0) {
                            var Y = Sg(B, D);
                            if (jq(Y, "roundRect", t, F), B.save(), B.lineWidth = W, B.strokeStyle = h, B.lineJoin = l, B.lineCap = O, B.closePath(), B.stroke(), e && I("group.splitLine")) {
                                var L = e.x,
                                    H = e.y,
                                    X = e.width,
                                    G = e.height;
                                B.beginPath(), w === Ei ? (B.moveTo(L, H), B.lineTo(L + X, H)) : w === _i ? (B.moveTo(L + X, H), B.lineTo(L + X, H + G)) : w === rj ? (B.moveTo(L, H), B.lineTo(L, H + G)) : (B.moveTo(L, H + G), B.lineTo(L + X, H + G))
                            }
                            B.stroke(), B.restore(), Xe(Y, D)
                        }
                    }
                    n._39O(B, g)
                } else ve.superClass._80o.call(n, B)
            }
        });
        var Xq = function(i, A) {
            ip(Xq, this, [i, A])
        };
        Wj(Xq, Bd, {
            _80o: function(U) {
                this._39O(U, this._83o)
            }
        });
        var Ub = function(H, e) {
            ip(Ub, this, [H, e])
        };
        Wj(Ub, Bd, {
            _3O: function() {
                var F = this,
                    K = F._data,
                    C = F.s,
                    u = F.gv,
                    p = K.getPoints(),
                    o = u.getBorderColor(K),
                    T = o ? C("border.width") : 0,
                    x = F.getSelectWidth(),
                    t = C("shape.border.width"),
                    R = K.getRect(),
                    g = K.getAnchorRect(),
                    N = u.getBodyColor(K),
                    _ = C("shape.border.color"),
                    Z = F._99o = p.isEmpty() ? Y : {
                        rect: R,
                        rotation: K.getRotation(),
                        fillRule: C("shape.fill.rule"),
                        scale: K.getScale(),
                        position: K.p(),
                        points: p,
                        segments: K.getSegments(),
                        bodyColor: N,
                        borderColor: o,
                        borderWidth: T,
                        _94o: C("shape.border.3d"),
                        _95o: C("shape.border.3d.color"),
                        _96o: C("shape.border.3d.accuracy"),
                        _97o: x ? F.getSelectColor() : Y,
                        selectWidth: x,
                        _53o: C("shape.background"),
                        _27Q: Di(C("shape.repeat.image"), N),
                        shapeGradientPack: C("shape.gradient.pack"),
                        shapeBorderGradientPack: C("shape.border.gradient.pack"),
                        _54o: t,
                        _55o: _,
                        shapeBorderRepeatImage: Di(C("shape.border.repeat.image"), _),
                        shapeGradient: C("shape.gradient"),
                        _59o: C("shape.gradient.color"),
                        _60o: C("shape.border.pattern"),
                        _61o: C("shape.border.cap"),
                        _62o: C("shape.border.join"),
                        shapeForeground: C("shape.foreground"),
                        gray: C("2d.gray")
                    };
                if (Z) {
                    g.x += Z.position.x, g.y += Z.position.y, Z.gradientRect = g;
                    var J = K.getScale(),
                        n = q(1, q(r(J.x), r(J.y)));
                    C("shape.dash") && C("shape.dash.width") > t && (t = C("shape.dash.width"));
                    var B, A = C("shape.border.width.absolute");
                    B = A ? (t + T + x) / F.gv._zoom / n : t * ("square" === Z._61o ? .71 : .5) + T + x / F.gv._zoom / n, B && (B *= n, R = Vm(R), Mh(R, B, Z._62o)), F._68o(R);
                    var d = C("clip.percentage");
                    d != O && (Z.clipRect = $d(K.getAnchorRect(), C("clip.direction"), d));
                    var v = C("shape.fill.clip.percentage");
                    v != O && (Z.shapeClipRect = $d(K.getAnchorRect(), C("shape.fill.clip.direction"), v));
                    var H = C("shape.foreground.clip.percentage");
                    H != O && (Z.shapeForegroundClipRect = $d(K.getAnchorRect(), C("shape.foreground.clip.direction"), H))
                }
            },
            getPosition: function(n, I, X, s) {
                var i = this._99o;
                if (i) {
                    var z = Mj(n, i.rect, s);
                    return z.x += I, z.y += X, z
                }
                return yf
            },
            _42: function(l) {
                this._99o && Ub.superClass._42.call(this, l)
            },
            _80o: function(v) {
                var D, M = this,
                    S = M.s,
                    O = M._99o,
                    X = O.position,
                    _ = O.scale,
                    T = O.rotation,
                    Q = O.borderWidth,
                    W = O.selectWidth / M.gv._zoom,
                    x = O._27Q,
                    t = O.shapeGradientPack,
                    a = O._54o,
                    f = O.clipRect,
                    p = O.shapeClipRect,
                    $ = O.points,
                    V = O.segments,
                    h = M._data.isClosePath(),
                    P = O.fillRule,
                    R = O.gray,
                    s = function(i) {
                        return R ? z.toGrayColor(i) : i
                    },
                    e = s(O._53o),
                    l = e || x || t;
                v.save(), uk(v, X.x, X.y), rf(v, T), Oc(v, _.x, _.y), f && (v.beginPath(), v.rect(f.x, f.y, f.width, f.height), v.clip()), l && p && (v.save(), v.beginPath(), v.rect(p.x, p.y, p.width, p.height), v.clip()), F.Default.extractShapeTranslation ? ($ = Vm($), $.forEach(function(i) {
                    i.x -= X.x, i.y -= X.y
                })) : uk(v, -X.x, -X.y);
                var w = O._60o,
                    L = Sg(v, w),
                    B = v.lineJoin,
                    K = v.lineCap;
                v.lineJoin = O._62o, v.lineCap = O._61o;
                var G = s(O.bodyColor);
                l ? (Am(v, $, V, h), t ? oq(v, t, function(K) {
                    return Fl(K, O.bodyColor)
                }, !1, O.rect) : x ? bl(v, x, G, null, M._data, M.gv) : (D = G ? G : e, Fo(v, D, O.shapeGradient, s(O._59o), O.gradientRect)), v.fill(P), t && v.restore(), p && (v.restore(), uk(v, -X.x, -X.y)), L !== v && Am(L, $, V, h)) : Am(L, $, V, h);
                var u = O.shapeForeground;
                if (u) {
                    v.save();
                    var k = O.shapeForegroundClipRect;
                    k && (uk(v, X.x, X.y), v.beginPath(), v.rect(k.x, k.y, k.width, k.height), v.clip(), uk(v, -X.x, -X.y)), Am(v, $, V, h), Fo(v, u, S("shape.foreground.gradient"), s(S("shape.foreground.gradient.color")), O.gradientRect), v.fill(P), v.restore()
                }
                var A = S("shape.border.width.absolute");
                if (A && (v.save(), v.setTransform(1, 0, 0, 1, 0, 0)), W && (v.strokeStyle = O._97o, v.lineWidth = a + 2 * (Q + W), v.stroke()), Q && (v.strokeStyle = s(O.borderColor), v.lineWidth = a + 2 * Q, v.stroke()), a) {
                    D = s(O._55o);
                    var g = O.shapeBorderGradientPack;
                    g ? oq(v, g, s, !0, O.rect) : O.shapeBorderRepeatImage ? Ui(v, O.shapeBorderRepeatImage, D, null, M._data, M.gv) : (!e && G && (D = G), v.strokeStyle = D), v.lineWidth = a, v.stroke(), g && v.restore(), O._94o && Vr(v, D, s(O._95o), a, M.gv._zoom, O._96o)
                }
                if (Xe(v, w), S("shape.dash")) {
                    var b = S("shape.dash.width") || a;
                    if (b > 0) {
                        w = S("shape.dash.pattern");
                        var L = Sg(v, w, M._2Q("shape.dash.offset"));
                        L !== v && Am(L, $, V, h), M._1Q(v, "shape", b, w)
                    }
                }
                A && v.restore(), v.lineJoin = B, v.lineCap = K, v.restore()
            },
            _48O: function() {},
            _47O: function() {}
        });
        var Sj = function(_, w) {
            ip(Sj, this, [_, w])
        };
        Wj(Sj, Ub, {
            getRotation: function(P, z, i) {
                P = P || 0;
                var h = this._data.getPoints(),
                    L = h.size();
                return L > 1 ? qq[i] ? L && 0 === L % 2 ? dk(h.get(L / 2 - 1), h.get(L / 2), z, P) : P : te[i] ? dk(h.get(0), h.get(1), z, P) : dk(h.get(L - 2), h.get(L - 1), z, P) : P
            },
            getPosition: function(v, W, Q, B, p) {
                var k = this._data.getPoints(),
                    f = k.size();
                if (f > 1) {
                    if (qq[v]) {
                        var I = f % 2;
                        if (0 === I) return Of(k.get(f / 2 - 1), k.get(f / 2), v, W, Q, B, p);
                        var e = k.get((f - I) / 2),
                            S = {
                                x: e.x,
                                y: e.y,
                                width: 0,
                                height: 0
                            };
                        return e = Mj(v, S, B), e.x += W, e.y += Q, e
                    }
                    return te[v] ? Of(k.get(0), k.get(1), v, W, Q, B, p) : Of(k.get(f - 2), k.get(f - 1), v, W, Q, B, p)
                }
                return yf
            }
        });
        var zs = function(E, b) {
            ip(zs, this, [E, b])
        };
        Wj(zs, Bd, {
            _3O: function() {
                var u = this;
                zs.superClass._3O.call(u);
                var X = u.s,
                    m = u._83o;
                u._82o = m.img || m.shape ? Y : {
                    background: u.getBodyColor("grid.background"),
                    depth: X("grid.depth"),
                    rect: m.rect,
                    _88o: X("grid.cell.depth"),
                    cellBorderColor: X("grid.cell.border.color"),
                    _89o: X("grid.row.count"),
                    _90o: X("grid.column.count"),
                    block: X("grid.block"),
                    _91o: X("grid.block.color"),
                    _92o: X("grid.block.padding"),
                    _93o: X("grid.block.width")
                }
            },
            _80o: function(R) {
                var g = this,
                    u = g._82o;
                if (!u) return zs.superClass._80o.call(g, R), void 0;
                var G, h, o = g._data,
                    y = u.background,
                    r = u.rect,
                    P = u.block,
                    B = u._91o,
                    I = u._92o,
                    s = u._93o,
                    O = u._88o,
                    q = u.cellBorderColor,
                    V = u._89o,
                    p = u._90o;
                if (y)
                    if (or(R, r.x, r.y, r.width, r.height, y), bg(R, y, u.depth, r), O)
                        for (G = 0; V > G; G++)
                            for (h = 0; p > h; h++) r = o.getCellRect(G, h), r && bg(R, y, O, r);
                    else if (q) {
                    for (R.beginPath(), G = 0; V > G; G++)
                        for (h = 0; p > h; h++) r = o.getCellRect(G, h), r && R.rect(r.x, r.y, r.width, r.height);
                    R.strokeStyle = q, R.lineWidth = 1, R.stroke()
                }
                if ("h" === P)
                    for (G = 0; V > G; G++) r = Ek(o.getCellRect(G, 0), o.getCellRect(G, p - 1)), Um(r, I), Pk(R, B, r.x, r.y, r.width, r.height, s);
                else if ("v" === P)
                    for (h = 0; p > h; h++) r = Ek(o.getCellRect(0, h), o.getCellRect(V - 1, h)), Um(r, I), Pk(R, B, r.x, r.y, r.width, r.height, s);
                g._39O(R, g._83o)
            }
        });
        var Cf = function(W, N) {
                ip(Cf, this, [W, N])
            },
            Ig = W ? ts().getContext("2d") : Y;
        Wj(Cf, Bd, {
            _checkEmptyRect: !1,
            _81o: function() {
                var E = this._data,
                    t = Cf.superClass._81o.call(this),
                    I = E.s("text");
                if (I != Y) {
                    I += "";
                    var A, p = E.s("text.font"),
                        C = E.s("text.align"),
                        x = E.s("text.vAlign"),
                        _ = E.s("text.wrap"),
                        P = E.s("text.vertical"),
                        s = E.s("text.vertical.gap"),
                        J = E.s("text.letter.gap") || 0,
                        o = E.getWidth(),
                        d = E.getHeight();
                    if (null == s && (s = 1), P) {
                        var m;
                        m = _ ? ln(I, d, p, J, P, s) : [I];
                        var H = (m.length - 1) * J,
                            w = 0;
                        Ig.textBaseline = vi, Ig.font = p, m.forEach(function(J) {
                            for (var A = J.length, S = 0, $ = (A - 1) * s, W = 0; A > W; W++) {
                                var n = Ig.measureText(J[W]);
                                $ += n.fontBoundingBoxDescent, S = q(S, n.width)
                            }
                            H += S, w = q($, w)
                        });
                        var L = (m.length - 1) * J;
                        m.forEach(function(W) {
                            L += W
                        }), A = {
                            width: H,
                            height: w
                        }
                    } else {
                        var m = _ ? ln(I, o, p, J, P, s) : I.split("\n"),
                            i = m.length;
                        if (i > 1) {
                            var M = xo(p, I).height,
                                H = 0,
                                w = M * i + s * (i - 1);
                            m.forEach(function(h) {
                                H = q(H, xo(p, h).width)
                            }), A = {
                                width: H,
                                height: w
                            }
                        } else A = xo(p, I), J && (A.width += (I.length - 1) * J)
                    }
                    var N, R, k = A.width,
                        c = A.height,
                        $ = E.getAnchor();
                    "left" === C ? N = -o * $.x : "center" === C ? N = -o * $.x + (o - k) / 2 : "right" === C && (N = o * (1 - $.x) - A.width), "top" === x ? R = -d * $.y : "middle" === x ? R = -d * $.y + (d - c) / 2 : "bottom" === x && (R = d * (1 - $.y) - A.height);
                    var v, l = E.getMatrix();
                    if (v = Ah([l.tf(N, R), l.tf(N + k, R), l.tf(N + k, R + c), l.tf(N, R + c)]), t = Ek(t, v), t && E.s("text.shadow")) {
                        var y = Vm(t);
                        y.x += E.s("text.shadow.offset.x"), y.y += E.s("text.shadow.offset.y"), Um(y, E.s("text.shadow.blur")), t = Ek(t, y)
                    }
                }
                return t
            }
        });
        var Qb = vj.Interactor = function(P) {
            this.gv = this._graphView = P
        };
        hl("Interactor", G, {
            ms_listener: 1,
            getView: function() {
                return this.gv.getView()
            },
            setUp: function() {
                this.addListeners()
            },
            tearDown: function() {
                this.removeListeners(), this.clear()
            },
            clear: function() {},
            fi: function(f) {
                this.gv.fi(f)
            },
            setCursor: function(_) {
                $r || this.gv.setCursor(_)
            },
            startDragging: function(N) {
                var T = this;
                T._lastClientPoint = Lo(N), T._lastLogicalPoint = T.gv.lp(N), yq(T, N)
            },
            clearDragging: function() {
                var $ = this;
                $._lastClientPoint = $._lastLogicalPoint = $._logicalPoint = Y
            },
            autoScroll: function(O) {
                return this.gv.autoScroll(O, this._lastClientPoint)
            }
        });
        var Tj = Y,
            Id = function(p) {
                Tj.handleWindowTouchMove(p)
            },
            lp = function(O) {
                Tj.handleWindowTouchEnd(O), J(V, qe, Id), J(V, nq, lp), Tj = Y
            },
            yc = function(e) {
                Tj.handleWindowMouseMove(e)
            },
            Ob = function(L) {
                Tj.handleWindowMouseUp(L), J(V, Dd, yc), J(V, Wk, Ob), Tj = Y
            },
            Il = function(i, C) {
                if (i !== Tj) {
                    var z = gc(C);
                    Tj ? z ? Tj.handleWindowTouchEnd(C) : Tj.handleWindowMouseUp(C) : z ? (D(V, qe, Id), D(V, nq, lp)) : (D(V, Dd, yc), D(V, Wk, Ob)), Tj = i
                }
            },
            mc = function(Q) {
                var O = this;
                O.gv = Q, O._is2d = Q instanceof vj.GraphView, O._eventListeners = {}, ["mousedown", "mousemove", "mouseleave", "touchstart", "touchmove", ff, "wheel"].forEach(function(p) {
                    O.addListener(p)
                }), O.initImageResource()
            };
        Wj(mc, Qb, {
            enableVR: function(Z) {
                var x = this;
                !!x._vrEnable !== Z && (x._vrEnable = Z, Z ? x.gv.vr.mp(x.onVRControllerChange, x) : x.gv.vr.ump(x.onVRControllerChange, x))
            },
            onVRControllerChange: function(s) {
                var u = this,
                    z = s.property,
                    B = s.newValue,
                    x = B.id,
                    U = u.gv.vr.getController(x),
                    y = U.getRay();
                if (y) {
                    y.controllerId = x;
                    var j = u.gv.vr.getRayEventType(y, z, B._62O);
                    switch (j) {
                        case "down":
                            u.handle_mousedown(y);
                            break;
                        case "up":
                            Tj && Ob(y);
                            break;
                        case "move":
                            u.handle_mousemove(y), Tj && u.handleWindowMouseMove(y)
                    }
                }
            },
            setPreventEventDefault: function(i, j) {
                var k = this,
                    Q = k._eventListeners[i];
                Q ? Q._prevent = j : k._eventListeners[i] = Q = {
                    _removal: O,
                    _prevent: j
                }
            },
            removeListener: function(R) {
                var k = this,
                    f = k._eventListeners[R];
                f && f._removal && (f._removal(), f._removal = O)
            },
            addListener: function(y) {
                var m = this,
                    C = m._eventListeners[y];
                if (C || (m._eventListeners[y] = C = {
                        _removal: O,
                        _prevent: !0
                    }), !C || !C._removal) {
                    var Z = function($) {
                        C._prevent && z.preventDefault($), m.disabled || m.gv._48Q || ("wheel" === y ? Mm(m, $) : m["handle_" + y]($))
                    };
                    D(m.gv.getView(), y, Z), C._removal = function() {
                        J(m.gv.getView(), y, Z)
                    }
                }
            },
            handleWindowTouchMove: function(g) {
                this.handleWindowMouseMove(g)
            },
            handleWindowMouseMove: function(Q) {
                return !this.downInfo || gc(Q) && 1 !== Ke(Q) ? (this.isDragging && (this.handleDownInfo("onEndDrag", Q), this.isDragging = !1), void 0) : (this.isDragging ? this.handleDownInfo("onDrag", Q) : (this.handleDownInfo("onBeginDrag", Q), this.isDragging = !0), void 0)
            },
            handleWindowTouchEnd: function(Z) {
                this.handleWindowMouseUp(Z)
            },
            handleWindowMouseUp: function(j) {
                if (this.isDragging && (this.handleDownInfo("onEndDrag", j), this.isDragging = !1), this.downInfo) {
                    var o = this.handle("onUp", j);
                    if (o && o.data === this.downInfo.data) {
                        this.handleMissingUp(j);
                        var x = this,
                            O = 2 === j.button ? "onContextMenu" : "onClick";
                        if (!x._dbclickTimer) return x._dbclickTimer = Kc(function() {
                            delete x._dbclickTimer, x.handleClick(j, O, o), this.downInfo = Y
                        }, z.clickDelay), void 0;
                        ur(x._dbclickTimer), delete x._dbclickTimer, O = "onDoubleClick", x.handleClick(j, O, o)
                    } else this.handleDownInfo("onUp", j);
                    this.downInfo = Y, this.downComps = Y
                }
            },
            handle_mouseleave: function(n) {
                var b = this,
                    I = b.gv;
                b._hoverTimer && (ur(b._hoverTimer), delete b._hoverTimer);
                var E = b.currentInfo ? b.currentInfo.data : Y;
                if (E) {
                    E.s("onLeave") && E.s("onLeave")(n, E, I), b.fire("data", "onLeave", n, E);
                    var v = b.currentInfo ? b.currentInfo.hits : Y;
                    if (v)
                        for (var T in v) b.handleLeave(n, T);
                    b.currentInfo = Y
                }
            },
            handle_mousewheel: function(H) {
                H.scrollDelta = H.wheelDelta / 40, this.handle("onScroll", H)
            },
            handle_DOMMouseScroll: function(J) {
                J.scrollDelta = 2 === J.axis ? -J.detail : 0, this.handle("onScroll", J)
            },
            handle_touchstart: function(r) {
                this.handle_mousedown(r)
            },
            handle_touchmove: function(j) {
                this.handle("onMove", j)
            },
            handle_mousedown: function(L) {
                this.isDragging && (this.handleDownInfo("onEndDrag", L), this.isDragging = !1), this.downComps = [], this.downInfo = this.handle("onDown", L), this.downInfo && Il(this, L)
            },
            handle_mousemove: function($) {
                var p = this,
                    J = p.gv;
                if (p._hoverTimer && (ur(p._hoverTimer), delete p._hoverTimer), !J._panning && !J._moving) {
                    var d, h, B, b = p.handle("onMove", $),
                        e = this.currentInfo ? this.currentInfo.data : Y,
                        E = this.currentInfo ? this.currentInfo.hits : Y;
                    if (b && (h = b.data, B = b.hits, p._hoverTimer = Kc(function() {
                            ur(p._hoverTimer), delete p._hoverTimer, p.handle("onHover", $, b)
                        }, J.getHoverDelay() || z.hoverDelay)), h !== e) {
                        if (e && (e.s("onLeave") && e.s("onLeave")($, e, J), this.fire("data", "onLeave", $, e)), h && (h.s("onEnter") && h.s("onEnter")($, h, J), this.fire("data", "onEnter", $, h)), E)
                            for (d in E) this.handleLeave($, d);
                        if (B)
                            for (d in B) {
                                var W = B[d],
                                    n = h._interactPrefix = W.prefix,
                                    i = n && h.a(n + "onEnter") || W.target.onEnter;
                                i && i.call(W.target, $, h, J, W.point, W.width, W.height), this.fire(W.type, "onEnter", W.event, W.data, W.image, W.comp, W.point, W), h._interactPrefix = null
                            }
                    } else {
                        if (E)
                            for (d in E) B && B[d] || this.handleLeave($, d);
                        if (B)
                            for (d in B)
                                if (!E || !E[d]) {
                                    var W = B[d],
                                        n = h._interactPrefix = W.prefix,
                                        i = n && h.a(n + "onEnter") || W.target.onEnter;
                                    i && i.call(W.target, $, h, J, W.point, W.width, W.height), this.fire(W.type, "onEnter", W.event, W.data, W.image, W.comp, W.point, W), h._interactPrefix = null
                                }
                    }
                    this.currentInfo = b
                }
            },
            handle: function(O, e, s) {
                var o, U = this,
                    N = U.gv;
                if (U._is2d) {
                    if (s = s || N.getDataInfoAt(e), !s || !N.isInteractive(s.data)) return;
                    if (o = s.ui.interactiveInfo) {
                        var j, q = s.data;
                        if (q.s(O) && q.s(O)(e, q, N), this.fire("data", O, e, q), "body" === s.part && o.bodyInfo) j = "body", s.hits = this.handleImage(j, N.getImage(q), O, e, q, s.point, o.bodyInfo);
                        else if ("icons" === s.part && o._38o) {
                            var L = o._38o[s.name];
                            L && L[s.index] && (j = "icons|" + s.name + "|" + s.index, s.hits = this.handleImage(j, s.icon, O, e, q, s.point, L[s.index]))
                        }
                    }
                    return s
                }
                var q, v;
                if (!s)
                    if (e && e instanceof F.Math.Ray && N.isVREnabled()) {
                        var D = N.vr.intersectWorld(e);
                        if (q = D.data, v = D.intersect, N.vr.renderRayDuringInteraction(e, q, v), !q) return;
                        var w = N.getData3dUI(q);
                        if (o = w.interactiveInfo, !o) return;
                        s = {
                            data: q,
                            part: v.part,
                            ui: w
                        }
                    } else {
                        if (s = N.getDataInfoAt(e), !s) return;
                        s && (s = {
                            data: s.data,
                            part: s.part
                        })
                    }
                if (N.isInteractive(s.data)) {
                    if (!v) {
                        q = s.data;
                        var w = N.getData3dUI(q);
                        if (s.ui = w, o = w.interactiveInfo, !o) return s;
                        if (v = N.intersectObject(e, q), !v) return s
                    }
                    q.s(O) && q.s(O)(e, q, N), this.fire("data", O, e, q);
                    var f, Y = v.part;
                    return "body" !== Y && (f = q.s(Y + ".image") || q.s("shape3d." + Y + ".image")), f || (f = q.s("all.image") || q.s("shape3d.image")), f ? (o = "object" == typeof f ? o[f.uuid] : o[f], o && o.bodyInfo ? (s.part = "body", s.interactiveInfo = o, s.point = this._convertUVToPoint(v.uv, o), s.image = f, s.hits = this.handleImage("body", f, O, e, q, s.point, o.bodyInfo), s) : s) : s
                }
            },
            _handleLeaveOrMissing: function(c, M, x) {
                var p = "leave" === c ? this.currentInfo : this.downInfo;
                if (p) {
                    var I = p.interactiveInfo || p.ui.interactiveInfo;
                    if (I) {
                        var w, H, P = p.data;
                        if (this._is2d) {
                            if (H = this.gv.lp(M), "body" === p.part && I.bodyInfo) w = "body", "leave" === c ? this.handleLeaveImage(x, w, this.gv.getImage(P), M, P, H, I.bodyInfo) : this.handleMissingUpImage(w, this.gv.getImage(P), M, P, H, I.bodyInfo);
                            else if ("icons" === p.part && I._38o) {
                                var E = I._38o[p.name];
                                E && E[p.index] && (w = "icons|" + p.name + "|" + p.index, "leave" === c ? this.handleLeaveImage(x, w, p.icon, M, P, H, E[p.index]) : this.handleMissingUpImage(w, p.icon, M, P, H, E[p.index]))
                            }
                        } else {
                            if (!I.bodyInfo) return;
                            var L = this.gv.intersectObject(M, P);
                            H = L && L.uv ? this._convertUVToPoint(L.uv, I) : {
                                x: 1 / 0,
                                y: 1 / 0
                            }, "leave" === c ? this.handleLeaveImage(x, "body", p.image, M, P, H, I.bodyInfo) : this.handleMissingUpImage("body", p.image, M, P, H, I.bodyInfo)
                        }
                    }
                }
            },
            handleClick: function(q, z, X) {
                var s = this,
                    $ = this.downInfo;
                if ($ && X) {
                    var l, I = X.interactiveInfo || X.ui.interactiveInfo,
                        G = X.data,
                        w = this.gv;
                    if (G.s(z) && G.s(z)(q, G, w), s.fire("data", z, q, G), I)
                        if (this._is2d) {
                            if ($.part === X.part) {
                                var A = w.lp(q);
                                "body" === X.part && I.bodyInfo && (l = "body", this.handleClickImage(l, w.getImage(G), z, q, G, A, I.bodyInfo, X))
                            }
                        } else {
                            if (!I.bodyInfo) return;
                            var O = w.intersectObject(q, G);
                            if (!O) return;
                            A = this._convertUVToPoint(O.uv, I), this.handleClickImage("body", $.image, z, q, G, A, I.bodyInfo, X)
                        }
                }
            },
            handleDownInfo: function(D, $) {
                if (this.downInfo) {
                    var O = this.downInfo,
                        j = this.gv,
                        H = O.interactiveInfo || O.ui.interactiveInfo;
                    if (H) {
                        var z, b = O.data;
                        if (b.s(D) && b.s(D)($, b, j), this.fire("data", D, $, b), this._is2d) {
                            var M = j.lp($);
                            if ("body" === O.part && H.bodyInfo) z = "body", this.handleDownInfoImage(z, j.getImage(b), D, $, b, M, H.bodyInfo);
                            else if ("icons" === O.part && H._38o) {
                                var U = H._38o[O.name];
                                U && U[O.index] && (z = "icons|" + O.name + "|" + O.index, this.handleDownInfoImage(z, O.icon, D, $, b, M, U[O.index]))
                            }
                        } else {
                            if (!H.bodyInfo) return;
                            var s;
                            if ("onBeginDrag" === D ? (s = j._raycaster.intersectObjectAndRecordTriangle($, b), s && (H.beginDragIntersectInfo = s.triangleInfo)) : s = j.intersectObject($, b), !s && ("onDrag" !== D && "onEndDrag" !== D || !H.beginDragIntersectInfo || (s = j._raycaster.intersectLastTriangle($, H.beginDragIntersectInfo)), !s)) return;
                            M = this._convertUVToPoint(s.uv, H), this.handleDownInfoImage("body", O.image, D, $, b, M, H.bodyInfo)
                        }
                    }
                }
            },
            fire: function(c, X, o, m, g, Z, M, W) {
                this.gv.fi({
                    kind: X,
                    type: c,
                    event: o,
                    data: m,
                    image: g,
                    comp: Z,
                    view: this.gv,
                    point: M,
                    width: W ? W.width : O,
                    height: W ? W.height : O
                })
            },
            handleImage: function(B, E, K, d, S, e, C) {
                var W = {};
                if (E && (E = Di(E))) {
                    var L = this.gv,
                        y = C.rect,
                        U = this.convertPoint(e, C);
                    U.inRect && (E[K] && E[K](d, S, L, U, y.width, y.height), this.fire("image", K, d, S, E, O, U, y), W[B + "|image"] = {
                        target: E,
                        type: "image",
                        image: E,
                        data: S,
                        event: d,
                        point: U,
                        width: y.width,
                        height: y.height
                    });
                    for (var z, b = C.compInfos, F = E, Z = b.length - 1; Z >= 0; Z--) {
                        var D = b[Z],
                            H = D.comp;
                        if (U = this.convertPoint(e, D, F, H, L, S), U.inRect) {
                            y = D.rect;
                            var i = S._interactPrefix = D.prefix,
                                q = i && S.a(i + K) || H[K];
                            if (q && (z = q.call(H, d, S, L, U, y.width, y.height)), this.fire("comp", K, d, S, E, H, U, y), z !== !0 && (E = y.image) && (E[K] && (z = E[K](d, S, L, U, y.width, y.height)), this.fire("image", K, d, S, E, O, U, y)), S._interactPrefix = null, W[B + "|" + Z] = {
                                    target: H,
                                    type: "comp",
                                    comp: H,
                                    image: E,
                                    data: S,
                                    event: d,
                                    point: U,
                                    width: y.width,
                                    height: y.height,
                                    prefix: i
                                }, this.downComps && this.downComps.push(H), E && (W[B + "|" + Z + "|image"] = {
                                    target: E,
                                    type: "image",
                                    image: E,
                                    data: S,
                                    event: d,
                                    point: U,
                                    width: y.width,
                                    height: y.height,
                                    prefix: i
                                }), z === !0) break
                        }
                    }
                }
                return W
            },
            handleLeave: function(v, g) {
                return this._handleLeaveOrMissing("leave", v, g)
            },
            handleMissingUp: function(A) {
                return this._handleLeaveOrMissing("missing", A)
            },
            handleLeaveImage: function(B, o, h, L, e, G, q) {
                if (h && (h = Di(h))) {
                    var z = this.gv,
                        P = q.rect,
                        Z = this.convertPoint(G, q);
                    B === o + "|image" && (h.onLeave && h.onLeave(L, e, z, Z, P.width, P.height), this.fire("image", "onLeave", L, e, h, O, Z, P));
                    for (var r, I = q.compInfos, x = h, M = I.length - 1; M >= 0; M--) {
                        var k = I[M],
                            y = k.comp;
                        Z = this.convertPoint(G, k, x, y, z, e), P = k.rect;
                        var c = e._interactPrefix = k.prefix;
                        if (B === o + "|" + M) {
                            var J = c && e.a(c + "onLeave") || y.onLeave;
                            J && (r = J.call(y, L, e, z, Z, P.width, P.height)), this.fire("comp", "onLeave", L, e, h, y, Z, P)
                        }
                        if (r !== !0 && (h = P.image) && B === o + "|" + M + "|image" && (h.onLeave && (r = h.onLeave(L, e, z, Z, P.width, P.height)), this.fire("image", "onLeave", L, e, h, O, Z, P)), e._interactPrefix = null, r === !0) break
                    }
                }
            },
            handleMissingUpImage: function(c, w, V, N, M, J) {
                var j = "onUp",
                    z = this.downInfo.hits;
                if (z && w && (w = Di(w))) {
                    var G = this.gv,
                        Z = J.rect,
                        H = this.convertPoint(M, J);
                    !H.inRect && z[c + "|image"] && (w[j] && w[j](V, N, G, H, Z.width, Z.height), this.fire("image", j, V, N, w, O, H, Z));
                    for (var s, n = J.compInfos, i = w, W = n.length - 1; W >= 0; W--) {
                        var T = n[W],
                            b = T.comp;
                        if (H = this.convertPoint(M, T, i, b, G, N), !H.inRect) {
                            Z = T.rect;
                            var F = N._interactPrefix = T.prefix;
                            if (z[c + "|" + W]) {
                                var Y = F && N.a(F + j) || b[j];
                                Y && (s = Y.call(b, V, N, G, H, Z.width, Z.height)), this.fire("comp", j, V, N, w, b, H, Z)
                            }
                            if (s !== !0 && (w = Z.image) && z[c + "|" + W + "|image"] && (w[j] && (s = w[j](V, N, G, H, Z.width, Z.height)), this.fire("image", j, V, N, w, O, H, Z)), N._interactPrefix = null, s === !0) break
                        }
                    }
                }
            },
            handleDownInfoImage: function(o, v, f, B, u, r, G) {
                var U = this.downInfo.hits;
                if (U && v && (v = Di(v))) {
                    var R = this.gv,
                        g = G.rect,
                        e = this.convertPoint(r, G);
                    U[o + "|image"] && (v[f] && v[f](B, u, R, e, g.width, g.height), this.fire("image", f, B, u, v, O, e, g));
                    for (var H, k = G.compInfos, N = v, y = k.length - 1; y >= 0; y--) {
                        var I = k[y],
                            K = I.comp;
                        e = this.convertPoint(r, I, N, K, R, u), g = I.rect;
                        var n = u._interactPrefix = I.prefix,
                            a = ["onDrag", "onEndDrag"].indexOf(f) >= 0;
                        if (!a && U[o + "|" + y] || a && this.downComps && this.downComps.indexOf(K) >= 0) {
                            var T = n && u.a(n + f) || K[f];
                            T && (H = T.call(K, B, u, R, e, g.width, g.height)), this.fire("comp", f, B, u, v, K, e, g)
                        }
                        if (H !== !0 && (v = g.image) && U[o + "|" + y + "|image"] && (v[f] && (H = v[f](B, u, R, e, g.width, g.height)), this.fire("image", f, B, u, v, O, e, g)), u._interactPrefix = null, H === !0) break
                    }
                }
            },
            handleClickImage: function(w, t, J, K, Z, H, G, X) {
                var D = this.downInfo.hits,
                    N = X.hits;
                if (D && t && (t = Di(t))) {
                    var L = this.gv,
                        y = G.rect,
                        o = this.convertPoint(H, G);
                    D[w + "|image"] && (t[J] && t[J](K, Z, L, o, y.width, y.height), this.fire("image", J, K, Z, t, O, o, y));
                    for (var h, s = G.compInfos, c = t, n = s.length - 1; n >= 0; n--) {
                        var v = s[n],
                            b = v.comp;
                        o = this.convertPoint(H, v, c, b, L, Z), y = v.rect;
                        var A = Z._interactPrefix = v.prefix;
                        if (D[w + "|" + n] && N[w + "|" + n]) {
                            var a = A && Z.a(A + J) || b[J];
                            a && (h = a.call(b, K, Z, L, o, y.width, y.height)), this.fire("comp", J, K, Z, t, b, o, y)
                        }
                        if (h !== !0 && (t = y.image) && D[w + "|" + n + "|image"] && (t[J] && (h = t[J](K, Z, L, o, y.width, y.height)), this.fire("image", J, K, Z, t, O, o, y)), Z._interactPrefix = null, h === !0) break
                    }
                }
            },
            initImageResource: function() {
                z.setImage("coreInteractorRayHitImage", {
                    width: 16,
                    height: 16,
                    comps: [{
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        opacity: .3,
                        rotation: -1.593,
                        rect: [.73315, .6933, 14.5337, 14.61341]
                    }, {
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        rotation: -1.593,
                        rect: [3.56695, 3.75073, 8.8661, 8.49856]
                    }]
                })
            },
            _convertUVToPoint: function(H, s) {
                if (!H) return {
                    x: 1 / 0,
                    y: 1 / 0
                };
                var o = s.bodyInfo.rect,
                    w = H.clone(),
                    L = H.multiply({
                        x: o.width,
                        y: o.height
                    });
                return L.local = w, L
            },
            convertPoint: function(i, e, T, k, l, N) {
                var w = e.rect,
                    s = e.matrix.applyInverse(i).sub(w),
                    M = s.x >= 0 && s.y >= 0 && s.x <= w.width && s.y <= w.height;
                if (!M) return s;
                if (k && Kg(k.pixelPerfect, N, l)) {
                    var w, t = 1;
                    this._is2d ? (t = l.getZoom(), w = ud(i.x, i.y, O, t)) : w = ud(i.x, i.y);
                    var x = !1,
                        p = w.x,
                        J = w.y,
                        g = w.width,
                        B = w.height,
                        L = z.hitMaxArea,
                        S = g * B * t * t;
                    if (S > L) {
                        var b = Math.sqrt(L / S);
                        t *= b
                    }
                    g *= t, B *= t, 2 > g && (g = 2), 2 > B && (B = 2), p *= t, J *= t;
                    var E = tr(g, B),
                        c = new Bl(0, -p, -J, t, t);
                    c.append(e.matrix), l._drawForChecking = !0, k.transform = c;
                    var Q = T.fitSize;
                    e.refRect && e.refRect.fitSize ? (k.refRect = e.refRect, T.fitSize = !0) : T.fitSize = !1;
                    var P = T.comps;
                    T.comps = [k], ic(E, T, 0, 0, g, B, N, self), T.comps = P, T.fitSize = Q, delete k.refRect, delete k.unionRect, delete k.transform, l._drawForChecking = !1;
                    try {
                        for (var A = 0, R = E.getImageData(0, 0, g, B).data; A < R.length; A += 4)
                            if (0 !== R[A + 3]) {
                                x = !0;
                                break
                            }
                        E.restore()
                    } catch (I) {
                        Vq = Y, x = !1
                    }
                    s.inRect = x
                } else s.inRect = !0;
                return s
            }
        });
        var jo = vj.DefaultInteractor = function(y) {
            ip(jo, this, [y])
        };
        hl("DefaultInteractor", Qb, {
            handle_mousedown: function(O) {
                Fq(O);
                var x = this,
                    E = x.gv,
                    V = E.getDataAt(O);
                if (E.setFocus(O) && !E._editing && !E._scrolling) {
                    ms(O) ? E.handleDoubleClick(O, V) : E.handleClick(O, V);
                    var b = km(O);
                    !Mf() && !b && V && (E.isMovable(V) || E._39Q(V)) || !E.isPannable() || !Bj(O) && !b || Gp(O) || (x._tx = E.tx(), x._ty = E.ty(), x.startDragging(O))
                }
            },
            handleWindowMouseUp: function(H) {
                var K = this,
                    w = K.gv;
                w._panning && (delete w._panning, w.onPanEnded(), K.fi({
                    kind: "endPan",
                    event: H
                })), delete K._tx, delete K._ty, K.clearDragging()
            },
            handle_mousemove: function(p) {
                var $ = this,
                    K = $.gv;
                $._hoverTimer && (ur($._hoverTimer), delete $._hoverTimer), $._hoverTimer = Kc(function() {
                    $.fi({
                        kind: "hover",
                        event: p
                    }), ur($._hoverTimer), delete $._hoverTimer
                }, K.getHoverDelay() || z.hoverDelay)
            },
            handle_mouseleave: function() {
                var J = this;
                J._hoverTimer && (ur(J._hoverTimer), delete J._hoverTimer)
            },
            handleWindowMouseMove: function(X) {
                var Q = this,
                    G = Q.gv;
                Q.fi({
                    kind: G._panning ? "betweenPan" : "beginPan",
                    event: X
                }), G._panning = 1;
                var q = fr(G, X, Q._lastClientPoint);
                G.setTranslate(Q._tx + q.x, Q._ty + q.y)
            },
            handle_mousewheel: function(Y) {
                this.gv.handleScroll(Y, Y.wheelDelta)
            },
            handle_DOMMouseScroll: function(m) {
                2 === m.axis && this.gv.handleScroll(m, -m.detail)
            },
            handle_keydown: function(V) {
                this.gv.handleKeyDown(V)
            }
        });
        var Ab = vj.SelectInteractor = function(V) {
            ip(Ab, this, [V])
        };
        hl("SelectInteractor", Qb, {
            _42: function() {
                var u = this,
                    i = u.gv,
                    C = i.getZoom(),
                    m = u.mark,
                    l = u.div;
                l || (l = u.div = Qr(), xb(u.getView(), l));
                var Y = {};
                Y.x = m.x * C + i.tx(), Y.y = m.y * C + i.ty(), Y.width = m.width * C, Y.height = m.height * C, Bh(l, Y), this.intersects() ? (l.style.border = "", l.style.background = i.getRectSelectBackground()) : (l.style.background = "", l.style.border = "1px solid " + i.getRectSelectBorderColor())
            },
            handle_mousedown: function(n) {
                var v = this,
                    C = v.gv;
                if (v._57I = Y, v.pendingClickThrough = Y, !(C._editing || C._scrolling || Mf() || km(n))) {
                    var s = C.getDataAt(n),
                        t = C.sm();
                    s ? Gp(n) ? t.co(s) ? t.rs(s) : t.as(s) : t.co(s) ? s instanceof zc && s.isClickThroughEnabled() && Bj(n) && (v.pendingClickThrough = Lo(n)) : t.ss(s) : Gp(n) || !C.isPannable() ? Bj(n) && (Gp(n) || t.cs(), C.isRectSelectable() && (v.startDragging(n), C._77O = 1)) : Bj(n) && (v._57I = Lo(n))
                }
            },
            handle_mouseup: function(k) {
                var E = this,
                    b = E.gv,
                    n = E._57I;
                if (n && (cm(n, Lo(k)) <= 1 && b.sm().cs(), E._57I = Y), E.pendingClickThrough) {
                    if (cm(E.pendingClickThrough, Lo(k)) <= 1) {
                        var d = b.getDataAt(k);
                        if (d instanceof zc && d.isClickThroughEnabled()) {
                            var $ = b.getDataAt(k, function(X) {
                                var y = X.getParent() === d && b.isSelectable(X, !0);
                                return y
                            });
                            $ && (k.clickThrough = !0, b.sm().ss($))
                        }
                    }
                    E.pendingClickThrough = Y
                }
            },
            handleWindowMouseUp: function(q) {
                this.clear(q)
            },
            handleWindowMouseMove: function(G) {
                var f = this,
                    L = f.gv;
                f._logicalPoint = L.lp(G), f.mark ? (f.fi({
                    kind: "betweenRectSelect",
                    event: G
                }), L.isPannable() && f.autoScroll(G), f.redraw()) : f.fi({
                    kind: "beginRectSelect",
                    event: G
                }), f.mark = Ah(f._lastLogicalPoint, f._logicalPoint), f.redraw()
            },
            intersects: function() {
                var a = this,
                    v = a._lastLogicalPoint,
                    h = a._logicalPoint;
                return v.x > h.x || v.y > h.y
            },
            clear: function(H) {
                var J = this,
                    G = J.gv,
                    u = J.mark;
                if (J._57I = Y, J.pendingClickThrough = Y, J._lastLogicalPoint) {
                    if (u) {
                        if (0 !== u.width && 0 !== u.height) {
                            var z = G.getDatasInRect(u, J.intersects());
                            if (!z.isEmpty()) {
                                var e = G.sm(),
                                    t = e.toSelection(),
                                    M = ck(H),
                                    c = H.altKey;
                                z.each(function(I) {
                                    e.co(I) ? (!M || M && c) && t.remove(I) : (!c || M && c) && t.add(I)
                                }), e.ss(t)
                            }
                        }
                        Fi(J.div), delete J.div, delete J.mark, J.redraw(), J.fi({
                            kind: "endRectSelect",
                            event: H
                        }), G.onRectSelectEnded()
                    }
                    J.clearDragging(), delete G._77O
                }
            },
            redraw: function() {
                var t = this;
                t._draw || (t._draw = 1, Kc(function() {
                    t.mark && t._42(), delete t._draw
                }, 16))
            }
        });
        var sl = vj.MoveInteractor = function(c) {
            ip(sl, this, [c])
        };
        hl("MoveInteractor", Qb, {
            handle_mousedown: function(h) {
                var I = this,
                    w = I.gv;
                if (Bj(h) && !w._editing && !w._scrolling && !Mf()) {
                    var R = w.getSelectedDataAt(h);
                    !R || w._39Q(R) && !w.isMovable(R) ? w._focusData = Y : (I._data = R, w.handleMouseDown && w.handleMouseDown(h, R), I.startDragging(h), w.isMovable(R) && (w._moving = 1))
                }
            },
            handleWindowMouseUp: function(n) {
                var b = this,
                    Z = b.gv;
                Z.handleMouseUp && Z.handleMouseUp(n, b._data), b.clear(n)
            },
            handleWindowMouseMove: function(b) {
                var D = this,
                    c = D._data,
                    J = D.gv;
                if ((!J._93O || !J._93O(b, c)) && J._moving) {
                    D._logicalPoint || D.fi({
                        kind: "prepareMove",
                        event: b
                    });
                    var p = D._logicalPoint ? "betweenMove" : "beginMove",
                        N = {
                            kind: p,
                            event: b
                        },
                        l = D._logicalPoint = J.lp(b);
                    "beginMove" !== p || D._alreadyBeginTransaction || (D._alreadyBeginTransaction = !0, J.getDataModel().beginTransaction());
                    var q = D._calcShift(p, b),
                        g = q.x,
                        R = q.y,
                        F = D.gv.getMoveMode(b, c);
                    F && ("x" === F ? R = 0 : "y" === F ? g = 0 : "xy" !== F && (g = R = 0)), J.moveSelection(g, R), D._lastLogicalPoint = l, D.autoScroll(b), D.fi(N)
                }
            },
            _calcShift: function() {
                var Q = this,
                    B = Q._logicalPoint,
                    O = Q._lastLogicalPoint,
                    s = B.x - O.x,
                    g = B.y - O.y;
                return {
                    x: s,
                    y: g
                }
            },
            clear: function(i) {
                var v = this,
                    A = v.gv;
                v._lastLogicalPoint && (v._lastLogicalPoint = v._data = A._moving = Y, v._logicalPoint && (v.fi({
                    kind: "endMove",
                    event: i
                }), A.onMoveEnded()), v.clearDragging()), v._alreadyBeginTransaction && (v._alreadyBeginTransaction = !1, A.getDataModel().endTransaction())
            }
        });
        var Gf = vj.TextEditInteractor = function(R) {
            ip(Gf, this, [R]), this.init()
        };
        hl("TextEditInteractor", Qb, {
            init: function() {
                var r = this,
                    V = this.input = W.createElement("input"),
                    $ = V.style;
                V.text = "text", $.border = "1px solid #d8d8d8", $.position = "absolute", $.padding = "2px 3px", $.outline = "none", $.marginLeft = "-90px", $.marginTop = "-16px", $.backgroundColor = "rgba(255,255,255, 0.9)", $.fontSize = "14px", $.width = "180px", $.height = "32px", $.boxShadow = "0 0 13px rgba(16,142,233, 0.5)", $.textAlign = "center", $.boxSizing = "border-box", D(V, "keyup", function(B) {
                    sp(B) && r.endTextEdit()
                }), D(V, "focus", function() {
                    V.select()
                });
                var J = this.textarea = W.createElement("textarea"),
                    X = this.wrap = W.createElement("div");
                X.appendChild(J), $ = J.style, $.margin = 0, $.padding = "4px", $.overflow = "hidden", $.boxSizing = "border-box", $.position = "absolute", $.outline = "none", $.backgroundColor = "transparent", $.resize = "none", $.textAlign = "center", $.fontSize = "14px", $.border = "none", $.borderWidth = 0, $.width = "100%", $.top = "50%", $ = X.style, $.boxSizing = "border-box", $.margin = 0, $.padding = 0, $.position = "absolute", $.boxShadow = "0 0 13px rgba(16,142,233, 0.5)", $.border = "1px solid #d8d8d8", $.backgroundColor = "rgba(255,255,255, 0.9)", $.width = "180px", $.marginLeft = "-90px", D(J, "keydown", function(w) {
                    return (ck() || Gp()) && sp(w) ? (r.endTextEdit(), void 0) : (r.calculateTextareaHeight(String.fromCharCode(w.keyCode)), void 0)
                }), D(J, "focus", function() {
                    J.select()
                });
                var Y = function(w) {
                    w.stopPropagation()
                };
                D(V, "mousedown", Y), D(V, "touchstart", Y), D(J, "mousedown", Y), D(J, "touchstart", Y), r.SIZING_STYLE = ["letter-spacing", "line-height", "padding-top", "padding-bottom", "font-family", "font-weight", "font-size", "text-rendering", "text-transform", "width", "text-indent", "padding-left", "padding-right", "border-width", "box-sizing"], r.HIDDEN_TEXTAREA_STYLE = "visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important", r.handleWindowClick = function(k) {
                    var W = r._editingDOM;
                    if (W) {
                        var y = W.getBoundingClientRect(),
                            E = Lo(k);
                        mm(y, E) || r.endTextEdit()
                    }
                }
            },
            handle_mousedown: function(U) {
                var $ = this,
                    P = $.gv;
                if (ms(U) && !P._editing) {
                    var y = P.getDataAt(U);
                    if (y) {
                        var J = P.getTextEditInfo(y);
                        J && (this._editInfo = J, this._editTarget = y, P._editing = !0, J.isMultiline ? this.handleMultilineEdit() : this.handleTextEdit())
                    }
                }
            },
            handleMultilineEdit: function() {
                var J = this,
                    R = J.gv,
                    m = J._editTarget,
                    z = J.getTargetValue(),
                    k = J.textarea,
                    v = J.wrap;
                this.hiddenTextarea || this.createHiddenTextarea(), (null === z || z === O) && (z = ""), k.value = z, J._editingDOM = k, R.getView().appendChild(v), this.layoutHTML(v, m), this.calculateTextareaHeight(), Kc(function() {
                    k.focus(), D(V, "mousedown", J.handleWindowClick), D(V, "touchstart", J.handleWindowClick)
                }, 10)
            },
            handleTextEdit: function() {
                var v = this,
                    b = v.gv,
                    u = v._editTarget,
                    M = v.getTargetValue(),
                    L = v.input;
                (null === M || M === O) && (M = ""), L.value = M, v._editingDOM = L, b.getView().appendChild(L), this.layoutHTML(L, u), Kc(function() {
                    L.focus(), D(V, "mousedown", v.handleWindowClick), D(V, "touchstart", v.handleWindowClick)
                }, 10)
            },
            layoutHTML: function(m, S) {
                var P = this.gv,
                    k = P.getZoom();
                if (S instanceof F.Node) {
                    var Q = S.getRect(),
                        T = Math.min(Math.max(100, Q.width * k), 800);
                    m.style.left = (Q.x + Q.width / 2) * k + P.tx() + "px", m.style.top = (Q.y + Q.height / 2) * k + P.ty() + "px", m.style.width = T + "px", m.style.marginLeft = -T / 2 + "px"
                } else if (S instanceof F.Edge) {
                    var U = P.getDataUI(S),
                        Q = U._6I;
                    m.style.left = (Q.x + Q.width / 2) * k + P.tx() + "px", m.style.top = (Q.y + Q.height / 2) * k + P.ty() + "px"
                }
            },
            endTextEdit: function() {
                var E = this,
                    O = E._editInfo.isMultiline ? E.wrap : E.input,
                    n = E._editInfo.isMultiline ? E.textarea : E.input;
                E.setTargetValue(n.value), E.gv.getView().removeChild(O), E.gv._editing = !1, delete E._editingDOM, J(V, "mousedown", E.handlelick), J(V, "touchstart", E.handleWindowClick)
            },
            setTargetValue: function(v) {
                var C = this,
                    $ = C._editTarget,
                    S = C._editInfo,
                    Y = S.accessType,
                    O = S.name;
                if (O && Y || (Y = "p", O = "name"), "p" === Y) {
                    var P = F.Default.setter(O);
                    $[P](v)
                } else "a" === Y ? $.a(O, v) : $.s(O, v)
            },
            getTargetValue: function() {
                var $ = this,
                    W = $._editTarget,
                    q = $._editInfo,
                    f = q.accessType,
                    N = q.name;
                if (N && f || (f = "p", N = "name"), "p" === f) {
                    var D = F.Default.getter(N);
                    return W[D]()
                }
                return "a" === f ? W.a(N) : W.s(N)
            },
            createHiddenTextarea: function() {
                this.hiddenTextarea = W.createElement("textarea"), this.hiddenTextarea.setAttribute("style", "margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;"), this.hiddenTextarea.setAttribute("rows", "1"), this.gv.getView().appendChild(this.hiddenTextarea)
            },
            calculateHTMLStyle: function(d, x) {
                if (x && this.computedStyleCache) return this.computedStyleCache;
                var k = this,
                    B = V.getComputedStyle(d),
                    X = B.getPropertyValue("box-sizing") || B.getPropertyValue("-moz-box-sizing") || B.getPropertyValue("-webkit-box-sizing"),
                    z = parseFloat(B.getPropertyValue("padding-bottom")) + parseFloat(B.getPropertyValue("padding-top")),
                    L = parseFloat(B.getPropertyValue("border-bottom-width")) + parseFloat(B.getPropertyValue("border-top-width")),
                    q = k.SIZING_STYLE.map(function(T) {
                        return T + ":" + B.getPropertyValue(T)
                    }).join(";"),
                    n = {
                        sizingStyle: q,
                        paddingSize: z,
                        borderSize: L,
                        boxSizing: X
                    };
                return x && (this.computedStyleCache = n), n
            },
            calculateTextareaHeight: function(U) {
                U = U || "";
                var S = this,
                    O = S.textarea,
                    n = S.hiddenTextarea,
                    I = S.wrap,
                    u = 32,
                    T = S.calculateHTMLStyle(O, !1),
                    D = T.paddingSize,
                    H = T.borderSize,
                    x = T.boxSizing,
                    K = T.sizingStyle;
                n.setAttribute("style", K + ";" + S.HIDDEN_TEXTAREA_STYLE), n.value = O.value + U;
                var c = n.scrollHeight;
                "border-box" === x ? c += H : "content-box" === x && (c -= D), O.style.height = c + "px", O.style.marginTop = 0 - .5 * c + "px", I.style.height = Math.max(c, u) + "px", I.style.marginTop = c * -.5 + "px"
            }
        });
        var vq = vj.ScrollBarInteractor = function(W) {
            ip(vq, this, [W])
        };
        hl("ScrollBarInteractor", Qb, {
            _41o: function() {
                return this.gv.getViewRect().height < this.gv.getScrollRect().height
            },
            _40o: function() {
                return this.gv.getViewRect().width < this.gv.getScrollRect().width
            },
            isV: function(C) {
                var X = this.gv.getViewRect();
                return this._41o() && (X.x + X.width - this.gv.lp(C).x) * this.gv.getZoom() < ho
            },
            isH: function(y) {
                var T = this.gv.getViewRect();
                return this._40o() && (T.y + T.height - this.gv.lp(y).y) * this.gv.getZoom() < ho
            },
            handle_mousemove: function(f) {
                this.handle_touchmove(f)
            },
            handle_touchmove: function(z) {
                if (!xn && Bj(z) && this.gv.isScrollBarVisible()) {
                    var D = this,
                        K = D.isV(z),
                        B = D.isH(z);
                    (K || B) && D.gv.showScrollBar(), D.gv._scrolling = K || B
                }
            },
            handleWindowMouseUp: function(Z) {
                this.handleWindowTouchEnd(Z)
            },
            handleWindowTouchEnd: function(G) {
                this._state = this._cp = this._tx = this._ty = this.gv._scrolling = Y, this.fi({
                    kind: "endScroll",
                    event: G
                })
            },
            handle_mousedown: function(U) {
                this.handle_touchstart(U)
            },
            handle_touchstart: function(L) {
                var n = this;
                if (n.gv.setFocus(L), Fq(L), n.handle_touchmove(L), !(Ke(L) > 1) && n.gv._scrolling && n.gv.isScrollBarVisible()) {
                    n._cp = Lo(L), n._tx = n.gv.tx(), n._ty = n.gv.ty();
                    var Z = n.isV(L);
                    n._state = Z ? "vScroll" : "hScroll", yq(n, L), n.fi({
                        kind: "beginScroll",
                        event: L
                    })
                }
            },
            handleWindowMouseMove: function(P) {
                this.handleWindowTouchMove(P)
            },
            handleWindowTouchMove: function(g) {
                var P = Lo(g),
                    J = this.gv.getViewRect(),
                    $ = this.gv.getScrollRect();
                "vScroll" === this._state ? this.gv.ty(this._ty + (this._cp.y - P.y) * $.height / J.height) : "hScroll" === this._state && this.gv.tx(this._tx + (this._cp.x - P.x) * $.width / J.width), this.fi({
                    kind: "betweenScroll",
                    event: g
                })
            }
        });
        var pe = vj.TouchInteractor = function(P, K) {
            K = K || {}, K.selectable === O && (K.selectable = !0), K.movable === O && (K.movable = !0), K.pannable === O && (K.pannable = !0), K.pinchable === O && (K.pinchable = !0), K.editable === O && (K.editable = !0), this.params = K, ip(pe, this, [P])
        };
        hl("TouchInteractor", Qb, {
            ms_edit: 1,
            setUp: function() {
                var r = this;
                pe.superClass.setUp.call(r), $r && r.params.editable && r.gv.setEditInteractor(r)
            },
            tearDown: function() {
                var f = this;
                pe.superClass.tearDown.call(f), $r && f.params.editable && f.gv.setEditInteractor(Y)
            },
            clear: function(i) {
                var w = this,
                    p = w.gv;
                p._moving && (w.fi({
                    kind: "endMove",
                    event: i
                }), delete p._moving, p.onMoveEnded(), p.dm().endTransaction()), p._panning && (w.fi({
                    kind: "endPan",
                    event: i
                }), delete p._panning, p.onPanEnded()), p._pinching && (w.fi({
                    kind: "endPinch",
                    event: i
                }), delete p._pinching, p.onPinchEnded()), p._editing && (w._46O(i), w._77I = w._node = w._edge = w._shape = w._rect = w._89I = w._index = p._editing = Y), w.pendingClickThrough = w._moving = w._panning = w._pinching = w._editing = w._57I = w._data = w._beginHistory = Y, w.clearDragging()
            },
            handle_touchstart: function(x) {
                var P = this;
                if (!P.gv._editing) {
                    Fq(x), P._57I = Y, P.pendingClickThrough = Y;
                    var s = P.params,
                        h = P.gv,
                        J = h.sm(),
                        U = h.getDataAt(x),
                        W = Ke(x);
                    if (1 === W) {
                        if (ms(x)) return h.handleDoubleClick(x, U), void 0;
                        h.handleClick(x, U), U && (h.handleMouseDown && h.handleMouseDown(x, U), P._data = U), s.selectable || (U = Y), U && (J.co(U) ? U instanceof zc && U.isClickThroughEnabled() && (P.pendingClickThrough = Lo(x)) : J.ss(U), s.editable && h.isEditable(U) && P._79I(x, U, !0) ? (P._editing = 1, P.startDragging(x)) : s.movable && h.isMovable(U) && (P._moving = 1, P.startDragging(x))), U && (h.isMovable(U) || h._39Q(U)) || (P._57I = Lo(x), s.pannable && h.isPannable() && (P._panning = 1, P.startDragging(x), P._translate = {
                            x: h.tx(),
                            y: h.ty()
                        }))
                    } else if (s.pinchable && 2 === W) {
                        if (!h.getEditInteractor() && U) {
                            var v = Di(h.getImage(U));
                            if (v && Kg(v.scrollable, U, this)) return
                        }
                        P._pinching = 1, P.startDragging(x);
                        var B = h.getView(),
                            Z = h.getZoom(),
                            o = B.getBoundingClientRect(),
                            f = x.touches[0],
                            F = x.touches[1],
                            R = {
                                x: (f.clientX + F.clientX) / 2 - o.left,
                                y: (f.clientY + F.clientY) / 2 - o.top
                            };
                        R.x -= h.tx(), R.y -= h.ty(), R.x /= Z, R.y /= Z, P._p = R, P._d = pn(x)
                    }
                }
            },
            handle_touchend: function(j) {
                var M = this,
                    F = M.gv,
                    d = M._57I,
                    i = M._data;
                if (d && (cm(d, Lo(j)) <= 1 && !F.getDataAt(j) && F.sm().cs(), M._57I = Y), i && F.handleMouseUp && F.handleMouseUp(j, i), M.pendingClickThrough) {
                    if (cm(M.pendingClickThrough, Lo(j)) <= 1) {
                        var i = F.getDataAt(j);
                        if (i instanceof zc && i.isClickThroughEnabled()) {
                            var e = F.getDataAt(j, function(N) {
                                var M = N.getParent() === i && F.isSelectable(N, !0);
                                return M
                            });
                            e && (j.clickThrough = !0, F.sm().ss(e))
                        }
                    }
                    M.pendingClickThrough = Y
                }
            },
            handleWindowTouchEnd: function(A) {
                this.clear(A)
            },
            handleWindowTouchMove: function(o) {
                var x = this,
                    X = x.gv,
                    j = Ke(o);
                if (1 === j) {
                    var I = Lo(o),
                        M = fr(X, I, x._lastClientPoint),
                        $ = cm({
                            x: 0,
                            y: 0
                        }, M);
                    if (x._editing && (x._beginHistory || (x._beginHistory = 1, X.dm().beginTransaction()), X._editing = 1, x._78I(o)), x._moving) {
                        if (!X._moving && $ < z.touchMoveThreshold) return;
                        x._beginHistory || (x._beginHistory = 1, X.dm().beginTransaction()), x.handleMove(o)
                    } else if (x._panning) {
                        if (!X._panning && $ < z.touchMoveThreshold) return;
                        X.setTranslate(x._translate.x + M.x, x._translate.y + M.y), x.fi({
                            kind: X._panning ? "betweenPan" : "beginPan",
                            event: o
                        }), X._panning = 1
                    }
                } else if (2 === j && x._pinching) {
                    var N = pn(o);
                    X.handlePinch(x._p, N, x._d), x._d = N, x.fi({
                        kind: X._pinching ? "betweenPinch" : "beginPinch",
                        event: o
                    }), X._pinching = 1
                }
            },
            handleMove: function(U) {
                var v = this,
                    g = v.gv,
                    u = g.lp(U);
                g._93O && g._93O(U, v._data) || (g.moveSelection(u.x - v._lastLogicalPoint.x, u.y - v._lastLogicalPoint.y), v._lastLogicalPoint = u, v.autoScroll(U), v.fi({
                    kind: g._moving ? "betweenMove" : "beginMove",
                    event: U
                }), g._moving = 1)
            }
        });
        var F = V.ht,
            Xr = F.graph._editor = {
                Math: F.Math,
                Guide: {}
            };
        Xr.getStyle = function(Y) {
            var W, E = Xr.StyleMap;
            return E && (W = E[Y], W !== O) ? W : Xr.DefaultStyleMap[Y]
        }, Xr.setStyle = function(q, H) {
            var z = Xr.StyleMap;
            z || (z = Xr.StyleMap = {}), z[q] = H
        }, Xr.inEdit = function(_) {
            return _._inXEdit === !0
        }, Xr.startEdit = function(D) {
            D._inXEdit = !0, Xr.Inject.doInject(D)
        }, Xr._46O = function(z) {
            z._inXEdit = !1, Xr.Inject.undoInject(z)
        }, Xr.toScreenPosition = function(k, t) {
            var m = k.tx(),
                H = k.ty(),
                T = k._zoom;
            return new Xr.Math.Vector2(t.x * T + m, t.y * T + H)
        }, Xr.checkHit = function(Q, $, D) {
            return Q.distanceTo($) < D ? !0 : !1
        }, Xr.toWorldPosition = function(C, N) {
            var W = C.tx(),
                q = C.ty(),
                a = C._zoom;
            return {
                x: (N.x - W) / a,
                y: (N.y - q) / a
            }
        }, Xr.setAntialias = function(H, P) {
            for (var _, m = ["imageSmoothingEnabled", "webkitImageSmoothingEnabled", "mozImageSmoothingEnabled", "oImageSmoothingEnabled", "msImageSmoothingEnabled"], c = 0, J = m.length; J > c && (_ = m[c], !(_ in H)); c++);
            H[_], H[_] = P
        }, Xr.getTargetCornersOnScreen = function(P, D) {
            if (!D) return null;
            var T, Y = [];
            if (je(D, P)) {
                var G = Hm(P, D);
                T = [{
                    x: G.x,
                    y: G.y
                }, {
                    x: G.x + G.width,
                    y: G.y
                }, {
                    x: G.x + G.width,
                    y: G.y + G.height
                }, {
                    x: G.x,
                    y: G.y + G.height
                }]
            } else {
                if (!D.getCorners) return null;
                T = D.getCorners()
            }
            return T.forEach(function(N) {
                var G = Xr.toScreenPosition(P, N);
                Y.push(G.x, G.y)
            }), Y
        }, Xr.log = function() {};
        var cq;
        Xr.updateTipInfo = function(y, o, f) {
            if (f) {
                var x = F.Default.getLogicalPoint(y, o._canvas);
                x.x += Xr.Icons.TipShiftX, x.y += Xr.Icons.TipShiftY, cq = {
                    helperPos: x,
                    text: f,
                    size: f.length
                }
            } else cq = Y
        }, Xr.drawTip = function(Z, P) {
            cq && Xr.Icons.DrawIcon(P, Z, Xr.Icons.TipHelper, cq)
        };
        var $c = Xr.Inject = {
            _modules: []
        };
        $c.registAsModule = function(b, r) {
            var Z = {},
                s = {};
            for (var w in b) {
                var E = r.prototype[w];
                Z[w] = E
            }
            b.getBackup = function(Q) {
                return Z[Q]
            }, b.getBackups = function() {
                return Z
            }, s.doInject = function() {
                for (var w in b) "getBackup" !== w && (r.prototype[w] = b[w])
            }, s.undoInject = function() {
                for (var R in b) "getBackup" !== R && (r.prototype[R] = Z[R])
            }, $c._modules.push(s)
        }, $c.doInject = function(b) {
            for (var m, f = $c._modules, W = 0, L = f.length; L > W; W++) m = f[W], m.doInject(b)
        }, $c.undoInject = function(N) {
            for (var Q, o = $c._modules, t = 0, Y = o.length; Y > t; t++) Q = o[t], Q.undoInject(N)
        };
        var Qb = F.graph.EditInteractor = function(s) {
                var M = this,
                    O = W.createElement("canvas");
                O.className = "editCanvas", O.style.position = "absolute", M._uuid = F.Math.generateUUID(), M._styleMap = {}, M._canvas = O, M._context = O.getContext("2d"), Qb.superClass.constructor.call(M, s), this._editDetail = !1, Xr.setAntialias(M._context, !1), M._subModules = M.initSubModule(), M._gridGuide = new Xr.Guide.Grid(M), M._rectGuide = new Xr.Guide.Rect(M), M._hoverGuide = new Xr.Guide.Hover(M)
            },
            fh = Qb;
        F.Default.def(Qb, F.graph.Interactor, {
            ms_edit: 1,
            ms_fire: 1
        }), G.defineProperties(Qb.prototype, {
            editDetail: {
                get: function() {
                    var Y = !!this._editDetail;
                    return Y
                },
                set: function(z) {
                    var U = this,
                        X = U._editDetail;
                    X !== z && (U._editDetail = z, U.gv._editing = z, U.fp("editDetail", X, z), U.fp("pointsEditingMode", X, z), U.fi({
                        kind: z ? "beginEditPoints" : "endEditPoints"
                    }))
                }
            },
            gvEditing: {
                get: function() {
                    return this.gv._editing
                },
                set: function(d) {
                    (!this._editDetail || d) && (this.gv._editing = d, d || (this.editDetail = !1))
                }
            },
            editing: {
                get: function() {
                    return this._editing
                },
                set: function(K) {
                    this._editing = K, this.gvEditing = K
                }
            },
            editingModule: {
                get: function() {
                    return this._editMod
                }
            },
            pointsEditingMode: {
                get: function() {
                    return this.editDetail
                },
                set: function(r) {
                    var E = this;
                    E.editDetail !== r && (r ? E._tryEnterEditDetailMode() : E._tryQuitEditDetailMode())
                }
            },
            gridEnabled: {
                get: function() {
                    var C = this._gridEnabled;
                    if (!C) return !1;
                    var V = this.gv;
                    return V ? !0 : !0
                },
                set: function(G) {
                    G !== this._gridEnabled && (this._gridEnabled = G, this._42())
                }
            },
            alignmentGuideEnabled: {
                get: function() {
                    return this._agEnabled
                },
                set: function(K) {
                    K !== this._agEnabled && (this._agEnabled = K, this._42())
                }
            },
            gridGuide: {
                get: function() {
                    return this._gridGuide
                }
            },
            rectGuide: {
                get: function() {
                    return this._rectGuide
                }
            },
            hoverGuide: {
                get: function() {
                    return this._hoverGuide
                }
            }
        }), Qb.prototype.initSubModule = function() {
            var U = this;
            return [new Xr.Anchor(U), new Xr.RotateX(U), new Xr.MoveDummy(U), new Xr.Rect(U), new Xr.Curve(U), new Xr.MoveHelper(U)]
        }, Qb.prototype.getSubModule = function(S) {
            var b, H, k, t = this._subModules;
            for (H = 0, k = t.length; k > H; H++)
                if (b = t[H], b.catalog === S) return b
        }, Qb.prototype.invokeSubModule = function(Y, $) {
            for (var f, k, g, U = this, u = U._subModules, Z = Array.prototype.slice.call(arguments, 2), X = 0, I = u.length; I > X; X++)
                if (f = u[X], k = f[Y], k && (g = k.apply(f, Z), g != O && $)) return f
        }, Qb.prototype.invokeSubModuleInverse = function(x, A) {
            var c = this,
                L = c._subModules;
            if (L)
                for (var o, Z, B, Q = Array.prototype.slice.call(arguments, 2), d = L.length - 1; d >= 0; d--)
                    if (o = L[d], Z = o[x], Z && (B = Z.apply(o, Q), B != O && A)) return o
        }, Qb.prototype.setUp = function() {
            Xr.log("setUp");
            var C = this,
                u = C.gv,
                t = u.getView(),
                F = C._canvas;
            Qb.superClass.setUp.call(C), u.setEditInteractor(C), u._79O ? t.insertBefore(F, u._79O) : t.appendChild(F), Xr.startEdit(u), C.invokeSubModule("setUp"), u.dm().mm(C._onDataModelChanged, C), u.dm().md(C._onDataPropertyChanged, C)
        }, Qb.prototype.tearDown = function() {
            Xr.log("tearDown");
            var Z = this,
                V = Z.gv,
                t = V.getView();
            Z._resetCustomCursorStyle(), Qb.superClass.tearDown.call(Z), V.dm().umm(Z._onDataModelChanged, Z), V.dm().umd(Z._onDataPropertyChanged, Z), V.setEditInteractor(null), t.removeChild(Z._canvas), Z._drawTimer && (ur(Z._drawTimer), Z._drawTimer = null), Xr._46O(V), Z.invokeSubModule("tearDown")
        }, Qb.prototype._onDataModelChanged = function($) {
            var k = this;
            ("clear" === $.kind || "remove" === $.kind && k.editDetail && $.data === k.getSubModule("Curve").target) && (k.editDetail = !1, k._42())
        }, Qb.prototype._onDataPropertyChanged = function(K) {
            var m = this;
            if (m.editDetail) {
                var Q = m.getSubModule("Curve"),
                    W = K.data;
                W === Q.target && (W._writing || Q._handleDataChanged(K))
            }
        }, Qb.prototype.clear = function() {
            Xr.log("clear")
        }, Qb.prototype.redraw = function() {
            this._42()
        }, Qb.prototype._42 = function() {
            var b = this;
            b._drawTimer || (b._drawTimer = Kc(function() {
                b._drawTimer = null, b.drawImpl()
            }, 0))
        }, Qb.prototype.drawImpl = function() {
            var g;
            for (g in {
                    _42: !0
                }) break;
            return function() {
                var A = this,
                    B = A._canvas,
                    v = A.gv,
                    l = v.getWidth(),
                    S = v.getHeight(),
                    c = A._context,
                    V = F.Default.getInternal(),
                    Q = z.devicePixelRatio;
                (B.width !== l || B.height !== S) && V.setCanvas(B, l, S, Q), c.clearRect(0, 0, B.width, B.height);
                var q = A._getValidSelection();
                c.save(), c.scale(Q, Q), A._gridGuide._42(), A.invokeSubModuleInverse(g, !1, c, v, q), A._rectGuide._42(), A._hoverGuide._42(), c.restore()
            }
        }(), Qb.prototype._getValidSelection = function() {
            var o = this,
                p = o.gv,
                X = p.sm().getSelection(),
                Y = [];
            return X.each(function($) {
                p.isVisible($) && p.isEditable($) && Y.push($)
            }), Y
        }, Qb.prototype.handle_touchmove = function(O) {
            return this.handle_mousemove(O)
        }, Qb.prototype.handle_mousemove = function(_) {
            if (!F.Default.isDragging()) {
                var d = this;
                if ((d.editDetail || !Mf() && !km(_)) && !d.gv._externalEditing) {
                    if (d.gvEditing = !1, d._checkEdit(_)) d.gvEditing = !0;
                    else {
                        if (!d.getStyle("hoverGuideVisible")) return;
                        d.hoverData = d.gv.getDataAt(_)
                    }
                    d._42()
                }
            }
        }, Qb.prototype.handle_touchstart = function(D) {
            return this.handle_mousedown(D)
        }, Qb.prototype.handle_mousedown = function(G) {
            Fq(G);
            var S = this;
            if ((S.editDetail || !Mf() && !km(G)) && !S.gv._externalEditing) {
                if (ms(G) && !G.clickThrough) {
                    if (S.editDetail) {
                        if (S._tryQuitEditDetailMode(G)) return
                    } else if (S._tryEnterEditDetailMode()) return;
                    S.gv.dm().beginTransaction();
                    var m = S.invokeSubModule("handleDoubleClick", !0, G);
                    if (S.gv.dm().endTransaction(), m) return
                }
                var K = S._checkEdit(G);
                K && (S._downPosition = S._getLogicalPoint(G), S.gv.dm().beginTransaction(), K.startEdit(S, G), S.editing = !0)
            }
        }, Qb.prototype._checkEdit = function(y) {
            var m = this,
                O = m.gv,
                Z = m._getLogicalPoint(y),
                z = m.invokeSubModule("check", !0, O, y, Z) || null;
            return m._editMod = z, z
        }, Qb.prototype.handleWindowTouchMove = function(d) {
            return this.handleWindowMouseMove(d)
        }, Qb.prototype.handleWindowMouseMove = function(Q) {
            var l = this,
                c = l._downPosition;
            if (c) {
                var n = l._getLogicalPoint(Q);
                if (n.distanceTo(c) < l.getStyle("moveSensitivity")) return;
                delete l._downPosition
            }
            var o = l._editMod;
            o && o.handleEdit(l.gv, Q), l.redraw()
        }, Qb.prototype._getLogicalPoint = function(x) {
            var U = this,
                d = F.Default.getLogicalPoint(x, U._canvas);
            return new Xr.Math.Vector2(d)
        }, Qb.prototype.handleWindowTouchEnd = function(E) {
            return this.handleWindowMouseUp(E)
        }, Qb.prototype.handleWindowMouseUp = function() {
            var g;
            for (g in {
                    _46O: !0
                }) break;
            return function(p) {
                var q = this;
                q.editing = !1, q.setCursor("default"), q.invokeSubModule(g, !1, p), q._42(), q.gv.dm().endTransaction()
            }
        }(), Qb.prototype.handle_mousewheel = function(s) {
            var K = this;
            Fq(s), K.invokeSubModule("preHandleScroll", !0) || K.gv.handleScroll(s, s.wheelDelta)
        }, Qb.prototype.handleDelete = function() {
            var A = this;
            if (!A.editDetail) {
                A.gv.dm().beginTransaction();
                var I = A.invokeSubModule("handleNormalStateDelete", !0);
                return A.gv.dm().endTransaction(), I || A.gv.removeSelection(), void 0
            }
            A.gv.dm().beginTransaction(), A.invokeSubModule("handleDelete", !0), A.gv.dm().endTransaction(), A._42()
        }, Qb.prototype.handle_keydown = function(G) {
            var C = this;
            if ((G.metaKey || G.ctrlKey) && C._42(), Mf(G) && !C.editing) return C.gvEditing = !1, C.setCursor("default"), C._42(), void 0;
            var E = sp(G);
            return C.editDetail ? ((E || Fr(G)) && (C.editDetail = !1, C._42()), C.gv.dm().beginTransaction(), C.invokeSubModule("handle_keydown", !0, G), C.gv.dm().endTransaction(), void 0) : (C.gv.dm().beginTransaction(), C.invokeSubModule("handleNormalStateKeyDown", !0, G), C.gv.dm().endTransaction(), E && C._tryEnterEditDetailMode(), void 0)
        }, Qb.prototype.handle_keyup = function(g) {
            this.gv.dm().beginTransaction(), this.invokeSubModule("handle_keyup", !0, g), this.gv.dm().endTransaction()
        }, Qb.prototype._tryEnterEditDetailMode = function() {
            var O = this;
            return !O.editDetail && O.invokeSubModule("canEnterEditDetailMode", !0) && 1 === O._getValidSelection().length ? (O.editDetail = !0, O._42(), !0) : void 0
        }, Qb.prototype._tryQuitEditDetailMode = function(A) {
            var v = this;
            return v.editDetail ? !A || v.invokeSubModule("canQuitEditDetailMode", !0, A) ? (v.editDetail = !1, v._42(), !0) : !1 : !1
        }, Qb.prototype.setStyle = function(L, G, n) {
            var j = this;
            n ? Xr.setStyle(L, G) : j._styleMap[L] = G, "baseColor" === L && (an = G), j.fp("styleChanged", null, {
                key: L,
                value: G,
                base: n
            }), j._42()
        }, Qb.prototype.getStyle = function(p) {
            var v = this,
                Y = v._styleMap[p];
            return Y !== O ? Y : Xr.getStyle(p)
        }, Qb.prototype.setCursor = function(L) {
            this._resetCustomCursorStyle(), F.graph.EditInteractor.superClass.setCursor.call(this, L)
        }, Qb.prototype._drawHostGuide = function(N) {
            var E = this,
                X = E._context,
                q = E.gv;
            Xr.Icons.DrawIcon(E, X, Xr.Icons.NodeHoverGuide, N.corners);
            var s = N.host;
            if (s) {
                var Q = q.getAttachPoints(s);
                if (Q && Q.length)
                    for (var y = 0, R = Q.length; R > y; y++) {
                        var B = Q[y],
                            V = _l(q, s, 0, B.offsetX || 0, B.offsetY || 0, B.x, B.y);
                        V = Xr.toScreenPosition(q, V), V.isAttach = N.attach === y, Xr.Icons.DrawIcon(E, X, Xr.Icons.AttachPoint, V)
                    }
            }
        }, Qb.prototype._resetCustomCursorStyle = function() {
            var G = this;
            if (G._customStyle) {
                var X = this.gv.getView();
                X.classList && X.classList.remove && X.classList.remove(G._customStyle), G._customStyle = null
            }
        }, Qb.prototype._setRotateCursor = function(b) {
            var C = this,
                T = C._cursorFactory;
            T || (T = C._cursorFactory = new Xr.CursorFactory(C));
            var K = T.getRotateCursor(b),
                u = C.gv.getView();
            C._resetCustomCursorStyle(), C._customStyle = K, u.classList && u.classList.add && u.classList.add(K)
        };
        var Lq = Xr.Group = function(D) {
            var V = this;
            V._entities = D, V._64O = 0, V._position = {
                x: 0,
                y: 0
            }, V._scale = {
                x: 1,
                y: 1
            }, V._anchor = {
                x: .5,
                y: .5
            }, V._anchor2 = {
                x: .5,
                y: .5
            }
        };
        Lq.prototype = {}, Lq.prototype.constructor = Lq;
        var Gj = null,
            En = null;
        Lq.findOrCreateGroup = function(E, $) {
            if (En === $ && Gj && Gj.checkIsMe(E)) return Gj;
            En = $;
            var w = new Xr.Group(E);
            return w.getKeyOb() ? (Gj = w, w) : void 0
        }, Lq.prototype.checkIsMe = function(B) {
            var J = this._entities;
            if (J.length !== B.length) return !1;
            var u, c = {},
                g = B.length;
            for (u = 0; g > u; u++) c[B[u]._id] = !0;
            for (u = 0; g > u; u++)
                if (!c[J[u]._id]) return !1;
            return !0
        }, Lq.prototype.getRotation = function() {
            return this._64O
        }, Lq.prototype.getPosition = function() {
            return this._position
        }, Lq.prototype.getAnchor = function() {
            return this._anchor
        }, Lq.prototype.getWidth = function() {
            return this._width
        }, Lq.prototype.getScale = function() {
            return this._scale
        }, Lq.prototype.getSize = function() {
            return {
                width: this._width,
                height: this._height
            }
        }, Lq.prototype.getHeight = function() {
            return this._height
        }, Lq.prototype.getKeyOb = function() {
            for (var D = this._entities, x = D.length - 1; x >= 0; x--) {
                var O = D[x];
                if (this.isNode(O)) return O
            }
        }, Lq.prototype.getAnchor2 = function() {
            var T = this,
                I = T.rotateCenter;
            if (I) return I;
            var B = T.getKeyOb();
            if (!B) return T._anchor;
            var o = T._anchor2,
                S = B.getMatrix();
            return S.tf({
                x: B.getWidth() * (o.x - B.getAnchor().x),
                y: B.getHeight() * (o.y - B.getAnchor().y)
            })
        }, Lq.prototype.setAnchor2 = function(N, b) {
            var Z = this,
                P = Z.getKeyOb();
            if (P) {
                var I, z = P.getMatrix();
                I = "number" == typeof N ? {
                    x: N,
                    y: b
                } : N;
                var O = z.tfi(I);
                Z._anchor2 = {
                    x: P.getAnchor().x + O.x / P.getWidth(),
                    y: P.getAnchor().y + O.y / P.getHeight()
                }
            }
        }, Lq.prototype.setRotation = function() {}, Lq.prototype.beginRotate = function(i) {
            this.rotateCenter = i.pos, this.rotateMode = i.groupRotateMode
        }, Lq.prototype.endRotate = function() {
            delete this.rotateCenter, delete this.rotateMode
        }, Lq.prototype.addRotation = function(R, U, G) {
            return "batch" === U ? this._addRotationInBatchMode(R, G) : "block" === U ? this._addRotationInBlockMode(R, G) : void 0
        }, Lq.prototype._addRotationInBlockMode = function(j, t) {
            var i = this,
                u = i.rotateCenter || i.getPosition();
            i._entities.forEach(function(C) {
                if (i.isNode(C) && (!t || t(C))) {
                    var s = C.getMatrix();
                    s.translate(-u.x, -u.y), s.rotate(j), s.translate(u.x, u.y);
                    var T = Math.sign(C.getScale().x);
                    C.setRotation(di(s.b * T, s.a * T)), C.setPosition(s.tx, s.ty)
                }
            })
        }, Lq.prototype._addRotationInBatchMode = function(u, m) {
            var t = this,
                h = t._anchor2;
            t._entities.forEach(function(F) {
                if (t.isNode(F) && (!m || m(F))) {
                    var z = F.getAnchor(),
                        U = F.getMatrix(),
                        N = U.tf({
                            x: F.getWidth() * (h.x - z.x),
                            y: F.getHeight() * (h.y - z.y)
                        }),
                        d = new Xr.Math.Matrix2d;
                    d.set(U.a, U.b, U.c, U.d, U.tx, U.ty), d.translate(-N.x, -N.y), d.rotate(u), d.translate(N.x, N.y);
                    var M = Math.sign(F.getScale().x);
                    F.setRotation(di(d.b * M, d.a * M)), F.setPosition(d.tx, d.ty)
                }
            })
        }, Lq.prototype.setPosition = function(o) {
            var f, y, z, T, p = this,
                g = p._position,
                n = o.x - g.x,
                J = o.y - g.y,
                B = p._entities;
            for (y = 0, z = B.length; z > y; y++) f = B[y], Mk(f) && (T = f.getPosition(), f.setPosition(T.x + n, T.y + J));
            p._position = o
        }, Lq.prototype.setScale = function($, e) {
            var t = this,
                u = $ / t._scale.x,
                U = e / t._scale.y;
            t._adjustChildScaleOrSize(u, U, "size"), t._scale = {
                x: $,
                y: e
            }
        }, Lq.prototype.getRect = function() {
            var p = this,
                E = p._position,
                m = p._width,
                G = p._height;
            return {
                x: E.x - m / 2,
                y: E.y - G / 2,
                width: m,
                height: G
            }
        }, Lq.prototype.setSize = function(o, B) {
            var P = this,
                o = Math.max(1, o),
                B = Math.max(1, B),
                s = o / P._width,
                g = B / P._height;
            P._adjustChildScaleOrSize(s, g, "size"), P._width = o, P._height = B
        }, Lq.prototype._adjustChildScaleOrSize = function(G, n, j) {
            var D, J, P, L, c, x, f, o, K, v, $, E, R, u, d = this,
                H = d._position,
                S = d._entities,
                e = new Xr.Math.Matrix2d;
            for (J = 0, P = S.length; P > J; J++)
                if (D = S[J], d.isNode(D)) {
                    if (L = D.getPosition(), c = D.getRotation(), x = D.getWidth(), f = D.getHeight(), o = D.getScale(), $ = o.x * x, E = o.y * f, e.identity().scale($, E).rotate(c).translate(L.x, L.y).translate(-H.x, -H.y).rotate(-d._64O), c = di(e.b * Math.sign($), e.a * Math.sign($)), e.scale(G, n), K = Math.cos(c), v = Math.sin(c), Math.abs(K) < .001 ? (R = e.b / v, u = -e.c / v) : (R = e.a / K, u = e.d / K), "scale" === j) D.setScale(R / x, u / f);
                    else if ("size" === j) {
                        var U = R / o.x,
                            _ = u / o.y;
                        D.setScale(dg(R) * Math.abs(o.x), dg(u) * Math.abs(o.y)), D.setSize(Math.max(.1, Math.abs(U)), Math.max(.1, Math.abs(_)))
                    }
                    e.rotate(d._64O).translate(H.x, H.y), D.setPosition(e.tx, e.ty)
                }
        }, Lq.prototype.getMatrix = function() {
            var C = this,
                U = C._position,
                D = F.Default.getInternal(),
                J = C._scale;
            return new D.Mat(C._64O, U.x, U.y, J.x, J.y)
        }, Lq.prototype.toGlobal = function(L) {
            return this.getMatrix().tf(L)
        }, Lq.prototype.getCorners = function() {
            var B = this,
                W = B._width,
                $ = B._height,
                i = B._anchor,
                J = -W * i.x,
                G = -$ * i.y,
                O = B.getMatrix();
            return [O.tf(J, G), O.tf(J, G + $), O.tf(J + W, G + $), O.tf(J + W, G)]
        }, Lq.prototype.calcInfo = function() {
            var G, a, o, L, J, D, i = this,
                U = [],
                e = i._entities,
                n = i._64O;
            for (L = 0, J = e.length; J > L; L++) D = e[L], i.isNode(D) && D.getCorners && U.push.apply(U, D.getCorners());
            if (U.length) {
                var s = Math.cos(-n),
                    z = Math.sin(-n),
                    F = 1 / 0,
                    d = -1 / 0,
                    w = 1 / 0,
                    V = -1 / 0;
                for (L = 0, J = U.length; J > L; L++) o = U[L], G = o.x, a = o.y, o.x = s * G - z * a, o.y = z * G + s * a, F = Math.min(F, o.x), d = Math.max(d, o.x), w = Math.min(w, o.y), V = Math.max(V, o.y);
                i._width = (d - F) / i._scale.x, i._height = (V - w) / i._scale.y, s = Math.cos(n), z = Math.sin(n);
                var Q = i._anchor;
                G = F + (d - F) * Q.x, a = w + (V - w) * Q.y, i._position = {
                    x: s * G - z * a,
                    y: z * G + s * a
                }
            }
        }, Lq.prototype.isNode = function(f) {
            return Mk(f) ? je(f) ? f.size() ? !1 : !0 : !0 : !1
        }, Lq.prototype._42 = function(o, e, v) {
            var $, z, Z, H, j, R, t, E, V = this,
                q = V._entities,
                h = V.rotateMode;
            for ("batch" === h && (E = V.getKeyOb()), $ = 0, z = q.length; z > $; $++) Z = q[$], V.isNode(Z) && (R = Z.getRect(), H = Xr.toScreenPosition(v, {
                x: R.x,
                y: R.y
            }), j = Xr.toScreenPosition(v, {
                x: R.x + R.width,
                y: R.y + R.height
            }), t = {
                min: H,
                max: j
            }, Z === E && (t.isKeyOb = !0), Xr.Icons.DrawIcon(o, e, Xr.Icons.GroupSubEntityRect, t))
        };
        var kk = Xr.CurveActiving = function(B, M) {
            this._curve = B, this._interactor = B._interactor, this.silent = !0;
            for (var P in M) this[P] = M[P];
            delete this.silent
        };
        kk.prototype = {}, kk.prototype.constructor = kk, G.defineProperties(kk.prototype, {
            point: {
                get: function() {
                    return this._point
                },
                set: function(b) {
                    var x = this;
                    x._point = b, x.editingCtrl || x.silent || x._firePointChange()
                }
            },
            pairs: {
                get: function() {
                    return this._pairs
                },
                set: function(V) {
                    var H = this;
                    H._pairs = V, H.editingCtrl && !H.silent && H._firePointChange()
                }
            }
        }), kk.prototype._firePointChange = function() {
            var E = this,
                q = E.getCurrentEditingPoint(),
                p = E._interactor;
            if (!q) return p.fi({
                kind: "selectPoint"
            }), void 0;
            var w = this._curve.target;
            if (w) {
                var i = Xr.getDataMatrix(w).invert(),
                    r = q.e;
                q = i.apply(Xr.toWorldPosition(p.gv, q)), q.e = r;
                var z = E._lastFirePoint;
                z && Math.abs(q.x - z.x) < 1e-5 && Math.abs(q.y - z.y) < 1e-5 && (q.e == O && z.e == O || Math.abs(q.e - z.e) < 1e-5) || (E._lastFirePoint = q, p.fi({
                    kind: "selectPoint",
                    x: q.x,
                    y: q.y,
                    e: q.e
                }))
            }
        }, kk.prototype.dispose = function() {
            this._interactor.fi({
                kind: "selectPoint"
            })
        }, kk.prototype.getCurrentEditingPoint = function() {
            var K = this,
                z = K.editingCtrl;
            if (z) {
                var t = K.pairs;
                if (t) {
                    var M = t[z.pairId];
                    if (M) {
                        var r = M[z.type];
                        if (r) return r
                    }
                }
            }
            return K._point
        };
        var ah = Xr.CursorFactory = function(N) {
            var O = this;
            O._interactor = N, O._rotateCursorStyles = {}
        };
        ah.prototype = {}, ah.prototype.constructor = ah, ah.prototype.getRotateCursor = function(d) {
            var U = this;
            0 > d && (d += 2 * Math.PI);
            var t = U._interactor,
                T = t.getStyle("rotateCursorSize"),
                u = t.getStyle("rotateCursorRound"),
                m = Math.round(180 * (d / Math.PI) / u);
            m * u >= 360 && (m = 0);
            var v = U._rotateCursorStyles,
                j = "htCustomRotateStyle_" + T + "_" + u + "_" + m;
            return v[j] || (U._produceRotateCursor(j, T, u, m), v[j] = !0), j
        }, ah.prototype._produceRotateCursor = function(O, u, Y, S) {
            var y = this;
            y._interactor;
            var p = y._canvas;
            p || (p = y._canvas = W.createElement("canvas"));
            var l = z.devicePixelRatio;
            p.width = p.height = u * l, p.style.width = p.style.height = u + " px";
            var F = p.getContext("2d");
            Xr.setAntialias(F, !1), F.scale(l, l);
            var o, I, Z, U, J, m = Math.round(u / 2),
                s = "" + m + " " + m + ",auto !important;",
                A = 4;
            o = Math.PI / 180 * S * Y, F.clearRect(0, 0, u, u), F.save(), F.scale(u / 32, u / 32), F.translate(16, 15), F.rotate(o + Math.PI / 2), F.beginPath(), F.moveTo(-8, 0), F.lineTo(-8, A), F.lineTo(-8 + A, A), F.moveTo(8, 0), F.lineTo(8, A), F.lineTo(8 - A, A), F.moveTo(-8, A), F.quadraticCurveTo(0, -6, 8, A), F.restore(), F.lineCap = "round", F.lineJoin = "miter", F.strokeStyle = "white", F.lineWidth = 4, F.stroke(), F.strokeStyle = "black", F.lineWidth = 2, F.stroke(), I = JSON.stringify(p.toDataURL()), U = "cursor:url(" + I + ")" + s, 1 !== l && (Z = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="' + u + 'px" height="' + u + 'px"><image xlink:href=' + I + ' width="' + u + '" height="' + u + '"/></svg>', U += "cursor:url(data:image/svg+xml;base64," + btoa(Z) + ")" + s, U += "cursor:-webkit-image-set(url(" + I + ")" + l + "x,url(" + I + ")1x)" + s), J = W.createElement("style"), J.textContent = "body." + O + " *, ." + O + "{" + U + "}", W.head.appendChild(J)
        };
        var _n = Xr.Guide.Grid = function(r) {
            var g = this;
            g._interactor = r, g._alignmentGuideId = 0, g._xAlignmentGuide = [], g._yAlignmentGuide = []
        };
        _n.prototype = {}, _n.prototype.constructor = _n, G.defineProperties(_n.prototype, {
            gridBlockSize: {
                get: function() {
                    var v = this;
                    return v._gridBlockSize || v._interactor.getStyle("gridBlockSize")
                },
                set: function(L) {
                    this._gridBlockSize = L, this._interactor._42()
                }
            },
            gridThickLinesEvery: {
                get: function() {
                    var X = this;
                    return X._gridThickLinesEvery || X._interactor.getStyle("gridThickLinesEvery")
                },
                set: function(j) {
                    this._gridThickLinesEvery = j, this._interactor._42()
                }
            },
            gridEnabled: {
                get: function() {
                    var L = this,
                        V = L._interactor;
                    return V.gridEnabled && L.isValidGrid()
                }
            }
        }), _n.prototype._42 = function() {
            var N = this,
                s = N._interactor;
            N.gridEnabled && N.drawGrid(), s.alignmentGuideEnabled && N.drawAlignmentGuide()
        }, _n.prototype.makeMatrix = function() {
            var j = this,
                Y = j._interactor.getStyle("gridAngle"),
                T = j._interactor.getStyle("gridRotation"),
                B = new Xr.Math.Matrix2d,
                U = Math.sin(Y),
                e = Math.cos(Y);
            return B.set(1, 0, e, U, 0, 0), B.rotate(T), B
        }, _n.prototype.isValidGrid = function() {
            var R = this,
                E = Math.PI,
                m = R._interactor,
                N = m.gv;
            if (N._zoom < m.getStyle("gridZoomThreshold")) return !1;
            var l = m.getStyle("gridAngle"),
                b = Math.abs(180 * (l % E / E)),
                s = 1 - 1e-8;
            return s > b || b > 180 - s ? !1 : !0
        }, _n.prototype.drawAlignmentGuide = function() {
            var e = this,
                t = e._interactor,
                r = t.gv,
                m = t._canvas,
                U = t._context,
                S = m.width,
                _ = m.height,
                s = r.tx(),
                q = r.ty(),
                F = r._zoom;
            U.beginPath(), U.strokeStyle = t.getStyle("gridAlignmentGuideColor"), U.lineWidth = 1, e._xAlignmentGuide.forEach(function(k) {
                var r = k.p * F + s;
                U.moveTo(r, 0), U.lineTo(r, _)
            }), e._yAlignmentGuide.forEach(function(O) {
                var x = O.p * F + q;
                U.moveTo(0, x), U.lineTo(S, x)
            }), U.stroke()
        }, _n.prototype.drawGrid = function() {
            function e(x, l, N, G) {
                var c = Xr.toScreenPosition(U, T.apply({
                        x: x,
                        y: l
                    })),
                    C = Xr.toScreenPosition(U, T.apply({
                        x: N,
                        y: G
                    }));
                u.moveTo(c.x, c.y), u.lineTo(C.x, C.y)
            }
            var G = this,
                E = G._interactor,
                s = G.gridBlockSize,
                d = G.gridThickLinesEvery,
                Y = E.getStyle("gridThickColor"),
                w = E.getStyle("gridLightColor"),
                U = E.gv,
                q = E._canvas,
                u = E._context,
                X = q.width,
                Q = q.height,
                T = G.makeMatrix(),
                a = T.applyInverse(Xr.toWorldPosition(U, {
                    x: 0,
                    y: 0
                })),
                Z = T.applyInverse(Xr.toWorldPosition(U, {
                    x: X,
                    y: 0
                })),
                P = T.applyInverse(Xr.toWorldPosition(U, {
                    x: 0,
                    y: Q
                })),
                i = T.applyInverse(Xr.toWorldPosition(U, {
                    x: X,
                    y: Q
                })),
                B = Math.min(a.x, Z.x, P.x, i.x),
                V = Math.max(a.x, Z.x, P.x, i.x),
                F = Math.min(a.y, Z.y, P.y, i.y),
                l = Math.max(a.y, Z.y, P.y, i.y);
            X = V - B, Q = l - F;
            var z = Math.ceil(B / s),
                I = Math.floor(V / s),
                y = Math.ceil(F / s),
                K = Math.floor(l / s);
            U.tx(), U.ty(), U._zoom;
            var k, p, D;
            for (u.save(), u.lineWidth = 1, u.beginPath(), u.strokeStyle = Y, D = Math.ceil(z / d) * d; I >= D; D += d) k = D * s, e(k, F, k, l);
            for (D = Math.ceil(y / d) * d; K >= D; D += d) p = D * s, e(B, p, V, p);
            for (u.stroke(), u.beginPath(), u.strokeStyle = w, D = z; I >= D; D++) 0 !== D % d && (k = D * s, e(k, F, k, l));
            for (D = y; K >= D; D++) 0 !== D % d && (p = D * s, e(B, p, V, p));
            u.stroke(), u.restore()
        }, _n.prototype.getAlignmentGuides = function() {
            var f = this;
            return {
                x: f._xAlignmentGuide,
                y: f._yAlignmentGuide
            }
        }, _n.prototype.addAlignmentGuide = function(B, K, b) {
            var h = this,
                w = "x" === B ? h._xAlignmentGuide : h._yAlignmentGuide,
                b = b ? b : ++h._alignmentGuideId,
                N = {
                    p: K,
                    id: b
                };
            if (w.length) {
                var $ = h._findClosestAlignmentGuide(N.p, w);
                $.dis < 0 ? w.splice($.index + 1, 0, N) : w.splice($.index, 0, N)
            } else w.push(N);
            return h._interactor._42(), b
        }, _n.prototype.findClosest = function(d, p, M) {
            var v = this,
                m = v._interactor,
                q = m.gv;
            M && (d = Xr.toWorldPosition(q, d));
            var z, u, V, s = 1 / 0,
                B = 1 / 0,
                f = d.x,
                _ = d.y;
            if (v.gridEnabled) {
                var R = v.gridBlockSize,
                    F = v.makeMatrix(),
                    L = F.applyInverse(d);
                L = F.apply({
                    x: Math.round(L.x / R) * R,
                    y: Math.round(L.y / R) * R
                }), s = L.x - f, B = L.y - _, V = !0
            }
            if (m.alignmentGuideEnabled && (z = v._findClosestAlignmentGuide(f, v._xAlignmentGuide).dis, u = v._findClosestAlignmentGuide(_, v._yAlignmentGuide).dis, Math.abs(z) < Math.abs(s) && (s = z, V = !0), Math.abs(u) < Math.abs(B) && (B = u, V = !0)), V) {
                V = !1;
                var w = q._zoom,
                    $ = m.getStyle("smartGuideThreshold") / w,
                    e = {};
                if (Math.abs(s) < $ && "y" !== p && (e.x = M ? s * w : s, V = !0), Math.abs(B) < $ && "x" !== p && (e.y = M ? B * w : B, V = !0), V) return e
            }
        }, _n.prototype._findClosestAlignmentGuide = function(h, Q) {
            if (!Q.length) return {
                dis: 1 / 0
            };
            for (var R, n = 0, E = Q.length - 1; E - n > 1;) R = Math.floor((n + E) / 2), Q[R].p < h ? n = R : E = R;
            var $ = Q[n].p - h,
                d = Q[E].p - h;
            return Math.abs($) <= Math.abs(d) ? {
                line: Q[n],
                dis: $,
                index: n
            } : {
                line: Q[E],
                dis: d,
                index: E
            }
        }, _n.prototype.removeAllAlignmentGuide = function(a) {
            var N = this;
            "y" !== a && (N._xAlignmentGuide = []), "x" !== a && (N._yAlignmentGuide = []), N._interactor._42()
        }, _n.prototype.removeAlignmentGuide = function(H) {
            for (var b, y, q, p = this, T = p._xAlignmentGuide, G = 0; 2 > G; G++)
                for (T = 0 === G ? p._xAlignmentGuide : p._yAlignmentGuide, b = 0, y = T.length; y > b; b++)
                    if (q = T[b], q.id === H) return T.splice(b, 1), p._interactor._42(), {
                        axis: 0 === G ? "x" : "y",
                        position: q.p
                    };
            return !1
        }, _n.prototype.adjustAlignmentGuide = function(g, _) {
            var L = this,
                p = L.removeAlignmentGuide(g);
            return p ? (L.addAlignmentGuide(p.axis, _, g), !0) : !1
        };
        var so = Xr.Guide.Rect = function(I) {
            var k = this;
            k._interactor = I
        };
        so.prototype = {}, so.prototype.constructor = so, so.prototype.gatherRects = function() {
            var l, $, i, J, z = this,
                A = z._interactor.gv,
                q = [],
                b = [],
                o = {
                    x: q,
                    y: b
                },
                N = {},
                g = A.getDataModel(),
                v = g.a("width"),
                T = g.a("height");
            v && T && (l = 0, $ = 0, i = v, J = T, q.push({
                node: g,
                type: 0,
                p: l
            }, {
                node: g,
                type: 1,
                p: l + i / 2
            }, {
                node: g,
                type: 2,
                p: l + i
            }), b.push({
                node: g,
                type: 0,
                p: $
            }, {
                node: g,
                type: 1,
                p: $ + J / 2
            }, {
                node: g,
                type: 2,
                p: $ + J
            }), N[g._id || 0] = {
                x: l,
                y: $,
                width: i,
                height: J
            }), g.each(function(x) {
                if (Mk(x) && !A.isSelected(x) && A.isVisible(x) && A.isValidGuideLineSource(x)) {
                    var r = !1;
                    if (A.sm().getSelection().each(function(i) {
                            r || (x.isHostOn(i) ? r = !0 : x.isDescendantOf(i) && (r = !0))
                        }), !r) {
                        var f = x.getRect();
                        l = f.x, $ = f.y, i = f.width, J = f.height, q.push({
                            node: x,
                            type: 0,
                            p: l
                        }, {
                            node: x,
                            type: 1,
                            p: l + i / 2
                        }, {
                            node: x,
                            type: 2,
                            p: l + i
                        }), b.push({
                            node: x,
                            type: 0,
                            p: $
                        }, {
                            node: x,
                            type: 1,
                            p: $ + J / 2
                        }, {
                            node: x,
                            type: 2,
                            p: $ + J
                        }), N[x._id] = f
                    }
                }
            }), q.sort(function(d, T) {
                return d.p - T.p
            }), b.sort(function(t, Y) {
                return t.p - Y.p
            }), z._grid = o, z._87I = N
        }, so.prototype.gatherLines = function(Y, G, Z) {
            var v, r, D, g, C, W, x, u, l, K, L, I, k = this,
                s = [k.findClosest({
                    x: Y.x,
                    y: Y.y
                }, G), k.findClosest({
                    x: Y.x + Y.w / 2,
                    y: Y.y + Y.h / 2
                }, G), k.findClosest({
                    x: Y.x + Y.w,
                    y: Y.y + Y.h
                }, G)],
                f = {},
                e = k._87I;
            Z = Z || 255;
            var j, c;
            for (k._guideLine = [], v = 0; 2 > v; v++)
                for (f = {}, 0 === v ? (g = "y", u = Y.x, l = u + Y.w) : (g = "x", u = Y.y, l = u + Y.h), r = 0; 3 > r; r++) C = s[r], C && isFinite(C[g]) && (j = 1 << 3 * v + r, Z & j && (W = C[g + "Line"], x = W.node, c = x._id || 0, f[c] || (f[c] = !0, I = e[c], "y" === g ? (K = I.x, L = I.x + I.width) : (K = I.y, L = I.y + I.height), D = W.p, k._guideLine.push({
                    type: g,
                    a: u,
                    b: l,
                    c: K,
                    d: L,
                    p: D,
                    center: 1 === W.type
                }))))
        }, so.prototype._binarySearchClosest = function(f, N) {
            if (!N.length) return {
                dis: 1 / 0
            };
            for (var Z, p = 0, g = N.length - 1; g - p > 1;) Z = Math.floor((p + g) / 2), N[Z].p < f ? p = Z : g = Z;
            var d = N[p].p - f,
                B = N[g].p - f;
            return Math.abs(d) <= Math.abs(B) ? {
                line: N[p],
                dis: d
            } : {
                line: N[g],
                dis: B
            }
        }, so.prototype.findClosest = function(r, P, x) {
            var a = this,
                v = a._interactor,
                G = v.gv,
                e = a._grid;
            x && (r = Xr.toWorldPosition(G, r));
            var B, n = a._binarySearchClosest(r.x, e.x),
                c = a._binarySearchClosest(r.y, e.y),
                j = n.dis,
                H = c.dis,
                o = G._zoom,
                U = v.getStyle("smartGuideThreshold") / o,
                W = {};
            return Math.abs(j) < U && "y" !== P && (W.x = x ? j * o : j, W.xLine = n.line, B = !0), Math.abs(H) < U && "x" !== P && (W.y = x ? H * o : H, W.yLine = c.line, B = !0), B ? W : void 0
        }, so.prototype._42 = function() {
            var T = this,
                c = T._guideLine;
            if (c && !F.Default.isCtrlDown()) {
                var z = T._interactor;
                if (z.getStyle("guideLineVisible")) {
                    var W, K, Q, I, d, P, m, a, D, M, o, C, w, L, g, O, Z, x = z.gv,
                        S = z._context,
                        Y = x.tx(),
                        q = x.ty(),
                        t = x._zoom,
                        V = z.getStyle("guideLineTextSpacing");
                    for (W = 0, K = c.length; K > W; W++) Q = c[W], a = Q.type, D = Q.p, M = Q.a, o = Q.b, C = Q.c, w = Q.d, L = Math.min(M, C), g = Math.max(o, w), "x" === a ? (I = D * t + Y, d = L * t + q, P = I, m = g * t + q) : (I = L * t + Y, d = D * t + q, P = g * t + Y, m = d), Xr.Icons.DrawIcon(z, S, Xr.Icons.MoveLineGuide, {
                        rect: [I, d, P, m],
                        center: Q.center
                    }), w >= M && o >= C || (L = M > w ? w : o, g = M > w ? M : C, Z = g - L, "x" === a ? (Q.center2center || (I -= V, P = I), d = L * t + q, m = g * t + q, O = Xr.Icons.MoveLineGuideDistanceV) : "y" === a && (Q.center2center || (d -= V, m = d), I = L * t + Y, P = g * t + Y, O = Xr.Icons.MoveLineGuideDistanceH), Xr.Icons.DrawIcon(z, S, O, {
                        x0: I,
                        y0: d,
                        x1: P,
                        y1: m,
                        dis: Z
                    }))
                }
            }
        }, so.prototype.clear = function() {
            this._guideLine = null
        };
        var ij = Xr.Guide.Hover = function(I) {
            var y = this;
            y._interactor = I
        };
        ij.prototype = {}, ij.prototype.constructor = ij, G.defineProperties(ij.prototype, {}), ij.prototype._42 = function() {
            var R = this._interactor;
            if (R.getStyle("hoverGuideVisible") && !R.gvEditing) {
                var w = R.hoverData,
                    U = R.gv;
                if (!Mk(w) || U.isSelected(w)) return R.hoverData = null, void 0;
                var f = Hm(U, w),
                    n = Xr.toScreenPosition(U, {
                        x: f.x,
                        y: f.y
                    }),
                    u = Xr.toScreenPosition(U, {
                        x: f.x + f.width,
                        y: f.y + f.height
                    });
                Xr.Icons.DrawIcon(R, R._context, Xr.Icons.HoverDataRect, {
                    min: n,
                    max: u,
                    color: R.getStyle("hoverGuideColor") || R.getStyle("baseColor"),
                    borderWidth: R.getStyle("hoverGuideBorderWidth") || 1,
                    borderPattern: R.getStyle("hoverGuideBorderPattern") || [1, 4]
                })
            }
        }, Xr.DefaultStyleMap = {
            baseColor: "rgb(51,153,255)",
            pointSize: [24, 9],
            checkSize: 7,
            rotateCheckSize: 10,
            moveSensitivity: 10,
            moveDummyThreshold: 32,
            moveDummyPosition: [0, 0, -16, -16],
            moveDummyLineExtraShift: [-32, 0],
            moveDummySensitivity: 16,
            keepAspectRatio: !1,
            rotateRound: Math.PI / 2,
            shiftRotateRound: Math.PI / 12,
            rotateSensitivity: Math.PI / 60,
            rotateAsClock: !1,
            rotateTipVisible: !0,
            shiftLineRotateRound: Math.PI / 4,
            anchorMovable: !0,
            anchorVisible: !0,
            anchorHideThreshold: 25,
            anchorOutsideVisibleThreshold: .25,
            anchorRound: .25,
            anchorSensitivity: .02,
            smartGuideThreshold: 8,
            curveIntersectSize: 5,
            curvePointIntersectSize: 8,
            edgeHostDetectPerFrame: !0,
            edgeHostEdgeMaxDistance: 12,
            edgeHostEdgeHighlighColor: "#5d5d5d",
            edgeHostPointHighlighColor: "red",
            edgeHostHighlighPeriod: 1500,
            edgeElevationEditable: !1,
            attachThreshold: 25,
            guideLineVisible: !0,
            guideLineTextSpacing: 0,
            hoverGuideVisible: !1,
            hoverGuideColor: null,
            gridBlockSize: 40,
            gridThickLinesEvery: 10,
            gridThickColor: "#5d5d5d",
            gridLightColor: "#d0d0d0",
            gridZoomThreshold: .25,
            gridAlignmentGuideColor: "#ff0000",
            gridAngle: Math.PI / 2,
            gridRotation: 0,
            groupRotateModeDefault: "block",
            groupRotateModeKey: ["ctrlKey", "metaKey"],
            rotateCursorSize: 32,
            rotateCursorRound: 45,
            tipTextColor: "#ffffff",
            tipBackground: "#333333",
            curveHighlightColor: "#30599e",
            rectPointBackground: "white",
            rectPointBorderColor: "#666666",
            rectPointShadowColor: "rgba(0,0,0,0.35)",
            shapeCtrlPointBackground: "white",
            shapeCtrlPointBorderColor: null,
            shapeCtrlPointHighlightBorder: null,
            shapeHighlighPointBackground: "#30599e",
            curveElevationVisible: !0,
            curveElevationIntersectSize: 8,
            curveElevationGuideShift: [20, 0],
            curveTipVisible: !0,
            connectGuideVisible: !0,
            connectGuideShift: [1, .25, 8, 0],
            connectGuideIntersectSize: 8,
            connectGuideGarbageIntersectsize: 25,
            connectGuideGarbageShift: [1, 1, -48, -48]
        };
        var ko = Xr.Icons = {},
            zb = 1e4,
            Ri = null,
            an = Xr.DefaultStyleMap.baseColor,
            ei = "rgb(183,232,135)",
            zp = "rgb(255,204,153)",
            wk = 6;
        F.Default.setImage("Icons.RectPoint", {
            width: wk,
            height: wk,
            comps: [{
                type: "rect",
                background: "rgb(247,247,247)",
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                },
                rect: [0, 0, wk, wk]
            }]
        }), ko.GroupSubEntityRect = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var T = ko.GroupSubEntityRect.data;
                        if (!T) return [];
                        var z = T.min,
                            b = T.max;
                        return [z.x, z.y, z.x, b.y, b.x, b.y, b.x, z.y]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return ko.GroupSubEntityRect.data.isKeyOb ? an : an
                    }
                }
            }]
        };
        var br = 4;
        ko.HoverDataRect = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var L = ko.HoverDataRect.data;
                        if (!L) return [];
                        var e = L.min,
                            _ = L.max,
                            q = br;
                        return e.x -= q, e.y -= q, _.x += q, _.y += q, [e.x, e.y, e.x, _.y, _.x, _.y, _.x, e.y]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: {
                    func: function() {
                        return ko.HoverDataRect.data.borderWidth
                    }
                },
                borderColor: {
                    func: function() {
                        return ko.HoverDataRect.data.color
                    }
                },
                borderCap: "butt",
                borderPattern: {
                    func: function() {
                        return ko.HoverDataRect.data.borderPattern
                    }
                }
            }]
        }, ko.Line = {
            comps: [{
                type: "image",
                name: "Icons.RectPoint",
                rect: {
                    func: function() {
                        return [
                            [ko.Line.data.P1.x, ko.Line.data.P1.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rect: {
                    func: function() {
                        return [
                            [ko.Line.data.P2.x, ko.Line.data.P2.y], wk, wk
                        ]
                    }
                }
            }]
        }, ko.NodeHoverGuide = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return ko.NodeHoverGuide.data
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: 1,
                borderColor: "#3399FF"
            }]
        }, ko.Rect = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var D = ko.Rect.data;
                        if (!D) return [];
                        var _ = D.LT,
                            X = D.LB,
                            x = D.RB,
                            f = D.RT;
                        return [_.x, _.y, X.x, X.y, x.x, x.y, f.x, f.y]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.LT.x, ko.Rect.data.LT.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.LB.x, ko.Rect.data.LB.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.RB.x, ko.Rect.data.RB.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.RT.x, ko.Rect.data.RT.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return ko.Rect.data.L ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.L.x, ko.Rect.data.L.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return ko.Rect.data.R ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.R.x, ko.Rect.data.R.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return ko.Rect.data.T ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.T.x, ko.Rect.data.T.y], wk, wk
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return ko.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return ko.Rect.data.B ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.Rect.data.B.x, ko.Rect.data.B.y], wk, wk
                        ]
                    }
                }
            }]
        };
        var Fe = 16;
        F.Default.setImage("Icons.Anchor", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                },
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [.50928, 6, 11.49072, 6, 6, 6, 6, .50928, 6, 11.49072]
            }, {
                type: "circle",
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                },
                shadowColor: "#1ABC9C",
                rect: [2.84391, 2.84391, 6.53697, 6.53697]
            }]
        }), ko.Anchor = {
            comps: [{
                type: "image",
                name: "Icons.Anchor",
                rect: {
                    func: function() {
                        return [
                            [ko.Anchor.data.POS.x, ko.Anchor.data.POS.y], Fe, Fe
                        ]
                    }
                }
            }]
        }, ko.TipShiftX = 12, ko.TipShiftY = 12;
        var kp = [8, 28];
        ko.TipHelper = {
            comps: [{
                type: "roundRect",
                rect: {
                    func: function() {
                        return [ko.TipHelper.data.helperPos.x, ko.TipHelper.data.helperPos.y, kp[0] * ko.TipHelper.data.size, kp[1]]
                    }
                },
                background: {
                    func: function() {
                        return Ri.getStyle("tipBackground")
                    }
                },
                opacity: .6
            }, {
                type: "text",
                text: {
                    func: function() {
                        return ko.TipHelper.data.text
                    }
                },
                rect: {
                    func: function() {
                        return [ko.TipHelper.data.helperPos.x, ko.TipHelper.data.helperPos.y, kp[0] * ko.TipHelper.data.size, kp[1]]
                    }
                },
                color: {
                    func: function() {
                        return Ri.getStyle("tipTextColor")
                    }
                },
                font: "bold 12px Arial",
                align: "center"
            }]
        };
        var fm = 7;
        ko.ShapePoint = {
            comps: [{
                type: "circle",
                visible: {
                    func: function() {
                        return !!ko.ShapePoint.data.dynamicVisible
                    }
                },
                rect: {
                    func: function() {
                        var y = ko.ShapePoint.data.point,
                            j = ko.ShapePoint.data.size || fm;
                        return [y, j + 10, j + 10]
                    }
                },
                background: {
                    func: function() {
                        var j = Date.now(),
                            C = ko.ShapePoint.data.dynamicPeriod || 1500,
                            L = Math.sin(j % C / C * Math.PI);
                        return "rgba(27,124,22," + .5 * L + ")"
                    }
                },
                borderWidth: 0
            }, {
                type: "circle",
                rect: {
                    func: function() {
                        var B = ko.ShapePoint.data.point,
                            q = ko.ShapePoint.data.size || fm;
                        return [B, q, q]
                    }
                },
                background: {
                    func: function() {
                        var c = ko.ShapePoint.data.isEnd;
                        return c ? "rgba(27,124,222,0.7)" : "#ffffff"
                    }
                },
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return ko.ShapePoint.data.color || an
                    }
                }
            }, {
                type: "rect",
                visible: {
                    func: function() {
                        return !!ko.ShapePoint.data.dynamicVisible
                    }
                },
                background: "red",
                borderWidth: 0,
                rotation: Math.PI / 4,
                borderColor: {
                    func: function() {
                        return an
                    }
                },
                rect: {
                    func: function() {
                        var V = 5;
                        return [ko.ShapePoint.data.point, V, V]
                    }
                }
            }]
        }, ko.ShapeBgCurve = {
            comps: [{
                type: "shape",
                visible: {
                    func: function() {
                        return !!ko.ShapeBgCurve.data.dynamicVisible
                    }
                },
                points: {
                    func: function() {
                        return ko.ShapeBgCurve.data.P
                    }
                },
                segments: {
                    func: function() {
                        return ko.ShapeBgCurve.data.S
                    }
                },
                background: null,
                borderWidth: 6,
                borderColor: {
                    func: function() {
                        var N = Date.now(),
                            j = ko.ShapeBgCurve.data.dynamicPeriod || 1500,
                            L = Math.sin(N % j / j * Math.PI);
                        return "rgba(27,124,22," + .3 * L + ")"
                    }
                }
            }, {
                type: "shape",
                points: {
                    func: function() {
                        return ko.ShapeBgCurve.data.P
                    }
                },
                segments: {
                    func: function() {
                        return ko.ShapeBgCurve.data.S
                    }
                },
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return ko.ShapeBgCurve.data.color || an
                    }
                }
            }]
        };
        var Vn = 8;
        ko.ShapeHighlighPoint = {
            comps: [{
                type: "circle",
                rect: {
                    func: function() {
                        var $ = ko.ShapeHighlighPoint.data;
                        return [
                            [$.x, $.y], Vn, Vn
                        ]
                    }
                },
                background: {
                    func: function() {
                        return Ri.getStyle("shapeHighlighPointBackground")
                    }
                },
                borderWidth: 0
            }]
        };
        var Lb = 10;
        ko.ShapeHighlighRealPoint = {
            comps: [{
                type: "circle",
                rect: {
                    func: function() {
                        var H = ko.ShapeHighlighRealPoint.data;
                        return [
                            [H.x, H.y], Lb, Lb
                        ]
                    }
                },
                background: "#ffffff",
                borderWidth: 2,
                borderColor: {
                    func: function() {
                        return an
                    }
                }
            }]
        };
        var Ih = 8;
        ko.ShapeHighlighCtrlPoint = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var H = ko.ShapeHighlighCtrlPoint.data,
                            j = H.x,
                            F = H.y,
                            G = Ih / 2;
                        return [j - G, F - G, j - G, F + G, j + G, F + G, j + G, F - G]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                borderWidth: 2,
                background: {
                    func: function() {
                        return Ri.getStyle("shapeCtrlPointBackground")
                    }
                },
                borderColor: {
                    func: function() {
                        return Ri.getStyle("shapeCtrlPointBorderColor") || an
                    }
                }
            }]
        };
        var vn = 3;
        ko.ShapeHighlightCurve = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return ko.ShapeHighlightCurve.data
                    }
                },
                segments: [1, 4],
                background: null,
                borderWidth: vn,
                borderColor: {
                    func: function() {
                        return Ri.getStyle("curveHighlightColor")
                    }
                }
            }]
        }, ko.ShapeGuideLine = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return ko.ShapeGuideLine.data
                    }
                },
                background: null,
                borderWidth: 1,
                borderColor: "rgb(255,204,153)"
            }]
        }, ko.MoveLineGuide = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return ko.MoveLineGuide.data.rect
                    }
                },
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return ko.MoveLineGuide.data.center ? ei : zp
                    }
                }
            }]
        };
        var Mb = 5;
        ko.MoveLineGuideDistanceH = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var F = ko.MoveLineGuideDistanceH.data,
                            r = F.x0,
                            E = F.y0;
                        return [r, E - Mb, r, E + Mb]
                    }
                },
                rotation: -Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: zp
            }, {
                type: "shape",
                points: {
                    func: function() {
                        var C = ko.MoveLineGuideDistanceH.data,
                            s = C.x1,
                            I = C.y1;
                        return [s, I - Mb, s, I + Mb]
                    }
                },
                rotation: -Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: zp
            }, {
                type: "text",
                text: {
                    func: function() {
                        return Math.round(ko.MoveLineGuideDistanceH.data.dis)
                    }
                },
                rect: {
                    func: function() {
                        var Q = ko.MoveLineGuideDistanceH.data;
                        return [
                            [(Q.x0 + Q.x1) / 2, Q.y0 - 10], 20, 20
                        ]
                    }
                },
                color: zp,
                font: "12px Arial",
                align: "center"
            }]
        }, ko.MoveLineGuideDistanceV = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var C = ko.MoveLineGuideDistanceV.data,
                            W = C.x0,
                            D = C.y0;
                        return [W - Mb, D, W + Mb, D]
                    }
                },
                rotation: Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: zp
            }, {
                type: "shape",
                points: {
                    func: function() {
                        var W = ko.MoveLineGuideDistanceV.data,
                            q = W.x1,
                            $ = W.y1;
                        return [q - Mb, $, q + Mb, $]
                    }
                },
                rotation: Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: zp
            }, {
                type: "text",
                text: {
                    func: function() {
                        return Math.round(ko.MoveLineGuideDistanceV.data.dis)
                    }
                },
                rect: {
                    func: function() {
                        var s = ko.MoveLineGuideDistanceV.data;
                        return [
                            [s.x0 - 10, (s.y0 + s.y1) / 2], 20, 20
                        ]
                    }
                },
                color: zp,
                font: "12px Arial",
                align: "center"
            }]
        }, F.Default.setImage("Icons.EdgeElevationGuideImage", {
            width: 16,
            height: 16,
            comps: [{
                type: "oval",
                background: "rgb(255,255,255)",
                borderWidth: 1,
                borderColor: "rgb(138,138,138)",
                rect: [.5, .5, 15, 15]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(44,44,44)",
                borderCap: "round",
                points: [4, 8, 8, 4, 12, 8, 8, 4, 8, 13],
                segments: [1, 2, 2, 1, 2]
            }]
        }), ko.EdgeElevationGuide = {
            comps: [{
                type: "image",
                name: "Icons.EdgeElevationGuideImage",
                rect: {
                    func: function() {
                        var y = ko.EdgeElevationGuide.data,
                            F = y.x,
                            b = y.y,
                            p = Ri.getStyle("curveElevationIntersectSize"),
                            r = Ri.getStyle("curveElevationGuideShift");
                        return F += r[0], b += r[1], [F - p, b - p, 2 * p, 2 * p]
                    }
                }
            }]
        }, F.Default.setImage("Icons.ConnectGuideBgImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                background: "#3399ff",
                fillRule: "evenodd",
                shadowColor: "#1ABC9C",
                rotation: 3.14159,
                points: [6.00001, 11.99999, 6.00001, 11.99999, 2.6863, 11.99999, 1e-5, 9.30695, 1e-5, 5.99999, 1e-5, 5.99999, 1e-5, 2.68628, 2.69305, -1e-5, 6.00001, -1e-5, 12.00001, -1e-5, 11.99998, 12.00001, 6.00001, 11.99999],
                segments: [1, 2, 4, 2, 4, 2, 2, 2]
            }]
        }), F.Default.setImage("Icons.ConnectGuideHeaderImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "oval",
                background: "#3399FF",
                borderColor: "#3399FF",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 12, 12]
            }, {
                type: "shape",
                borderWidth: 1,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [4.76, 2.56, 8.2, 5.98, 4.76, 9.44]
            }]
        }), ko.ConnectGuide = {
            comps: [{
                type: "image",
                name: "Icons.ConnectGuideBgImage",
                rotation: {
                    func: function() {
                        return ko.ConnectGuide.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        var U = ko.ConnectGuide.data.connect;
                        U.x, U.y;
                        var c = Ri.getStyle("connectGuideIntersectSize");
                        return [
                            [U.x, U.y], 2 * c, 2 * c
                        ]
                    }
                }
            }, {
                type: "image",
                name: "Icons.ConnectGuideHeaderImage",
                rect: {
                    func: function() {
                        var F = ko.ConnectGuide.data.cursorPos || ko.ConnectGuide.data.connect,
                            w = Ri.getStyle("connectGuideIntersectSize");
                        return [
                            [F.x, F.y], 2 * w - 2, 2 * w - 2
                        ]
                    }
                }
            }, {
                type: "shape",
                background: null,
                borderColor: "#3399ff",
                borderWidth: 2,
                segments: [1, 4],
                points: {
                    func: function() {
                        var v = ko.ConnectGuide.data.connect,
                            O = ko.ConnectGuide.data.cursorPos || v;
                        return [v.x, v.y, v.x + .5 * (O.x - v.x), v.y, O.x + .5 * (v.x - O.x), O.y, O.x, O.y]
                    }
                }
            }]
        }, F.Default.setImage("Icons.ConnectGuideGarbageImage", {
            width: 48,
            height: 48,
            comps: [{
                type: "oval",
                background: "rgba(0,0,0,0.1)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 48, 48]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [19.84721, 19.69091, 19.84721, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [24.10371, 19.69091, 24.10371, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [28.15279, 19.69091, 28.15279, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [11.23055, 15.22377, 36.76945, 15.189, 19.12302, 15.17121, 20.94722, 11.5228, 26.41985, 11.5228, 28.24406, 15.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [15.48702, 15.22377, 17.02595, 21.25344]
            }]
        }), F.Default.setImage("Icons.ConnectGuideDeletingImage", {
            width: 56,
            height: 56,
            comps: [{
                type: "oval",
                background: "rgba(232,0,0,0.75)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 56, 56]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [22.67939, 27.69091, 22.67939, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [26.93588, 27.69091, 26.93588, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [30.98497, 27.69091, 30.98497, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                anchorX: 0,
                anchorY: 1,
                rotation: 5.65062,
                points: [14.06272, 23.22377, 39.60163, 23.189, 21.9552, 23.17121, 23.7794, 19.5228, 29.25203, 19.5228, 31.07623, 23.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [18.3192, 23.22377, 17.02595, 21.25344]
            }]
        }), ko.ConnectGuideGarbage = {
            comps: [{
                type: "image",
                name: {
                    func: function() {
                        var N = ko.ConnectGuideGarbage.data.hover;
                        return N ? "Icons.ConnectGuideDeletingImage" : "Icons.ConnectGuideGarbageImage"
                    }
                },
                rect: {
                    func: function() {
                        var u = ko.ConnectGuideGarbage.data,
                            R = Ri.getStyle("connectGuideGarbageIntersectsize");
                        return u.hover && (R += 5), [
                            [u.x, u.y], 2 * R, 2 * R
                        ]
                    }
                }
            }]
        };
        var eg = 6;
        ko.ShapeActivingCtrl = {
            comps: [{
                type: "shape",
                visible: {
                    func: function() {
                        return ko.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var t = ko.ShapeActivingCtrl.data;
                        return [t.point.x, t.point.y, t.c1.x, t.c1.y]
                    }
                },
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                }
            }, {
                type: "shape",
                visible: {
                    func: function() {
                        return ko.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var X = ko.ShapeActivingCtrl.data;
                        return [X.point.x, X.point.y, X.c2.x, X.c2.y]
                    }
                },
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                }
            }, {
                type: "shape",
                visible: {
                    func: function() {
                        return ko.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var A = ko.ShapeActivingCtrl.data.c1,
                            j = A.x,
                            U = A.y,
                            V = eg / 2;
                        return "c1" === ko.ShapeActivingCtrl.data.hl && (V += .5), [j - V, U - V, j - V, U + V, j + V, U + V, j + V, U - V]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                borderWidth: 2,
                background: {
                    func: function() {
                        return Ri.getStyle("shapeCtrlPointBackground")
                    }
                },
                borderColor: {
                    func: function() {
                        return "c1" === ko.ShapeActivingCtrl.data.hl ? Ri.getStyle("shapeCtrlPointHighlightBorder") || an : Ri.getStyle("shapeCtrlPointBorderColor") || an
                    }
                }
            }, {
                type: "shape",
                visible: {
                    func: function() {
                        return ko.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var _ = ko.ShapeActivingCtrl.data.c2,
                            h = _.x,
                            E = _.y,
                            H = eg / 2;
                        return "c2" === ko.ShapeActivingCtrl.data.hl && (H += .5), [h - H, E - H, h - H, E + H, h + H, E + H, h + H, E - H]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                borderWidth: 2,
                background: {
                    func: function() {
                        return Ri.getStyle("shapeCtrlPointBackground")
                    }
                },
                borderColor: {
                    func: function() {
                        return "c2" === ko.ShapeActivingCtrl.data.hl ? Ri.getStyle("shapeCtrlPointHighlightBorder") || an : Ri.getStyle("shapeCtrlPointBorderColor") || an
                    }
                }
            }]
        }, ko.RoundPoint = {
            comps: [{
                type: "circle",
                background: "rgb(247,247,247)",
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return an
                    }
                },
                rect: {
                    func: function() {
                        return [
                            [ko.RoundPoint.data.x, ko.RoundPoint.data.y], wk, wk
                        ]
                    }
                }
            }]
        }, ko.AttachPoint = {
            comps: [{
                type: "rect",
                background: {
                    func: function() {
                        return ko.AttachPoint.data.isAttach ? "rgb(51,153,255)" : "rgb(247,247,247)"
                    }
                },
                borderWidth: 1,
                rotation: Math.PI / 4,
                borderColor: {
                    func: function() {
                        return an
                    }
                },
                rect: {
                    func: function() {
                        var y = ko.AttachPoint.data.isAttach ? wk + 4 : wk;
                        return [
                            [ko.AttachPoint.data.x, ko.AttachPoint.data.y], y, y
                        ]
                    }
                }
            }]
        }, ko.SimpleRect = {
            comps: [{
                type: "rect",
                background: null,
                borderWidth: {
                    func: function() {
                        return ko.SimpleRect.data.borderWidth || 1
                    }
                },
                borderColor: {
                    func: function() {
                        return ko.SimpleRect.data.color || an
                    }
                },
                rect: {
                    func: function() {
                        var P = ko.SimpleRect.data;
                        return [P.x, P.y, P.width, P.height]
                    }
                }
            }]
        }, F.Default.setImage("Icons.MoveDummyImage", {
            width: 32,
            height: 32,
            boundExtend: 12,
            attachStyle: "close",
            comps: [{
                type: "oval",
                background: "rgb(255,255,255)",
                borderColor: "#979797",
                shadow: !0,
                shadowColor: "rgba(0,0,0,0.25)",
                shadowOffsetX: 0,
                rect: [0, 0, 32, 32]
            }, {
                type: "shape",
                background: "rgb(51,153,255)",
                pixelPerfect: !0,
                points: [8.65079, 11.90713, 9.05502, 11.46921, 9.70629, 11.46921, 10.11052, 11.90713, 10.51476, 12.28891, 10.51476, 12.92895, 10.11052, 13.34441, 8.49359, 14.97258, 12.2889, 14.97258, 12.85034, 14.97258, 13.29949, 15.42172, 13.29949, 15.99439, 13.29949, 16.57828, 12.85034, 17.0162, 12.2889, 17.0162, 8.49359, 17.0162, 10.11052, 18.6556, 10.51476, 19.0486, 10.51476, 19.7111, 10.11052, 20.09288, 9.70629, 20.50834, 9.05502, 20.50834, 8.65079, 20.09288, 5.32709, 16.76917, 5.28217, 16.71303, 4.87794, 16.32002, 4.87794, 15.67998, 5.28217, 15.26452, 8.65079, 11.90713, 8.65079, 11.90713, 8.65079, 11.90713, 13.3444, 10.09931, 13.3444, 10.09931, 12.94017, 10.50354, 12.2889, 10.50354, 11.88467, 10.09931, 11.48043, 9.69507, 11.48043, 9.0438, 11.88467, 8.63957, 15.27574, 5.25973, 15.66874, 4.86672, 16.32001, 4.86672, 16.73547, 5.25973, 16.76917, 5.31586, 20.10409, 8.63957, 20.50832, 9.0438, 20.50832, 9.68385, 20.10409, 10.09931, 19.69986, 10.49231, 19.07105, 10.50354, 18.64436, 10.09931, 17.02742, 8.45991, 17.02742, 12.26646, 17.02742, 12.83912, 16.55581, 13.31072, 15.99438, 13.31072, 15.43295, 13.31072, 14.98379, 12.83912, 14.98379, 12.26646, 14.96134, 8.45991, 13.3444, 10.09931, 13.3444, 10.09931, 13.3444, 10.09931, 21.90069, 13.33318, 21.90069, 13.33318, 21.49646, 12.91771, 21.49646, 12.27768, 21.90069, 11.89591, 22.31615, 11.45798, 22.94497, 11.45798, 23.36043, 11.89591, 26.72904, 15.2533, 27.12205, 15.66876, 27.12205, 16.3088, 26.72904, 16.7018, 26.6729, 16.75794, 23.36043, 20.08165, 22.94497, 20.49711, 22.31615, 20.49711, 21.90069, 20.08165, 21.49646, 19.69987, 21.49646, 19.03737, 21.90069, 18.64437, 23.51763, 17.00498, 19.72231, 17.00498, 19.14965, 17.00498, 18.71173, 16.56705, 18.71173, 15.98316, 18.71173, 15.41049, 19.14965, 14.96135, 19.72231, 14.96135, 23.51763, 14.96135, 21.90069, 13.33318, 21.90069, 13.33318, 21.90069, 13.33318, 11.88467, 23.32675, 11.88467, 23.32675, 11.48043, 22.94498, 11.48043, 22.27125, 11.88467, 21.88948, 12.2889, 21.48523, 12.94017, 21.48523, 13.3444, 21.88948, 14.96134, 23.52887, 14.98379, 19.7111, 14.98379, 19.14966, 15.43295, 18.67805, 15.99438, 18.67805, 16.55581, 18.67805, 17.02742, 19.14966, 17.02742, 19.7111, 17.02742, 23.52887, 18.64436, 21.88948, 19.07105, 21.48523, 19.69986, 21.48523, 20.10409, 21.88948, 20.50832, 22.27125, 20.50832, 22.94498, 20.10409, 23.32675, 16.76917, 26.65045, 16.73547, 26.72905, 16.32001, 27.13329, 15.66874, 27.13329, 15.27574, 26.72905, 11.88467, 23.32675, 11.88467, 23.32675, 11.88467, 23.32675],
                segments: [1, 4, 4, 2, 2, 4, 4, 2, 2, 4, 4, 2, 2, 4, 2, 2, 2, 1, 2, 4, 4, 2, 4, 2, 2, 4, 4, 2, 2, 4, 4, 2, 2, 2, 2, 1, 2, 4, 4, 2, 4, 2, 2, 4, 4, 2, 2, 4, 4, 2, 2, 2, 2, 1, 2, 4, 4, 2, 2, 4, 4, 2, 2, 4, 4, 2, 2, 4, 2, 2, 2]
            }]
        }), ko.MoveDummy = {
            comps: [{
                type: "image",
                name: "Icons.MoveDummyImage",
                rect: {
                    func: function() {
                        var q = ko.MoveDummy.data;
                        return [
                            [q.pos.x, q.pos.y], 2 * q.size, 2 * q.size
                        ]
                    }
                }
            }]
        }, Xr.Icons.DrawIcon = function(j, M, P, C) {
            P.width = P.height = zb, P.data = C, Ri = j, F.Default.drawImage(M, P, 0, 0, zb, zb), Ri = O
        }, Xr.Icons.MapPoints = function(p, Z) {
            for (var y = 0, z = p.length; z > y; y++) p[y] /= Z
        }, Xr.roundTo = function(V, e, j) {
            var d = Math.abs(V % e);
            return j > d || j > e - d ? e * Math.round(V / e) : V
        }, Xr.toFixed = function(p) {
            return Math.round(100 * p) / 100
        }, Xr.getDataMatrix = function(Q) {
            if (Q instanceof F.Shape) {
                var L = new F.Math.Matrix2d,
                    p = Q.getPosition();
                return L.translate(-p.x, -p.y).scale(Q.getScale().x, Q.getScale().y).rotate(Q.getRotation()).translate(p.x, p.y), L
            }
            return Q.getMatrix ? Q.getMatrix() : new F.Math.Matrix2d
        };
        var Yj = Xr.Math.Curve = function() {
            this._curves = []
        };
        Yj.prototype = {}, Yj.prototype.constructor = Yj, Yj.prototype.createFromHtShape = function(_, k, T) {
            k instanceof F.List && (k = k.toArray());
            var c, n, g, r, i, J, d, I = this,
                p = null,
                t = null,
                e = 0,
                V = Xr.Math.Vector2,
                K = Xr.Math.CubicBezier,
                B = function(L) {
                    return new V(_[L], _[L + 1], T ? T[L / 2] : O)
                };
            for (n = 0, g = k.length; g > n; n++) {
                switch (r = k[n], i = null, r) {
                    case 1:
                        t = B(e), p = t, e += 2;
                        break;
                    case 2:
                        c = B(e), e += 2, i = new K(t, t.clone(), c.clone(), c), t = c;
                        break;
                    case 3:
                        J = B(e), c = B(e + 2), e += 4, i = new K(t, J.clone().sub(t).multiplyScalar(2 / 3).add(t), J.clone().sub(c).multiplyScalar(2 / 3).add(c), c), t = c;
                        break;
                    case 4:
                        J = B(e), d = B(e + 2), c = B(e + 4), e += 6, i = new K(t, J, d, c), t = c;
                        break;
                    case 5:
                        if (!p) break;
                        i = new K(t, t.clone(), p.clone(), p), t = null, p = null
                }
                i && (i._index = I._curves.length, I._curves.push(i))
            }
        }, Yj.prototype.checkPoint = function(w, C) {
            var $, u, s, q, X, g = this,
                f = g._curves;
            for ($ = 0, u = f.length; u > $; $++)
                if (q = f[$], X = q.intersectRect(w, C, C), X.length) return s = 0, X.forEach(function(k) {
                    s += k.t
                }), s /= X.length, w = q.getPointAt(s), w.t = s, {
                    bezier: q,
                    intersection: w
                }
        }, Yj.prototype.insertKnot = function(D, c) {
            var n = D.insertKnot(c),
                y = this,
                E = y._curves;
            E.splice(D._index, 1, n[0], n[1])
        }, Yj.prototype._isCloseEnough = function(O, m) {
            return Math.abs(O.x - m.x) < 1e-6 && Math.abs(O.y - m.y) < 1e-6
        }, Yj.prototype._isSamePoint = function(j, L) {
            return j === L
        }, Yj.prototype.moveRealPoint = function(L, X) {
            var a = this,
                Q = a._curves,
                x = X.clone().sub(L);
            Q.forEach(function(r) {
                var k = r._p1;
                r._p2, r._p3;
                var Z = r._p4;
                a._isSamePoint(k, L) && (r._p2.add(x), r._p1 = X), a._isSamePoint(Z, L) && (r._p3.add(x), r._p4 = X)
            })
        }, Yj.prototype.moveCtrlDueToRealPointMovement = function(A, I) {
            var c = this,
                Z = c._curves,
                B = function(a) {
                    a.add(I), a.e && I.e && (a.e += I.e)
                };
            Z.forEach(function(e) {
                var C = e._p1;
                e._p2, e._p3;
                var r = e._p4;
                c._isSamePoint(C, A) && B(e._p2), c._isSamePoint(r, A) && B(e._p3)
            })
        }, Yj.prototype.moveCtrlPoint = function(B, z, v) {
            var C = B[v];
            if (C) {
                C.e !== O && (z.e = C.e);
                var G = this,
                    l = G._curves;
                z.clone().sub(C), l.forEach(function(w) {
                    var E;
                    "c2" === v ? E = "_p2" : "c1" === v && (E = "_p3"), G._isSamePoint(w[E], C) && (w[E] = z)
                }), B[v] = z
            }
        }, Yj.prototype.deleteRealPoint = function(d, E) {
            var t, p, j, Q, q, Y, O, b = this,
                W = b._curves,
                N = {},
                U = [],
                s = Xr.Math.CubicBezier;
            for (p = 0, j = W.length; j > p; p++) t = W[p], Q = t._p1, q = t._p2, Y = t._p3, O = t._p4, (N[p] || !b._isSamePoint(Q, d)) && (b._isSamePoint(O, d) ? j > p + 1 && b._isSamePoint(W[p + 1]._p1, d) && (E || U.push(new s(Q, q, W[p + 1]._p3, W[p + 1]._p4))) : U.push(t));
            b._curves = U
        }, Yj.prototype.findPairs = function(D, b) {
            var P, v, r, w, M, T, s, k, B = this,
                J = B._curves,
                x = {},
                a = [];
            for (v = 0, r = J.length; r > v; v++) P = J[v], w = P._p1, M = P._p2, T = P._p3, s = P._p4, !x[v] && B._isSamePoint(w, D) && (b ? a.push({
                point: w,
                r2: s
            }) : a.push({
                point: w,
                c2: M
            })), B._isSamePoint(s, D) && (k = b ? {
                point: s,
                r1: w
            } : {
                point: s,
                c1: T
            }, r > v + 1 && B._isSamePoint(J[v + 1]._p1, D) && (b ? k.r2 = J[v + 1]._p4 : k.c2 = J[v + 1]._p2, x[v + 1] = !0), a.push(k));
            return a
        }, Yj.prototype.toHtShape = function() {
            var x = this,
                T = x._curves,
                y = [],
                M = [],
                h = {
                    x: 1 / 0,
                    y: 1 / 0
                };
            return T.forEach(function(L) {
                var g = L._p1,
                    r = L._p2,
                    t = L._p3,
                    F = L._p4;
                return x._isCloseEnough(g, h) || (y.push(1), M.push(g.clone())), h = F, x._isCloseEnough(g, r) && x._isCloseEnough(t, F) ? (y.push(2), M.push(F.clone()), void 0) : (y.push(4), M.push(r.clone(), t.clone(), F.clone()), void 0)
            }), {
                segments: y,
                points: M
            }
        };
        var mf = Xr.Math.CubicBezier = function(j, C, M, G) {
            var E = this;
            E._id = Xr.Math.CubicBezier._globalId++, E._p1 = j, E._p2 = C, E._p3 = M, E._p4 = G
        };
        mf._globalId = 1, mf.prototype = {}, mf.prototype.constructor = mf, mf.prototype.toString = function() {
            return this._id
        }, mf.prototype.intersectRect = function(i, q, e) {
            var S = q / 2,
                z = e / 2,
                W = i.x,
                L = i.y,
                y = Xr.Math.Vector2,
                U = new y(-S + W, -z + L),
                C = new y(S + W, z + L),
                a = new y(C.x, U.y),
                g = new y(U.x, C.y),
                u = this,
                I = u.intersectLine(U, a),
                v = u.intersectLine(a, C),
                N = u.intersectLine(C, g),
                D = u.intersectLine(g, U),
                n = I.concat(v).concat(N).concat(D);
            return n
        }, mf.prototype.intersectLine = function(O, p) {
            var A, b, Y, M, g, i, G, V, U, E, T, c, F, B = this,
                K = O.clone().min(p),
                Q = O.clone().max(p);
            M = B._p1, g = B._p2, i = B._p3, G = B._p4, A = M.clone().multiplyScalar(-1), b = g.clone().multiplyScalar(3), Y = i.clone().multiplyScalar(-3), T = A.add(b).add(Y).add(G), A = M.clone().multiplyScalar(3), b = g.clone().multiplyScalar(-6), Y = i.clone().multiplyScalar(3), E = A.add(b).add(Y), A = M.clone().multiplyScalar(-3), b = g.clone().multiplyScalar(3), U = A.add(b), V = M.clone(), F = new Xr.Math.Vector2(O.y - p.y, p.x - O.x), c = O.x * p.y - p.x * O.y;
            for (var j = B.getRoots(F.dot(T), F.dot(E), F.dot(U), F.dot(V) + c), n = new Array, h = 0, Z = j.length; Z > h; h++) {
                var r = j[h];
                if (!(0 > r || r > 1)) {
                    var C = B.getPointAt(r);
                    C.t = r, O.x == p.x ? K.y <= C.y && C.y <= Q.y && n.push(C) : O.y == p.y ? K.x <= C.x && C.x <= Q.x && n.push(C) : C.x >= K.x && C.y >= K.y && C.x <= Q.x && C.y <= Q.y && n.push(C)
                }
            }
            return n
        }, mf.prototype.solveTForPoint = function(Q) {
            var v, D, k, h, y = this;
            v = y._p1.x - Q.x, D = y._p2.x - Q.x, k = y._p3.x - Q.x, h = y._p4.x - Q.x;
            for (var H = y.getRoots(h - 3 * k + 3 * D - v, 3 * k - 6 * D + 3 * v, 3 * D - 3 * v, v), K = O, T = 1 / 0, V = 0, F = H.length; F > V; V++) {
                var n = H[V];
                if (!(0 > n || n > 1)) {
                    var j = y.getPointAt(n);
                    j.t = n;
                    var $ = Math.abs(j.y - Q.y);
                    T > $ && (T = $, K = j)
                }
            }
            return K
        }, mf.prototype.getPointAt = function(b) {
            var o = this,
                V = o._p1,
                J = o._p2,
                A = o._p3,
                p = o._p4,
                g = V.clone().lerp(J, b),
                r = J.clone().lerp(A, b),
                x = A.clone().lerp(p, b),
                F = g.lerp(r, b),
                v = r.lerp(x, b);
            return F.lerp(v, b)
        }, mf.prototype.getPointByPercentage = function(d) {
            var Y = this.length * d,
                S = this._cacheLength,
                D = S.length;
            if (0 === Y) return S[0].point;
            if (d >= 1) return S[D - 1].point;
            for (var E = 0; D > E; E++) {
                var U = S[E];
                if (!(U.len < Y)) {
                    var Z = S[E - 1];
                    return U.point.clone().sub(Z.point).setLength(Y - Z.len).add(Z.point)
                }
            }
        }, mf.prototype.getTByPercentage = function(y) {
            var c = this.length * y,
                p = this._cacheLength,
                h = p.length;
            if (0 === c || 0 >= y) return p[0].t;
            if (y >= 1) return p[h - 1].t;
            for (var u = 0; h > u; u++) {
                var K = p[u];
                if (!(K.len < c)) {
                    var x = p[u - 1];
                    return (c - x.len) / (K.len - x.len) * (K.t - x.t) + x.t
                }
            }
        }, mf.prototype.getRoots = function(X, e, m, i) {
            var $, G, l, J, A, h = new Array;
            if (Math.abs(X) < 1e-6) {
                var $ = e,
                    G = m / $,
                    l = i / $,
                    J = G * G - 4 * l;
                if (J > 0) {
                    var A = Math.sqrt(J);
                    h.push(.5 * (-G + A)), h.push(.5 * (-G - A))
                } else 0 == J && h.push(.5 * -G)
            }
            e /= X, m /= X, i /= X, $ = (3 * m - e * e) / 3, G = (2 * e * e * e - 9 * m * e + 27 * i) / 27;
            var D = e / 3,
                Q = G * G / 4 + $ * $ * $ / 27,
                Z = G / 2;
            if (Math.abs(Q) <= 1e-6 && (Q = 0), Q > 0) {
                var b, H, A = Math.sqrt(Q);
                b = -Z + A, H = b >= 0 ? Math.pow(b, 1 / 3) : -Math.pow(-b, 1 / 3), b = -Z - A, b >= 0 ? H += Math.pow(b, 1 / 3) : H -= Math.pow(-b, 1 / 3), h.push(H - D)
            } else if (0 > Q) {
                var E = Math.sqrt(-$ / 3),
                    S = Math.atan2(Math.sqrt(-Q), -Z) / 3,
                    M = Math.cos(S),
                    u = Math.sin(S),
                    q = Math.sqrt(3);
                h.push(2 * E * M - D), h.push(-E * (M + q * u) - D), h.push(-E * (M - q * u) - D)
            } else {
                var b;
                b = Z >= 0 ? -Math.pow(Z, 1 / 3) : Math.pow(-Z, 1 / 3), h.push(2 * b - D), h.push(-b - D)
            }
            return h
        }, mf.prototype._70I = function() {
            var g = this;
            return g._p1.distanceToSquared(g._p2) < 1e-10 && g._p3.distanceToSquared(g._p4) < 1e-10
        }, mf.prototype.insertKnot = function(i) {
            var s = this,
                P = s._p1,
                o = s._p2,
                g = s._p3,
                F = s._p4,
                u = P.clone().lerp(o, i),
                A = o.clone().lerp(g, i),
                f = g.clone().lerp(F, i),
                G = u.clone().lerp(A, i),
                V = A.clone().lerp(f, i),
                J = G.clone().lerp(V, i);
            return s._70I() ? (P.clone().lerp(F, i), [new Xr.Math.CubicBezier(P, P.clone(), J.clone(), J), new Xr.Math.CubicBezier(J, J.clone(), F.clone(), F)]) : [new Xr.Math.CubicBezier(P, u, G, J), new Xr.Math.CubicBezier(J, V, f, F)]
        }, G.defineProperties(mf.prototype, {
            length: {
                get: function() {
                    var P = this._cacheLength;
                    if (!P) {
                        P = this._cacheLength = [];
                        for (var f = this._p1, S = 0, s = 0; 1 >= S;) {
                            var A = this.getPointAt(S += .001);
                            s += A.clone().sub(f).length(), f = A, P.push({
                                len: s,
                                t: S,
                                point: A.clone()
                            })
                        }
                    }
                    return P[P.length - 1].len
                }
            },
            p1: {
                get: function() {
                    return this._p1
                },
                set: function(u) {
                    this._p1 = u, this._cacheLength = O
                }
            },
            p2: {
                get: function() {
                    return this._p2
                },
                set: function(x) {
                    this._p2 = x, this._cacheLength = O
                }
            },
            p3: {
                get: function() {
                    return this._p3
                },
                set: function(k) {
                    this._p3 = k, this._cacheLength = O
                }
            },
            p4: {
                get: function() {
                    return this._p4
                },
                set: function(U) {
                    this._p4 = U, this._cacheLength = O
                }
            }
        });
        var wh = F.Default.getInternal().ui().EdgeUI,
            oh = {
                _47O: function(o) {
                    var S = this,
                        Y = oh.getBackups()._47O;
                    Xr.inEdit(S.gv) || Y.call(S, o)
                }
            };
        Xr.Inject.registAsModule(oh, wh);
        var Bd = F.Default.getInternal().ui().NodeUI,
            Tr = {
                _47O: function(c) {
                    var g = this,
                        J = Tr.getBackups()._47O;
                    Xr.inEdit(g.gv) || J.call(g, c)
                },
                getSelectWidth: function() {
                    var z = this,
                        k = z.gv,
                        m = z._data;
                    if (k.isEditable(m) && Xr.inEdit(k)) return 0;
                    var v = Tr.getBackup("getSelectWidth");
                    return v.call(z)
                }
            };
        Xr.Inject.registAsModule(Tr, Bd);
        var eq = F.graph.GraphView,
            Ok = {
                _editPointSize: function() {
                    var E = F.Default.isTouchable,
                        i = Xr.getStyle("pointSize");
                    return i[E ? 0 : 1]
                }(),
                isPointEditable: function(u) {
                    var n = this;
                    if (Xr.inEdit(n)) return n._pointEditableFunc ? n._pointEditableFunc(u) : !0;
                    var g = Ok.getBackup("isPointEditable");
                    g.call(n, u)
                },
                isEditable: function(M) {
                    var g, x = this,
                        d = Ok.getBackup("isEditable");
                    if (g = M instanceof Xr.Group ? !0 : d.call(x, M), !Xr.inEdit(x)) return g;
                    if (!(M instanceof F.Edge)) return g;
                    if (!M.s("2d.editable")) return !1;
                    var E = x.getEditableFunc();
                    return E ? E(M) : !0
                },
                _42: function(L, d) {
                    var h = this,
                        A = Ok.getBackups()._42;
                    if (A.call(h, L, d), Xr.inEdit(h)) {
                        var T = h.getEditInteractor();
                        T.drawImpl()
                    }
                }
            };
        Xr.Inject.registAsModule(Ok, eq);
        var Ub = F.Default.getInternal().ui().ShapeUI,
            Zr = {
                _47O: function(c) {
                    var W = this,
                        o = Zr.getBackups()._47O;
                    Xr.inEdit(W.gv) || o.call(W, c)
                }
            };
        Xr.Inject.registAsModule(Zr, Ub);
        var jo = F.graph.DefaultInteractor,
            zh = {
                handle_mousewheel: function(b) {
                    var J = this,
                        U = zh.getBackup("handle_mousewheel");
                    Xr.inEdit(J.gv) || U.call(J, b)
                }
            };
        Xr.Inject.registAsModule(zh, jo);
        var sl = F.graph.MoveInteractor,
            Wf = {
                _calcShift: function(H, y) {
                    var B = this,
                        V = Wf.getBackup("_calcShift"),
                        u = B.gv;
                    if (!Xr.inEdit(u)) return V.call(B, H, y);
                    var M = u.getEditInteractor(),
                        A = M.getSubModule("Move").calcShift(H, y, B);
                    return A || V.call(B, H, y)
                },
                clear: function(i) {
                    var J = this,
                        N = Wf.getBackup("clear");
                    N.call(J, i);
                    var Q = J.gv;
                    if (Xr.inEdit(Q)) {
                        var H = Q.getEditInteractor();
                        H.getSubModule("Move").clear(i)
                    }
                }
            };
        Xr.Inject.registAsModule(Wf, sl);
        var so = Xr.Rect = function(Q) {
            this.catalog = "Rect", this._interactor = Q
        };
        so.prototype = {}, so.prototype.constructor = so, so.prototype.gatherInfo = function(Z, C) {
            var G = this;
            if (1 === C.length) {
                var j = C[0];
                return j instanceof F.Shape && j._70I() ? G.gatherLine(Z, j) : je(j, Z) ? !1 : G.gatherSingleTarget(Z, j)
            }
            return C.length > 1 ? G.gatherMultiTargets(Z, C) : !1
        }, so.prototype.gatherSingleTarget = function(Y, g) {
            if (g.getCorners) {
                var d, N = this,
                    r = N.info;
                N.target = g, d = N.screenInfo = {};
                var z = g.getCorners();
                r.LT = new Xr.Math.Vector2(z[0]), r.LB = new Xr.Math.Vector2(z[1]), r.RB = new Xr.Math.Vector2(z[2]), r.RT = new Xr.Math.Vector2(z[3]), r.T = r.LT.clone().add(r.RT).divideScalar(2), r.B = r.LB.clone().add(r.RB).divideScalar(2), r.L = r.LT.clone().add(r.LB).divideScalar(2), r.R = r.RT.clone().add(r.RB).divideScalar(2);
                for (var F in r) d[F] = Xr.toScreenPosition(Y, r[F]);
                var J = N._interactor,
                    m = J.getStyle("checkSize"),
                    K = function(V, P, $) {
                        var r = P.clone().sub(V).setLength(-m),
                            o = $.clone().sub(V).setLength(-m),
                            d = r.add(o).add(V);
                        return d
                    };
                return d.rotLT = K(d.LT, d.RT, d.LB), d.rotLB = K(d.LB, d.LT, d.RB), d.rotRB = K(d.RB, d.LB, d.RT), d.rotRT = K(d.RT, d.LT, d.RB), d.rotT = d.rotLT.clone().add(d.rotRT).divideScalar(2), d.rotB = d.rotLB.clone().add(d.rotRB).divideScalar(2), d.rotL = d.rotLT.clone().add(d.rotLB).divideScalar(2), d.rotR = d.rotRT.clone().add(d.rotRB).divideScalar(2), d.rotation = g.getRotation(), N.gatherConnectInfo(), !0
            }
        }, so.prototype.gatherConnectInfo = function() {
            var f = this,
                X = f.target,
                l = f._interactor,
                j = f.screenInfo,
                P = l.gv;
            if (P.isConnectActionVisible(X) && l.getStyle("connectGuideVisible")) {
                var p;
                X.s && (p = X.s("connectGuideShift")), p || (p = l.getStyle("connectGuideShift"));
                var K = X.getAnchor(),
                    V = X.getSize(),
                    Z = X.toGlobal({
                        x: V.width * (p[0] - K.x),
                        y: V.height * (p[1] - K.y)
                    });
                Z = Xr.toScreenPosition(P, Z), j.P1 ? Z.add(j.P2.clone().sub(j.P1).setLength(p[2])) : (Z.add(j.RT.clone().sub(j.LT).setLength(p[2])), Z.add(j.LB.clone().sub(j.LT).setLength(p[3]))), j.connect = Z
            }
        }, so.prototype.gatherMultiTargets = function(C, Y) {
            var f = Xr.Group.findOrCreateGroup(Y, this._interactor._uuid);
            if (!f) return !1;
            var o = this;
            return o.editing && "rotate" !== o.editing.mode || f.calcInfo(), o.gatherSingleTarget(C, f)
        }, so.prototype.gatherLine = function(P, D) {
            this.target = D;
            var d = this.screenInfo = {},
                J = D.getPoints(),
                B = Xr.getDataMatrix(D);
            return d.P1 = Xr.toScreenPosition(P, B.apply(J.get(0))), d.P2 = Xr.toScreenPosition(P, B.apply(J.get(1))), this.gatherConnectInfo(), !0
        }, so.ResizeKeys = ["LT", "RB", "LB", "RT", "L", "R", "B", "T"], so.ResizeDirection = [{
            x: -1,
            y: -1
        }, {
            x: 1,
            y: 1
        }, {
            x: -1,
            y: 1
        }, {
            x: 1,
            y: -1
        }, {
            x: -1,
            y: 0
        }, {
            x: 1,
            y: 0
        }, {
            x: 0,
            y: 1
        }, {
            x: 0,
            y: -1
        }], so.RotateKeys = ["rotLT", "rotRB", "rotLB", "rotRT", "rotL", "rotR", "rotB", "rotT"], so.prototype.check = function(Q, n, N) {
            if (F.Default.isLeftButton(n)) {
                var C = this;
                if (C.editing = null, C.tipInfo = null, C.screenInfo) {
                    var M = C.target,
                        A = Q.isEditable(M),
                        q = C.screenInfo;
                    if (A && q.connect) {
                        var Y = C._checkConnect(N);
                        if (Y) return Y
                    }
                    if (q.P1) return C._checkLine(N);
                    var X, e, O, o = null,
                        d = C._interactor,
                        P = d.getStyle("checkSize");
                    if (A && Q.isRectEditable(M))
                        for (e = 0; e < Xr.Rect.ResizeKeys.length; e++)
                            if (O = Xr.Rect.ResizeKeys[e], Xr.checkHit(N, q[O], P)) {
                                o = O, X = "resize";
                                break
                            }
                    if (!o && A && Q.isRotationEditable(M) && !d.getStyle("rotateAsClock")) {
                        var z = d.getStyle("rotateCheckSize");
                        for (e = 0; e < Xr.Rect.RotateKeys.length; e++)
                            if (O = Xr.Rect.RotateKeys[e], Xr.checkHit(N, q[O], z)) {
                                o = O, X = "rotate";
                                break
                            }
                    }
                    if (!o) return d.setCursor("default"), void 0;
                    if ("rotate" === X) {
                        var g, i = Q.lp(n);
                        if (M instanceof Xr.Group) {
                            var f = d.getStyle("groupRotateModeKey");
                            "string" == typeof f && (f = [f]);
                            for (var x = !1, u = 0, R = f.length; R > u; u++)
                                if (n[f[u]]) {
                                    x = !0;
                                    break
                                }
                            var L = d.getStyle("groupRotateModeDefault");
                            g = x ? "batch" === L ? "block" : "batch" : L
                        }
                        var U = "batch" === g ? M.getAnchor2() : M.getPosition(),
                            y = Math.atan2(i.y - U.y, i.x - U.x);
                        d._setRotateCursor(y), C.editing = {
                            mode: X,
                            key: o,
                            pos: U,
                            flipY: M.getScale().y < 0,
                            rotation: M.getRotation(),
                            hitRot: y
                        }, g && (C.editing.groupRotateMode = g)
                    } else {
                        var k = Xr.Rect.ResizeKeys.indexOf(o),
                            K = Xr.Rect.ResizeDirection[k],
                            c = Math.cos(M.getRotation()),
                            _ = Math.sin(M.getRotation()),
                            a = K.x * Math.sign(M.getScale().x),
                            j = K.y * Math.sign(M.getScale().y),
                            I = Math.atan2(-_ * a - c * j, c * a - _ * j),
                            B = (Math.round(I / (Math.PI / 4)) + 8) % 8,
                            h = ["ew-resize", "nesw-resize", "ns-resize", "nwse-resize", "ew-resize", "nesw-resize", "ns-resize", "nwse-resize"][B];
                        this._interactor.setCursor(h);
                        var D = M.getWidth(),
                            r = M.getHeight(),
                            b = M.getAnchor();
                        C.editing = {
                            mode: X,
                            key: o,
                            rect: {
                                x: -D * b.x,
                                y: -r * b.y,
                                width: D,
                                height: r
                            },
                            anchor: b,
                            matrix: M.getMatrix()
                        }
                    }
                    return o
                }
            }
        }, so.prototype._checkLine = function(z) {
            var h = this;
            h.screenInfo;
            var c, d = h._interactor.getStyle("checkSize");
            if (Xr.checkHit(z, h.screenInfo.P1, d)) c = "P1";
            else {
                if (!Xr.checkHit(z, h.screenInfo.P2, d)) return this._interactor.setCursor("default"), void 0;
                c = "P2"
            }
            return h.editing = {
                mode: "line",
                key: c
            }, c
        }, so.prototype._checkConnect = function(Y) {
            var O = this,
                s = O.screenInfo,
                E = O._interactor,
                w = E.getStyle("connectGuideIntersectSize"),
                y = s.connect,
                V = Y.x,
                m = y.x;
            if (m > V && w > m - V && Math.abs(y.y - Y.y) < w || V >= m && Xr.checkHit(Y, y, w)) {
                var r = "connect",
                    i = z.getConnectAction(E.gv);
                if (O.editing = {
                        mode: r
                    }, i && i.delete)
                    if (O.target instanceof Xr.Group) {
                        var T = !0;
                        E.gv.sm().getSelection().each(function(x) {
                            i.delete.visible.call(null, E.gv, x) || (T = !1)
                        }), O.editing.hasDeleteAction = T
                    } else i.delete.visible.call(null, E.gv, O.target) && (O.editing.hasDeleteAction = !0);
                return E.setCursor("default"), r
            }
        }, so.prototype._fireEditEvent = function(s, r) {
            var n = this._interactor,
                M = this.editing;
            if (M) {
                var k = M.mode;
                k = "rotate" === k ? "Rotation" : "connect" === k ? "Connection" : "resize" === k ? "Rect" : k[0].toUpperCase() + k.slice(1), n.fi({
                    kind: s + "Edit" + k,
                    event: r
                })
            }
        }, so.prototype.startEdit = function(D, l) {
            D.startDragging(l);
            var X = this;
            X._interactor.fi({
                kind: "prepareEdit",
                event: l
            });
            var P = X.editing,
                y = X.target;
            if (P) {
                if (X._fireEditEvent("begin", l), P.started = !0, "rotate" === P.mode) return P.groupRotateMode && y.beginRotate(P), D._42(), void 0;
                if ("connect" !== P.mode)("line" === P.mode || y && 0 === y.getRotation()) && (X._inSmartGuide = !0, X._interactor.rectGuide.gatherRects());
                else if (P.hasDeleteAction) {
                    var A = D.gv,
                        p = X._interactor.getStyle("connectGuideGarbageShift");
                    P.garbageInfo = {
                        x: A.getWidth() * p[0] + p[2],
                        y: A.getHeight() * p[1] + p[3],
                        size: X._interactor.getStyle("connectGuideGarbageIntersectsize")
                    }, D._42()
                }
            }
        }, so.prototype._46O = function(v) {
            var H, h, o = this,
                m = o.editing,
                P = o.target;
            if (m) {
                if ("connect" === m.mode && !m.canceled && !m.deleted) try {
                    m.garbageInfo && m.garbageInfo.hover ? z.doDeleteConnectionAction(o._interactor.gv, P) : z.doConnectAction(o._interactor.gv, P, m.target)
                } catch (d) {
                    console.error(d)
                }
                h = m.freezeFlag, H = o.editing.groupRotateMode, o._fireEditEvent("end", v), o.editing = null
            }
            o.tipInfo = null, o._inSmartGuide && (o._interactor.rectGuide.clear(), o._inSmartGuide = !1), H && P && P.endRotate(), P instanceof F.Block && (h === O ? delete P._freezeSyncFromChildren : P._freezeSyncFromChildren = h, P.updateFromChildren())
        }, so.prototype.handleNormalStateDelete = function() {
            var Q = this,
                A = Q.editing;
            if (A && "connect" === A.mode && !A.canceled && !A.deleted) {
                if (A.garbageInfo) {
                    try {
                        z.doDeleteConnectionAction(Q._interactor.gv, Q.target)
                    } catch (O) {
                        console.error(O)
                    }
                    A.garbageInfo = null
                }
                return A.cursorPos = null, A.targetCorners = null, A.deleted = !0, Q._interactor._42(), !0
            }
        }, so.prototype.handleNormalStateKeyDown = function(Q) {
            var e = this,
                o = e.editing;
            return !o || "connect" !== o.mode || o.canceled || o.deleted ? void 0 : F.Default.isEsc(Q) ? (o.cursorPos = null, o.targetCorners = null, o.canceled = !0, e._interactor._42(), !0) : void 0
        }, so.prototype.handleEdit = function(R, i) {
            var J = this,
                W = J.editing;
            if (W) {
                var T, Q, g, k, U, O = J.target,
                    q = W.key,
                    N = W.mode,
                    D = R.lp(i),
                    n = J._interactor;
                if ("connect" === N) {
                    if (W.canceled) return;
                    if (W.deleted) return;
                    W.cursorPos = n._getLogicalPoint(i);
                    var y = W.garbageInfo;
                    return y && Xr.checkHit(W.cursorPos, y, y.size) ? (y.hover = !0, W.target = null, W.targetCorners = null) : (y && (y.hover = !1), W.target = R.getDataAt(D, function(g) {
                        return R.isSelectable(g) ? Mk(g) ? !0 : !1 : !1
                    }) || null, W.targetCorners = Xr.getTargetCornersOnScreen(R, W.target)), n._42(), void 0
                }
                if ("rotate" === N) {
                    var c, v, A = W.pos,
                        V = Math.atan2(D.y - A.y, D.x - A.x);
                    if (W.groupRotateMode ? v = V - W.hitRot : (c = V - W.hitRot, v = W.rotation + c), v %= 2 * Math.PI, 0 > v && (v += 2 * Math.PI), !F.Default.isCtrlDown(i)) {
                        var C, z;
                        ck(i) ? (C = n.getStyle("shiftRotateRound"), z = C / 2) : (C = n.getStyle("rotateRound"), z = n.getStyle("rotateSensitivity")), v = Xr.roundTo(v, C, z)
                    }
                    W.groupRotateMode ? (c = v - (W.lastRotation || 0), 0 !== c && (O.addRotation(c, W.groupRotateMode, function(B) {
                        return R.isRotationEditable(B)
                    }), W.lastRotation = v)) : O.setRotation(v), n._setRotateCursor(V), v > Math.PI && (v -= 2 * Math.PI);
                    var w = 180 * (v / Math.PI);
                    w = w.toFixed(2), T = "" + w + "°"
                } else if ("resize" === N) {
                    var X = W.rect;
                    g = X.x, k = X.y;
                    var h, K = X.width,
                        j = X.height,
                        f = W.anchor,
                        x = W.matrix,
                        H = O.s && O.s("keepAspectRatio") || n.getStyle("keepAspectRatio");
                    ck(i) && (H = !H);
                    var I = J._unionPointMode1,
                        m = J._unionPointMode2;
                    if (J._inSmartGuide && !F.Default.isCtrlDown(i) && !H) {
                        var o;
                        "L" === q || "R" === q ? o = "x" : ("T" === q || "B" === q) && (o = "y"), J._adsorbedToClosest(D, o), U = !0
                    }
                    h = x.tfi(D);
                    var M;
                    "LT" === q ? (X = I(h, {
                        x: g + K,
                        y: k + j
                    }, K, j, H), M = 9) : "T" === q ? (X = m({
                        x: g,
                        y: h.y
                    }, {
                        x: g + K,
                        y: k + j
                    }, K, j, H, "v"), M = 1) : "RT" === q ? (X = I(h, {
                        x: g,
                        y: k + j
                    }, K, j, H), M = 33) : "L" === q ? (X = m({
                        x: h.x,
                        y: k
                    }, {
                        x: g + K,
                        y: k + j
                    }, K, j, H, "h"), M = 8) : "R" === q ? (X = m({
                        x: g,
                        y: k
                    }, {
                        x: h.x,
                        y: k + j
                    }, K, j, H, "h"), M = 32) : "LB" === q ? (X = I(h, {
                        x: g + K,
                        y: k
                    }, K, j, H), M = 12) : "B" === q ? (X = m({
                        x: g,
                        y: k
                    }, {
                        x: g + K,
                        y: h.y
                    }, K, j, H, "v"), M = 4) : "RB" === q && (X = I(h, {
                        x: g,
                        y: k
                    }, K, j, H), M = 36);
                    var S = x.tf(X.x + X.width * f.x, X.y + X.height * f.y);
                    O instanceof F.Block && (W.hasOwnProperty("freezeFlag") || (W.freezeFlag = O._freezeSyncFromChildren, O._freezeSyncFromChildren = !0)), O.setPosition(S), O.setSize(X.width, X.height), U && (Q = O.getRect(), n.rectGuide.gatherLines({
                        node: O,
                        x: Q.x,
                        y: Q.y,
                        w: Q.width,
                        h: Q.height
                    }, o, M)), T = "" + Math.round(X.width) + " * " + Math.round(X.height)
                } else if ("line" === N) {
                    if (ck(i)) {
                        var r = O.getPoints(),
                            $ = "P1" === q ? r.get(1) : r.get(0),
                            L = {
                                x: D.x - $.x,
                                y: D.y - $.y
                            },
                            e = n.getStyle("shiftLineRotateRound"),
                            E = J._shiftDirList;
                        if (!E || J._shiftRotateRound !== e) {
                            J._shiftRotateRound = e, J._shiftDirList = E = [];
                            for (var d = 0; d < Math.PI; d += e) E.push({
                                x: b(d),
                                y: u(d)
                            })
                        }
                        for (var Y, G = 0, p = 0, s = E.length; s > p; p++) {
                            var l = E[p],
                                t = l.x * L.x + l.y * L.y;
                            Math.abs(t) > Math.abs(G) && (G = t, Y = l)
                        }
                        D = {
                            x: $.x + Y.x * G,
                            y: $.y + Y.y * G
                        }, n.rectGuide.clear()
                    } else J._inSmartGuide && !F.Default.isCtrlDown(i) && (J._adsorbedToClosest(D), U = !0);
                    var P = Xr.getDataMatrix(O).applyInverse(D);
                    O.setPoint("P1" === q ? 0 : 1, P, !0);
                    var B = O.getPoints(),
                        a = B.get(0),
                        _ = B.get(1);
                    g = a.x - _.x, k = a.y - _.y, T = " " + Math.round(Math.sqrt(g * g + k * k)) + " ", U && (Q = O.getRect(), n.rectGuide.gatherLines({
                        node: O,
                        x: Q.x,
                        y: Q.y,
                        w: Q.width,
                        h: Q.height
                    }))
                }
                if (T) {
                    var Z = F.Default.getLogicalPoint(i, n._canvas);
                    Z.x += Xr.Icons.TipShiftX, Z.y += Xr.Icons.TipShiftY, J.tipInfo = {
                        helperPos: Z,
                        text: T,
                        size: T.length
                    }
                }
                J._fireEditEvent("between", i)
            }
        }, so.prototype._unionPointMode1 = function(n, C, p, U, c) {
            if (c && p && U) {
                var g = n.x - C.x,
                    o = n.y - C.y;
                Math.abs(g * U) < Math.abs(o * p) ? (o = Math.sign(o) * Math.abs(g * U / p), n.y = C.y + o) : (g = Math.sign(g) * Math.abs(o * p / U), n.x = C.x + g)
            }
            return F.Default.unionPoint(n, C)
        }, so.prototype._unionPointMode2 = function(Q, N, o, W, j, H) {
            var l = F.Default.unionPoint(Q, N);
            if (j && o && W) {
                var V;
                "v" === H ? (V = l.x + l.width / 2, l.width = o * l.height / W, l.x = V - l.width / 2) : (V = l.y + l.height / 2, l.height = W * l.width / o, l.y = V - l.height / 2)
            }
            return l
        }, so.prototype._adsorbedToClosest = function(U, z) {
            var I = this,
                o = I._interactor,
                y = o.rectGuide.findClosest(U, z),
                O = o.gridGuide.findClosest(U, z),
                r = 1 / 0,
                R = 1 / 0;
            y && (isFinite(y.x) && (r = y.x), isFinite(y.y) && (R = y.y)), O && (isFinite(O.x) && Math.abs(O.x) < Math.abs(r) && (r = O.x), isFinite(O.y) && Math.abs(O.y) < Math.abs(R) && (R = O.y)), isFinite(r) && (U.x += r), isFinite(R) && (U.y += R)
        }, so.prototype._42 = function(Z, G, m) {
            var M = this;
            M.info = {}, M.screenInfo = null;
            var C = M._interactor;
            if (!C.editDetail && M.gatherInfo(G, m)) {
                var D = M.editing,
                    S = D ? D.groupRotateMode : null,
                    X = M.screenInfo;
                if ("block" !== S || !D || !D.started) {
                    if (X.P1 ? Xr.Icons.DrawIcon(C, Z, Xr.Icons.Line, X) : Xr.Icons.DrawIcon(C, Z, Xr.Icons.Rect, X), X.connect && (Xr.Icons.DrawIcon(C, Z, Xr.Icons.ConnectGuide, {
                            rotation: X.rotation,
                            connect: X.connect,
                            cursorPos: D ? D.cursorPos : null
                        }), D)) {
                        if (D.targetCorners) {
                            for (var z = {
                                    x: 1 / 0,
                                    y: 1 / 0
                                }, T = {
                                    x: -1 / 0,
                                    y: -1 / 0
                                }, y = 0, A = D.targetCorners.length; A > y; y += 2) z.x = Math.min(z.x, D.targetCorners[y]), T.x = Math.max(T.x, D.targetCorners[y]), z.y = Math.min(z.y, D.targetCorners[y + 1]), T.y = Math.max(T.y, D.targetCorners[y + 1]);
                            Xr.Icons.DrawIcon(C, Z, Xr.Icons.HoverDataRect, {
                                min: z,
                                max: T,
                                color: C.getStyle("hoverGuideColor") || C.getStyle("baseColor")
                            })
                        }
                        D.garbageInfo && Xr.Icons.DrawIcon(C, Z, Xr.Icons.ConnectGuideGarbage, D.garbageInfo)
                    }
                    C.getStyle("rotateTipVisible") && M.tipInfo && Xr.Icons.DrawIcon(C, Z, Xr.Icons.TipHelper, M.tipInfo)
                }
                M.target instanceof Xr.Group && M.target._42(C, Z, G)
            }
        };
        var Db = Xr.Anchor = function(e) {
            this.catalog = "Anchor", this._interactor = e
        };
        Db.prototype = {}, Db.prototype.constructor = Db, Db.prototype.gatherInfo = function(i, K) {
            var L = this;
            if (1 === K.length) {
                var $ = K[0];
                if (!$.getAnchor) return;
                if ($ instanceof F.Shape && $._70I()) return;
                if (je($, i)) return;
                return L.gatherSingleTarget(i, K[0])
            }
            return K.length > 1 ? L.gatherMultiTargets(i, K) : !1
        }, Db.prototype.gatherSingleTarget = function(B, o) {
            var F = this;
            return F.info.POS = o.getPosition(), F.screenInfo.POS = Xr.toScreenPosition(B, F.info.POS), F.target = o, !0
        }, Db.prototype.gatherMultiTargets = function(D, q) {
            var K = this,
                W = Xr.Group.findOrCreateGroup(q, this._interactor._uuid);
            return W ? (K.screenInfo.POS = Xr.toScreenPosition(D, W.getAnchor2()), K.target = W, !0) : !1
        }, Db.prototype.isVisible = function() {
            var t = this,
                l = t._interactor;
            if (l.getStyle("anchorVisible") === !1) return !1;
            var s = t.target;
            if (s) {
                if (this.editing) return !0;
                var P = s.getAnchor(),
                    m = l.getStyle("anchorOutsideVisibleThreshold");
                if (P.x < -m || P.x > 1 + m || P.y < -m || P.y > 1 + m) return !0;
                var H = s.getSize(),
                    V = s.getScale(),
                    A = Math.min(Math.abs(H.width * V.x), Math.abs(H.height * V.y));
                if (A * l.gv._zoom < l.getStyle("anchorHideThreshold")) return !1
            }
            return !0
        }, Db.prototype.check = function(t, N, o) {
            if (F.Default.isLeftButton(N)) {
                var e = this,
                    S = e._interactor;
                if (e.isVisible() && S.getStyle("anchorMovable") !== !1) {
                    e.editing = null, e.tipInfo = null;
                    var I = e.target;
                    if (I && t.isAnchorEditable(I) && t.isEditable(I)) {
                        var j;
                        if (e.screenInfo && (j = e.screenInfo.POS) && Xr.checkHit(o, new Xr.Math.Vector2(j), S.getStyle("checkSize"))) {
                            if (I instanceof Xr.Group) return e.editing = {}, !0;
                            var m = I.getWidth(),
                                $ = I.getHeight(),
                                A = I.getAnchor();
                            return e.editing = {
                                rect: {
                                    x: -m * A.x,
                                    y: -$ * A.y,
                                    width: m,
                                    height: $
                                },
                                anchor: A,
                                matrix: I.getMatrix()
                            }, !0
                        }
                    }
                }
            }
        }, Db.prototype.startEdit = function(f, M) {
            f.startDragging(M), f.fi({
                kind: "beginEditAnchor",
                event: M
            })
        }, Db.prototype._46O = function(A) {
            var f = this;
            f.editing && (f.editing = null, f._interactor.fi({
                kind: "endEditAnchor",
                event: A
            })), f.tipInfo = null
        }, Db.prototype.handleEdit = function(p, o) {
            var Z = this,
                K = Z.target;
            if (K) {
                var W = Z.editing;
                if (W) {
                    var R = p.lp(o),
                        G = Z._interactor;
                    if (K instanceof Xr.Group) return K.setAnchor2(R), G._42(), void 0;
                    var A = W.matrix,
                        X = A.tfi(R),
                        Q = W.rect,
                        U = (X.x - Q.x) / Q.width,
                        v = (X.y - Q.y) / Q.height;
                    if (!F.Default.isCtrlDown(o)) {
                        var i = G.getStyle("anchorRound"),
                            $ = G.getStyle("anchorSensitivity");
                        U = Xr.roundTo(U, i, $), v = Xr.roundTo(v, i, $)
                    }
                    K.setAnchor(U, v, !0);
                    var B = F.Default.getLogicalPoint(o, G._canvas);
                    B.x += Xr.Icons.TipShiftX, B.y += Xr.Icons.TipShiftY;
                    var r = "" + U.toFixed(2) + ", " + v.toFixed(2);
                    Z.tipInfo = {
                        helperPos: B,
                        text: r,
                        size: r.length
                    }, G.fi({
                        kind: "betweenEditAnchor",
                        event: o
                    })
                }
            }
        }, Db.prototype._42 = function(k, B, F) {
            var L = this;
            L.info = {}, L.screenInfo = {};
            var $ = L._interactor;
            $.editDetail || L.gatherInfo(B, F) && L.isVisible() && (Xr.Icons.DrawIcon($, k, Xr.Icons.Anchor, L.screenInfo), L.tipInfo && Xr.Icons.DrawIcon($, k, Xr.Icons.TipHelper, L.tipInfo))
        };
        var bh = Xr.MoveDummy = function(x) {
            this.catalog = "MoveDummy", this._interactor = x
        };
        bh.prototype = {}, bh.prototype.constructor = bh, bh.prototype.gatherInfo = function() {
            var t = this,
                M = this._interactor.getSubModule("Rect");
            if (M) {
                var J = M.screenInfo;
                if (J) {
                    var b = t._interactor,
                        j = t.getMovableTarget(M.target);
                    if (j) {
                        var Z = b.getStyle("moveDummyThreshold");
                        if (Z !== !1) {
                            var w = J.LT || J.P1,
                                C = J.RT || J.P2,
                                x = J.LB || w;
                            if (w) {
                                var Y = J.P1,
                                    E = Math.min(w.distanceTo(x), w.distanceTo(C));
                                if (!(Z !== !0 && E > Z)) {
                                    var a = b.getStyle("moveDummyPosition"),
                                        _ = C.clone().sub(w),
                                        e = x.clone().sub(w),
                                        k = a[2],
                                        i = a[3];
                                    if (Y) {
                                        var y = b.getStyle("moveDummyLineExtraShift");
                                        y && (k += y[0], i += y[1])
                                    }
                                    var n = w.clone().add(_.clone().multiplyScalar(a[0])).add(_.setLength(k)).add(e.clone().multiplyScalar(a[1])).add(e.setLength(i));
                                    return t.screenInfo.pos = n, t.screenInfo.size = b.getStyle("moveDummySensitivity"), !0
                                }
                            }
                        }
                    }
                }
            }
        }, bh.prototype.getMovableTarget = function(l) {
            var J = this._interactor.gv;
            if (Mk(l)) {
                if (J.isMovable(l)) return l
            } else if (l instanceof Xr.Group)
                for (var N = l._entities, $ = N.length - 1; $ >= 0; $--) {
                    var i = N[$];
                    if (Mk(i) && J.isMovable(i)) return i
                }
            return null
        }, bh.prototype.getMoveInteractor = function() {
            for (var h, T, f, A = this._interactor.gv, J = A.getInteractors(), h = 0, T = J.length; T > h; h++)
                if (f = J.get(h), f instanceof sl) return f
        }, bh.prototype.startEdit = function(V, $) {
            V.startDragging($);
            var Q = this.getMoveInteractor();
            if (Q) {
                var o = this.selectedTarget,
                    n = V.gv;
                n._moving = 1, Q._data = o, n.handleMouseDown && n.handleMouseDown($, o)
            }
        }, bh.prototype._46O = function(W) {
            var I = this,
                s = I.getMoveInteractor();
            s && (s.handleWindowMouseUp(W), I.selectedTarget = null)
        }, bh.prototype.handleEdit = function(Y, R) {
            var d = this.getMoveInteractor();
            d && d.handleWindowMouseMove(R)
        }, bh.prototype.check = function(T, P, j) {
            if (this.selectedTarget = null, F.Default.isLeftButton(P) && !T._scrolling && !Mf()) {
                var O = this;
                if (O.screenInfo) {
                    var u = O.screenInfo.pos;
                    if (u && !(j.distanceTo(u) > O.screenInfo.size)) {
                        var S = O._interactor;
                        return O.selectedTarget = O.getMovableTarget(S.getSubModule("Rect").target), S.setCursor("default"), !0
                    }
                }
            }
        }, bh.prototype._42 = function(U, m, a) {
            var h = this;
            h.screenInfo = {};
            var j = h._interactor;
            j.editDetail || h.gatherInfo(m, a) && (!j.editing || h.selectedTarget) && Xr.Icons.DrawIcon(j, U, Xr.Icons.MoveDummy, h.screenInfo)
        };
        var Th = Xr.RotateX = function(F) {
            this.catalog = "RotateX", this._interactor = F
        };
        Th.prototype = {}, Th.prototype.constructor = Th, Th.prototype.gatherInfo = function(B, g) {
            var V = this;
            if (1 === g.length) {
                var J = g[0];
                return J instanceof F.Shape && J._70I() || je(J, B) ? !1 : V.gatherSingleTarget(B, J)
            }
            return g.length > 1 ? V.gatherMultiTargets(B, g) : !1
        }, Th.prototype.gatherSingleTarget = function() {
            var p = new F.Math.Vector2,
                U = new F.Math.Vector2,
                N = new F.Math.Vector2,
                H = new F.Math.Vector2,
                G = function(O, X) {
                    var h = O.x - X.x,
                        Z = O.y - X.y;
                    return h * h + Z * Z
                };
            return function(M, Z) {
                if (Z.getCorners) {
                    var Y = this,
                        I = Z.getCorners(),
                        t = 15,
                        z = Z.getPosition();
                    p.copy(I[0]), N.copy(I[1]), H.copy(I[3]), U.copy(p).add(H).divideScalar(2).add(p.sub(N).setLength(t / M.getZoom()));
                    var X = Math.max(G(z, I[0]), G(z, I[1]), G(z, I[2]), G(z, I[3]));
                    return Y.info.POS = U.clone(), Y.screenInfo.POS = Xr.toScreenPosition(M, Y.info.POS), Y.screenInfo.LEN = Math.sqrt(X) * M.getZoom() + t, Y.screenInfo.CENTER = Xr.toScreenPosition(M, z), Y.target = Z, !0
                }
            }
        }(), Th.prototype.gatherMultiTargets = function(S, Y) {
            var w = this,
                Q = Xr.Group.findOrCreateGroup(Y, this._interactor._uuid);
            if (!Q) return !1;
            var w = this;
            return w.gatherSingleTarget(S, Q)
        }, Th.prototype.isVisible = function() {
            var f = this._interactor;
            if (!f.getStyle("rotateAsClock")) return !1;
            var t = this.target;
            if (!t) return !0;
            var R = f.gv;
            return R.isEditable(t) && R.isRotationEditable(t) ? !0 : !1
        }, Th.prototype.check = function(A, i, h) {
            var I = this,
                F = I._checkImpl(A, i, h);
            return (F || I._clockPainted) && I._interactor._42(), F
        }, Th.prototype._checkImpl = function(K, g, j) {
            if (F.Default.isLeftButton(g)) {
                var M = this;
                M.editing = null, M.tipInfo = null;
                var O;
                if (M.screenInfo && (O = M.screenInfo.POS) && M.isVisible()) {
                    var N = M._interactor;
                    if (Xr.checkHit(j, O, N.getStyle("checkSize"))) {
                        var i = M.target,
                            b = K.lp(g),
                            w = i.getPosition(),
                            c = Math.atan2(b.y - w.y, b.x - w.x);
                        return N._setRotateCursor(c), M.editing = {
                            pos: w,
                            rotation: i.getRotation(),
                            hitRot: c,
                            groupRotateMode: "block",
                            screenInfo: {
                                CENTER: M.screenInfo.CENTER,
                                LEN: M.screenInfo.LEN
                            }
                        }, !0
                    }
                }
            }
        }, Th.prototype.startEdit = function(f, T) {
            f.startDragging(T), f.fi({
                kind: "beginEditRotation",
                event: T
            }), this.target instanceof Xr.Group && this.target.beginRotate(this.editing)
        }, Th.prototype._46O = function(p) {
            var G = this;
            G.editing && (G.editing = null, G._interactor.fi({
                kind: "endEditRotation",
                event: p
            })), G.target instanceof Xr.Group && G.target.endRotate(), G.tipInfo = null
        }, Th.prototype.handleEdit = function(B, U) {
            var I = this,
                V = I.editing;
            if (V) {
                var j, u, y = I.target,
                    o = B.lp(U),
                    X = I._interactor,
                    f = V.pos,
                    m = Math.atan2(o.y - f.y, o.x - f.x),
                    x = y instanceof Xr.Group;
                if (x ? u = m - V.hitRot : (j = m - V.hitRot, u = V.rotation + j), u %= 2 * Math.PI, 0 > u && (u += 2 * Math.PI), !F.Default.isCtrlDown(U)) {
                    var Y, S;
                    ck(U) ? (Y = X.getStyle("shiftRotateRound"), S = Y / 2) : (Y = X.getStyle("rotateRound"), S = X.getStyle("rotateSensitivity")), u = Xr.roundTo(u, Y, S)
                }
                x ? (j = u - (V.lastRotation || 0), 0 !== j && (y.addRotation(j, V.groupRotateMode, function(I) {
                    return B.isRotationEditable(I)
                }), V.lastRotation = u)) : y.setRotation(u), X._setRotateCursor(m), u > Math.PI && (u -= 2 * Math.PI);
                var $ = 180 * (u / Math.PI),
                    Q = "" + $.toFixed(2) + "°",
                    C = F.Default.getLogicalPoint(U, X._canvas);
                C.x += Xr.Icons.TipShiftX, C.y += Xr.Icons.TipShiftY, I.tipInfo = {
                    helperPos: C,
                    text: Q,
                    size: Q.length
                }, X.fi({
                    kind: "betweenEditRotation",
                    event: U
                })
            }
        }, Th.prototype._42 = function(q, X, p) {
            var m = this;
            m._clockPainted = !1, m.info = {}, m.screenInfo = {};
            var B = m._interactor;
            B.editDetail || m.gatherInfo(X, p) && m.isVisible() && (Xr.Icons.DrawIcon(B, q, Xr.Icons.RoundPoint, m.screenInfo.POS), B.getStyle("rotateTipVisible") && m.tipInfo && Xr.Icons.DrawIcon(B, q, Xr.Icons.TipHelper, m.tipInfo), m.editing && m.drawClock(q))
        }, Th.prototype.drawClock = function(Q) {
            Q.save();
            var M = this;
            M._clockPainted = !0;
            var o = M.editing || {},
                n = o.screenInfo || M.screenInfo,
                $ = n.LEN,
                m = $ + 8,
                d = $ + 18;
            Q.save(), Q.translate(n.CENTER.x, n.CENTER.y), Q.beginPath(), Q.strokeStyle = "rgb(150, 150, 150)";
            for (var T, s, Y, x, N, r = 0; 360 > r; r++) T = r * Math.PI / 180, 0 === r % 5 && (s = u(T) * $, Y = b(T) * $, x = u(T) * m, N = b(T) * m, Q.moveTo(s, Y), Q.lineTo(x, N)), 0 === r % 45 && (s = u(T) * $, Y = b(T) * $, x = u(T) * d, N = b(T) * d, Q.moveTo(s, Y), Q.lineTo(x, N));
            Q.stroke(), Q.rotate(-yr);
            var O = o.lastRotation || M.target.getRotation();
            Q.beginPath(), Q.fillStyle = "rgba(255, 0, 0, 0.1)", Q.strokeStyle = "rgb(157, 157, 157)", Q.moveTo(0, 0), Q.arc(0, 0, d, 0, O, !1), Q.fill(), Q.beginPath(), Q.moveTo(0 + d, 0), Q.arc(0, 0, d, 0, O, !1), Q.stroke(), Q.restore()
        };
        var Yj = Xr.Curve = function(C) {
            this.catalog = "Curve", this._interactor = C
        };
        Yj.prototype = {}, Yj.prototype.constructor = Yj, G.defineProperties(Yj.prototype, {
            activing: {
                get: function() {
                    return this._activing
                },
                set: function(i) {
                    var b = this;
                    if (i) b._activing = new Xr.CurveActiving(this, i), b._activing._firePointChange();
                    else {
                        var G = b._activing;
                        G && G.dispose(), b._activing = null
                    }
                }
            }
        }), Yj.PointType = {
            Mirrored: 0,
            Straight: 1,
            Disconnected: 2,
            Asymmetric: 3
        }, Yj.prototype.setUp = function() {
            var U = this,
                f = U._interactor;
            f && f.gv.mp(U._onGraphviewPropertyChanged, U)
        }, Yj.prototype._onGraphviewPropertyChanged = function(f) {
            ("zoom" === f.property || "translateX" === f.property || "translateY" === f.property) && this._handleDataChanged()
        }, Yj.prototype.tearDown = function() {
            var T = this,
                j = T._interactor;
            j && j.gv.ump(T._onGraphviewPropertyChanged, T)
        }, Yj.prototype.canEnterEditDetailMode = function() {
            var p = ci(this._interactor);
            return p ? this.target = p : void 0
        }, Yj.prototype.canQuitEditDetailMode = function(U) {
            var P = this,
                Z = P._interactor._getLogicalPoint(U);
            return P._checkEditRealPoint(Z) ? void 0 : P._interactor.gv.getDataAt(U) !== P.target ? !0 : void 0
        }, Yj.prototype.preHandleScroll = function() {
            var S = this.editing;
            return S && S.inEdit ? !0 : void 0
        }, Yj.prototype.getCurrentSelectintStatus = function() {
            var P = this;
            if (P.activing && !P.activing.selections) {
                if (P.activing.status != O) return P.activing.status;
                var M = function(q) {
                        var B = P.activing.status;
                        P.activing.status = q, P._interactor.fp("shapePointStatus", B, q)
                    },
                    r = Xr.Curve.PointType,
                    j = P.activing.point,
                    W = P.activing.pairs;
                if (!W || 1 !== W.length) return M(r.Mirrored);
                var V = W[0],
                    B = V.c1 && V.c1.isNearEnough(j),
                    m = V.c2 && V.c2.isNearEnough(j);
                if (!V.c1 || !V.c2) return B || m ? M(r.Straight) : M(r.Disconnected);
                if (B && m) return M(r.Straight);
                if (B || m) return M(r.Asymmetric);
                var R = V.c1.clone().sub(j),
                    w = V.c2.clone().sub(j);
                return Math.abs(R.x * w.y - R.y * w.x) > 1e-5 || R.x * w.x > 0 ? M(r.Disconnected) : Math.abs(R.length() - w.length()) > 1e-5 ? M(r.Asymmetric) : M(r.Mirrored)
            }
        }, Yj.prototype.handle_keydown = function(Z) {
            var W = this;
            if (W._interactor.editDetail) {
                var T = Xr.Curve.PointType;
                "1" === Z.key ? W._setCurrentSelectionStatus(T.Straight) : "2" === Z.key ? W._setCurrentSelectionStatus(T.Mirrored) : "3" === Z.key ? W._setCurrentSelectionStatus(T.Disconnected) : "4" === Z.key && W._setCurrentSelectionStatus(T.Asymmetric)
            }
        }, Yj.prototype.setCurrentSelectionStatus = function(e) {
            var P = this,
                y = P._interactor;
            if (y) {
                var s = y.gv;
                s.dm().beginTransaction(), this._setCurrentSelectionStatus(e), s.dm().endTransaction()
            }
        }, Yj.prototype._setCurrentSelectionStatus = function(D) {
            var x = this,
                v = x.activing;
            if (v) {
                var d = x.getCurrentSelectintStatus();
                if (null !== d && d !== D) {
                    v.status = D;
                    var q = x.activing.point,
                        y = x.activing.pairs;
                    if (y && 1 === y.length) {
                        var A = y[0],
                            B = x.screenInfo.curve,
                            Y = Xr.Curve.PointType,
                            i = x._interactor,
                            e = function() {
                                x._writeToHt(), i.fp("shapePointStatus", d, D), x.check(i.gv, null, new Xr.Math.Vector2(i._lastLogicalPoint))
                            };
                        if (D === Y.Straight) return B.moveCtrlPoint(A, q, "c1"), B.moveCtrlPoint(A, q, "c2"), e(), void 0;
                        if (d === Y.Straight) {
                            var C = B.findPairs(q, !0),
                                Q = C[0],
                                N = Q.r1 || q,
                                m = Q.r2 || q,
                                P = m.clone().sub(N).multiplyScalar(.25);
                            return B.moveCtrlPoint(A, q.clone().sub(P), "c1"), B.moveCtrlPoint(A, q.clone().add(P), "c2"), e(), void 0
                        }
                        var $ = A.c1,
                            s = A.c2;
                        if ($ && s) {
                            if (D === Y.Mirrored) return B.moveCtrlPoint(A, q.clone().multiplyScalar(2).sub(s), "c1"), e(), void 0;
                            if (D === Y.Asymmetric && d === Y.Disconnected) {
                                var j = $.clone().sub(q).length(),
                                    P = q.clone().sub(s).setLength(j).add(q);
                                return B.moveCtrlPoint(A, P, "c1"), e(), void 0
                            }
                        }
                        v._firePointChange(), i.fp("shapePointStatus", d, D), x.check(i.gv, null, new Xr.Math.Vector2(i._lastLogicalPoint))
                    }
                }
            }
        }, Yj.prototype._handleDataChanged = function() {
            var K = "s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(",");
            return function(G) {
                var s = this;
                if (s.screenInfo && s.target) {
                    if (G && K.indexOf(G.property) < 0) return;
                    var c = s._interactor;
                    s.gatherSingleTarget(c.gv, s.target, !0), s.check(c.gv, null, new Xr.Math.Vector2(c._lastLogicalPoint)), c._42()
                }
            }
        }(), Yj.prototype.gatherSingleTarget = function(P, t, V) {
            var C, Z, s = this;
            s.screenInfo && s.screenInfo.curve && (Z = s.screenInfo.curve._curves);
            var c = s.editing;
            C = c ? s.screenInfo : s.screenInfo = {};
            var h, b, g = t instanceof F.Edge;
            g ? (h = t.s("edge.segments"), b = t.s("edge.points") || new F.List) : (h = t._58O, b = t._59O), C.S = h;
            var y, m = C.P = [],
                D = Xr.getDataMatrix(t);
            if (t instanceof F.Polyline || t instanceof F.Edge && s._interactor.getStyle("edgeElevationEditable")) y = t.getElevation && t.getElevation() || 0, C.E = [];
            else {
                var j = !1;
                b.each(function(p) {
                    p.e !== O && (j = !0)
                }), j && (C.E = [])
            }
            if (b.each(function(K) {
                    C.E && C.E.push(K.e != O ? K.e : y), K = D.apply(K);
                    var q = Xr.toScreenPosition(P, K);
                    m.push(q.x, q.y)
                }), g) {
                var X = m.length,
                    N = Xr.toScreenPosition(P, t._lastSourcePoint || (X ? {
                        x: m[0],
                        y: m[1]
                    } : {
                        x: 0,
                        y: 0
                    })),
                    u = Xr.toScreenPosition(P, t._lastTargetPoint || (X ? {
                        x: m[X - 2],
                        y: m[X - 1]
                    } : {
                        x: 0,
                        y: 0
                    }));
                if (m.splice(0, 0, N.x, N.y), m.push(u.x, u.y), C.E) {
                    var I = t.getSourceAgent();
                    I instanceof F.Edge ? C.E.splice(0, 0, t.s("edge.source.offset.elevation")) : C.E.splice(0, 0, ((t.s("edge.source.anchor.elevation") || .5) - .5) * I.getTall() * I.getScaleTall() + I.getElevation() + t.s("edge.source.offset.elevation"));
                    var e = t.getTargetAgent();
                    e instanceof F.Edge ? C.E.push(t.s("edge.target.offset.elevation")) : C.E.push(((t.s("edge.target.anchor.elevation") || .5) - .5) * e.getTall() * e.getScaleTall() + e.getElevation() + t.s("edge.target.offset.elevation"))
                }
            }
            if (!C.S || !C.S.size()) {
                C.S = new F.List, C.S.add(1);
                for (var k = 0; k < m.length / 2 - 1; k++) C.S.add(2)
            }
            if ((!c || V) && s.convertToCubicBezier(Z), s.activing && (V || !s.editing || "realPoint" === s.editing.type)) {
                var d = C.curve.findPairs(s.activing.point);
                s.activing.pairs = d
            }
        }, Yj.prototype._convertToNewPoint = function(I, s, f, u) {
            var U, J, F;
            for (U = 0, J = s.length; J > U; U++) {
                if (F = s[U], F._p1.isNearEnough(I) && (!u || u.indexOf(F._p1) < 0)) return F._p1;
                if (F._p4.isNearEnough(I) && (!u || u.indexOf(F._p4) < 0)) return F._p4
            }
            if (f)
                for (U = 0, J = Math.min(f.length, J); J > U; U++) {
                    if (F = f[U], F._p1 === I && (!u || u.indexOf(s[U]._p1) < 0)) return s[U]._p1;
                    if (F._p4 === I && (!u || u.indexOf(s[U]._p4) < 0)) return s[U]._p4
                }
        }, Yj.prototype.convertToCubicBezier = function($) {
            var l, r, p = this,
                w = new Xr.Math.Curve,
                t = p.screenInfo;
            if (w.createFromHtShape(t.P, t.S, t.E), t.curve = w, p.activing) {
                var F = w._curves;
                l = p.activing.point, r = p._convertToNewPoint(l, F, $);
                var H = [];
                if (r && (p.activing.point = r, H.push(r)), p.activing.selections) {
                    var W = -1,
                        U = p.activing.selections;
                    U.forEach(function(Q) {
                        W++, r = p._convertToNewPoint(Q, F, $, H), r && (U[W] = r, H.push(r))
                    })
                }
            }
        }, Yj.prototype.check = function(y, s, Y) {
            if (!s || Bj(s) || km(s)) {
                var H = this;
                if (H._interactor.setCursor("default"), H.editing = null, H.highlight = null, H.tipInfo = null, H.edgeEditResult = null, H.screenInfo) {
                    if (Mf() || s && km(s)) return H._interactor._42(), !0;
                    if (H._checkEditCtrlPoint(Y)) return H._interactor._42(), !0;
                    if (H._checkEditRealPoint(Y)) return H._interactor._42(), !0;
                    if (H._checkEditElevation(Y)) return H._interactor._42(), !0;
                    var d = H.screenInfo.curve,
                        j = d.checkPoint(Y, H._interactor.getStyle("curveIntersectSize"));
                    if (j) {
                        var E = H.highlight = {};
                        E.type = "insertKnot", E.bezier = j.bezier, E.point = j.intersection
                    }
                    return H._interactor._42(), !0
                }
            }
        }, Yj.prototype.getAdjacentBeziers = function(y) {
            var W = this.screenInfo;
            if (W) {
                var Y, c, b, B = W.curve._curves,
                    u = [],
                    E = O;
                for (Y = 0, c = B.length; c > Y; Y++)
                    if (b = B[Y], E === O) {
                        if (b._p4.isNearEnough(y)) {
                            u.push(b), E = Y;
                            continue
                        }
                    } else {
                        if (b._p1.isNearEnough(y)) return u.push(b), u;
                        if (b._p4.isNearEnough(y)) {
                            u[0] = b, E = Y;
                            continue
                        }
                    }
            }
        }, Yj.prototype.roundCorner = function(Q) {
            if (this.activing && this.screenInfo) {
                var T = this.screenInfo.curve,
                    H = T._curves,
                    c = this.getAdjacentBeziers(this.activing.point),
                    I = c[1],
                    n = I._index;
                I = I.insertKnot(I.getTByPercentage(Q / I.length))[1], H[n] = I;
                var R = I.p1,
                    y = c[0],
                    B = y._index;
                y = y.insertKnot(y.getTByPercentage(1 - Q / y.length))[0], H[B] = y;
                var Z = y.p4,
                    z = this.activing.point,
                    w = new Xr.Math.CubicBezier(Z, z.clone().sub(Z).multiplyScalar(2 / 3).add(Z), z.clone().sub(R).multiplyScalar(2 / 3).add(R), R);
                H.splice(n, 0, w), this._writeToHt(), this.activing = null, this._interactor._42()
            }
        }, Yj.prototype._checkEditRealPoint = function(m) {
            var o, I, z, _, w, e, K = this,
                g = K.screenInfo.curve._curves,
                T = K._interactor.getStyle("curvePointIntersectSize"),
                n = 1 / 0;
            for (T *= T, z = 0, _ = g.length; _ > z; z++) o = g[z], w = o._p1, e = m.distanceToSquared(w), n > e && (n = e, I = w), w = o._p4, e = m.distanceToSquared(w), n > e && (n = e, I = w);
            if (n > T) return !1;
            var L = K.highlight = {};
            return L.type = "changeRealPoint", L.point = I, K.editing = {
                type: "realPoint",
                point: I,
                shiftGuide: {
                    point: I.clone(),
                    dir: "x",
                    limit: 0
                }
            }, K._interactor.setCursor("crosshair"), !0
        }, Yj.prototype._checkEditElevation = function(k) {
            var W = this;
            if (!W._interactor.getStyle("curveElevationVisible")) return !1;
            var Q = W.target;
            if (Q instanceof F.Edge && !W._interactor.getStyle("edgeElevationEditable")) return !1;
            var s = W.activing;
            if (!s) return !1;
            var Y = s.getCurrentEditingPoint();
            if (!Y) return !1;
            var M = W._interactor,
                B = M.getStyle("curveElevationGuideShift"),
                L = M.getStyle("curveElevationIntersectSize"),
                i = k.distanceToSquared({
                    x: Y.x + B[0],
                    y: Y.y + B[1]
                });
            if (!(i > L * L)) {
                var t = W.highlight = {};
                t.type = "elevation";
                var a = new Xr.Math.Vector2(k.x, k.y, Y.e);
                return W.editing = {
                    type: "elevation",
                    startPoint: a
                }, W._interactor.setCursor("crosshair"), !0
            }
        }, Yj.prototype._checkEditCtrlPoint = function(x) {
            var U = this;
            if (U.activing && !U.activing.selections) {
                var t = U.getCurrentSelectintStatus();
                if (t !== Xr.Curve.PointType.Straight) {
                    var s = U.activing.pairs;
                    if (s) {
                        var H = U._interactor.getStyle("curvePointIntersectSize");
                        H *= H;
                        var l, g, P, h, C, L, N, o, u, A = 1 / 0;
                        for (N = 0, u = s.length; u > N; N++)
                            for (h = s[N], o = 0; 2 > o; o++) C = 0 === o ? "c1" : "c2", h[C] && (L = x.distanceToSquared(h[C]), A > L && (A = L, l = h, g = N, P = C));
                        if (A > H) return !1;
                        U.activing.hlpair = l, U.activing.hltype = P;
                        var M = U.highlight = {};
                        return M.type = "changeCtrlPoint", M.point = l[P], U.editing = {
                            type: "ctrlPoint",
                            pair: l,
                            pairId: g,
                            ctrlType: P,
                            direction: l[P].clone().sub(U.activing.point).normalize()
                        }, U._interactor.setCursor("crosshair"), !0
                    }
                }
            }
        }, Yj.prototype.startEdit = function(C, f) {
            C.startDragging(f);
            var k = this;
            k.highlight && "insertKnot" === k.highlight.type && (k.insertKnot(), k.gatherSingleTarget(k._interactor.gv, k.target), k.activing = null, k._checkEditRealPoint(k._interactor._getLogicalPoint(f)));
            var R = k._activing;
            if (R) {
                var P = k.editing ? k.editing.type : null;
                "ctrlPoint" === P ? R.editingCtrl = {
                    pairId: k.editing.pairId,
                    type: R.hltype
                } : "realPoint" === P && (R.editingCtrl = !1)
            }
            var i = k.highlight,
                L = F.Default.isCtrlDown(f);
            if (!i || Mf() || km(f)) {
                var A = k._interactor.gv;
                if (!A.setFocus(f) || A._scrolling) return;
                return L ? k._multiSelect = {
                    startPoint: A.lp(f)
                } : A.isPannable() && (Bj(f) || km(f)) && (k._pan = {
                    tx: A.tx(),
                    ty: A.ty()
                }, C.fi({
                    kind: "beginPan",
                    event: f
                })), void 0
            }
            if ("changeRealPoint" === i.type) {
                var h, Z = k.activing ? k.activing.point : null,
                    W = k.activing ? k.activing.selections : null;
                if (L && k.activing) Z === i.point ? (W ? (k.activing = {
                    point: W[0]
                }, W.length > 1 && (W.splice(0, 1), k.activing.selections = W)) : k.activing = null, k.editing = null) : W && (h = W.indexOf(i.point)) >= 0 ? (W.length > 1 ? W.splice(h, 1) : delete k.activing.selections, k.editing = null) : W ? (W.push(Z), k.activing = {
                    point: i.point,
                    selections: W
                }) : k.activing = {
                    point: i.point,
                    selections: [Z]
                };
                else if (W) Z === i.point || ((h = W.indexOf(i.point)) >= 0 ? (W.splice(h, 1, Z), k.activing = {
                    point: i.point,
                    selections: W
                }) : k.activing = {
                    point: i.point
                });
                else {
                    var s;
                    Z === i.point && (s = k.activing.status), k.activing = {
                        point: i.point
                    }, s && (k.activing.status = s)
                }
                C.fi({
                    kind: "beginEditPoint",
                    event: f
                })
            }
        }, Yj.prototype.insertKnot = function() {
            var v = this,
                y = v.highlight,
                M = v.screenInfo.curve;
            M.insertKnot(y.bezier, y.point.t), v._writeToHt()
        }, Yj.prototype._writeToHt = function() {
            var C, t, R = this,
                X = R.screenInfo.curve,
                c = X.toHtShape(),
                p = c.points,
                s = [],
                A = c.segments,
                m = R._interactor.gv;
            m.dm().beginTransaction();
            var M, K, k = R.target,
                U = k instanceof F.Edge,
                J = Xr.getDataMatrix(k).invert();
            K = k instanceof F.Polyline || U && R._interactor.getStyle("edgeElevationEditable"), K && (M = k.getElevation && k.getElevation() || 0);
            for (var I = 0, w = p.length; w > I; I++) C = p[I], t = Xr.toWorldPosition(m, C), t = J.apply(t), isFinite(C.e) && C.e !== M && (t.e = C.e), s.push(t);
            if (k._writing = !0, U) {
                k.s("edge.type", "points"), k.setStyle("edge.segments", A), k.setStyle("edge.points", s.slice(1, s.length - 1)), k.setStyle("edge.source.offset.x", 0), k.setStyle("edge.source.offset.y", 0), k.setStyle("edge.target.offset.x", 0), k.setStyle("edge.target.offset.y", 0);
                var q = R._nextChangeEdgeHost;
                delete R._nextChangeEdgeHost, q && ("source" === q.type ? k.setSource(q.host) : k.setTarget(q.host)), R._writeEdgeHostAnchor("source", s[0]), R._writeEdgeHostAnchor("target", s[s.length - 1])
            } else s.length ? (k.setSegments(A), k.setPoints(s, !0)) : k.removeFromDataModel();
            m.dm().endTransaction(), delete k._writing
        }, Yj.prototype._writeEdgeHostAnchor = function(B, F) {
            var Q = this,
                M = Q.target,
                t = Q._calcHostAnchor(M, B, F);
            t.index !== O ? (M.setStyle("edge." + B + ".index", t.index), M.setStyle("edge." + B + ".percent", O), M.setStyle("edge." + B + ".anchor.x", O), M.setStyle("edge." + B + ".anchor.y", O), M.setStyle("edge." + B + ".anchor.elevation", O), M.setStyle("edge." + B + ".offset.elevation", F.e)) : t.percent !== O ? (M.setStyle("edge." + B + ".percent", t.percent), M.setStyle("edge." + B + ".index", O), M.setStyle("edge." + B + ".anchor.x", O), M.setStyle("edge." + B + ".anchor.y", O), M.setStyle("edge." + B + ".anchor.elevation", O), M.setStyle("edge." + B + ".offset.elevation", F.e)) : (M.s("edge." + B + ".anchor.x", t.x), M.s("edge." + B + ".anchor.y", t.y), M.s("edge." + B + ".anchor.elevation", t.e), t.offsetX || t.offsetY || t.offsetElevation ? (M.s("edge." + B + ".offset.x", t.offsetX), M.s("edge." + B + ".offset.y", t.offsetY), M.s("edge." + B + ".offset.elevation", t.offsetElevation)) : (M.s("edge." + B + ".offset.x", 0), M.s("edge." + B + ".offset.y", 0), M.s("edge." + B + ".offset.elevation", 0)))
        }, Yj.prototype._calcHostAnchor = function(T, Z, C, w) {
            w || (w = "source" === Z ? T.getSource() : T.getTarget());
            var z = this._interactor.gv,
                S = z.calculateAttachPoint(w, C);
            if (S) return S.info;
            if (Em(w)) {
                var O = z.calculateEdgePosition(w, C);
                return O
            }
            var E = w.getRotation(),
                p = w.getAnchor();
            je(w, z) && (E = 0);
            var H = w.getElevation(),
                U = w.getTall() * w.getScaleTall();
            H = ((C.e || 0) - T.s("edge." + Z + ".offset.elevation") - H) / U + .5;
            var u = w.getScale();
            if (E || u.x < 0 || u.y < 0) {
                var t = w.getMatrix(),
                    e = t.tfi(C),
                    K = w.getSize();
                return {
                    x: e.x / K.width + p.x,
                    y: e.y / K.height + p.y,
                    e: H
                }
            }
            var l = Hm(z, w),
                f = {
                    x: (C.x - l.x) / l.width,
                    y: (C.y - l.y) / l.height,
                    e: H
                };
            return f
        }, Yj.prototype._handlePanning = function(k) {
            var Y = this,
                V = Y._pan;
            if (V) {
                V.started = !0;
                var A = Y._interactor,
                    I = A.gv,
                    r = A._lastClientPoint,
                    C = Lo(k),
                    c = fr(I, C, r);
                I.setTranslate(V.tx + c.x, V.ty + c.y), Y.gatherSingleTarget(A.gv, Y.target), A._42(), A.fi({
                    kind: "betweenPan",
                    event: k
                })
            }
        }, Yj.prototype.handleEdit = function(j, f) {
            var e = this,
                Q = e.editing;
            if (e._pan) return e._handlePanning(f), void 0;
            if (e._multiSelect) return e._multiSelect.endPoint = j.lp(f), e._interactor.redraw(), void 0;
            if (Q) {
                Q.inEdit = !0;
                var B, T, a, J = e._interactor._getLogicalPoint(f),
                    E = F.Default.isCtrlDown(f),
                    n = F.Default.isShiftDown(f),
                    h = Q.type,
                    u = e.activing;
                if (e._guideInfo = null, "ctrlPoint" === h && n) {
                    var w = e.editing.direction.clone();
                    B = u.point;
                    var g = w.dot(J.clone().sub(B));
                    J = w.setLength(g).add(B)
                } else if ("ctrlPoint" === h || "realPoint" === h) {
                    var w;
                    if ("realPoint" === h && n) {
                        var d = e.editing.shiftGuide;
                        T = d.point;
                        var I = Math.abs(J.x - T.x),
                            N = Math.abs(J.y - T.y);
                        I > N && I > d.limit && "y" === d.dir && (d.dir = "x"), N > I && N > d.limit && "x" === d.dir && (d.dir = "y"), w = d.dir, "x" === w ? (J.y = T.y, d.limit = Math.max(d.limit, I)) : "y" === w && (J.x = T.x, d.limit = Math.max(d.limit, N))
                    }
                    if (!E) {
                        var i, x = e._isEditEdgeSourceTarget();
                        x && (i = J.clone());
                        var Z = e._guidingToEdit(J, w),
                            U = "realPoint" === h ? e._interactor.gridGuide.findClosest(J, w, !0) : null,
                            p = 1 / 0,
                            $ = 1 / 0;
                        U && (U.x && (p = U.x), U.y && ($ = U.y));
                        var S = !1;
                        if (Z && (Z.xList && (Math.abs(Z.x) <= Math.abs(p) ? (S = !0, p = Z.x) : delete Z.xList), Z.yList && (Math.abs(Z.y) <= Math.abs($) ? (S = !0, $ = Z.y) : delete Z.yList), S && (e._guideInfo = Z)), isFinite(p) && (J.x += p), isFinite($) && (J.y += $), S && (Z.v = J), x) {
                            var _ = S ? J.clone() : null;
                            J.copy(i);
                            var H = e._editEdgeSourceTarget(x, J, E, _);
                            H && (e.edgeEditResult = H, a = H.tipText, H.isFixed && (e._guideInfo = null))
                        }
                    }
                }
                var R = e.screenInfo.curve;
                if ("realPoint" === Q.type) {
                    B = Q.point, B.e !== O && (J.e = B.e), R.moveRealPoint(B, J), Q.point = J, e.highlight.point = J;
                    var t = u.status,
                        X = u.selections;
                    if (e.activing = {
                            point: J,
                            status: t
                        }, X) {
                        var l = J.clone().sub(B),
                            K = 0;
                        X.forEach(function(L) {
                            var z = L.clone().add(l);
                            R.moveRealPoint(L, z), X[K++] = z
                        }), e.activing.selections = X
                    }
                } else if ("ctrlPoint" === Q.type) {
                    var c = u.pairs,
                        A = c[Q.pairId];
                    R.moveCtrlPoint(A, J, Q.ctrlType);
                    var y = u.status,
                        r = Xr.Curve.PointType;
                    if ((y === r.Mirrored || y === r.Asymmetric) && A.c1 && A.c2) {
                        var B = new Xr.Math.Vector2(u.point),
                            M = "c1" === Q.ctrlType ? "c2" : "c1";
                        if (y === Xr.Curve.PointType.Mirrored) R.moveCtrlPoint(A, B.clone().multiplyScalar(2).sub(J), M);
                        else if (y === r.Asymmetric) {
                            var g = A[M].clone().sub(B).length(),
                                m = B.clone().sub(A[Q.ctrlType]).setLength(g).add(B);
                            isNaN(m.x) || R.moveCtrlPoint(A, m, M)
                        }
                    }
                    u._firePointChange()
                } else if ("elevation" === Q.type) {
                    T = Q.startPoint;
                    var P = T.e + (T.y - J.y) / j._zoom;
                    e._setCurrentPointImpl("e", P), u._firePointChange(), a = "E: " + Xr.toFixed(P)
                }
                var o = F.Default.getLogicalPoint(f, e._interactor._canvas);
                if (o.x += Xr.Icons.TipShiftX, o.y += Xr.Icons.TipShiftY, !a) {
                    var G = Xr.toWorldPosition(j, J);
                    a = "" + Xr.toFixed(G.x) + ", " + Xr.toFixed(G.y)
                }
                e.tipInfo = {
                    helperPos: o,
                    text: a,
                    size: a.length
                }, e._writeToHt(), e._interactor.fi({
                    kind: "betweenEditPoint",
                    event: f
                })
            }
        }, Yj.prototype._setCurrentPointImpl = function(j, l) {
            var S = this,
                f = S._activing;
            if (!f) return !1;
            var F = S.target;
            if (!F) return !1;
            var Z = f.getCurrentEditingPoint();
            if (!Z) return !1;
            var g = f.editingCtrl;
            if (!g) var r = Z.clone();
            if ("e" === j) Z.e = l;
            else {
                var H;
                if ("x" === j || "y" === j) {
                    var e = f._lastFirePoint;
                    H = "x" === j ? {
                        x: l,
                        y: e ? e.y : 0
                    } : {
                        x: e ? e.x : 0,
                        y: l
                    }
                } else "object" == typeof j ? (H = j, j.e !== O && (Z.e = j.e)) : (H = {
                    x: arguments[0],
                    y: arguments[1]
                }, arguments[2] !== O && (Z.e = arguments[2]));
                var X = Xr.getDataMatrix(F);
                H = Xr.toScreenPosition(S._interactor.gv, X.apply(H)), Z.x = H.x, Z.y = H.y
            }
            if (!g) {
                var b = r.multiplyScalar(-1).add(Z);
                Jm(Z.e) && Jm(r.e) && (b.e = Z.e - r.e);
                var h = S.screenInfo.curve;
                h.moveCtrlDueToRealPointMovement(Z, b);
                var L = f.selections;
                if (L) {
                    var c = 0;
                    L.forEach(function(o) {
                        var i = o.clone().add(b);
                        isFinite(b.e) && (i.e = (isFinite(o.e) ? o.e : F.getElevation() || 0) + b.e), h.moveRealPoint(o, i), L[c++] = i
                    }), f.selections = L
                }
            }
            return !0
        }, Yj.prototype.setCurrentPoint = function(R, S) {
            return this._setCurrentPointImpl(R, S) ? (this._writeToHt(), !0) : !1
        }, Yj.prototype._isEditEdgeSourceTarget = function() {
            var l = this,
                T = l.target;
            if (!(T instanceof F.Edge)) return !1;
            var i = l.editing.point,
                U = l.screenInfo.curve._curves;
            return i === U[0]._p1 ? "source" : i === U[U.length - 1]._p4 ? "target" : !1
        }, Yj.prototype._editEdgeSourceTarget = function(m, R, Y, p) {
            var s, S = this,
                h = S.target;
            if (s = "source" === m ? h.getSource() : h.getTarget()) {
                var j, c = S._interactor.gv,
                    M = Xr.toWorldPosition(c, R),
                    K = S._calcHostAnchor(h, m, M, s);
                if (j = K.index !== O || K.percent !== O ? K.distance * c.getZoom() > S._interactor.getStyle("edgeHostEdgeMaxDistance") : S._interactor.getStyle("edgeHostDetectPerFrame") ? !0 : K.x < 0 || K.x > 1 || K.y < 0 || K.y > 1 ? !0 : !1) {
                    var n = c.getDataAt(M, function(y) {
                        return c.isSelectable(y) ? c.isSourceTargetEditable(h, y, m) ? h.canSetSourceTarget(y, m) ? !0 : !1 : !1 : !1
                    });
                    if (n) {
                        var U = S._calcHostAnchor(h, m, M, n);
                        s = n, S._nextChangeEdgeHost = {
                            type: m,
                            host: n
                        }, K = U
                    }
                }
                var o, J, E, v = !1;
                if (Y || K.x === O)(K.percent !== O || K.index !== O) && (v = !0, J = K.point);
                else {
                    var N = S._interactor.getStyle("anchorRound"),
                        F = S._interactor.getStyle("anchorSensitivity");
                    o = c.calculateAttachPoint(s, M), o ? (K = o.info, v = !0) : (p && (K = S._calcHostAnchor(h, m, Xr.toWorldPosition(c, p), s)), K.x = Xr.roundTo(K.x, N, F), K.y = Xr.roundTo(K.y, N, F)), J = _l(c, s, 0, K.offsetX || 0, K.offsetY || 0, K.x, K.y)
                }
                J && (E = Xr.toScreenPosition(c, J), R.x = E.x, R.y = E.y), S._edgeHostGuideInfo = {
                    corners: Xr.getTargetCornersOnScreen(c, s),
                    attach: o ? o.index : -1,
                    host: s
                };
                var y;
                return K.percent !== O ? y = "percent: " + K.percent.toFixed(2) : K.index !== O ? y = "index: " + K.index : (y = "" + K.x.toFixed(2) + ", " + K.y.toFixed(2), (K.offsetX || K.offsetY) && (y += " offset: " + K.offsetX.toFixed(2) + ", " + K.offsetY.toFixed(2))), {
                    host: s,
                    anchor: K,
                    tipText: y,
                    isFixed: v
                }
            }
        }, Yj.prototype._guidingToEdit = function(U, e) {
            var i, w, v = this;
            if (i = v.screenInfo.curve) {
                w = i._curves;
                var T, a, L, p, S, r, y, Z, Y = 1 / 0,
                    s = 1 / 0,
                    u = [];
                for (v.editing && "realPoint" === v.editing.type && (Z = v.editing.point), S = 0, r = 2 * w.length; r > S; S++) y = w[Math.floor(S / 2)][S % 2 ? "_p4" : "_p1"], u.indexOf(y) >= 0 || (u.push(y), Z && Z === y || (L = y.x - U.x, p = y.y - U.y, Math.abs(L) < Math.abs(Y) ? (Y = L, T = [y]) : L === Y && T.push(y), Math.abs(p) < Math.abs(s) ? (s = p, a = [y]) : p === s && a.push(y)));
                var O = v._interactor.getStyle("smartGuideThreshold");
                if ((Math.abs(Y) > O || "y" === e) && (T = null), (Math.abs(s) > O || "x" === e) && (a = null), T || a) {
                    var K = !1,
                        m = {};
                    if (T && (K = !0, m.xList = T, m.x = Y), a && (K = !0, m.yList = a, m.y = s), K) return m
                }
            }
        }, Yj.prototype._46O = function(t) {
            var W = this;
            W.editing && (W.editing = null, W._interactor.fi({
                kind: "endEditPoint",
                event: t
            })), W._guideInfo = null, W._edgeHostGuideInfo = null, W._pan && (W._pan = null, W._interactor.fi({
                kind: "endPan",
                event: t
            })), W._multiSelect && (W._handleMultiSelect(W._multiSelect, t), W._multiSelect = null), W.tipInfo = null, W.edgeEditResult = null
        }, Yj.prototype._handleMultiSelect = function(R, V) {
            if (R.startPoint && R.endPoint) {
                var $, z, i, A, q, o, Y = this,
                    w = Y._interactor,
                    J = w.gv,
                    p = Xr.toScreenPosition(J, R.startPoint),
                    M = Xr.toScreenPosition(J, R.endPoint),
                    c = F.Default.unionPoint(p, M),
                    n = Y.screenInfo.curve._curves,
                    m = [],
                    X = function(D) {
                        D.x >= c.x && D.y >= c.y && D.x <= c.x + c.width && D.y <= c.y + c.height && m.indexOf(D) < 0 && m.push(D)
                    };
                for ($ = 0, z = n.length; z > $; $++) q = n[$], X(q._p1), X(q._p4);
                if (m.length) {
                    var P = Y.activing || {},
                        y = P.selections || [];
                    P.point && y.push(P.point);
                    var t = F.Default.isShiftDown(V),
                        k = V.altKey;
                    if (k && !t)
                        for (o = m, m = [], $ = 0, z = o.length; z > $; $++) i = o[$], A = y.indexOf(i), A >= 0 && m.push(i);
                    for ($ = 0, z = y.length; z > $; $++) i = y[$], A = m.indexOf(i), A >= 0 ? (!t || t && k) && (m[A] = O) : m.push(i);
                    for (o = m, m = [], $ = 0, z = o.length; z > $; $++) o[$] && m.push(o[$]);
                    z = m.length, 0 === z ? Y.activing = null : 1 === z ? Y.activing = {
                        point: m[0]
                    } : (i = m[z - 1], Y.activing = {
                        point: i,
                        selections: m.splice(0, z - 1)
                    }), w.redraw()
                }
            }
        }, Yj.prototype._canDeletePoint = function(m, Z) {
            var Q = this.target;
            if (!(Q instanceof F.Edge)) return !0;
            var G = m._curves[0],
                f = m._curves[m._curves.length - 1];
            return G._p1 === Z || f._p4 === Z ? !1 : !0
        }, Yj.prototype.handleDelete = function() {
            var c = this;
            if (c.activing && c.screenInfo) {
                var y = F.Default.isShiftDown(),
                    j = c.screenInfo.curve;
                c._canDeletePoint(j, c.activing.point) && j.deleteRealPoint(c.activing.point, y), c.activing.selections && c.activing.selections.forEach(function(Y) {
                    c._canDeletePoint(j, Y) && j.deleteRealPoint(Y, y)
                }), c.activing = null, delete c.editing, delete c.tipInfo, delete c.edgeEditResult, delete c._pan, delete c._multiSelect, c._writeToHt(), c._interactor.fp("deleteShapePoint", !1, !0)
            }
        }, Yj.prototype.handleDoubleClick = function(A) {
            var z = this,
                d = z._interactor._getLogicalPoint(A);
            if (z.screenInfo && z._checkEditRealPoint(d)) {
                var R = z.getCurrentSelectintStatus(),
                    L = Xr.Curve.PointType;
                return R = R === L.Mirrored ? L.Straight : L.Mirrored, z._setCurrentSelectionStatus(R), z._interactor._42(), !0
            }
        }, Yj.prototype._drawHighlight = function(s) {
            var B = this,
                i = B.highlight;
            if (i) {
                var L = i.bezier,
                    e = B._interactor;
                L && Xr.Icons.DrawIcon(e, s, Xr.Icons.ShapeHighlightCurve, [L._p1.x, L._p1.y, L._p2.x, L._p2.y, L._p3.x, L._p3.y, L._p4.x, L._p4.y]);
                var h = i.point;
                h && "insertKnot" === i.type && Xr.Icons.DrawIcon(e, s, Xr.Icons.ShapeHighlighPoint, h)
            }
        }, Yj.prototype._drawGuide = function(f) {
            var K = this,
                B = K._guideInfo;
            if (B) {
                var _, w, P, Q, z = B.v;
                for (_ = 0; 2 > _; _++)
                    if (Q = 0 === _ ? B.xList : B.yList)
                        for (w = 0, P = Q.length; P > w; w++) Xr.Icons.DrawIcon(K._interactor, f, Xr.Icons.ShapeGuideLine, [z.x, z.y, Q[w].x, Q[w].y])
            }
        }, Yj.prototype._drawCurrentPoint = function(J) {
            var p = this;
            if (p.activing) {
                var R = p.activing,
                    g = p.getCurrentSelectintStatus(),
                    m = p._interactor;
                if (g !== Xr.Curve.PointType.Straight) {
                    var j = R.pairs;
                    R.hlpair, R.hltype;
                    var l = R.selections,
                        D = R.editingCtrl;
                    if (j && !l) {
                        var s, Y, V;
                        for (Y = 0, V = j.length; V > Y; Y++) s = j[Y], D && Y === D.pairId && s[D.type] ? Xr.Icons.DrawIcon(m, J, Xr.Icons.ShapeActivingCtrl, {
                            point: s.point,
                            c1: s.c1,
                            c2: s.c2,
                            hl: D.type
                        }) : Xr.Icons.DrawIcon(m, J, Xr.Icons.ShapeActivingCtrl, s)
                    }
                }
                Xr.Icons.DrawIcon(m, J, Xr.Icons.ShapeHighlighRealPoint, p.activing.point), l && l.forEach(function(Y) {
                    Xr.Icons.DrawIcon(m, J, Xr.Icons.ShapeHighlighRealPoint, Y)
                })
            }
        }, Yj.prototype.clear = function() {
            var Q = this;
            Q.editing = null, Q._guideInfo = null, Q.activing = null, Q.highlight = null
        }, Yj.prototype._42 = function(E) {
            var o = this;
            o.info = {}, o.editing || (o.screenInfo = null);
            var t = o._interactor;
            if (!t.editDetail) return o.clear(), void 0;
            var L = t.gv;
            if (!o.target || !L.isSelected(o.target) || !L.isVisible(o.target)) return t.editDetail = !1, o.clear(), void 0;
            if (o.gatherSingleTarget(L, o.target), Xr.Icons.DrawIcon(t, E, Xr.Icons.ShapeBgCurve, o.screenInfo), o._interactor.getStyle("curveElevationVisible") && (o.target instanceof F.Polyline || o.target instanceof F.Edge && o._interactor.getStyle("edgeElevationEditable")) && o.activing) {
                var d = o.activing.getCurrentEditingPoint();
                d && "string" != typeof d.e && Xr.Icons.DrawIcon(t, E, Xr.Icons.EdgeElevationGuide, d)
            }
            if (o._drawHighlight(E), o._drawCurrentPoint(E), o._getRealPoint().forEach(function(D) {
                    Xr.Icons.DrawIcon(t, E, Xr.Icons.ShapePoint, D)
                }), o._drawGuide(E), o.tipInfo && o._interactor.getStyle("curveTipVisible") && Xr.Icons.DrawIcon(t, E, Xr.Icons.TipHelper, o.tipInfo), o._edgeHostGuideInfo && t._drawHostGuide(o._edgeHostGuideInfo), o.edgeEditResult && o._drawEdgeHostHighlight(E, o.edgeEditResult.host, o.edgeEditResult.anchor), o._multiSelect && o._multiSelect.endPoint) {
                var b = F.Default.unionPoint(Xr.toScreenPosition(L, o._multiSelect.startPoint), Xr.toScreenPosition(L, o._multiSelect.endPoint));
                b.color = L.getRectSelectBorderColor(), E.save(), E.setTransform(1, 0, 0, 1, 0, 0);
                var m = z.devicePixelRatio,
                    y = b.borderWidth = Math.round(m);
                y /= 2, b.x = Math.round(b.x * m) + y, b.y = Math.round(b.y * m) + y, b.width = Math.round(b.width * m), b.height = Math.round(b.height * m), Xr.Icons.DrawIcon(t, E, Xr.Icons.SimpleRect, b), E.restore()
            }
        }, Yj.prototype._drawEdgeHostHighlight = function(g, K, D) {
            this.drawEdgeHostHighlight(g, K, D), this._interactor.redraw()
        }, Yj.prototype.drawEdgeHostHighlight = function(H, K, h) {
            if (Em(K)) {
                var U, $, c, W, k = this,
                    _ = k._interactor,
                    S = _.gv,
                    D = S.getDataUI(K),
                    N = sk(D),
                    m = [];
                for (c = 0, W = N.points.length; W > c; c++) $ = Xr.toScreenPosition(S, N.points.get(c)), m.push($.x, $.y);
                N.segments && (U = N.segments.toArray());
                var R = _.getStyle("edgeHostHighlighPeriod"),
                    z = _.getStyle("edgeHostEdgeHighlighColor");
                Xr.Icons.DrawIcon(_, H, Xr.Icons.ShapeBgCurve, {
                    P: m,
                    S: U,
                    color: z,
                    dynamicVisible: h.index === O,
                    dynamicPeriod: R
                }), z = _.getStyle("edgeHostPointHighlighColor");
                var a = jc(D);
                for (c = 0, W = a.length; W > c; c++) {
                    var G = a[c],
                        y = Xr.toScreenPosition(S, G);
                    Xr.Icons.DrawIcon(_, H, Xr.Icons.ShapePoint, {
                        point: {
                            x: y.x,
                            y: y.y
                        },
                        color: z,
                        size: 12,
                        dynamicVisible: c === h.index,
                        dynamicPeriod: R
                    })
                }
            }
        }, Yj.prototype._getRealPoint = function() {
            var A, f = this.screenInfo,
                E = f.P,
                n = f.S,
                B = -1,
                m = [],
                u = -1,
                V = n.length;
            return n.each(function(K) {
                u++;
                var d = 1;
                if (3 === K) d = 2;
                else if (4 === K) d = 3;
                else if (5 === K) return;
                B += d, A = u + 1 >= V ? !0 : 1 === n.get(u + 1) ? !0 : !1, m.push({
                    point: {
                        x: E[2 * B],
                        y: E[2 * B + 1]
                    },
                    segmentIndex: u,
                    pointIndex: B,
                    isEnd: A
                })
            }), m
        }, Yj.prototype.getEditingPointsInfo = function(K) {
            var V = this,
                w = V.activing;
            if (!w) return !1;
            var x = w.point;
            if (!x) return !1;
            var M = this._getRealPoint(),
                g = [{
                    screen: x
                }];
            w.selections && w.selections.forEach(function(V) {
                g.push({
                    screen: V
                })
            });
            var G, F, v = M.length;
            return g.forEach(function(q) {
                for (G = 0; v > G; G++)
                    if (F = M[G], q.screen.isNearEnough(F.point)) {
                        q.segmentIndex = F.segmentIndex, q.pointIndex = F.pointIndex, q.point = V.target.getPoints().get(F.pointIndex);
                        break
                    }
            }), K && g.sort(function(U, N) {
                return U.segmentIndex - N.segmentIndex
            }), g
        };
        var So = Xr.MoveHelper = function(k) {
            var M = this;
            M.catalog = "Move", M._interactor = k
        };
        So.prototype = {}, So.prototype.constructor = So, So.prototype.calcShift = function(f, c, E) {
            var n, J, k = this,
                N = k._interactor.gv,
                O = N.lp(c);
            if ("beginMove" === f && k._gatherGridInfo(E._lastLogicalPoint || O), n = k._target) {
                var I = n.downPosition;
                if (I) {
                    var s = k._interactor.getStyle("moveSensitivity") / N._zoom;
                    if (I.distanceTo(O) < s) return {
                        x: 0,
                        y: 0
                    };
                    delete n.downPosition
                }
                var o;
                J = F.Default.isShiftDown(c), J && (O = k._dealShiftDown(O), o = n.shiftGuide.dir);
                var S, W = n.rawPos = {
                    x: n.pos.x + O.x - n.lp.x,
                    y: n.pos.y + O.y - n.lp.y
                };
                if (F.Default.isCtrlDown(c)) {
                    if (S = k._calcShiftByAddon(), k._target.node instanceof Xr.Group) {
                        var j = k._target.node;
                        j._position.x += S.x, j._position.y += S.y
                    }
                    return S
                }
                var T = k._interactor.rectGuide;
                if (n.node instanceof F.Data && n.node.s("2d.attachable")) {
                    var t = k._calcAttachNodeShift(n.node, W);
                    if (T.clear(), t) return t
                }
                for (var u, A = n.x + W.x, U = n.y + W.y, b = {
                        x: A,
                        y: U
                    }, h = {
                        x: A + n.w / 2,
                        y: U + n.h / 2
                    }, m = {
                        x: A + n.w,
                        y: U + n.h
                    }, Q = k._interactor.gridGuide, i = [T.findClosest(b, o), T.findClosest(h, o), T.findClosest(m, o), Q.findClosest(b, o), Q.findClosest(h, o), Q.findClosest(m, o)], d = 1 / 0, B = 1 / 0, C = 0, $ = i.length; $ > C; C++) u = i[C], u && (A = u.x, U = u.y, isFinite(A) && Math.abs(A) < Math.abs(d) && (d = A), isFinite(U) && Math.abs(U) < Math.abs(B) && (B = U));
                if (isFinite(d) || (d = 0), isFinite(B) || (B = 0), S = k._calcShiftByAddon(d, B), k._target.node instanceof Xr.Group) {
                    var j = k._target.node;
                    j._position.x += S.x, j._position.y += S.y
                }
                var _ = n.node;
                if (!je(_, N)) {
                    var a = W.x + d,
                        G = W.y + B;
                    k._interactor.rectGuide.gatherLines({
                        node: _,
                        x: n.x + a,
                        y: n.y + G,
                        w: n.w,
                        h: n.h
                    }, o)
                }
                return S
            }
        }, So.prototype._calcShiftByAddon = function(Q, k) {
            var b = this._target,
                U = b.rawPos,
                T = b.node.getPosition();
            return Q = Q || 0, k = k || 0, {
                x: U.x - T.x + Q,
                y: U.y - T.y + k
            }
        }, So.prototype._dealShiftDown = function(M) {
            var P = this,
                g = P._target.shiftGuide,
                h = P._target.lp,
                s = Math.abs(M.x - h.x),
                p = Math.abs(M.y - h.y);
            s > p && s > g.limit && "y" === g.dir && (g.dir = "x"), p > s && p > g.limit && "x" === g.dir && (g.dir = "y");
            var u = g.dir;
            return "x" === u ? (M.y = h.y, g.limit = Math.max(g.limit, s)) : "y" === u && (M.x = h.x, g.limit = Math.max(g.limit, p)), M
        }, So.prototype._isAttachableLineShape = function(W) {
            if (!W.getSegments) return !1;
            var n = W.getSegments();
            if (!n) return !0;
            n instanceof F.List && (n = n.getArray());
            for (var a = 1, J = n.length; J > a; a++)
                if (2 !== n[a]) return !1;
            return !0
        }, So.prototype._calcAttachNodeShift = function() {
            var P = new ls,
                M = new ls,
                i = new ls,
                T = new ls;
            return function(f, Z) {
                var m = this._interactor.gv,
                    p = f.getHost(),
                    j = m.getDataAt(Z, function(J) {
                        return J.s("2d.hostable") ? !0 : !1
                    });
                if (j && p !== j && f.setHost(j), !j) return this._edgeHostGuideInfo = null, f.setHost(null);
                var S = this._edgeHostGuideInfo = {
                    corners: Xr.getTargetCornersOnScreen(m, j),
                    host: j,
                    attach: -1
                };
                if (this._isAttachableLineShape(j)) {
                    for (var Q, q, _, t, H, k, C = j.getPoints(), R = C.size(), s = j.getPointsMatrix2d(), V = 1 / 0, U = 0; R > U && (U !== R - 1 || j.isClosePath()); U++) 0 !== U ? M.copy(i) : s.apply(C.get(U), M), s.apply(U === R - 1 ? C.get(0) : C.get(U + 1), i), P.copy(Z).sub(M), T.copy(i).sub(M), Q = T.length(), T.divideScalar(Q), q = P.dot(T), 0 > q ? q = 0 : q > Q && (q = Q), T.multiplyScalar(q).add(M), _ = P.copy(Z).sub(T).lengthSq(), V > _ && (V = _, k = U, t = q, H = Q);
                    return Math.sqrt(V) * m.getZoom() > this._interactor.getStyle("attachThreshold") ? (f.s({
                        "attach.index": -1
                    }), f.setHost(null), void 0) : (f.s("attach.offset.opposite") && (t = H - t), f.s({
                        "attach.index": k,
                        "attach.offset": f.s("attach.offset.relative") ? t / H : t
                    }), {
                        x: 0,
                        y: 0
                    })
                }
                var g = m.calculateAttachPoint(j, Z);
                if (g) {
                    var z = g.point;
                    return S.attach = g.index, this._calcShiftByAddon(z.x - Z.x, z.y - Z.y)
                }
            }
        }(), So.prototype._gatherGridInfo = function(l) {
            var W, K = this,
                Z = K._interactor,
                n = Z._getValidSelection();
            if (n.length) {
                if (1 === n.length) {
                    if (W = n[0], !W.getRect) return K._target = null, void 0
                } else if (W = Xr.Group.findOrCreateGroup(n, Z._uuid), !W) return K._target = null, void 0
            } else {
                var n = Z.gv.sm().getSelection();
                if (n.length && (W = n.get(0), !W.getRect)) return K._target = null, void 0
            }
            if (W) {
                var S = W.getPosition(),
                    s = W.getRect();
                K._target = {
                    node: W,
                    x: s.x - S.x,
                    y: s.y - S.y,
                    w: s.width,
                    h: s.height,
                    lp: {
                        x: l.x,
                        y: l.y
                    },
                    pos: {
                        x: S.x,
                        y: S.y
                    },
                    shiftGuide: {
                        dir: "x",
                        limit: 0
                    },
                    downPosition: new Xr.Math.Vector2(l)
                }, Z.rectGuide.gatherRects()
            }
        }, So.prototype.clear = function() {
            var k = this;
            k._edgeHostGuideInfo = null, k._interactor.rectGuide.clear(), k._interactor._42()
        }, So.prototype._42 = function() {
            var u = this._edgeHostGuideInfo;
            u && this._interactor._drawHostGuide(u)
        };
        var hq = G.freeze({
                DEPTH_BUFFER_BIT: 256,
                STENCIL_BUFFER_BIT: 1024,
                COLOR_BUFFER_BIT: 16384,
                POINTS: 0,
                LINES: 1,
                LINE_LOOP: 2,
                LINE_STRIP: 3,
                TRIANGLES: 4,
                TRIANGLE_STRIP: 5,
                TRIANGLE_FAN: 6,
                ZERO: 0,
                ONE: 1,
                SRC_COLOR: 768,
                ONE_MINUS_SRC_COLOR: 769,
                SRC_ALPHA: 770,
                ONE_MINUS_SRC_ALPHA: 771,
                DST_ALPHA: 772,
                ONE_MINUS_DST_ALPHA: 773,
                DST_COLOR: 774,
                ONE_MINUS_DST_COLOR: 775,
                SRC_ALPHA_SATURATE: 776,
                FUNC_ADD: 32774,
                BLEND_EQUATION: 32777,
                BLEND_EQUATION_RGB: 32777,
                BLEND_EQUATION_ALPHA: 34877,
                FUNC_SUBTRACT: 32778,
                FUNC_REVERSE_SUBTRACT: 32779,
                BLEND_DST_RGB: 32968,
                BLEND_SRC_RGB: 32969,
                BLEND_DST_ALPHA: 32970,
                BLEND_SRC_ALPHA: 32971,
                CONSTANT_COLOR: 32769,
                ONE_MINUS_CONSTANT_COLOR: 32770,
                CONSTANT_ALPHA: 32771,
                ONE_MINUS_CONSTANT_ALPHA: 32772,
                BLEND_COLOR: 32773,
                ARRAY_BUFFER: 34962,
                ELEMENT_ARRAY_BUFFER: 34963,
                ARRAY_BUFFER_BINDING: 34964,
                ELEMENT_ARRAY_BUFFER_BINDING: 34965,
                STREAM_DRAW: 35040,
                STATIC_DRAW: 35044,
                DYNAMIC_DRAW: 35048,
                BUFFER_SIZE: 34660,
                BUFFER_USAGE: 34661,
                CURRENT_VERTEX_ATTRIB: 34342,
                FRONT: 1028,
                BACK: 1029,
                FRONT_AND_BACK: 1032,
                CULL_FACE: 2884,
                BLEND: 3042,
                DITHER: 3024,
                STENCIL_TEST: 2960,
                DEPTH_TEST: 2929,
                SCISSOR_TEST: 3089,
                POLYGON_OFFSET_FILL: 32823,
                SAMPLE_ALPHA_TO_COVERAGE: 32926,
                SAMPLE_COVERAGE: 32928,
                NO_ERROR: 0,
                INVALID_ENUM: 1280,
                INVALID_VALUE: 1281,
                INVALID_OPERATION: 1282,
                OUT_OF_MEMORY: 1285,
                CW: 2304,
                CCW: 2305,
                LINE_WIDTH: 2849,
                ALIASED_POINT_SIZE_RANGE: 33901,
                ALIASED_LINE_WIDTH_RANGE: 33902,
                CULL_FACE_MODE: 2885,
                FRONT_FACE: 2886,
                DEPTH_RANGE: 2928,
                DEPTH_WRITEMASK: 2930,
                DEPTH_CLEAR_VALUE: 2931,
                DEPTH_FUNC: 2932,
                STENCIL_CLEAR_VALUE: 2961,
                STENCIL_FUNC: 2962,
                STENCIL_FAIL: 2964,
                STENCIL_PASS_DEPTH_FAIL: 2965,
                STENCIL_PASS_DEPTH_PASS: 2966,
                STENCIL_REF: 2967,
                STENCIL_VALUE_MASK: 2963,
                STENCIL_WRITEMASK: 2968,
                STENCIL_BACK_FUNC: 34816,
                STENCIL_BACK_FAIL: 34817,
                STENCIL_BACK_PASS_DEPTH_FAIL: 34818,
                STENCIL_BACK_PASS_DEPTH_PASS: 34819,
                STENCIL_BACK_REF: 36003,
                STENCIL_BACK_VALUE_MASK: 36004,
                STENCIL_BACK_WRITEMASK: 36005,
                VIEWPORT: 2978,
                SCISSOR_BOX: 3088,
                COLOR_CLEAR_VALUE: 3106,
                COLOR_WRITEMASK: 3107,
                UNPACK_ALIGNMENT: 3317,
                PACK_ALIGNMENT: 3333,
                MAX_TEXTURE_SIZE: 3379,
                MAX_VIEWPORT_DIMS: 3386,
                SUBPIXEL_BITS: 3408,
                RED_BITS: 3410,
                GREEN_BITS: 3411,
                BLUE_BITS: 3412,
                ALPHA_BITS: 3413,
                DEPTH_BITS: 3414,
                STENCIL_BITS: 3415,
                POLYGON_OFFSET_UNITS: 10752,
                POLYGON_OFFSET_FACTOR: 32824,
                TEXTURE_BINDING_2D: 32873,
                SAMPLE_BUFFERS: 32936,
                SAMPLES: 32937,
                SAMPLE_COVERAGE_VALUE: 32938,
                SAMPLE_COVERAGE_INVERT: 32939,
                COMPRESSED_TEXTURE_FORMATS: 34467,
                DONT_CARE: 4352,
                FASTEST: 4353,
                NICEST: 4354,
                GENERATE_MIPMAP_HINT: 33170,
                BYTE: 5120,
                UNSIGNED_BYTE: 5121,
                SHORT: 5122,
                UNSIGNED_SHORT: 5123,
                INT: 5124,
                UNSIGNED_INT: 5125,
                FLOAT: 5126,
                DEPTH_COMPONENT: 6402,
                ALPHA: 6406,
                RGB: 6407,
                RGBA: 6408,
                LUMINANCE: 6409,
                LUMINANCE_ALPHA: 6410,
                UNSIGNED_SHORT_4_4_4_4: 32819,
                UNSIGNED_SHORT_5_5_5_1: 32820,
                UNSIGNED_SHORT_5_6_5: 33635,
                FRAGMENT_SHADER: 35632,
                VERTEX_SHADER: 35633,
                MAX_VERTEX_ATTRIBS: 34921,
                MAX_VERTEX_UNIFORM_VECTORS: 36347,
                MAX_VARYING_VECTORS: 36348,
                MAX_COMBINED_TEXTURE_IMAGE_UNITS: 35661,
                MAX_VERTEX_TEXTURE_IMAGE_UNITS: 35660,
                MAX_TEXTURE_IMAGE_UNITS: 34930,
                MAX_FRAGMENT_UNIFORM_VECTORS: 36349,
                SHADER_TYPE: 35663,
                DELETE_STATUS: 35712,
                LINK_STATUS: 35714,
                VALIDATE_STATUS: 35715,
                ATTACHED_SHADERS: 35717,
                ACTIVE_UNIFORMS: 35718,
                ACTIVE_ATTRIBUTES: 35721,
                SHADING_LANGUAGE_VERSION: 35724,
                CURRENT_PROGRAM: 35725,
                NEVER: 512,
                LESS: 513,
                EQUAL: 514,
                LEQUAL: 515,
                GREATER: 516,
                NOTEQUAL: 517,
                GEQUAL: 518,
                ALWAYS: 519,
                KEEP: 7680,
                REPLACE: 7681,
                INCR: 7682,
                DECR: 7683,
                INVERT: 5386,
                INCR_WRAP: 34055,
                DECR_WRAP: 34056,
                VENDOR: 7936,
                RENDERER: 7937,
                VERSION: 7938,
                NEAREST: 9728,
                LINEAR: 9729,
                NEAREST_MIPMAP_NEAREST: 9984,
                LINEAR_MIPMAP_NEAREST: 9985,
                NEAREST_MIPMAP_LINEAR: 9986,
                LINEAR_MIPMAP_LINEAR: 9987,
                TEXTURE_MAG_FILTER: 10240,
                TEXTURE_MIN_FILTER: 10241,
                TEXTURE_WRAP_S: 10242,
                TEXTURE_WRAP_T: 10243,
                TEXTURE_2D: 3553,
                TEXTURE: 5890,
                TEXTURE_CUBE_MAP: 34067,
                TEXTURE_BINDING_CUBE_MAP: 34068,
                TEXTURE_CUBE_MAP_POSITIVE_X: 34069,
                TEXTURE_CUBE_MAP_NEGATIVE_X: 34070,
                TEXTURE_CUBE_MAP_POSITIVE_Y: 34071,
                TEXTURE_CUBE_MAP_NEGATIVE_Y: 34072,
                TEXTURE_CUBE_MAP_POSITIVE_Z: 34073,
                TEXTURE_CUBE_MAP_NEGATIVE_Z: 34074,
                MAX_CUBE_MAP_TEXTURE_SIZE: 34076,
                TEXTURE0: 33984,
                TEXTURE1: 33985,
                TEXTURE2: 33986,
                TEXTURE3: 33987,
                TEXTURE4: 33988,
                TEXTURE5: 33989,
                TEXTURE6: 33990,
                TEXTURE7: 33991,
                TEXTURE8: 33992,
                TEXTURE9: 33993,
                TEXTURE10: 33994,
                TEXTURE11: 33995,
                TEXTURE12: 33996,
                TEXTURE13: 33997,
                TEXTURE14: 33998,
                TEXTURE15: 33999,
                TEXTURE16: 34e3,
                TEXTURE17: 34001,
                TEXTURE18: 34002,
                TEXTURE19: 34003,
                TEXTURE20: 34004,
                TEXTURE21: 34005,
                TEXTURE22: 34006,
                TEXTURE23: 34007,
                TEXTURE24: 34008,
                TEXTURE25: 34009,
                TEXTURE26: 34010,
                TEXTURE27: 34011,
                TEXTURE28: 34012,
                TEXTURE29: 34013,
                TEXTURE30: 34014,
                TEXTURE31: 34015,
                ACTIVE_TEXTURE: 34016,
                REPEAT: 10497,
                CLAMP_TO_EDGE: 33071,
                MIRRORED_REPEAT: 33648,
                FLOAT_VEC2: 35664,
                FLOAT_VEC3: 35665,
                FLOAT_VEC4: 35666,
                INT_VEC2: 35667,
                INT_VEC3: 35668,
                INT_VEC4: 35669,
                BOOL: 35670,
                BOOL_VEC2: 35671,
                BOOL_VEC3: 35672,
                BOOL_VEC4: 35673,
                FLOAT_MAT2: 35674,
                FLOAT_MAT3: 35675,
                FLOAT_MAT4: 35676,
                SAMPLER_2D: 35678,
                SAMPLER_CUBE: 35680,
                VERTEX_ATTRIB_ARRAY_ENABLED: 34338,
                VERTEX_ATTRIB_ARRAY_SIZE: 34339,
                VERTEX_ATTRIB_ARRAY_STRIDE: 34340,
                VERTEX_ATTRIB_ARRAY_TYPE: 34341,
                VERTEX_ATTRIB_ARRAY_NORMALIZED: 34922,
                VERTEX_ATTRIB_ARRAY_POINTER: 34373,
                VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 34975,
                IMPLEMENTATION_COLOR_READ_TYPE: 35738,
                IMPLEMENTATION_COLOR_READ_FORMAT: 35739,
                COMPILE_STATUS: 35713,
                LOW_FLOAT: 36336,
                MEDIUM_FLOAT: 36337,
                HIGH_FLOAT: 36338,
                LOW_INT: 36339,
                MEDIUM_INT: 36340,
                HIGH_INT: 36341,
                FRAMEBUFFER: 36160,
                RENDERBUFFER: 36161,
                RGBA4: 32854,
                RGB5_A1: 32855,
                RGB565: 36194,
                DEPTH_COMPONENT16: 33189,
                STENCIL_INDEX: 6401,
                STENCIL_INDEX8: 36168,
                DEPTH_STENCIL: 34041,
                RENDERBUFFER_WIDTH: 36162,
                RENDERBUFFER_HEIGHT: 36163,
                RENDERBUFFER_INTERNAL_FORMAT: 36164,
                RENDERBUFFER_RED_SIZE: 36176,
                RENDERBUFFER_GREEN_SIZE: 36177,
                RENDERBUFFER_BLUE_SIZE: 36178,
                RENDERBUFFER_ALPHA_SIZE: 36179,
                RENDERBUFFER_DEPTH_SIZE: 36180,
                RENDERBUFFER_STENCIL_SIZE: 36181,
                FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 36048,
                FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 36049,
                FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 36050,
                FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 36051,
                COLOR_ATTACHMENT0: 36064,
                DEPTH_ATTACHMENT: 36096,
                STENCIL_ATTACHMENT: 36128,
                DEPTH_STENCIL_ATTACHMENT: 33306,
                NONE: 0,
                FRAMEBUFFER_COMPLETE: 36053,
                FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 36054,
                FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 36055,
                FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 36057,
                FRAMEBUFFER_UNSUPPORTED: 36061,
                FRAMEBUFFER_BINDING: 36006,
                RENDERBUFFER_BINDING: 36007,
                MAX_RENDERBUFFER_SIZE: 34024,
                INVALID_FRAMEBUFFER_OPERATION: 1286,
                UNPACK_FLIP_Y_WEBGL: 37440,
                UNPACK_PREMULTIPLY_ALPHA_WEBGL: 37441,
                CONTEXT_LOST_WEBGL: 37442,
                UNPACK_COLORSPACE_CONVERSION_WEBGL: 37443,
                BROWSER_DEFAULT_WEBGL: 37444,
                COMPRESSED_RGB_S3TC_DXT1_EXT: 33776,
                COMPRESSED_RGBA_S3TC_DXT1_EXT: 33777,
                COMPRESSED_RGBA_S3TC_DXT3_EXT: 33778,
                COMPRESSED_RGBA_S3TC_DXT5_EXT: 33779,
                COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 35840,
                COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 35841,
                COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 35842,
                COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 35843,
                COMPRESSED_RGB_ETC1_WEBGL: 36196,
                HALF_FLOAT_OES: 36193,
                DOUBLE: 5130,
                READ_BUFFER: 3074,
                UNPACK_ROW_LENGTH: 3314,
                UNPACK_SKIP_ROWS: 3315,
                UNPACK_SKIP_PIXELS: 3316,
                PACK_ROW_LENGTH: 3330,
                PACK_SKIP_ROWS: 3331,
                PACK_SKIP_PIXELS: 3332,
                COLOR: 6144,
                DEPTH: 6145,
                STENCIL: 6146,
                RED: 6403,
                RGB8: 32849,
                RGBA8: 32856,
                RGB10_A2: 32857,
                TEXTURE_BINDING_3D: 32874,
                UNPACK_SKIP_IMAGES: 32877,
                UNPACK_IMAGE_HEIGHT: 32878,
                TEXTURE_3D: 32879,
                TEXTURE_WRAP_R: 32882,
                MAX_3D_TEXTURE_SIZE: 32883,
                UNSIGNED_INT_2_10_10_10_REV: 33640,
                MAX_ELEMENTS_VERTICES: 33e3,
                MAX_ELEMENTS_INDICES: 33001,
                TEXTURE_MIN_LOD: 33082,
                TEXTURE_MAX_LOD: 33083,
                TEXTURE_BASE_LEVEL: 33084,
                TEXTURE_MAX_LEVEL: 33085,
                MIN: 32775,
                MAX: 32776,
                DEPTH_COMPONENT24: 33190,
                MAX_TEXTURE_LOD_BIAS: 34045,
                TEXTURE_COMPARE_MODE: 34892,
                TEXTURE_COMPARE_FUNC: 34893,
                CURRENT_QUERY: 34917,
                QUERY_RESULT: 34918,
                QUERY_RESULT_AVAILABLE: 34919,
                STREAM_READ: 35041,
                STREAM_COPY: 35042,
                STATIC_READ: 35045,
                STATIC_COPY: 35046,
                DYNAMIC_READ: 35049,
                DYNAMIC_COPY: 35050,
                MAX_DRAW_BUFFERS: 34852,
                DRAW_BUFFER0: 34853,
                DRAW_BUFFER1: 34854,
                DRAW_BUFFER2: 34855,
                DRAW_BUFFER3: 34856,
                DRAW_BUFFER4: 34857,
                DRAW_BUFFER5: 34858,
                DRAW_BUFFER6: 34859,
                DRAW_BUFFER7: 34860,
                DRAW_BUFFER8: 34861,
                DRAW_BUFFER9: 34862,
                DRAW_BUFFER10: 34863,
                DRAW_BUFFER11: 34864,
                DRAW_BUFFER12: 34865,
                DRAW_BUFFER13: 34866,
                DRAW_BUFFER14: 34867,
                DRAW_BUFFER15: 34868,
                MAX_FRAGMENT_UNIFORM_COMPONENTS: 35657,
                MAX_VERTEX_UNIFORM_COMPONENTS: 35658,
                SAMPLER_3D: 35679,
                SAMPLER_2D_SHADOW: 35682,
                FRAGMENT_SHADER_DERIVATIVE_HINT: 35723,
                PIXEL_PACK_BUFFER: 35051,
                PIXEL_UNPACK_BUFFER: 35052,
                PIXEL_PACK_BUFFER_BINDING: 35053,
                PIXEL_UNPACK_BUFFER_BINDING: 35055,
                FLOAT_MAT2x3: 35685,
                FLOAT_MAT2x4: 35686,
                FLOAT_MAT3x2: 35687,
                FLOAT_MAT3x4: 35688,
                FLOAT_MAT4x2: 35689,
                FLOAT_MAT4x3: 35690,
                SRGB: 35904,
                SRGB8: 35905,
                SRGB8_ALPHA8: 35907,
                COMPARE_REF_TO_TEXTURE: 34894,
                RGBA32F: 34836,
                RGB32F: 34837,
                RGBA16F: 34842,
                RGB16F: 34843,
                VERTEX_ATTRIB_ARRAY_INTEGER: 35069,
                MAX_ARRAY_TEXTURE_LAYERS: 35071,
                MIN_PROGRAM_TEXEL_OFFSET: 35076,
                MAX_PROGRAM_TEXEL_OFFSET: 35077,
                MAX_VARYING_COMPONENTS: 35659,
                TEXTURE_2D_ARRAY: 35866,
                TEXTURE_BINDING_2D_ARRAY: 35869,
                R11F_G11F_B10F: 35898,
                UNSIGNED_INT_10F_11F_11F_REV: 35899,
                RGB9_E5: 35901,
                UNSIGNED_INT_5_9_9_9_REV: 35902,
                TRANSFORM_FEEDBACK_BUFFER_MODE: 35967,
                MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 35968,
                TRANSFORM_FEEDBACK_VARYINGS: 35971,
                TRANSFORM_FEEDBACK_BUFFER_START: 35972,
                TRANSFORM_FEEDBACK_BUFFER_SIZE: 35973,
                TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 35976,
                RASTERIZER_DISCARD: 35977,
                MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 35978,
                MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 35979,
                INTERLEAVED_ATTRIBS: 35980,
                SEPARATE_ATTRIBS: 35981,
                TRANSFORM_FEEDBACK_BUFFER: 35982,
                TRANSFORM_FEEDBACK_BUFFER_BINDING: 35983,
                RGBA32UI: 36208,
                RGB32UI: 36209,
                RGBA16UI: 36214,
                RGB16UI: 36215,
                RGBA8UI: 36220,
                RGB8UI: 36221,
                RGBA32I: 36226,
                RGB32I: 36227,
                RGBA16I: 36232,
                RGB16I: 36233,
                RGBA8I: 36238,
                RGB8I: 36239,
                RED_INTEGER: 36244,
                RGB_INTEGER: 36248,
                RGBA_INTEGER: 36249,
                SAMPLER_2D_ARRAY: 36289,
                SAMPLER_2D_ARRAY_SHADOW: 36292,
                SAMPLER_CUBE_SHADOW: 36293,
                UNSIGNED_INT_VEC2: 36294,
                UNSIGNED_INT_VEC3: 36295,
                UNSIGNED_INT_VEC4: 36296,
                INT_SAMPLER_2D: 36298,
                INT_SAMPLER_3D: 36299,
                INT_SAMPLER_CUBE: 36300,
                INT_SAMPLER_2D_ARRAY: 36303,
                UNSIGNED_INT_SAMPLER_2D: 36306,
                UNSIGNED_INT_SAMPLER_3D: 36307,
                UNSIGNED_INT_SAMPLER_CUBE: 36308,
                UNSIGNED_INT_SAMPLER_2D_ARRAY: 36311,
                DEPTH_COMPONENT32F: 36012,
                DEPTH32F_STENCIL8: 36013,
                FLOAT_32_UNSIGNED_INT_24_8_REV: 36269,
                FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 33296,
                FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 33297,
                FRAMEBUFFER_ATTACHMENT_RED_SIZE: 33298,
                FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 33299,
                FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 33300,
                FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 33301,
                FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 33302,
                FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 33303,
                FRAMEBUFFER_DEFAULT: 33304,
                UNSIGNED_INT_24_8: 34042,
                DEPTH24_STENCIL8: 35056,
                UNSIGNED_NORMALIZED: 35863,
                DRAW_FRAMEBUFFER_BINDING: 36006,
                READ_FRAMEBUFFER: 36008,
                DRAW_FRAMEBUFFER: 36009,
                READ_FRAMEBUFFER_BINDING: 36010,
                RENDERBUFFER_SAMPLES: 36011,
                FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 36052,
                MAX_COLOR_ATTACHMENTS: 36063,
                COLOR_ATTACHMENT1: 36065,
                COLOR_ATTACHMENT2: 36066,
                COLOR_ATTACHMENT3: 36067,
                COLOR_ATTACHMENT4: 36068,
                COLOR_ATTACHMENT5: 36069,
                COLOR_ATTACHMENT6: 36070,
                COLOR_ATTACHMENT7: 36071,
                COLOR_ATTACHMENT8: 36072,
                COLOR_ATTACHMENT9: 36073,
                COLOR_ATTACHMENT10: 36074,
                COLOR_ATTACHMENT11: 36075,
                COLOR_ATTACHMENT12: 36076,
                COLOR_ATTACHMENT13: 36077,
                COLOR_ATTACHMENT14: 36078,
                COLOR_ATTACHMENT15: 36079,
                FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 36182,
                MAX_SAMPLES: 36183,
                HALF_FLOAT: 5131,
                RG: 33319,
                RG_INTEGER: 33320,
                R8: 33321,
                RG8: 33323,
                R16F: 33325,
                R32F: 33326,
                RG16F: 33327,
                RG32F: 33328,
                R8I: 33329,
                R8UI: 33330,
                R16I: 33331,
                R16UI: 33332,
                R32I: 33333,
                R32UI: 33334,
                RG8I: 33335,
                RG8UI: 33336,
                RG16I: 33337,
                RG16UI: 33338,
                RG32I: 33339,
                RG32UI: 33340,
                VERTEX_ARRAY_BINDING: 34229,
                R8_SNORM: 36756,
                RG8_SNORM: 36757,
                RGB8_SNORM: 36758,
                RGBA8_SNORM: 36759,
                SIGNED_NORMALIZED: 36764,
                COPY_READ_BUFFER: 36662,
                COPY_WRITE_BUFFER: 36663,
                COPY_READ_BUFFER_BINDING: 36662,
                COPY_WRITE_BUFFER_BINDING: 36663,
                UNIFORM_BUFFER: 35345,
                UNIFORM_BUFFER_BINDING: 35368,
                UNIFORM_BUFFER_START: 35369,
                UNIFORM_BUFFER_SIZE: 35370,
                MAX_VERTEX_UNIFORM_BLOCKS: 35371,
                MAX_FRAGMENT_UNIFORM_BLOCKS: 35373,
                MAX_COMBINED_UNIFORM_BLOCKS: 35374,
                MAX_UNIFORM_BUFFER_BINDINGS: 35375,
                MAX_UNIFORM_BLOCK_SIZE: 35376,
                MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 35377,
                MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 35379,
                UNIFORM_BUFFER_OFFSET_ALIGNMENT: 35380,
                ACTIVE_UNIFORM_BLOCKS: 35382,
                UNIFORM_TYPE: 35383,
                UNIFORM_SIZE: 35384,
                UNIFORM_BLOCK_INDEX: 35386,
                UNIFORM_OFFSET: 35387,
                UNIFORM_ARRAY_STRIDE: 35388,
                UNIFORM_MATRIX_STRIDE: 35389,
                UNIFORM_IS_ROW_MAJOR: 35390,
                UNIFORM_BLOCK_BINDING: 35391,
                UNIFORM_BLOCK_DATA_SIZE: 35392,
                UNIFORM_BLOCK_ACTIVE_UNIFORMS: 35394,
                UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 35395,
                UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 35396,
                UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 35398,
                INVALID_INDEX: 4294967295,
                MAX_VERTEX_OUTPUT_COMPONENTS: 37154,
                MAX_FRAGMENT_INPUT_COMPONENTS: 37157,
                MAX_SERVER_WAIT_TIMEOUT: 37137,
                OBJECT_TYPE: 37138,
                SYNC_CONDITION: 37139,
                SYNC_STATUS: 37140,
                SYNC_FLAGS: 37141,
                SYNC_FENCE: 37142,
                SYNC_GPU_COMMANDS_COMPLETE: 37143,
                UNSIGNALED: 37144,
                SIGNALED: 37145,
                ALREADY_SIGNALED: 37146,
                TIMEOUT_EXPIRED: 37147,
                CONDITION_SATISFIED: 37148,
                WAIT_FAILED: 37149,
                SYNC_FLUSH_COMMANDS_BIT: 1,
                VERTEX_ATTRIB_ARRAY_DIVISOR: 35070,
                ANY_SAMPLES_PASSED: 35887,
                ANY_SAMPLES_PASSED_CONSERVATIVE: 36202,
                SAMPLER_BINDING: 35097,
                RGB10_A2UI: 36975,
                INT_2_10_10_10_REV: 36255,
                TRANSFORM_FEEDBACK: 36386,
                TRANSFORM_FEEDBACK_PAUSED: 36387,
                TRANSFORM_FEEDBACK_ACTIVE: 36388,
                TRANSFORM_FEEDBACK_BINDING: 36389,
                COMPRESSED_R11_EAC: 37488,
                COMPRESSED_SIGNED_R11_EAC: 37489,
                COMPRESSED_RG11_EAC: 37490,
                COMPRESSED_SIGNED_RG11_EAC: 37491,
                COMPRESSED_RGB8_ETC2: 37492,
                COMPRESSED_SRGB8_ETC2: 37493,
                COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 37494,
                COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 37495,
                COMPRESSED_RGBA8_ETC2_EAC: 37496,
                COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 37497,
                TEXTURE_IMMUTABLE_FORMAT: 37167,
                MAX_ELEMENT_INDEX: 36203,
                TEXTURE_IMMUTABLE_LEVELS: 33503,
                MAX_TEXTURE_MAX_ANISOTROPY_EXT: 34047
            }),
            qn = function() {
                function z(F, H) {
                    var W = O;
                    return function() {
                        return W || (W = F.getExtension(H)), W
                    }
                }

                function s(f, t) {
                    t == O && (t = {}), t.version = T && (f instanceof WebGL2RenderingContext || G.prototype.toString.call(f) === R) ? 2 : 1, t.extensions = function() {
                        for (var d = {}, t = f.getSupportedExtensions(), G = t.length; G--;) d[name] = z(f, t[G]);
                        return d
                    }();
                    for (var H = G.keys(v), V = 0, k = H.length; k > V; ++V) {
                        var w = H[V];
                        t[w] = f.getParameter(v[w])
                    }
                    if (t.version > 1) {
                        H = G.keys(B);
                        for (var V = 0, k = H.length; k > V; ++V) {
                            var w = H[V];
                            t[w] = f.getParameter(B[w])
                        }
                    }
                    return t
                }
                var T = "undefined" != typeof WebGL2RenderingContext,
                    R = "[object WebGL2RenderingContext]",
                    v = {
                        aliasedLineWidthRange: hq.ALIASED_LINE_WIDTH_RANGE,
                        aliasedPointSizeRange: hq.ALIASED_POINT_SIZE_RANGE,
                        maxCombinedTextureImageUnits: hq.MAX_COMBINED_TEXTURE_IMAGE_UNITS,
                        maxCubeMapTextureSize: hq.MAX_CUBE_MAP_TEXTURE_SIZE,
                        maxFragmentUniformVectors: hq.MAX_FRAGMENT_UNIFORM_VECTORS,
                        maxRenderBufferSize: hq.MAX_RENDERBUFFER_SIZE,
                        maxTextureImageUnits: hq.MAX_TEXTURE_IMAGE_UNITS,
                        maxTextureSize: hq.MAX_TEXTURE_SIZE,
                        maxVaryingVectors: hq.MAX_VARYING_VECTORS,
                        maxVertexAttribs: hq.MAX_VERTEX_ATTRIBS,
                        maxVertexTextureImageUnits: hq.MAX_VERTEX_TEXTURE_IMAGE_UNITS,
                        maxVertexUniformVectors: hq.MAX_VERTEX_UNIFORM_VECTORS,
                        maxViewportDIMs: hq.MAX_VIEWPORT_DIMS
                    },
                    B = {
                        max3DTextureSize: hq.MAX_3D_TEXTURE_SIZE,
                        maxArrayTextureLayers: hq.MAX_ARRAY_TEXTURE_LAYERS,
                        maxColorAttachments: hq.MAX_COLOR_ATTACHMENTS,
                        maxCombinedFragmentUniformComponents: hq.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,
                        maxCombinedUniformBlocks: hq.MAX_COMBINED_UNIFORM_BLOCKS,
                        maxCombinedVertexUniformComponents: hq.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,
                        maxDrawBuffers: hq.MAX_DRAW_BUFFERS,
                        maxElementIndex: hq.MAX_ELEMENT_INDEX,
                        maxElementsIndices: hq.MAX_ELEMENTS_INDICES,
                        maxElementsVertices: hq.MAX_ELEMENTS_VERTICES,
                        maxFragmentInpuComponents: hq.MAX_FRAGMENT_INPUT_COMPONENTS,
                        maxFragmentUniformBlocks: hq.MAX_FRAGMENT_UNIFORM_BLOCKS,
                        maxFragmentUniformComponents: hq.MAX_FRAGMENT_UNIFORM_COMPONENTS,
                        maxProgramTexelOffset: hq.MAX_PROGRAM_TEXEL_OFFSET,
                        maxSamples: hq.MAX_SAMPLES,
                        maxTextureLODBias: hq.MAX_TEXTURE_LOD_BIAS,
                        maxTransformFeedbackInterleavedComponents: hq.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,
                        maxTransformFeedbackSeparateAttribs: hq.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,
                        maxTransformFeedbackSeparateComponents: hq.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,
                        maxUniformBlockSize: hq.MAX_UNIFORM_BLOCK_SIZE,
                        maxUniformBufferBindings: hq.MAX_UNIFORM_BUFFER_BINDINGS,
                        maxVaryingComponents: hq.MAX_VARYING_COMPONENTS,
                        maxVertexOutputComponents: hq.MAX_VERTEX_OUTPUT_COMPONENTS,
                        maxVertexUniformBlocks: hq.MAX_VERTEX_UNIFORM_BLOCKS,
                        maxVertexUniformComponents: hq.MAX_VERTEX_UNIFORM_COMPONENTS,
                        minProgramTexelOffset: hq.MIN_PROGRAM_TEXEL_OFFSET
                    };
                return {
                    "for": function(q) {
                        var a = q._info;
                        return a || (q._info = a = s(q, a)), a
                    }
                }
            }(),
            $i = function() {
                function J(G, Y, t) {
                    return {
                        def: G,
                        getter: t ? function(p) {
                            var Q = qn.for(p);
                            return Q.version > 1 ? p.getParameter(Y) : G
                        } : function(X) {
                            return X.getParameter(Y)
                        },
                        setter: t ? function(U, l) {
                            var F = qn.for(U);
                            F.version > 1 && U.pixelStorei(Y, l)
                        } : function(Q, G) {
                            Q.pixelStorei(Y, G)
                        }
                    }
                }

                function C(F) {
                    return "string" == typeof F ? Wb(F) : F.r !== O ? (o[0] = F.r, o[1] = F.g, o[2] = F.b, o[3] = F.a, o) : F.red !== O ? (o[0] = F.red, o[1] = F.green, o[2] = F.blue, o[3] = F.alpha, o) : F
                }

                function g(g) {
                    return S(g) ? Array.prototype.slice.call(g, 0) : g
                }

                function n(p, P, n) {
                    this.gl = P, this._record = n || {}, this._branches = {}, this._leafSync = {}, this._struct = p;
                    for (var K = p.children, t = K.length; t--;) {
                        var O = K[t],
                            b = O.name;
                        O.isLeaf ? (this._leafSync[b] = !1, this._record[b] = g(O.desc.def)) : this._record[b] = {}
                    }
                }

                function F(E) {
                    function v(T, C) {
                        n.call(this, E, T, C);
                        for (var J = s.length; J--;) {
                            var k = s[J];
                            this._branches[k._name] = new k._type(T, this._record[k._name])
                        }
                    }

                    function I(T, B) {
                        function c(S, z) {
                            for (var G = N, W = !1; G--;) S[G] !== z[G] && (S[G] = z[G], W = !0);
                            return W
                        }
                        var O = T.name,
                            l = S(T.desc.def),
                            N = l && T.desc.def.length;
                        if (T.isLeaf) {
                            var x = T.desc.setter,
                                e = T.desc.parse;
                            G.defineProperty(B, O, {
                                configurable: !1,
                                enumerable: !0,
                                get: function() {
                                    return this._record[O]
                                },
                                set: l ? function(V) {
                                    e && (V = e(V)), (c(this._record[O], V) || !this._leafSync[O]) && (x(this.gl, this._record[O]), this._leafSync[O] = !0)
                                } : function(Z) {
                                    this._record[O] === Z && this._leafSync[O] || (x(this.gl, Z), this._record[O] = Z, this._leafSync[O] = !0)
                                }
                            })
                        } else s.push({
                            _name: O,
                            _type: F(T)
                        }), G.defineProperty(B, O, {
                            configurable: !1,
                            enumerable: !0,
                            get: function() {
                                return this._branches[O]
                            },
                            set: function(W) {
                                this._branches[O].apply(W)
                            }
                        })
                    }
                    var s = [];
                    return R(v, n), E.forEach(I, v.prototype), v
                }
                var o = "undefined" != typeof Float32Array && new Float32Array(4),
                    A = {
                        viewport: {
                            def: [0, 0, 0 / 0, 0 / 0],
                            getter: function(l) {
                                return l.getParameter(l.VIEWPORT)
                            },
                            setter: function(Y, s) {
                                var r = s[2] !== s[2] ? Y.drawingBufferWidth - s[0] : s[2],
                                    R = s[3] !== s[3] ? Y.drawingBufferHeight - s[1] : s[3];
                                Y.viewport(s[0], s[1], r, R)
                            }
                        },
                        dither: {
                            def: !1,
                            getter: function(X) {
                                return X.isEnabled(X.DITHER)
                            },
                            setter: function(x, J) {
                                J ? x.enable(x.DITHER) : x.disable(x.DITHER)
                            }
                        },
                        rasterizerDiscard: {
                            def: !1,
                            getter: function(G) {
                                var i = qn.for(G);
                                return i.version > 1 && G.isEnabled(G.RASTERIZER_DISCARD)
                            },
                            setter: function(a, X) {
                                var V = qn.for(a);
                                1 !== V.version && (X ? a.enable(a.RASTERIZER_DISCARD) : a.disable(a.RASTERIZER_DISCARD))
                            }
                        },
                        lineWidth: {
                            def: 1,
                            getter: function(h) {
                                return h.lineWidth ? h.getParameter(h.LINE_WIDTH) : 1
                            },
                            setter: function(X, r) {
                                X.lineWidth && X.lineWidth(r)
                            }
                        },
                        color: {
                            clear: {
                                def: [0, 0, 0, 0],
                                getter: function(T) {
                                    return T.getParameter(T.COLOR_CLEAR_VALUE)
                                },
                                setter: function(c, s) {
                                    c.clearColor(s[0], s[1], s[2], s[3])
                                },
                                parse: C
                            },
                            mask: {
                                def: [!0, !0, !0, !0],
                                getter: function(T) {
                                    return T.getParameter(T.COLOR_WRITEMASK)
                                },
                                setter: function(w, o) {
                                    w.colorMask(o[0], o[1], o[2], o[3])
                                }
                            }
                        },
                        blend: {
                            enabled: {
                                def: !1,
                                getter: function(b) {
                                    return b.isEnabled(b.BLEND)
                                },
                                setter: function(l, y) {
                                    y ? l.enable(l.BLEND) : l.disable(l.BLEND)
                                }
                            },
                            color: {
                                def: [0, 0, 0, 0],
                                getter: function(p) {
                                    return p.getParameter(p.BLEND_COLOR)
                                },
                                setter: function(q, T) {
                                    q.blendColor(T[0], T[1], T[2], T[3])
                                },
                                parse: C
                            },
                            equation: {
                                def: [hq.FUNC_ADD, hq.FUNC_ADD],
                                getter: function(X) {
                                    return [X.getParameter(X.BLEND_EQUATION_RGB), X.getParameter(X.BLEND_EQUATION_ALPHA)]
                                },
                                setter: function(m, E) {
                                    m.blendEquationSeparate(E[0], E[1])
                                },
                                parse: function(t) {
                                    var R = t.length;
                                    return R > 1 ? t : 1 === R ? (o[1] = o[0] = t[0], o) : (o[1] = o[0] = t, o)
                                }
                            },
                            func: {
                                def: [hq.ONE, hq.ZERO, hq.ONE, hq.ZERO],
                                getter: function(A) {
                                    return [A.getParameter(A.BLEND_SRC_RGB), A.getParameter(A.BLEND_DST_RGB), A.getParameter(A.BLEND_SRC_ALPHA), A.getParameter(A.BLEND_DST_ALPHA)]
                                },
                                setter: function(o, W) {
                                    o.blendFuncSeparate(W[0], W[1], W[2], W[3])
                                },
                                parse: function(w) {
                                    var l = w.length;
                                    return l > 3 ? w : (o[2] = o[0] = w[0], o[3] = o[1] = w[1], o)
                                }
                            }
                        },
                        cullFace: {
                            enabled: {
                                def: !1,
                                getter: function(B) {
                                    return B.isEnabled(B.CULL_FACE)
                                },
                                setter: function(W, a) {
                                    a ? W.enable(W.CULL_FACE) : W.disable(W.CULL_FACE)
                                }
                            },
                            mode: {
                                def: hq.BACK,
                                getter: function(L) {
                                    return L.getParameter(L.CULL_FACE_MODE)
                                },
                                setter: function(s, U) {
                                    s.cullFace(U)
                                }
                            },
                            frontFace: {
                                def: hq.CCW,
                                getter: function(B) {
                                    return B.getParameter(B.FRONT_FACE)
                                },
                                setter: function(B, O) {
                                    B.frontFace(O)
                                }
                            }
                        },
                        scissor: {
                            enabled: {
                                def: !1,
                                getter: function(A) {
                                    return A.isEnabled(A.SCISSOR_TEST)
                                },
                                setter: function(m, z) {
                                    z ? m.enable(m.SCISSOR_TEST) : m.disable(m.SCISSOR_TEST)
                                }
                            },
                            box: {
                                def: [0, 0, 0 / 0, 0 / 0],
                                getter: function(n) {
                                    return n.getParameter(n.SCISSOR_BOX)
                                },
                                setter: function(e, A) {
                                    var T = A[2] !== A[2] ? e.drawingBufferWidth - A[0] : A[2],
                                        r = A[3] !== A[3] ? e.drawingBufferHeight - A[1] : A[3];
                                    e.scissor(A[0], A[1], T, r)
                                }
                            }
                        },
                        depth: {
                            enabled: {
                                def: !1,
                                getter: function(D) {
                                    return D.isEnabled(D.DEPTH_TEST)
                                },
                                setter: function(M, j) {
                                    j ? M.enable(M.DEPTH_TEST) : M.disable(M.DEPTH_TEST)
                                }
                            },
                            clear: {
                                def: 1,
                                getter: function(j) {
                                    return j.getParameter(j.DEPTH_CLEAR_VALUE)
                                },
                                setter: function(S, a) {
                                    S.clearDepth(a)
                                }
                            },
                            mask: {
                                def: !0,
                                getter: function(f) {
                                    return f.getParameter(f.DEPTH_WRITEMASK)
                                },
                                setter: function(z, Y) {
                                    z.depthMask(Y)
                                }
                            },
                            range: {
                                def: [-1, 1],
                                getter: function(m) {
                                    return m.getParameter(m.DEPTH_RANGE)
                                },
                                setter: function(I, H) {
                                    I.depthRange(H[0], H[1])
                                }
                            },
                            func: {
                                def: hq.LESS,
                                getter: function(E) {
                                    return E.getParameter(E.DEPTH_FUNC)
                                },
                                setter: function(l, k) {
                                    l.depthFunc(k)
                                }
                            }
                        },
                        stencil: {
                            enabled: {
                                def: !1,
                                getter: function(I) {
                                    return I.isEnabled(I.STENCIL_TEST)
                                },
                                setter: function(v, C) {
                                    C ? v.enable(v.STENCIL_TEST) : v.disable(v.STENCIL_TEST)
                                }
                            },
                            clear: {
                                def: 0,
                                getter: function(m) {
                                    return m.getParameter(m.STENCIL_CLEAR_VALUE)
                                },
                                setter: function(h, y) {
                                    h.clearStencil(y)
                                }
                            },
                            frontMask: {
                                def: 255,
                                getter: function(f) {
                                    return f.getParameter(f.STENCIL_WRITEMASK)
                                },
                                setter: function(v, A) {
                                    v.stencilMaskSeparate(v.FRONT, A)
                                }
                            },
                            frontOp: {
                                def: [hq.KEEP, hq.KEEP, hq.KEEP],
                                getter: function(m) {
                                    return [m.getParameter(m.STENCIL_FAIL), m.getParameter(m.STENCIL_PASS_DEPTH_FAIL), m.getParameter(m.STENCIL_PASS_DEPTH_PASS)]
                                },
                                setter: function(x, g) {
                                    x.stencilOpSeparate(x.FRONT, g[0], g[1], g[2])
                                }
                            },
                            frontFunc: {
                                def: [hq.ALWAYS, 0, 255],
                                getter: function(b) {
                                    return [b.getParameter(b.STENCIL_FUNC), b.getParameter(b.STENCIL_REF), b.getParameter(b.STENCIL_VALUE_MASK)]
                                },
                                setter: function(w, P) {
                                    w.stencilFuncSeparate(w.FRONT, P[0], P[1], P[2])
                                }
                            },
                            backMask: {
                                def: 255,
                                getter: function(V) {
                                    return V.getParameter(V.STENCIL_BACK_WRITEMASK)
                                },
                                setter: function(T, H) {
                                    T.stencilMaskSeparate(T.BACK, H)
                                }
                            },
                            backOp: {
                                def: [hq.KEEP, hq.KEEP, hq.KEEP],
                                getter: function(g) {
                                    return [g.getParameter(g.STENCIL_BACK_FAIL), g.getParameter(g.STENCIL_BACK_PASS_DEPTH_FAIL), g.getParameter(g.STENCIL_BACK_PASS_DEPTH_PASS)]
                                },
                                setter: function(T, D) {
                                    T.stencilOpSeparate(T.BACK, D[0], D[1], D[2])
                                }
                            },
                            backFunc: {
                                def: [hq.ALWAYS, 0, 255],
                                getter: function(t) {
                                    return [t.getParameter(t.STENCIL_BACK_FUNC), t.getParameter(t.STENCIL_BACK_REF), t.getParameter(t.STENCIL_BACK_VALUE_MASK)]
                                },
                                setter: function($, D) {
                                    $.stencilFuncSeparate($.BACK, D[0], D[1], D[2])
                                }
                            }
                        },
                        hint: {
                            generateMipmap: {
                                def: hq.DONT_CARE,
                                getter: function(M) {
                                    return M.getParameter(M.GENERATE_MIPMAP_HINT)
                                },
                                setter: function($, h) {
                                    $.hint($.GENERATE_MIPMAP_HINT, h)
                                }
                            },
                            fragmentShaderDerivative: {
                                def: hq.DONT_CARE,
                                getter: function(f) {
                                    var L = qn.for(f);
                                    return 1 !== L.version || L.extensions.OES_standard_derivatives ? f.getParameter(hq.FRAGMENT_SHADER_DERIVATIVE_HINT) : hq.DONT_CARE
                                },
                                setter: function(A, r) {
                                    var F = qn.for(A);
                                    return F.version > 1 || F.extensions.OES_standard_derivatives ? (A.hint(hq.FRAGMENT_SHADER_DERIVATIVE_HINT, r), void 0) : void 0
                                }
                            }
                        },
                        pixelStore: {
                            packAlignment: J(4, hq.PACK_ALIGNMENT, !1),
                            unpackAlignment: J(4, hq.UNPACK_ALIGNMENT, !1),
                            unpackFlipY: J(!1, hq.UNPACK_FLIP_Y_WEBGL, !1),
                            unpackPremultiplyAlpha: J(!1, hq.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !1),
                            unpackColorspaceConversion: J(hq.BROWSER_DEFAULT_WEBGL, hq.UNPACK_COLORSPACE_CONVERSION_WEBGL, !1),
                            packRowLength: J(0, hq.PACK_ROW_LENGTH, !0),
                            packSkipPixels: J(0, hq.PACK_SKIP_PIXELS, !0),
                            packSkipRows: J(0, hq.PACK_SKIP_ROWS, !0),
                            unpackRowLength: J(0, hq.UNPACK_ROW_LENGTH, !0),
                            unpackImageHeight: J(0, hq.UNPACK_IMAGE_HEIGHT, !0),
                            unpackSkipPixels: J(0, hq.UNPACK_SKIP_PIXELS, !0),
                            unpackSkipRows: J(0, hq.UNPACK_SKIP_ROWS, !0),
                            unpackSkipImages: J(0, hq.UNPACK_SKIP_IMAGES, !0)
                        },
                        polygonOffset: {
                            enabled: {
                                def: !1,
                                getter: function(G) {
                                    return G.isEnabled(G.POLYGON_OFFSET_FILL)
                                },
                                setter: function(L, f) {
                                    f ? L.enable(L.POLYGON_OFFSET_FILL) : L.disable(L.POLYGON_OFFSET_FILL)
                                }
                            },
                            value: {
                                def: [0, 0],
                                getter: function(D) {
                                    return [D.getParameter(D.POLYGON_OFFSET_FACTOR), D.getParameter(D.POLYGON_OFFSET_UNITS)]
                                },
                                setter: function(z, q) {
                                    z.polygonOffset(q[0], q[1])
                                }
                            }
                        },
                        sampleCoverage: {
                            enabled: {
                                def: !1,
                                getter: function(i) {
                                    return i.isEnabled(i.SAMPLE_COVERAGE)
                                },
                                setter: function(z, O) {
                                    O ? z.enable(z.SAMPLE_COVERAGE) : z.disable(z.SAMPLE_COVERAGE)
                                }
                            },
                            alpha: {
                                def: !1,
                                getter: function(x) {
                                    return x.isEnabled(x.SAMPLE_ALPHA_TO_COVERAGE)
                                },
                                setter: function(M, r) {
                                    r ? M.enable(M.SAMPLE_ALPHA_TO_COVERAGE) : M.disable(M.SAMPLE_ALPHA_TO_COVERAGE)
                                }
                            },
                            value: {
                                def: [1, !1],
                                getter: function(W) {
                                    return [W.getParameter(W.SAMPLE_COVERAGE_VALUE), W.getParameter(W.SAMPLE_COVERAGE_INVERT)]
                                },
                                setter: function(E, C) {
                                    E.sampleCoverage(C[0], C[1])
                                }
                            }
                        }
                    },
                    T = tc.create(A, function(A) {
                        return "def" in A
                    });
                n.prototype.reset = function() {
                    for (var C = this._struct.children, c = C.length; c--;) {
                        var Q = C[c],
                            B = Q.name;
                        Q.isLeaf ? this[B] = Q.desc.def : this._branches[B].reset()
                    }
                }, n.prototype.save = function(E) {
                    E == O && (E = {});
                    for (var i = this._struct.children, C = i.length; C--;) {
                        var Y = i[C],
                            K = Y.name;
                        if (Y.isLeaf) E[K] = g(this._record[K]);
                        else {
                            var R = E[K];
                            R == O && (E[K] = R = {}), this._branches[K].save(R)
                        }
                    }
                    return E
                }, n.prototype.sync = function(z, R) {
                    for (var h = this._struct.children, d = h.length; d--;) {
                        var q = h[d],
                            m = q.name;
                        q.isLeaf ? (R || !this._leafSync[m]) && (z ? (this._record[m] = q.desc.getter(this.gl), this._leafSync[m] = !0) : (q.desc.setter(this.gl, this._record[m]), this._leafSync[m] = !0)) : this._branches[m].sync(z, R)
                    }
                }, n.prototype.syncLoss = function() {
                    for (var E = this._struct.children, N = E.length; N--;) {
                        var j = E[N];
                        j.isLeaf ? this._leafSync[j.name] = !1 : this._branches[j.name].syncLoss()
                    }
                }, n.prototype.apply = function(z) {
                    for (var G = this._struct.children, J = G.length; J--;) {
                        var p = G[J],
                            x = p.name;
                        x in z && (p.isLeaf ? this[x] = z[x] : this._branches[x].apply(z[x]))
                    }
                }, n.prototype.append = function(_) {
                    var h = this._struct.childMap;
                    for (var X in _) {
                        var v = h[X];
                        v && (v.isLeaf ? this[X] = _[X] : this._branches[X].append(_[X]))
                    }
                };
                var y = F(T);
                return function(W) {
                    var K = W._state;
                    return K || (W._state = K = new y(W)), K
                }
            }(),
            $b = function() {
                function I(G, M, c, x) {
                    if (G) {
                        var r = G.length;
                        if (r != O)
                            for (var l = 0; x > l; ++l) M[c + l] = G[l];
                        else G.toArray && G.toArray(M, c)
                    } else
                        for (var l = 0; x > l; ++l) M[c + l] = 0
                }

                function X(f, j, P) {
                    var A = f[0];
                    if (0 >= A || A > 0) return f;
                    var T = j * P,
                        o = $[T];
                    if (o == O && ($[T] = o = new Float32Array(T)), 0 !== j) {
                        I(A, o, 0, P);
                        for (var q = 1, C = 0; q !== j; ++q) C += P, I(f[q], o, C, P)
                    }
                    return o
                }

                function k(S, G) {
                    S.uniform1f(this.addr, G)
                }

                function U(d, X) {
                    d.uniform1fv(this.addr, X)
                }

                function Q(A, X) {
                    if (X.x != O) A.uniform2f(this.addr, X.x, X.y);
                    else {
                        var a = $[2];
                        a.set(X, 0), A.uniform2fv(this.addr, a)
                    }
                }

                function z(e, Z) {
                    e.uniform2fv(this.addr, X(Z, this.size, 2))
                }

                function r(C, S) {
                    if (S.x != O) C.uniform3f(this.addr, S.x, S.y, S.z);
                    else if (S.r != O) C.uniform3f(this.addr, S.r, S.g, S.b);
                    else if (S.red != O) C.uniform3f(this.addr, S.red, S.green, S.blue);
                    else {
                        var c = $[3];
                        c.set(S, 0), C.uniform3fv(this.addr, c)
                    }
                }

                function x(G, J) {
                    G.uniform3fv(this.addr, X(J, this.size, 3))
                }

                function w(o, D) {
                    if ("string" == typeof D && (D = Wb(D)), D.x != O) o.uniform4f(this.addr, D.x, D.y, D.z, D.w);
                    else if (D.r != O) o.uniform4f(this.addr, D.r, D.g, D.b, D.a);
                    else if (D.red != O) o.uniform4f(this.addr, D.red, D.green, D.blue, D.alpha);
                    else {
                        var k = $[4];
                        k.set(D, 0), o.uniform4fv(this.addr, k)
                    }
                }

                function K(n, E) {
                    n.uniform4fv(this.addr, X(E, this.size, 4))
                }

                function n(F, X) {
                    F.uniform1i(this.addr, X)
                }

                function e(y, H) {
                    y.uniform1iv(this.addr, H)
                }

                function i(P, r) {
                    P.uniform2iv(this.addr, r)
                }

                function C(F, g) {
                    F.uniform3iv(this.addr, g)
                }

                function L(d, i) {
                    d.uniform4iv(this.addr, i)
                }

                function s(M, R) {
                    M.uniform1i(this.addr, J[R ? 1 : 0])
                }

                function m(V, b) {
                    var z = $[4];
                    z.set(b, 0), V.uniformMatrix2fv(this.addr, !1, z)
                }

                function P(M, p) {
                    M.uniformMatrix2fv(this.addr, !1, X(p, this.size, 4))
                }

                function t(f, R) {
                    var x = $[9];
                    x.set(R, 0), f.uniformMatrix3fv(this.addr, !1, x)
                }

                function D($, I) {
                    $.uniformMatrix3fv(this.addr, !1, X(I, this.size, 9))
                }

                function _(M, w) {
                    var V = $[16];
                    V.set(w, 0), M.uniformMatrix4fv(this.addr, !1, V)
                }

                function H(s, k) {
                    s.uniformMatrix4fv(this.addr, !1, X(k, this.size, 16))
                }

                function p(y, E) {
                    y.uniform1i(this.addr, this.slots[0]), y.activeTexture(y.TEXTURE0 + this.slots[0]), y.bindTexture(y.TEXTURE_2D, E || y._emptyTexture)
                }

                function l(h, H) {
                    h.uniform1iv(this.addr, this.slots);
                    for (var l = this.slots.length; l--;) h.activeTexture(h.TEXTURE0 + this.slots[l]), h.bindTexture(h.TEXTURE_2D, H[l] || h._emptyTexture)
                }

                function M(t, U) {
                    t.uniform1i(this.addr, this.slots[0]), t.activeTexture(t.TEXTURE0 + this.slots[0]), t.bindTexture(t.TEXTURE_CUBE_MAP, U || t._emptyCubeTexture)
                }

                function o(R, J) {
                    R.uniform1iv(this.addr, this.slots);
                    for (var g = this.slots.length; g--;) R.activeTexture(R.TEXTURE0 + this.slots[g]), R.bindTexture(R.TEXTURE_CUBE_MAP, J[g] || R._emptyCubeTexture)
                }

                function v(j, y, N) {
                    b[j] = [y, N]
                }

                function q(z, k, A) {
                    switch (z.type) {
                        case 35678:
                        case 35680:
                            if ("uSampler" === A) return [0];
                            if ("uBlendSampler" === A) return [1];
                            for (var c = z.size, R = new Int32Array(c), E = 0; c > E; ++E) R[E] = k.usedTextureSlot++;
                            return R
                    }
                    return O
                }

                function Y(r, B, m, D, x) {
                    this.name = r, this.addr = B, this.size = D ? m.size : 0, this.activeInfo = m, this.setter = b[m.type][D ? 1 : 0], this.slots = q(m, x, r), Cn(this)
                }

                function c(l, Z, n, f) {
                    var r = l.name,
                        p = r.length;
                    for (a.lastIndex = 0;;) {
                        var G = a.exec(r),
                            $ = a.lastIndex,
                            d = G[1],
                            t = "]" === G[2],
                            D = G[3];
                        if (t && (d = 0 | d), D === O || "[" === D && $ + 2 === p) {
                            n[d] = new Y(d, Z, l, D !== O, f);
                            break
                        }
                        var A = n[d];
                        A == O && (n[d] = A = {}), n = A
                    }
                }

                function W(F, T, X) {
                    this.gl = T, this._program = X, this._leaves = {}, this._branches = {}, this._struct = F
                }

                function V(I) {
                    function w(i, S) {
                        W.call(this, I, i, S);
                        for (var N = Q.length; N--;) {
                            var R = Q[N];
                            this._branches[R._name] = new R._type(i, S)
                        }
                        this.uuid = _q.generateUUID()
                    }

                    function m(U, l) {
                        var j = U.name;
                        if (U.isLeaf) {
                            var D = T("d.setter(this.gl, v);", ["v"], ["d"], [U.desc]);
                            G.defineProperty(l, j, {
                                configurable: !1,
                                enumerable: !0,
                                get: function() {
                                    return D
                                },
                                set: D
                            })
                        } else Q.push({
                            _name: j,
                            _type: V(U)
                        }), G.defineProperty(l, j, {
                            configurable: !1,
                            enumerable: !0,
                            get: function() {
                                return this._branches[j]
                            },
                            set: function(P) {
                                this._branches[j].apply(P)
                            }
                        })
                    }
                    var Q = [];
                    return R(w, W), I.forEach(m, w.prototype), w
                }

                function E(X, g) {
                    for (var A = X.getProgramParameter(g, X.ACTIVE_UNIFORMS), y = {}, Y = {
                            usedTextureSlot: 2
                        }; A--;) {
                        var U = X.getActiveUniform(g, A),
                            u = U.name,
                            n = X.getUniformLocation(g, u);
                        c(U, n, y, Y)
                    }
                    var K = tc.create(y, function(a) {
                            return "addr" in a
                        }),
                        o = V(K);
                    return G.defineProperty(o.prototype, "textureCount", {
                        configurable: !1,
                        enumerable: !1,
                        writable: !1,
                        value: Y.usedTextureSlot
                    }), new o(X, g)
                }
                var $ = [];
                if ("function" == typeof Float32Array)
                    for (var g = 1; 17 > g; ++g) $[g] = new Float32Array(g);
                var J = [0, 1],
                    b = [];
                v(hq.FLOAT, k, U), v(hq.FLOAT_VEC2, Q, z), v(hq.FLOAT_VEC3, r, x), v(hq.FLOAT_VEC4, w, K), v(hq.INT, n, e), v(hq.INT_VEC2, i, i), v(hq.INT_VEC3, C, C), v(hq.INT_VEC4, L, L), v(hq.BOOL, s, e), v(hq.BOOL_VEC2, i, i), v(hq.BOOL_VEC3, C, C), v(hq.BOOL_VEC4, L, L), v(hq.FLOAT_MAT2, m, P), v(hq.FLOAT_MAT3, t, D), v(hq.FLOAT_MAT4, _, H), v(hq.SAMPLER_2D, p, l), v(hq.SAMPLER_CUBE, M, o);
                var a = /([\w\d_]+)(\])?(\[|\.)?/g;
                return W.prototype.apply = function(y) {
                        for (var J = this._struct.children, x = J.length; x--;) {
                            var t = J[x],
                                Q = t.name;
                            Q in y && (t.isLeaf ? this[Q] = y[Q] : this._branches[Q].apply(y[Q]))
                        }
                    }, W.prototype.append = function(v) {
                        var m = this._struct.childMap;
                        for (var W in v) {
                            var k = m[W];
                            k && (k.isLeaf ? this[W] = v[W] : this._branches[W].append(v[W]))
                        }
                    },
                    function(b, L) {
                        var c = L._uniforms;
                        return c || (L._uniforms = c = E(b, L)), c
                    }
            }(),
            gi = function() {
                function S(z, I, L) {
                    I.vertexAttrib1f(z.addr, L)
                }

                function V(X, b, g) {
                    if (g.x != O) b.vertexAttrib2f(X.addr, g.x, g.y);
                    else {
                        var N = J[2];
                        N.set(g, 0), b.vertexAttrib2fv(X.addr, N)
                    }
                }

                function d(C, V, s) {
                    if (s.x != O) V.vertexAttrib3f(C.addr, s.x, s.y, s.z);
                    else if (s.r != O) V.vertexAttrib3f(C.addr, s.r, s.g, s.b);
                    else if (s.red != O) V.vertexAttrib3f(C.addr, s.red, s.green, s.blue);
                    else {
                        var d = J[3];
                        d.set(s, 0), V.vertexAttrib3fv(C.addr, d)
                    }
                }

                function Q(o, A, d) {
                    if ("string" == typeof d && (d = Wb(d)), d.x != O) A.vertexAttrib4f(o.addr, d.x, d.y, d.z, d.w);
                    else if (d.r != O) A.vertexAttrib4f(o.addr, d.r, d.g, d.b, d.a);
                    else if (d.red != O) A.vertexAttrib4f(o.addr, d.red, d.green, d.blue, d.alpha);
                    else {
                        var y = J[4];
                        y.set(d, 0), A.vertexAttrib4fv(o.addr, y)
                    }
                }

                function j(C, A, U) {
                    U = U.el || U;
                    for (var R = 0, u = 0; 2 > R; ++R) A.vertexAttrib2f(C.addr, U[u++], U[u++])
                }

                function f(s, f, V) {
                    V = V.el || V;
                    for (var X = 0, I = 0; 3 > X; ++X) f.vertexAttrib3f(s.addr, V[I++], V[I++], V[I++])
                }

                function B(r, x, e) {
                    e = e.el || e;
                    for (var a = 0, Q = 0; 4 > a; ++a) x.vertexAttrib4f(r.addr, e[Q++], e[Q++], e[Q++], e[Q++])
                }

                function $(c, l, J, f, A, K, _) {
                    l.bindBuffer(l.ARRAY_BUFFER, J), l.vertexAttribPointer(c.addr, 1, f || l.FLOAT, !!A, K || 0, _ || 0), l.bindBuffer(l.ARRAY_BUFFER, null)
                }

                function q(b, D, B, z, V, h, Q) {
                    D.bindBuffer(D.ARRAY_BUFFER, B), D.vertexAttribPointer(b.addr, 2, z || D.FLOAT, !!V, h || 0, Q || 0), D.bindBuffer(D.ARRAY_BUFFER, null)
                }

                function r(C, b, a, j, S, t, g) {
                    b.bindBuffer(b.ARRAY_BUFFER, a), b.vertexAttribPointer(C.addr, 3, j || b.FLOAT, !!S, t || 0, g || 0), b.bindBuffer(b.ARRAY_BUFFER, null)
                }

                function c(k, W, g, D, J, Q, $) {
                    W.bindBuffer(W.ARRAY_BUFFER, g), W.vertexAttribPointer(k.addr, 4, D || W.FLOAT, !!J, Q || 0, $ || 0), W.bindBuffer(W.ARRAY_BUFFER, null)
                }

                function i(l, J, s, v, _, D, b) {
                    var D = D || 4,
                        b = b || 0;
                    J.bindBuffer(J.ARRAY_BUFFER, s), J.vertexAttribPointer(l.addr, 2, v || J.FLOAT, !!_, D, b), J.vertexAttribPointer(l.addr + 1, 2, v || J.FLOAT, !!_, D, b + 2), J.bindBuffer(J.ARRAY_BUFFER, null)
                }

                function g(s, P, l, p, O, L, f) {
                    var L = L || 9,
                        f = f || 0;
                    P.bindBuffer(P.ARRAY_BUFFER, l), P.vertexAttribPointer(s.addr, 3, p || P.FLOAT, !!O, L, f), P.vertexAttribPointer(s.addr + 1, 3, p || P.FLOAT, !!O, L, f + 3), P.vertexAttribPointer(s.addr + 2, 3, p || P.FLOAT, !!O, L, f + 6), P.bindBuffer(P.ARRAY_BUFFER, null)
                }

                function k(F, R, y, G, Y, V, f) {
                    var V = V || 16,
                        f = f || 0;
                    R.bindBuffer(R.ARRAY_BUFFER, y), R.vertexAttribPointer(F.addr, 4, G || R.FLOAT, !!Y, V, f), R.vertexAttribPointer(F.addr + 1, 4, G || R.FLOAT, !!Y, V, f + 4), R.vertexAttribPointer(F.addr + 2, 4, G || R.FLOAT, !!Y, V, f + 8), R.vertexAttribPointer(F.addr + 3, 4, G || R.FLOAT, !!Y, V, f + 12), R.bindBuffer(R.ARRAY_BUFFER, null)
                }

                function u(m, n, j) {
                    z[m] = function(J, G, R, K, Z, s) {
                        this.addr == O || this.addr < 0 || (G == O || G === !1 ? J.disableVertexAttribArray(this.addr) : Tm(G) === H ? (J.enableVertexAttribArray(this.addr), j(this, J, G, R, K, Z, s)) : (J.disableVertexAttribArray(this.addr), n(this, J, G)))
                    }
                }

                function v(e, P, C) {
                    this.name = e, this.addr = P, this.activeInfo = C, this.setter = z[C.type], Cn(this)
                }

                function y(y, u, e) {
                    this.gl = u, this.program = e, this._branches = {}, this._struct = y
                }

                function D(n) {
                    function c(m, C) {
                        y.call(this, n, m, C);
                        for (var g = q.length; g--;) {
                            var Q = q[g];
                            this._branches[Q._name] = new Q._type(m, C)
                        }
                    }

                    function W(I, X) {
                        var l = I.name;
                        if (I.isLeaf) {
                            var C = T("d.setter(this.gl, v);", ["v"], ["d"], [I.desc]);
                            G.defineProperty(X, l, {
                                configurable: !1,
                                enumerable: !0,
                                get: function() {
                                    return C
                                },
                                set: C
                            })
                        } else q.push({
                            _name: l,
                            _type: D(I)
                        }), G.defineProperty(X, l, {
                            configurable: !1,
                            enumerable: !0,
                            get: function() {
                                return this._branches[l]
                            },
                            set: function(S) {
                                this._branches[l].apply(S)
                            }
                        })
                    }
                    var q = [];
                    return R(c, y), n.forEach(W, c.prototype), c
                }

                function x(e, N) {
                    for (var m = e.getProgramParameter(N, e.ACTIVE_ATTRIBUTES), F = {}; m--;) {
                        var p = e.getActiveAttrib(N, m),
                            C = p.name,
                            M = e.getAttribLocation(N, C);
                        F[C] = new v(C, M, p)
                    }
                    var L = tc.create(F, function($) {
                            return "addr" in $
                        }),
                        w = D(L);
                    return new w(e, N)
                }
                for (var J = [], t = 1; 17 > t; ++t) J[t] = new Kh(t);
                var z = [],
                    H = "undefined" != typeof WebGLBuffer && WebGLBuffer.prototype;
                return u(hq.FLOAT, S, $), u(hq.FLOAT_VEC2, V, q), u(hq.FLOAT_VEC3, d, r), u(hq.FLOAT_VEC4, Q, c), u(hq.FLOAT_MAT2, j, i), u(hq.FLOAT_MAT3, f, g), u(hq.FLOAT_MAT4, B, k), y.prototype.disable = function() {
                        for (var J = this._struct.children, d = J.length; d--;) {
                            var B = J[d],
                                R = B.name;
                            B.isLeaf ? this.gl.disableVertexAttribArray(B.desc.addr) : this._branches[R].disable()
                        }
                    }, y.prototype.apply = function(m) {
                        for (var X = this._struct.children, L = X.length; L--;) {
                            var o = X[L],
                                D = o.name;
                            D in m && (o.isLeaf ? this[D] = m[D] : this._branches[D].apply(m[D]))
                        }
                    }, y.prototype.append = function(y) {
                        var g = this._struct.childMap;
                        for (var f in y) {
                            var c = g[f];
                            c && (c.isLeaf ? this[f] = y[f] : this._branches[f].append(y[f]))
                        }
                    },
                    function(Q, e) {
                        var z = e._attribs;
                        return z || (e._attribs = z = x(Q, e)), z
                    }
            }(),
            $f = function(K) {
                var j = this;
                G.defineProperties(this, {
                    gl: {
                        configurable: !1,
                        enumerable: !1,
                        value: K,
                        writable: !1
                    },
                    glState: {
                        configurable: !1,
                        enumerable: !1,
                        value: $i(K),
                        writable: !1
                    }
                }), j._currProgram = O, j._currUniforms = O, j._currAttribs = O, j._sync = !0
            };
        G.defineProperties($f.prototype, {
            program: {
                configurable: !1,
                enumerable: !1,
                get: function() {
                    return this._currProgram
                },
                set: function(p) {
                    var V = this;
                    V._sync && p === V._currProgram || (V.gl.useProgram(p), V._currProgram = p, V._currUniforms = $b(V.gl, p), V._currAttribs = gi(V.gl, p), V._sync = !0)
                }
            },
            uniforms: {
                configurable: !1,
                enumerable: !1,
                get: function() {
                    var p = this;
                    return p._currProgram && !p._sync && (p.gl.useProgram(p._currProgram), p._sync = !0), p._currUniforms
                },
                set: function(Z) {
                    var Y = this;
                    Y._currUniforms && (Y._currProgram && !Y._sync && (Y.gl.useProgram(Y._currProgram), this._sync = !0), Y._currUniforms.apply(Z))
                }
            },
            attribs: {
                configurable: !1,
                enumerable: !1,
                get: function() {
                    var K = this;
                    return K._currProgram && !K._sync && (K.gl.useProgram(K._currProgram), K._sync = !0), K._currAttribs
                },
                set: function(K) {
                    var g = this;
                    g._currUniforms && (g._currProgram && !g._sync && (g.gl.useProgram(g._currProgram), this._sync = !0), g._currAttribs.apply(K))
                }
            }
        }), $f.prototype.useProgram = function(x) {
            var W = this;
            W._sync && x === W._currProgram || (W.gl.useProgram(x), W._currProgram = x, W._currUniforms = $b(W.gl, x), W._currAttribs = gi(W.gl, x), W._sync = !0)
        }, $f.prototype.directState = function() {
            return this.glState
        }, $f.prototype.directUniforms = function() {
            return this._currUniforms
        }, $f.prototype.directAttribs = function() {
            return this._currAttribs
        }, $f.prototype.syncLoss = function() {
            this._sync = !1, this.glState.syncLoss()
        }, $f.for = function(l) {
            var X = l._renderState;
            return X || (l._renderState = X = new $f(l)), X
        };
        var Lh = "directional",
            hc = "point",
            Kp = "spot",
            Yi = "light.color",
            Jh = 4294967295,
            Cm = 0,
            tn = {},
            Ye = [],
            Wh = 0,
            ag = function(W, S) {
                Sf(S) && al.test(S) ? Pm(W, S) : jl(S) && S.modelType ? Ic(W, S) : S === O ? delete Jc[W] : Jc[W] = S
            },
            ac = function(D) {
                return D
            },
            np = function(L) {
                L = z.convertShape3dModelName(L);
                var S;
                if (jl(L)) {
                    if (L.modelType) {
                        if (L.uuid) {
                            if (S = Jc[L.uuid]) return S
                        } else L.uuid = F.Math.generateUUID();
                        return S === O && (dn && dn[L.uuid] || Ic(L.uuid, L)), O
                    }
                    return L
                }
                return S = Jc[L], L && S === O && al.test(L) && (dn && dn[L] || Pm(L, L)), S
            },
            pm = function(i, T) {
                i.frameStack ? i.frameStack.push(T) : i.frameStack = [T], i.bindFramebuffer(i.FRAMEBUFFER, T)
            },
            Qk = function(S) {
                var z = S.frameStack;
                if (z) {
                    if (z.pop(), z.length) return S.bindFramebuffer(S.FRAMEBUFFER, z[z.length - 1]), void 0;
                    S.frameStack = null
                }
                S.bindFramebuffer(S.FRAMEBUFFER, null)
            };
        fp(z, {
            graph3dViewAttributes: Y,
            graph3dViewFirstPersonMode: !1,
            graph3dViewMouseRoamable: !0,
            graph3dViewMoveStep: 15,
            graph3dViewRotateStep: f / 60,
            graph3dViewSortable: !1,
            graph3dViewBlockSelectable: !0,
            graph3dViewEditHelperDisabled: !1,
            graph3dViewPannable: !0,
            graph3dViewRotatable: !0,
            graph3dViewWalkable: !0,
            graph3dViewResettable: !0,
            graph3dViewZoomable: !0,
            graph3dViewRectSelectable: !0,
            graph3dViewRectSelectBackground: ep,
            graph3dViewGridVisible: !1,
            graph3dViewGridSize: 50,
            graph3dViewGridGap: 50,
            graph3dViewGridColor: [.4, .75, .85, 1],
            graph3dViewRotateMaxPhi: f,
            graph3dViewRotateMinPhi: 0,
            graph3dViewShadowDisabled: !0,
            graph3dViewShadowQuality: "high",
            graph3dViewShadowIntensity: .3,
            graph3dViewShadowBias: -.005,
            graph3dViewShadowRadius: .1,
            graph3dViewShadowType: "hard",
            graph3dViewShadowDegreeX: 30,
            graph3dViewShadowDegreeZ: -10,
            graph3dViewOriginAxisVisible: !1,
            graph3dViewCenterAxisVisible: !1,
            graph3dViewAxisXColor: [1, 0, 0, 1],
            graph3dViewAxisYColor: [0, 1, 0, 1],
            graph3dViewAxisZColor: [0, 0, 1, 1],
            graph3dViewEditSizeColor: [1, 1, 0, 1],
            graph3dViewOrtho: !1,
            graph3dViewOrthoWidth: 2e3,
            graph3dViewSyncEyeWithOrthoWidth: !1,
            graph3dViewFovy: f / 4,
            graph3dViewNear: 10,
            graph3dViewFar: 1e4,
            graph3dViewEye: [0, 300, 1e3],
            graph3dViewCenter: [0, 0, 0],
            graph3dViewUp: [0, 1, -1e-7],
            graph3dViewDataNumWarningLine: 1e4,
            graph3dViewHeadlightRange: 0,
            graph3dViewHeadlightGroup: 0,
            graph3dViewHeadlightColor: [1, 1, 1, 1],
            graph3dViewHeadlightIntensity: 1,
            graph3dViewHeadlightDisabled: !1,
            graph3dViewHeadlightAmbientIntensity: .7,
            graph3dViewFogDisabled: !0,
            graph3dViewFogMode: "linear",
            graph3dViewFogDensity: 5e-4,
            graph3dViewFogColor: "white",
            graph3dViewFogNear: 1,
            graph3dViewFogFar: 2e3,
            graph3dViewPickerResolution: .5,
            graph3dViewDashDisabled: !0,
            graph3dViewBatchBlendDisabled: !0,
            graph3dViewBatchBrightnessDisabled: !0,
            graph3dViewBatchColorDisabled: !1,
            graph3dViewEnvmapType: "legacy",
            graph3dMaxVectorCacheTime: 50,
            graph3dEnvmapCapabilityRequire: 8,
            setShape3dModel: ag,
            getShape3dModel: np,
            convertShape3dModelName: ac,
            getShape3dModelMap: function() {
                return Jc
            },
            getCachedShape3dModelMap: function() {
                return Yg
            },
            createMatrix: function(w, E) {
                ym(w) || (w = [w]);
                for (var $ = w.length - 1; $ >= 0; $--) {
                    var d = w[$];
                    E = hb(d.mat, d.s3, d.r3, d.rotationMode, d.t3, E)
                }
                return E
            },
            transformVec: function(r, O) {
                return qm(r, O)
            },
            glBindFrame: pm,
            glUnbindFrame: Qk,
            createBoxModel: function() {
                return {
                    vs: tm,
                    ns: Aq,
                    uv: nj,
                    is: Lp
                }
            },
            createRoundRectModel: function(D, L) {
                return Sl.roundRect(D, L)
            },
            createStarModel: function(w, k) {
                return Sl.star(w, k)
            },
            createRectModel: function(B, u) {
                return Sl.rect(B, u)
            },
            createTriangleModel: function(Q, p) {
                return Sl.triangle(Q, p)
            },
            createRightTriangleModel: function(n, M) {
                return Sl.rightTriangle(n, M)
            },
            createParallelogramModel: function(l, a) {
                return Sl.parallelogram(l, a)
            },
            createTrapezoidModel: function(b, k) {
                return Sl.trapezoid(b, k)
            },
            createSmoothSphereModel: function(o, t, V, A, Z, W, T) {
                return vk(new tf(o, t, V, A, Z, W, T))
            },
            createSphereModel: function(V, p, S, c, r, C, U) {
                return V ? Nc(V, p, S, c, r, C, U) : z.createSmoothSphereModel()
            },
            createSmoothConeModel: function(k, e, c, b, f) {
                return nl(k, e, c, b, f)
            },
            createConeModel: function(V, j, _, P, t, C, R, w) {
                return V ? Qh(V, j, _, P, t, C, R, w) : nl(C)
            },
            createSmoothCylinderModel: function(x, X, W, H, n, h, j, M) {
                return vk(new Og(x, X, W, H, n, h, j, M))
            },
            createCylinderModel: function(Q, A, y, m, N, G, H, T) {
                return Q ? Sb(Q, A, y, m, N, G, H, T) : Xm(G, H)
            },
            createSmoothTorusModel: function(L, c, Y, h, e, m) {
                return vk(new Ud(L, c, Y, h, e, m))
            },
            createTorusModel: function(k, V, D, C, B, T, R, d) {
                return k ? _e(k, V, D, C, B, T, R, d) : rd(T, R)
            },
            createExtrusionModel: function(t, r, W, F, J, k, b, h) {
                return fq(t, r, W, F, J, k, b, h)
            },
            createSmoothRingModel: function(c, E, u, R, M, C) {
                for (var h = [], i = 0; i < c.length - 1; i += 2) h.push({
                    x: c[i],
                    y: c[i + 1]
                });
                for (c = ml(h, E, u)[0], h = [], i = 0; i < c.length; i++) {
                    var j = c[i];
                    h.push(new lf(j.x, 0, j.y))
                }
                return vk(new ih(h, C, R, M))
            },
            createTextGeometry: function(l, u) {
                var B = vk(new zl(l, u));
                if (u.cube)
                    for (var z = $p(B), S = z.min, y = z.max, Y = S.x, X = S.y, P = S.z, U = y.x - Y || 1, V = y.y - X || 1, e = y.z - P || 1, M = ["vs", "top_vs", "bottom_vs"], h = 0, T = M.length; T > h; h++) {
                        var J = B[M[h]];
                        if (J)
                            for (var G = 0, k = J.length; k > G; G += 3) J[G] = (J[G] - Y) / U - .5, J[G + 1] = (J[G + 1] - X) / V - .5, J[G + 2] = (J[G + 2] - P) / e - .5
                    }
                return B
            },
            loadFontFace: function(c, R) {
                z.xhrLoad(c, function(Y) {
                    if (!Y) return R();
                    var L;
                    try {
                        L = JSON.parse(Y)
                    } catch (b) {
                        L = JSON.parse(Y.substring(65, Y.length - 2))
                    }
                    vo.loadFace(L), R && R(L.familyName.toLowerCase())
                }, R ? null : {
                    sync: !0
                })
            },
            getShaderErrorLog: function() {
                return Ye.join("\n")
            },
            createRingModel: function(G, k, f, v, V, O, m, Q, C, $) {
                for (var E = [], W = 0; W < G.length - 1; W += 2) E.push({
                    x: G[W],
                    y: G[W + 1]
                });
                O = O || z.shapeSide, m = m || 0, Q = Q || O;
                var q, _, P, i, g, t, c, X, B, A, W, M, I, J, H, D, x, l, S = [],
                    N = [],
                    w = C ? [] : Y,
                    T = C ? [] : Y,
                    y = $ ? [] : Y,
                    L = $ ? [] : Y,
                    F = v ? [] : Y,
                    Z = v ? [] : Y,
                    p = V ? [] : Y,
                    o = V ? [] : Y,
                    G = ml(E, k, f),
                    j = Lg(G),
                    U = 0,
                    r = 2 * Math.PI / O;
                return G.forEach(function(G) {
                    if (P = G.length, P > 1) {
                        if (i = G[0], v)
                            for (t = i.x, X = i.y, W = m; Q > W; W++) M = W + 1, I = W * r, J = M * r, H = u(I), D = b(I), x = u(J), l = b(J), F.push(H * t, X, -D * t, x * t, X, -l * t, 0, X, 0), Z.push(.5 - .5 * H, .5 - .5 * D, .5 - .5 * x, .5 - .5 * l, .5, .5);
                        for (A = 0; P > A; A++) {
                            for (g = G[A], t = i.x, c = g.x, X = i.y, B = g.y, q = U / j, U += cm(i, g), _ = U / j, W = m; Q > W; W++) M = W + 1, I = W * r, J = M * r, H = u(I), D = b(I), x = u(J), l = b(J), S.push(H * c, B, -D * c, x * c, B, -l * c, H * t, X, -D * t, x * c, B, -l * c, x * t, X, -l * t, H * t, X, -D * t), N.push(W / O, _, M / O, _, W / O, q, M / O, _, M / O, q, W / O, q), C && W === m && (w.push(0, X, 0, 0, B, 0, H * c, B, -D * c, H * c, B, -D * c, H * t, X, -D * t, 0, X, 0), T.push(0, .5 - X, 0, .5 - B, 2 * c, .5 - B, 2 * c, .5 - B, 2 * t, .5 - X, 0, .5 - X)), $ && M === Q && (y.push(0, X, 0, x * c, B, -l * c, 0, B, 0, x * c, B, -l * c, 0, X, 0, x * t, X, -l * t), L.push(1, .5 - X, 1 - 2 * c, .5 - B, 1, .5 - B, 1 - 2 * c, .5 - B, 1, .5 - X, 1 - 2 * t, .5 - X));
                            i = g
                        }
                        if (V)
                            for (t = i.x, X = i.y, W = m; Q > W; W++) M = W + 1, I = W * r, J = M * r, H = u(I), D = b(I), x = u(J), l = b(J), p.push(x * t, X, -l * t, H * t, X, -D * t, 0, X, 0), o.push(.5 - .5 * x, .5 + .5 * l, .5 - .5 * H, .5 + .5 * D, .5, .5)
                    }
                }), {
                    vs: S,
                    uv: N,
                    bottom_vs: p,
                    bottom_uv: o,
                    top_vs: F,
                    top_uv: Z,
                    from_vs: w,
                    from_uv: T,
                    to_vs: y,
                    to_uv: L
                }
            }
        }, !0), fp(A, {
            "3d.move.mode": O,
            "3d.selectable": !0,
            "3d.visible": !0,
            "3d.movable": !0,
            "3d.editable": !0,
            "3d.clip.direction": null,
            "3d.clip.percentage": 1,
            "3d.reflectable": !0,
            "shape.border.gradient.color": O,
            "edge.gradient.color": O,
            "edge.source.t3": O,
            "edge.target.t3": O,
            "light.type": hc,
            "light.group": 0,
            "light.center": [0, 0, 0],
            "light.color": [1, 1, 1, 1],
            "light.disabled": !1,
            "light.angle": f / 4,
            "light.range": 0,
            "light.exponent": 1,
            "light.intensity": 1,
            "light.mask": Jh,
            "headlight.ambientIntensity": O,
            "wf.visible": !1,
            "wf.width": 1,
            "wf.color": Nl,
            "wf.short": !1,
            "wf.mat": O,
            "wf.geometry": !1,
            "wf.loadQuadWireframe": !1,
            "wf.combineTriangle": !0,
            batch: O,
            "transparent.mask": !1,
            brightness: O,
            "select.brightness": .7,
            "repeat.uv.length": O,
            "shadow.cast": !0,
            "shadow.receive": !0,
            "3d.clipbox": O,
            "3d.clipbox.mask": Jh,
            "3d.clipbox.group": 0,
            "effect.flow": !1,
            "effect.flow.gradient": "spread.horizontal",
            "effect.flow.uvshape": "rect",
            "effect.flow.size": 512,
            "effect.flow.group": 0,
            "effect.flow.intensity": 1,
            "effect.flow.blend": O,
            "effect.flow.mask": Jh,
            bloom: !1,
            envmap: 0,
            "envmap.probe": 0,
            roughness: 0,
            renderTextureSamples: 4,
            alphaTest: .4,
            autorotate: !1,
            fixSizeOnScreen: !1,
            "texture.cache": !1,
            "hide.overlapping.group": O,
            "vector.dynamic": !1,
            "vector.dynamic.maxsize": 2048,
            "texture.scale": 1,
            "geometry.cache": !1,
            "highlight.mode": !1,
            "highlight.type": "hard",
            "highlight.visible": !0,
            "highlight.width": .8,
            "highlight.color": "rgba(190, 210, 250, 1)",
            "highlight.glow": .8,
            "highlight.strength": 2,
            "color.empty": [0, 0, 0, 0],
            "label.face": ae,
            "label.t3": O,
            "label.r3": O,
            "label.texture.scale": 2,
            "label.rotationMode": Tg,
            "label.light": !1,
            "label.blend": O,
            "label.reverse.flip": !1,
            "label.reverse.color": cc,
            "label.reverse.cull": !1,
            "label.transparent": !1,
            "label.autorotate": !1,
            "label2.face": ae,
            "label2.t3": O,
            "label2.r3": O,
            "label2.texture.scale": 2,
            "label2.rotationMode": Tg,
            "label2.light": !1,
            "label2.blend": O,
            "label2.reverse.flip": !1,
            "label2.reverse.color": cc,
            "label2.reverse.cull": !1,
            "label2.transparent": !1,
            "label2.autorotate": !1,
            "note.face": ae,
            "note.t3": O,
            "note.r3": O,
            "note.texture.scale": 2,
            "note.rotationMode": Tg,
            "note.light": !1,
            "note.blend": O,
            "note.reverse.flip": !1,
            "note.reverse.color": cc,
            "note.reverse.cull": !1,
            "note.transparent": !1,
            "note.autorotate": !1,
            "note2.face": ae,
            "note2.t3": O,
            "note2.r3": O,
            "note2.texture.scale": 2,
            "note2.rotationMode": Tg,
            "note2.light": !1,
            "note2.blend": O,
            "note2.reverse.flip": !1,
            "note2.reverse.color": cc,
            "note2.reverse.cull": !1,
            "note2.transparent": !1,
            "note2.autorotate": !1,
            shape3d: O,
            "shape3d.color": Ee,
            "shape3d.top.color": O,
            "shape3d.bottom.color": O,
            "shape3d.from.color": O,
            "shape3d.to.color": O,
            "shape3d.image": O,
            "shape3d.image.projection": O,
            "shape3d.top.image": O,
            "shape3d.bottom.image": O,
            "shape3d.from.image": O,
            "shape3d.to.image": O,
            "shape3d.light": !0,
            "shape3d.side": 0,
            "shape3d.side.from": O,
            "shape3d.side.to": O,
            "shape3d.smooth": O,
            "shape3d.visible": !0,
            "shape3d.from.visible": !0,
            "shape3d.to.visible": !0,
            "shape3d.top.visible": !0,
            "shape3d.bottom.visible": !0,
            "shape3d.torus.radius": .17,
            "shape3d.resolution": 0,
            "shape3d.blend": O,
            "shape3d.opacity": O,
            "shape3d.reverse.flip": !1,
            "shape3d.reverse.color": cc,
            "shape3d.reverse.cull": !1,
            "shape3d.transparent": !1,
            "shape3d.uv.offset": O,
            "shape3d.uv.scale": O,
            "shape3d.uv.rotation": O,
            "shape3d.uv.anchor": O,
            "shape3d.top.uv.offset": O,
            "shape3d.top.uv.scale": O,
            "shape3d.top.uv.rotation": O,
            "shape3d.top.uv.anchor": O,
            "shape3d.bottom.uv.offset": O,
            "shape3d.bottom.uv.scale": O,
            "shape3d.bottom.uv.rotation": O,
            "shape3d.bottom.uv.anchor": O,
            "shape3d.from.uv.offset": O,
            "shape3d.from.uv.scale": O,
            "shape3d.from.uv.rotation": O,
            "shape3d.from.uv.anchor": O,
            "shape3d.to.uv.offset": O,
            "shape3d.to.uv.scale": O,
            "shape3d.to.uv.rotation": O,
            "shape3d.to.uv.anchor": O,
            "shape3d.top.cap": O,
            "shape3d.bottom.cap": O,
            "shape3d.start.angle": 0,
            "shape3d.sweep.angle": U,
            "shape3d.point.epsilon": 1e-6,
            "shape3d.discard.selectable": !0,
            "shape3d.top.discard.selectable": !0,
            "shape3d.bottom.discard.selectable": !0,
            "shape3d.from.discard.selectable": !0,
            "shape3d.to.discard.selectable": !0,
            "shape3d.scaleable": !0,
            "shape3d.reflector": !1,
            "shape3d.reflector.color": "rgb(128,128,128)",
            "shape3d.reflector.blur": 0,
            "shape3d.reflector.blur.iterations": 1,
            "shape3d.reflector.background": null,
            "shape3d.reflector.clip": .003,
            "shape3d.reflector.shadow": "scene",
            "camera.type": "perspective",
            "camera.aspect": 1,
            "camera.fovy": O,
            "camera.ortho.width": O,
            "camera.near": O,
            "camera.far": O,
            "camera.background": 0,
            "camera.renderSky": !0,
            "camera.renderAxis": !1,
            "camera.renderGrid": !1,
            "camera.renderEdit": !1,
            "camera.onlySky": !1,
            "texture.mipmap.max": O,
            "texture.filter": O,
            "texture.filter.min": O,
            "texture.filter.mag": O,
            "texture.wrap": O,
            "points.image": "rect",
            "points.color": "white",
            "points.transparent": !1,
            "points.size": 20,
            "points.opacity": 1,
            "points.uv.scale": [1, 1],
            "points.uv.offset": [0, 0],
            "points.discard.selectable": !1,
            "all.light": !0,
            "all.visible": !0,
            "all.color": Ee,
            "all.image": O,
            "all.blend": O,
            "all.opacity": O,
            "all.reverse.flip": !1,
            "all.reverse.color": cc,
            "all.reverse.cull": !1,
            "all.transparent": !1,
            "all.uv": O,
            "all.uv.offset": O,
            "all.uv.scale": O,
            "all.uv.rotation": O,
            "all.uv.anchor": O,
            "all.discard.selectable": !0,
            mat: O,
            "left.mat": O,
            "right.mat": O,
            "top.mat": O,
            "bottom.mat": O,
            "front.mat": O,
            "back.mat": O,
            "edge.source.anchor.elevation": O,
            "edge.target.anchor.elevation": O,
            "edge.source.offset.elevation": 0,
            "edge.target.offset.elevation": 0
        }, !0);
        var pj, Tq = !1,
            Ph = [0, 0, 0, 0],
            wr = function(p) {
                return p instanceof Ko
            },
            Ki = function(D) {
                return [D.x, D.e || 0, D.y]
            },
            ec = function(Q, M, p) {
                for (var M = Wb(M || 0), f = M[0], I = M[1], a = M[2]; p--;) Q.push(f, I, a)
            },
            kf = function(U, g, F) {
                for (var g = Wb(g || 0), R = g[0], A = g[1], b = g[2], T = g[3]; F--;) U.push(R, A, b, T)
            },
            um = function(C, M, b) {
                if (M)
                    for (var h, v, g, L = M[0], x = M[1], X = M[2], I = M[4], U = M[5], p = M[6], E = M[8], c = M[9], f = M[10], Y = M[12], V = M[13], B = M[14], F = b.length, y = 0, y = 0; F > y; y += 3) h = b[y], v = b[y + 1], g = b[y + 2], C.push(L * h + I * v + E * g + Y, x * h + U * v + c * g + V, X * h + p * v + f * g + B);
                else ks(C, b)
            },
            Fb = function(p, X, E) {
                var o = X.s("light.intensity"),
                    M = Wb(X.s(Yi)),
                    K = M[0],
                    C = M[1],
                    s = M[2];
                1 !== o && (K *= o, C *= o, s *= o);
                var U = X.s("light.disabled");
                p.push(K, C, s, U ? 1 : 0), E.c.push(K, C, s), E.g.push(U ? -1 : X.s("light.group")), E.e.push(U ? 1 : 0)
            },
            ej = function(B, k) {
                var x = $f.for(k),
                    S = x.directUniforms(),
                    N = B._lastLightUploadInfo = {
                        c: [],
                        g: [],
                        e: []
                    };
                S.uHeadlightRange = B._headlightRange;
                var h = S.uHeadlightAmbientIntensity = B._headlightAmbientIntensity,
                    I = B._headlightIntensity,
                    Z = Wb(B._headlightColor);
                1 !== I && (Z = [Z[0] * I, Z[1] * I, Z[2] * I]);
                var b;
                S.uHeadlightColor = [Z[0], Z[1], Z[2], (b = B._headlightDisabled) ? 1 : 0], N.c.push(Z[0], Z[1], Z[2]), N.g.push(b ? -1 : B._headlightGroup), N.e.push(b ? 1 : 0);
                var _ = B._59O,
                    X = B._spots,
                    U = B._dirs;
                if (_.length) {
                    var d = [],
                        O = [],
                        p = [];
                    _.forEach(function(M) {
                        Fb(d, M, N), ks(O, B._transformPointToViewSpace(M.p3())), p.push(M.s("light.range"))
                    }), S.uPointColor = d, S.uPointRange = p, S.uPointPosition = O
                }
                if (X.length) {
                    var f = [],
                        H = [],
                        M = [],
                        g = [],
                        n = [],
                        m = [];
                    X.forEach(function(e) {
                        Fb(f, e, N), ks(H, B._transformPointToViewSpace(e.p3())), ks(n, B._transformDirectionToViewSpace(e.p3(), e.s("light.center"))), M.push(e.s("light.range")), g.push(u(e.s("light.angle") / 2)), m.push(e.s("light.exponent"))
                    }), S.uSpotColor = f, S.uSpotRange = M, S.uSpotAngle = g, S.uSpotExponent = m, S.uSpotPosition = H, S.uSpotDirection = n
                }
                if (U.length) {
                    var l = [],
                        i = [];
                    U.forEach(function(U) {
                        Fb(l, U, N), ks(i, B._transformDirectionToViewSpace(U.p3()))
                    }), S.uDirColor = l, S.uDirDirection = i
                }
                B._lastLightMask = Jh, B._lastHeadlightAmbientIntensity = h
            },
            Ro = function(o, p, U, e) {
                if (e === O && (e = o._headlightAmbientIntensity), e !== o._lastHeadlightAmbientIntensity && (p.uHeadlightAmbientIntensity = o._lastHeadlightAmbientIntensity = e), U !== o._lastLightMask) {
                    o._lastLightMask = U;
                    var r = o._lastLightUploadInfo;
                    if (r) {
                        var y, D, Z, w = r.g,
                            h = r.e,
                            f = w.length,
                            I = new Array(f),
                            T = !1;
                        for (D = 0; f > D; D++) y = w[D], Z = 0 > y || y >= 32 ? 1 : U & 1 << y ? 0 : 1, I[D] = Z, Z !== h[D] && (T = !0);
                        if (T) {
                            r.e = h = I;
                            var K = r.c;
                            p.uHeadlightColor = [K[0], K[1], K[2], h[0]];
                            var B, P = o._59O,
                                R = o._spots,
                                i = o._dirs,
                                u = 3,
                                F = 1;
                            if (f = P.length) {
                                for (D = 0, B = []; f > D; D++) B.push(K[u++], K[u++], K[u++], h[F++]);
                                p.uPointColor = B
                            }
                            if (f = R.length) {
                                for (D = 0, B = []; f > D; D++) B.push(K[u++], K[u++], K[u++], h[F++]);
                                p.uSpotColor = B
                            }
                            if (f = i.length) {
                                for (D = 0, B = []; f > D; D++) B.push(K[u++], K[u++], K[u++], h[F++]);
                                p.uDirColor = B
                            }
                        }
                    }
                }
            },
            Xj = function(F, Y) {
                return Math.max(F.getRotateMinPhi() + to, Math.min(F.getRotateMaxPhi() - to, Y))
            },
            dd = function() {
                return .05 + Cl() / 2
            },
            No = function(D, n, h, r) {
                var b, c = D.getEye();
                return D.isOrtho() ? (b = _g(D.getCenter(), c), b[0] += r[0], b[1] += r[1], b[2] += r[2]) : b = c, Oo(n, h, r, b)
            },
            Oo = function(Q, R, f, o) {
                var s = Pn(Q, R),
                    l = _g(o, f, !0),
                    q = Pn(l, R);
                if (r(q) < to) return Y;
                var E = (s - Pn(f, R)) / q;
                return [f[0] + l[0] * E, f[1] + l[1] * E, f[2] + l[2] * E]
            },
            sq = function(O, n) {
                return {
                    x: 2 * O.x - n.x,
                    y: 2 * O.y - n.y
                }
            },
            Ae = function(Y, j, d, I) {
                var y, F;
                if (!Y) return y = di(j.y - d.y, d.x - j.x), {
                    x: j.x + I * b(y),
                    y: j.y + I * u(y)
                };
                if (!d) return y = di(Y.y - j.y, j.x - Y.x), {
                    x: j.x + I * b(y),
                    y: j.y + I * u(y)
                };
                var K = _g([Y.x, Y.y, 0], [j.x, j.y, 0], !0),
                    c = _g([d.x, d.y, 0], [j.x, j.y, 0], !0),
                    Z = -(K[0] + c[0]) / 2,
                    P = -(K[1] + c[1]) / 2,
                    D = x(Z * Z + P * P);
                if (to > D) return y = di(Y.y - j.y, j.x - Y.x), {
                    x: j.x + I * b(y),
                    y: j.y + I * u(y)
                };
                var n = Y.x - j.x,
                    L = Y.y - j.y,
                    T = d.x - j.x,
                    Q = d.y - j.y,
                    t = x(n * n + L * L),
                    h = x(T * T + Q * Q);
                y = a(Pn(K, c)) / 2, F = K[1] * c[0] - K[0] * c[1] > 0 ? -1 : 1, Z /= D, P /= D;
                var e = I / b(y),
                    E = q(t, h) / u(y);
                D = Math.min(e, E);
                var _ = {
                    x: j.x + F * D * Z,
                    y: j.y + F * D * P
                };
                return d.b && e > h / u(y) && (_.adjust = !0), _
            },
            hf = function(d) {
                var B = d[1],
                    D = d[2],
                    L = d[3],
                    r = d[6],
                    v = d[7],
                    I = d[11];
                d[1] = d[4], d[2] = d[8], d[3] = d[12], d[4] = B, d[6] = d[9], d[7] = d[13], d[8] = D, d[9] = r, d[11] = d[14], d[12] = L, d[13] = v, d[14] = I
            },
            Lc = function(N) {
                var u = N[0],
                    s = N[1],
                    Q = N[2],
                    B = N[3],
                    L = N[4],
                    C = N[5],
                    S = N[6],
                    I = N[7],
                    K = N[8],
                    t = N[9],
                    r = N[10],
                    G = N[11],
                    b = N[12],
                    h = N[13],
                    v = N[14],
                    $ = N[15],
                    H = u * C - s * L,
                    A = u * S - Q * L,
                    R = u * I - B * L,
                    E = s * S - Q * C,
                    z = s * I - B * C,
                    Z = Q * I - B * S,
                    P = K * h - t * b,
                    T = K * v - r * b,
                    O = K * $ - G * b,
                    _ = t * v - r * h,
                    g = t * $ - G * h,
                    X = r * $ - G * v,
                    x = H * X - A * g + R * _ + E * O - z * T + Z * P;
                return x ? (x = 1 / x, N[0] = (C * X - S * g + I * _) * x, N[1] = (Q * g - s * X - B * _) * x, N[2] = (h * Z - v * z + $ * E) * x, N[3] = (r * z - t * Z - G * E) * x, N[4] = (S * O - L * X - I * T) * x, N[5] = (u * X - Q * O + B * T) * x, N[6] = (v * R - b * Z - $ * A) * x, N[7] = (K * Z - r * R + G * A) * x, N[8] = (L * g - C * O + I * P) * x, N[9] = (s * O - u * g - B * P) * x, N[10] = (b * z - h * R + $ * H) * x, N[11] = (t * R - K * z - G * H) * x, N[12] = (C * T - L * _ - S * P) * x, N[13] = (u * _ - s * T + Q * P) * x, N[14] = (h * A - b * E - v * H) * x, N[15] = (K * E - t * A + r * H) * x, void 0) : Y
            },
            bq = function(x, u) {
                if (u) {
                    var n = u[0],
                        i = u[1],
                        Z = u[2];
                    x[12] = x[0] * n + x[4] * i + x[8] * Z + x[12], x[13] = x[1] * n + x[5] * i + x[9] * Z + x[13], x[14] = x[2] * n + x[6] * i + x[10] * Z + x[14], x[15] = x[3] * n + x[7] * i + x[11] * Z + x[15]
                }
            },
            Rp = function(w, X) {
                if (X) {
                    var G = X[0],
                        i = X[1],
                        m = X[2];
                    w[0] = w[0] * G, w[1] = w[1] * G, w[2] = w[2] * G, w[3] = w[3] * G, w[4] = w[4] * i, w[5] = w[5] * i, w[6] = w[6] * i, w[7] = w[7] * i, w[8] = w[8] * m, w[9] = w[9] * m, w[10] = w[10] * m, w[11] = w[11] * m
                }
            },
            Qn = function(U, W, v) {
                var I = W[0],
                    N = W[1],
                    M = W[2],
                    T = W[3],
                    V = W[4],
                    A = W[5],
                    z = W[6],
                    x = W[7],
                    Q = W[8],
                    s = W[9],
                    b = W[10],
                    a = W[11],
                    n = W[12],
                    K = W[13],
                    g = W[14],
                    P = W[15],
                    Y = v[0],
                    w = v[1],
                    S = v[2],
                    D = v[3];
                return U[0] = Y * I + w * V + S * Q + D * n, U[1] = Y * N + w * A + S * s + D * K, U[2] = Y * M + w * z + S * b + D * g, U[3] = Y * T + w * x + S * a + D * P, Y = v[4], w = v[5], S = v[6], D = v[7], U[4] = Y * I + w * V + S * Q + D * n, U[5] = Y * N + w * A + S * s + D * K, U[6] = Y * M + w * z + S * b + D * g, U[7] = Y * T + w * x + S * a + D * P, Y = v[8], w = v[9], S = v[10], D = v[11], U[8] = Y * I + w * V + S * Q + D * n, U[9] = Y * N + w * A + S * s + D * K, U[10] = Y * M + w * z + S * b + D * g, U[11] = Y * T + w * x + S * a + D * P, Y = v[12], w = v[13], S = v[14], D = v[15], U[12] = Y * I + w * V + S * Q + D * n, U[13] = Y * N + w * A + S * s + D * K, U[14] = Y * M + w * z + S * b + D * g, U[15] = Y * T + w * x + S * a + D * P, U
            },
            iq = function(t, N, a, c) {
                var A, n, Q, W, g, Z, q, I, y, O, G = N[0],
                    E = N[1],
                    m = N[2],
                    F = c[0],
                    T = c[1],
                    B = c[2],
                    $ = a[0],
                    j = a[1],
                    o = a[2];
                return r(G - $) < to && r(E - j) < to && r(m - o) < to ? sc(t) : (q = G - $, I = E - j, y = m - o, O = 1 / x(q * q + I * I + y * y), q *= O, I *= O, y *= O, A = T * y - B * I, n = B * q - F * y, Q = F * I - T * q, O = x(A * A + n * n + Q * Q), O ? (O = 1 / O, A *= O, n *= O, Q *= O) : (A = 0, n = 0, Q = 0), W = I * Q - y * n, g = y * A - q * Q, Z = q * n - I * A, O = x(W * W + g * g + Z * Z), O ? (O = 1 / O, W *= O, g *= O, Z *= O) : (W = 0, g = 0, Z = 0), t[0] = A, t[1] = W, t[2] = q, t[3] = 0, t[4] = n, t[5] = g, t[6] = I, t[7] = 0, t[8] = Q, t[9] = Z, t[10] = y, t[11] = 0, t[12] = -(A * G + n * E + Q * m), t[13] = -(W * G + g * E + Z * m), t[14] = -(q * G + I * E + y * m), t[15] = 1, t)
            },
            yl = function(B, D, n, e, p) {
                var S = 1 / Ec(D / 2),
                    E = 1 / (e - p);
                return B[0] = S / n, B[1] = 0, B[2] = 0, B[3] = 0, B[4] = 0, B[5] = S, B[6] = 0, B[7] = 0, B[8] = 0, B[9] = 0, B[10] = (p + e) * E, B[11] = -1, B[12] = 0, B[13] = 0, B[14] = 2 * p * e * E, B[15] = 0, B
            },
            bj = function(J, $, P, n, e, A, t) {
                var F = 1 / ($ - P),
                    z = 1 / (n - e),
                    R = 1 / (A - t);
                return J[0] = -2 * F, J[1] = 0, J[2] = 0, J[3] = 0, J[4] = 0, J[5] = -2 * z, J[6] = 0, J[7] = 0, J[8] = 0, J[9] = 0, J[10] = 2 * R, J[11] = 0, J[12] = ($ + P) * F, J[13] = (e + n) * z, J[14] = (t + A) * R, J[15] = 1, J
            },
            Se = function(R, w) {
                var K = w[0],
                    O = w[1],
                    l = w[2],
                    Y = w[3],
                    p = K * K + O * O + l * l + Y * Y,
                    k = p ? 1 / p : 0;
                return R[0] = -K * k, R[1] = -O * k, R[2] = -l * k, R[3] = Y * k, R
            },
            xs = function(O, v) {
                var q = v[0] + v[5] + v[10],
                    L = 0;
                return q > 0 ? (L = 2 * Math.sqrt(q + 1), O[3] = .25 * L, O[0] = (v[6] - v[9]) / L, O[1] = (v[8] - v[2]) / L, O[2] = (v[1] - v[4]) / L) : v[0] > v[5] & v[0] > v[10] ? (L = 2 * Math.sqrt(1 + v[0] - v[5] - v[10]), O[3] = (v[6] - v[9]) / L, O[0] = .25 * L, O[1] = (v[1] + v[4]) / L, O[2] = (v[8] + v[2]) / L) : v[5] > v[10] ? (L = 2 * Math.sqrt(1 + v[5] - v[0] - v[10]), O[3] = (v[8] - v[2]) / L, O[0] = (v[1] + v[4]) / L, O[1] = .25 * L, O[2] = (v[6] + v[9]) / L) : (L = 2 * Math.sqrt(1 + v[10] - v[0] - v[5]), O[3] = (v[1] - v[4]) / L, O[0] = (v[8] + v[2]) / L, O[1] = (v[6] + v[9]) / L, O[2] = .25 * L), O
            },
            Xc = function(H, b, k) {
                var u = b[0],
                    r = b[1],
                    E = b[2],
                    W = b[3],
                    g = u + u,
                    D = r + r,
                    T = E + E,
                    l = u * g,
                    t = u * D,
                    _ = u * T,
                    Q = r * D,
                    K = r * T,
                    M = E * T,
                    j = W * g,
                    i = W * D,
                    o = W * T;
                return H[0] = 1 - (Q + M), H[1] = t + o, H[2] = _ - i, H[3] = 0, H[4] = t - o, H[5] = 1 - (l + M), H[6] = K + j, H[7] = 0, H[8] = _ + i, H[9] = K - j, H[10] = 1 - (l + Q), H[11] = 0, H[12] = k[0], H[13] = k[1], H[14] = k[2], H[15] = 1, H
            },
            sn = function(n, Z) {
                if (n.isVREnabled()) {
                    var G = n.vr.getViewMatrix(Z);
                    if (G) return G
                }
                return n._camera ? n._camera.getViewMatrix(Z) : iq(Z ? Z : Yn(), n._eye, n._center, n._up)
            },
            om = function(l, R) {
                if (l.isVREnabled()) {
                    var D = l.vr.getProjectMatrix();
                    if (D) return D
                }
                if (l._camera) return l._camera.getProjectMatrix();
                if (!R && l._computedProjectMatrix) return fj(l._computedProjectMatrix);
                var X = l.getAspect(),
                    S = l._near,
                    P = l._far,
                    f = Yn();
                if (l._ortho) {
                    var T = l._orthoWidth / 2,
                        _ = T / X;
                    bj(f, -T, T, -_, _, S, P)
                } else yl(f, l._fovy, X, S, P);
                return f
            },
            Ze = function(s, M) {
                if (!s) return Y;
                var l = 0,
                    S = 1,
                    z = 2,
                    C = [],
                    I = 0,
                    _ = s.length,
                    w = _ / 3;
                if (M) {
                    for (; _ > I; I++) C[I] = 0;
                    for (I = 0; I < M.length; I += 3) {
                        var Q = [],
                            Z = [],
                            X = [];
                        Q[l] = s[3 * M[I + 1] + l] - s[3 * M[I] + l], Q[S] = s[3 * M[I + 1] + S] - s[3 * M[I] + S], Q[z] = s[3 * M[I + 1] + z] - s[3 * M[I] + z], Z[l] = s[3 * M[I + 2] + l] - s[3 * M[I + 1] + l], Z[S] = s[3 * M[I + 2] + S] - s[3 * M[I + 1] + S], Z[z] = s[3 * M[I + 2] + z] - s[3 * M[I + 1] + z], X[l] = Q[S] * Z[z] - Q[z] * Z[S], X[S] = Q[z] * Z[l] - Q[l] * Z[z], X[z] = Q[l] * Z[S] - Q[S] * Z[l];
                        for (var U = 0; 3 > U; U++) C[3 * M[I + U] + l] += X[l], C[3 * M[I + U] + S] += X[S], C[3 * M[I + U] + z] += X[z]
                    }
                } else
                    for (I = 0; w > I; I += 3) {
                        var Q = [],
                            Z = [],
                            X = [];
                        Q[l] = s[3 * (I + 1) + l] - s[3 * I + l], Q[S] = s[3 * (I + 1) + S] - s[3 * I + S], Q[z] = s[3 * (I + 1) + z] - s[3 * I + z], Z[l] = s[3 * (I + 2) + l] - s[3 * (I + 1) + l], Z[S] = s[3 * (I + 2) + S] - s[3 * (I + 1) + S], Z[z] = s[3 * (I + 2) + z] - s[3 * (I + 1) + z], X[l] = Q[S] * Z[z] - Q[z] * Z[S], X[S] = Q[z] * Z[l] - Q[l] * Z[z], X[z] = Q[l] * Z[S] - Q[S] * Z[l];
                        for (var U = 0; 3 > U; U++) C[3 * (I + U) + l] = X[l], C[3 * (I + U) + S] = X[S], C[3 * (I + U) + z] = X[z]
                    }
                for (I = 0; _ > I; I += 3) {
                    var W = [];
                    W[l] = C[I + l], W[S] = C[I + S], W[z] = C[I + z];
                    var m = x(W[l] * W[l] + W[S] * W[S] + W[z] * W[z]);
                    0 === m && (m = to), W[l] = W[l] / m, W[S] = W[S] / m, W[z] = W[z] / m, C[I + l] = W[l], C[I + S] = W[S], C[I + z] = W[z]
                }
                return new Kh(C)
            },
            wn = function(_, T, i, f) {
                if (i || (i = _.createTexture()), T) {
                    var C = _.TEXTURE_2D,
                        $ = _.REPEAT,
                        b = _.CLAMP_TO_EDGE,
                        U = _.TEXTURE_MIN_FILTER;
                    f = f || Ce;
                    var S = f.minFilter || f.filter || _.LINEAR,
                        q = f.magFilter || f.filter || _.LINEAR;
                    _.activeTexture(_.TEXTURE0), wq(_, i), _.texImage2D(C, 0, _.RGBA, _.RGBA, _.UNSIGNED_BYTE, T), ap(_, _.TEXTURE_MAG_FILTER, q);
                    var G = T.naturalWidth || T.width,
                        x = T.naturalHeight || T.height;
                    _q.isPOT(G) && _q.isPOT(x) && !f.clampToEdge && !T.clampToEdge ? (ap(_, _.TEXTURE_WRAP_S, $), ap(_, _.TEXTURE_WRAP_T, $), ap(_, U, S === _.NEAREST ? _.NEAREST_MIPMAP_NEAREST : _.LINEAR_MIPMAP_LINEAR), f.mipmapMaxLevel !== O && ap(_, _.TEXTURE_MAX_LEVEL, f.mipmapMaxLevel), _.generateMipmap(C)) : (ap(_, _.TEXTURE_WRAP_S, b), ap(_, _.TEXTURE_WRAP_T, b), ap(_, U, S)), wq(_, Y)
                }
                return i
            },
            vh = function(G, K, e) {
                var I = new Uint8Array(e || 4);
                return K = K || G.createTexture(), G.activeTexture(G.TEXTURE0), wq(G, K), ap(G, G.TEXTURE_MIN_FILTER, G.LINEAR), G.texImage2D(G.TEXTURE_2D, 0, G.RGBA, 1, 1, 0, G.RGBA, G.UNSIGNED_BYTE, I), K
            },
            Fn = function(h, S, D) {
                var W = new Uint8Array(D || 4);
                return S = S || h.createTexture(), h.activeTexture(h.TEXTURE0), h.bindTexture(h.TEXTURE_CUBE_MAP, S), h.texParameteri(h.TEXTURE_CUBE_MAP, h.TEXTURE_MAG_FILTER, h.LINEAR), h.texParameteri(h.TEXTURE_CUBE_MAP, h.TEXTURE_MIN_FILTER, h.LINEAR), h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X + 0, 0, h.RGBA, 1, 1, 0, h.RGBA, h.UNSIGNED_BYTE, W), h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X + 1, 0, h.RGBA, 1, 1, 0, h.RGBA, h.UNSIGNED_BYTE, W), h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X + 2, 0, h.RGBA, 1, 1, 0, h.RGBA, h.UNSIGNED_BYTE, W), h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X + 3, 0, h.RGBA, 1, 1, 0, h.RGBA, h.UNSIGNED_BYTE, W), h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X + 4, 0, h.RGBA, 1, 1, 0, h.RGBA, h.UNSIGNED_BYTE, W), h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X + 5, 0, h.RGBA, 1, 1, 0, h.RGBA, h.UNSIGNED_BYTE, W), S
            },
            qc = function(l) {
                l._26I && l._prg && (l._26I.deleteProgram(l._prg), l._prg = Y)
            },
            yg = function() {
                function O(_) {
                    if (_.match(k)) return Hh(_);
                    var Z = i[_];
                    if (Z) return Z;
                    var P = new RegExp("#define\\s+" + _ + "\\s+(\\d+)"),
                        J = w.match(P);
                    return i[_] = J ? Hh(J[1]) : 0
                }

                function z(e) {
                    i = {}, w = e;
                    var k = e.replace(U, T).replace(f, v);
                    return w = null, i = null, k
                }

                function T(e, u, M) {
                    M = O(M);
                    for (var y = "", X = 0; M > X; X++) y += u + X + ";";
                    return y
                }

                function v(X, s, R, L) {
                    for (var z = "", r = O(s); r < O(R); r++) z += L.replace(/\[\s*i\s*\]/g, "[" + r + "]").replace(/\[\s*I\s*\]/g, r);
                    return z
                }
                var i, w, U = /(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,
                    f = /#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,
                    k = /^\d+$/;
                return function(X) {
                    return z(X)
                }
            }(),
            Pq = function(V, z, t, r) {
                var g = V.createShader(t);
                return V.shaderSource(g, yg(r)), V.compileShader(g), V.attachShader(z, g), g
            },
            Jg = function(R) {
                return R.createBuffer()
            },
            wq = function(H, r) {
                H.bindTexture(H.TEXTURE_2D, r || H._emptyTexture)
            },
            ap = function(K, T, y) {
                K.texParameteri(K.TEXTURE_2D, T, y)
            },
            rr = function(R, s) {
                var S = $f.for(R).directState();
                S.polygonOffset.enabled = !0, S.polygonOffset.value = s
            },
            Vo = function(B) {
                var T = $f.for(B).directState();
                T.polygonOffset.enabled = !1
            },
            kj = function(N, s) {
                if (s) {
                    var _ = $f.for(N).directState();
                    _.color.clear = Wb(s)
                }
            },
            jj = function(B, I, s) {
                if (s !== I._lastClipboxEnabled) {
                    var k = B._boxClipperGroups,
                        _ = k ? k.length : 0,
                        R = new Array(_);
                    if (s)
                        for (var x = 0; _ > x; x++) s & 1 << k[x] && (R[x] = !0);
                    I._lastClipboxEnabled = s, I.uEnableBoxClip = R
                }
            },
            xe = jj,
            wi = function(a) {
                var J = $f.for(a),
                    z = J.directUniforms(),
                    K = J.directAttribs();
                z.uFix = !0, K.aNormal = !1
            },
            Uc = function(t) {
                var P = $f.for(t),
                    j = P.directUniforms();
                P.directAttribs(), j.uFix = !1
            },
            Yf = function(X, y, E, h, u, $, T, s) {
                var G = $f.for(X),
                    D = G.directState(),
                    V = G.directUniforms();
                X._picking || (E ? (V.uBlend = !0, V.uBlendColor = E) : V.uBlend = !1, V.uLight = h == Y ? !0 : h, Jm(u) && 1 !== u && (V.uPartOpacity = u), V.uReverseFlip = $ == Y ? !1 : $, V.uFixPickReverseColor = T || cc), D.cullFace.enabled = s ? !0 : !1
            },
            Zm = function(r) {
                if (!r._picking) {
                    var X = $f.for(r),
                        U = X.directUniforms();
                    U.uPartOpacity = 1
                }
            },
            Gh = function() {
                var e = new F.Math.Matrix2d,
                    C = [1, 0, 0, 0, 1, 0, 0, 0, 0];
                return function(q, t, H, A, L, i, X, S, Q, j, c) {
                    var B = $f.for(q),
                        f = B.directUniforms(),
                        M = B.directAttribs();
                    return H ? (f.uTexture = !0, f.uDiscardSelectable = xk(A) ? A : !0, M.aUv = Cs(q, L, i, Y, 2), c ? (f.uBlendTexture = !0, f.uBlendSampler = c) : (f.uBlendTexture = !1, f.uBlendSampler = q._emptyBlendTexture), f.uSampler = H, f.uUvMatrix = X || S || Q || j ? ql(Q, X, S, j, e).toArray9() : C, void 0) : (f.uSampler = q._emptyTexture, f.uBlendSampler = q._emptyBlendTexture, void 0)
                }
            }(),
            mn = function(f, s, g) {
                var L = $f.for(f),
                    J = L.directUniforms(),
                    _ = L.directAttribs();
                f.activeTexture(f.TEXTURE0), wq(f, Y), f.activeTexture(f.TEXTURE1), wq(f, Y), g && (_.aUv = !1, J.uTexture = !1, J.uSampler = f._emptyTexture, J.uBlendTexture = !1, J.uBlendSampler = f._emptyBlendTexture)
            },
            Uo = function(R, _, j, n, r, x) {
                var D = $f.for(R),
                    c = D.directUniforms(),
                    H = D.directAttribs();
                !j || Bp || sr || R.lineWidth(j), n && !R._picking && (c.uFixPickReverseColor = n), r && (H.aPosition = Cs(R, r, x, Y))
            },
            il = function(Z, e, U, N) {
                pj && (N = Z[pj]), Z.drawArrays(N == Y ? Z.TRIANGLES : N, e, U);
                var q = Z._renderInfo;
                q && (q.calls++, q.vertices += U, (N == Y || N === Z.TRIANGLES) && (q.faces += U / 3), N === Z.LINES && (q.lines += U / 2), N === Z.POINTS && (q.points += U))
            },
            Km = function(s, B, g, E, R) {
                pj && (E = s[pj]), s.drawElements(E == Y ? s.TRIANGLES : E, g, R == Y ? s.UNSIGNED_SHORT : R, B == Y ? 0 : 2 * B);
                var r = s._renderInfo;
                r && (r.calls++, r.vertices += g, (E == Y || E === s.TRIANGLES) && (r.faces += g / 3), E === s.LINES && (r.lines += g / 2), E === s.POINTS && (r.points += g))
            },
            rq = function(T, f, d) {
                var y = T.ARRAY_BUFFER;
                return T.bindBuffer(y, f), d && T.bufferData(y, d, T.STATIC_DRAW), f
            },
            Cs = function(P, c, Q, q, O) {
                return Q ? Xb(P, P.ARRAY_BUFFER, c, Q) : rq(P, c, Q, q, O)
            },
            zq = function(P, E, r) {
                var G = P.ELEMENT_ARRAY_BUFFER;
                P.bindBuffer(G, E), r && P.bufferData(G, r, P.STATIC_DRAW)
            },
            dm = function(V, z, J) {
                Xb(V, V.ELEMENT_ARRAY_BUFFER, z, J)
            },
            Xb = function(U, Y, P, B) {
                var z = B._bufId;
                z || (z = B._bufId = F.Math.generateIncreasingID());
                var P, y = U._bufPool;
                return (P = y[z]) && P._buf ? U.bindBuffer(Y, P._buf) : (P = y[z] = {
                    _buf: Jg(U)
                }, U.bindBuffer(Y, P._buf), U.bufferData(Y, B, U.STATIC_DRAW)), P._fid = U._renderInfo.frame, P._buf
            },
            re = function(U, Z) {
                Z != Y && Z >= 0 && U.enableVertexAttribArray(Z)
            },
            ch = function(O, c) {
                c != Y && c >= 0 && O.disableVertexAttribArray(c)
            },
            Gb = function(A, K) {
                var X = A.getGL(),
                    s = $f.for(X),
                    r = s.directUniforms();
                A._7O = A._8O.pop(), K && (r.uMVMatrix = A._7O, A._6O = K, r.uNMatrix = K)
            },
            Yq = function(q, g) {
                return g || (g = Yn()), Cq(g, q), Lc(g), hf(g), g
            },
            Yb = function(w, V) {
                var c = w.getGL(),
                    K = w._7O,
                    n = $f.for(c),
                    H = n.directUniforms();
                V ? (w._8O.push(fj(K)), H.uMMatrix = V, Qn(K, K, V), w._7O = K) : H.uMMatrix = gp, H.uMVMatrix = K, H.uNMatrix = Yq(K, w._6O)
            },
            nh = {
                body: 0,
                label: 1,
                label2: 2,
                note: 3,
                note2: 4,
                symbol: 5
            },
            nb = 10,
            li = function(C, U, G, Y, H, J) {
                var h;
                if (G) {
                    var n = Y._pickId;
                    n || (n = Y._pickId = U._pickIdUsed, U._pickIdUsed += nb);
                    var S, q = nh[H];
                    if (null != q) S = n + q;
                    else {
                        var E = Y._pickExtraPartMap;
                        E || (E = Y._pickExtraPartMap = {}), (S = E[H]) || (S = E[H] = U._pickIdUsed++)
                    }
                    U[S] || (U[S] = {
                        data: Y.data,
                        part: H
                    }), h = Ks(S)
                } else h = Ph;
                if (!J) {
                    var y = $f.for(C),
                        k = y.directUniforms();
                    k.uFixPickReverseColor = h
                }
                return h
            },
            xm = li,
            nk = function(b, Q, h) {
                "target" !== h && (h = "source");
                var R = "target" === h ? Q.getTargetAgent() : Q.getSourceAgent(),
                    i = "edge." + h + ".";
                if (Mk(R)) {
                    var c = Q.s(i + "anchor.x"),
                        u = Q.s(i + "anchor.elevation"),
                        q = Q.s(i + "anchor.y"),
                        E = Qj(R, b.getMat(R)),
                        z = R.getAnchor3d(),
                        G = qm([(c === O ? .5 : c) - z.x, (u === O ? .5 : u) - z.y, (q === O ? .5 : q) - z.z], E);
                    return G[1] += Q.s(i + "offset.elevation"), G
                }
                var T = Q.s(i + "index"),
                    n = b.getData3dUI(R);
                if (!n.info || !n.info.list) return !1;
                if (T >= 0) {
                    var Y, p, s, Z, C, x = n.info._lastPointsSegments,
                        P = x.points,
                        k = x.segments,
                        A = -1,
                        y = -1;
                    for (s = 0, Z = k ? k.length : P.length; Z > s; s++) {
                        if (p = k ? k.get(s) : 1, 3 === p) C = 2;
                        else if (4 === p) C = 3;
                        else {
                            if (5 === p) continue;
                            C = 1
                        }
                        if (A += C, y++, y === T) {
                            Y = P.get(A);
                            break
                        }
                    }
                    return Y || (Y = P.get(P.length - 1)), [Y.x, (Y.e || 0) + Q.s(i + "offset.elevation"), Y.y]
                }
                var f = Q.s(i + "percent") || .5;
                if (f = Math.max(0, Math.min(f, 1)), !n || !n.getCache) return !1;
                var a = n.getCache(),
                    Z = a[a.length - 1].length,
                    x = b.getLineOffset(R, f * Z),
                    G = x.point;
                return [G.x, G.y + Q.s(i + "offset.elevation"), G.z]
            },
            Hp = function() {
                var k = {
                    center: function(c, t, v, i, D) {
                        var W = -t[1] / 2,
                            k = {
                                x: -t[0] / 2,
                                y: W,
                                width: t[0],
                                height: t[1]
                            },
                            A = Mj(c, k, v);
                        return [A.x + i, -A.y - D, z.getPosition3dGap()]
                    },
                    front: function(v, H, k, E, y) {
                        var b = -H[1] / 2,
                            q = {
                                x: -H[0] / 2,
                                y: b,
                                width: H[0],
                                height: H[1]
                            },
                            C = Mj(v, q, k);
                        return [C.x + E, -C.y - y, H[2] / 2 + z.getPosition3dGap()]
                    },
                    back: function(F, v, f, L, x) {
                        var U = -v[0] / 2,
                            h = -v[1] / 2,
                            $ = {
                                x: U,
                                y: h,
                                width: v[0],
                                height: v[1]
                            },
                            V = Mj(F, $, f);
                        return [-V.x - L, -V.y - x, -v[2] / 2 - z.getPosition3dGap()]
                    },
                    left: function(b, i, Y, F, _) {
                        var U = -i[1] / 2,
                            M = {
                                x: -i[2] / 2,
                                y: U,
                                width: i[2],
                                height: i[1]
                            },
                            k = Mj(b, M, Y);
                        return [-i[0] / 2 - z.getPosition3dGap(), -k.y - _, k.x + F]
                    },
                    right: function(n, d, U, g, X) {
                        var D = -d[2] / 2,
                            L = -d[1] / 2,
                            J = {
                                x: D,
                                y: L,
                                width: d[2],
                                height: d[1]
                            },
                            o = Mj(n, J, U);
                        return [d[0] / 2 + z.getPosition3dGap(), -o.y - X, -o.x - g]
                    },
                    top: function(f, W, N, _, X) {
                        var M = {
                                x: -W[0] / 2,
                                y: -W[2] / 2,
                                width: W[0],
                                height: W[2]
                            },
                            p = Mj(f, M, N);
                        return [p.x + _, W[1] / 2 + z.getPosition3dGap(), p.y + X]
                    },
                    bottom: function(E, x, L, p, l) {
                        var k = -x[2] / 2,
                            v = {
                                x: -x[0] / 2,
                                y: k,
                                width: x[0],
                                height: x[2]
                            },
                            H = Mj(E, v, L);
                        return [H.x + p, -x[1] / 2 - z.getPosition3dGap(), -H.y - l]
                    }
                };
                return function(J, Q, A, U, X, m) {
                    return k[U](J, Q, A, X || 0, m || 0)
                }
            }(),
            _m = function(V, a, R, b, O, n, v, p, u, z) {
                if (O && (a[0] += O[0], a[1] += O[1], a[2] += O[2]), bq(V, R), p) {
                    var o = Yn();
                    if (cr(o, u, z), qm(a, o), bq(V, a), V.auto = p, V.pos = qm([0, 0, 0], V), n) {
                        var U = V.mat2 = Yn();
                        cr(U, n, v)
                    }
                } else cr(V, u, z), bq(V, a), b === _i ? yb(V, -yr) : b === rj ? yb(V, yr) : b === vi ? Vb(V, -yr) : b === Ei ? Vb(V, yr) : b === Ad && yb(V, f), cr(V, n, v);
                return V
            },
            Qg = function(B, h) {
                var Y = h.auto,
                    q = h.mat2,
                    o = B.gv;
                if (Y) {
                    var Z, T = Yn(),
                        U = [0, 0, 0, 0];
                    Z = "string" == typeof Y ? [Y.indexOf("x") < 0 ? o._eye[0] : o._center[0], Y.indexOf("y") < 0 ? o._eye[1] : o._center[1], Y.indexOf("z") < 0 ? o._eye[2] : o._center[2]] : o._eye, xs(U, iq(Yn(), Z, o._center, o._up)), Xc(T, Se(U, U), h.pos), q && Qn(T, T, q), Yb(o, T)
                } else Yb(o, h)
            },
            fe = function(n, j, w, Z, e) {
                var I = n.s,
                    l = n.gv,
                    K = l.getGL(),
                    b = l._prg,
                    J = l._buffer,
                    T = l._1O,
                    X = $f.for(K),
                    A = X.directAttribs();
                wn(K, Vq, T), Qg(n, w), Yf(K, b, I(j + ".blend"), I(j + ".light"), I(j + ".opacity"), I(j + ".reverse.flip"), I(j + ".reverse.color"), I(j + ".reverse.cull")), Gh(K, b, T, e, J.uv, jn), A.aPosition = Cs(K, J.vs, Z, Y), A.aNormal = Cs(K, J.ns, Kj, Y), dm(K, J.is, fk), Km(K, 0, fk.length), mn(K, b, T), Zm(K, b), Gb(l)
            },
            Uj = function(I, n, c) {
                var _ = I.gv,
                    d = I.data,
                    H = I[n] = {
                        blend: _.getBodyColor(d) || _.getFaceBlend(d, n),
                        light: _.getFaceLight(d, n),
                        color: _.getFaceColor(d, n),
                        opacity: _.getFaceOpacity(d, n),
                        transparent: _.getFaceTransparent(d, n),
                        reverseFlip: _.getFaceReverseFlip(d, n),
                        reverseColor: _.getFaceReverseColor(d, n),
                        reverseCull: _.getFaceReverseCull(d, n),
                        texture: _.getFaceImage(d, n),
                        blendTexture: _.getFaceBlendImage(d, n),
                        discardSelectable: _.getFaceDiscardSelectable(d, n)
                    };
                if ("csg" !== n) {
                    H.uv = _.getFaceUv(d, n) || c && c[n + "Uv"], H.uvScale = _.getFaceUvScale(d, n) || c && c[n + "UvScale"], H.uvOffset = _.getFaceUvOffset(d, n) || c && c[n + "UvOffset"], H.uvRotation = _.getFaceUvRotation(d, n) || c && c[n + "uvRotation"], H.uvAnchor = _.getFaceUvAnchor(d, n) || c && c[n + "uvAnchor"];
                    var O = _.getFaceMat(d, n);
                    if (O) {
                        var U = Qj(d, O);
                        d.appendAnchorMatrix3d(U), H.mat = U
                    }
                }
                return H
            },
            Sd = function(Z, v, _, G, J) {
                var i = Z[G];
                if (i) {
                    if (!J(i.transparent)) return;
                    var N = Z.data,
                        n = Z.gv,
                        D = n._buffer,
                        E = n.getTexture(i.texture, N, G),
                        m = n.getTexture(i.blendTexture, N),
                        C = $f.for(v),
                        d = C.directUniforms(),
                        q = C.directAttribs();
                    Gh(v, _, E, i.discardSelectable, D.uv, i.tuv, i.uvOffset, i.uvScale, i.uvRotation, i.uvAnchor, m), Yf(v, _, i.blend, i.light, i.opacity, i.reverseFlip, i.reverseColor, i.reverseCull), i.cs && !n._batchColorDisabled ? (d.uBatchColor = !0, q.aBatchColor = Cs(v, D.batchColor, i.cs, _.aBatchColor, 4)) : d.uDiffuse = i.color || A["color.empty"], q.aPosition = Cs(v, D.vs, i.vs, Y), q.aNormal = Cs(v, D.ns, i.ns, Y), il(v, 0, i.vs.length / 3), i.cs && !n._batchColorDisabled && (d.uBatchColor = !1, ch(v, _.aBatchColor)), Zm(v, _), mn(v, _, E)
                }
            },
            ss = function(P, n, r) {
                ym(P) ? P.forEach(function(q) {
                    ss(q, n, r)
                }) : Sf(P) ? ss(Ml(n, P), n, r) : jl(P) ? P.shape3d ? ss(P.shape3d, n, r) : r.push(P) : r.push(P)
            },
            xc = function() {
                for (var G = 50, y = arguments.length, g = [], p = 0; y > p; p++) g[p] = arguments[p];
                Ye[Wh] = "Time : " + (new Date).toLocaleString() + ", Info :" + g.join(", "), Wh = (Wh + 1) % G, console.error("Failed to create shader.")
            },
            ql = function() {
                var f = new _q.Matrix2d;
                return function(G, U, A, x, Y) {
                    return Y || (Y = f), Y.identity(), x && Y.translate(-x[0], -x[1]), A && Y.scale(A[0], A[1]), G && Y.rotate(G), x && Y.translate(x[0], x[1]), U && Y.translate(U[0], U[1]), Y
                }
            }(),
            Nd = function(C, c, M, n, N, S) {
                var Z, E, b, r, D, F, y, _, s, V, z, u = [n - c, N - M],
                    i = C ? C.length : 0;
                for (b = 0; i > b; b++) {
                    for (r = 2, Z = C[b], D = Z[0], F = Z[1]; r + 1 < Z.length;) {
                        if (y = Z[r], _ = Z[r + 1], E = zm(c, M, n, N, D, F, y, _, !0)) {
                            s = [y - D, _ - F], V = cm(s), s[0] /= V, s[1] /= V, V = Pn(u, s), V = V > 0 ? S : -S, z = [s[0] * V, s[1] * V];
                            break
                        }
                        D = y, F = _, r += 2
                    }
                    if (z) break
                }
                if (z)
                    for (n = c + z[0], N = M + z[1], b = 0; i > b; b++)
                        for (r = 2, Z = C[b], D = Z[0], F = Z[1]; r + 1 < Z.length;) {
                            if (y = Z[r], _ = Z[r + 1], E = zm(c, M, n, N, D, F, y, _, !0)) return [0, 0];
                            D = y, F = _, r += 2
                        }
                return z ? z : [n - c, N - M]
            },
            tg = function(A) {
                return "nearest" === A ? hq.NEAREST : "linear" === A ? hq.LINEAR : A
            },
            Hn = F.graph3d = {
                WebGLConstants: hq
            },
            Ac = function(l, e, d) {
                Wj(E + ".graph3d." + l, e, d)
            },
            em = "~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<6/1!,!*{/mbdpMwVxpmg!,!z/mbdpMwVxpmg!-y/mbdpMwVxpmg)3dfw!>!^j]wVxpmg<{zy/**1/2!-opjujtpQb)5dfw!+!yjsubNNv!+!^j]yjsubNxpmg)!>!mbdpMwVxpmg|!*,,j!<UDFKCP`XPMG`YBN!=!j!<1>j!uoj)spg<mbdpMwVxpmg!4dfw1!?!UDFKCP`XPMG`YBN!gj$!!gjeof$!<*1/2!-opjujtpQb)5dfw!+!yjsubNNv!+!yjsubNxpebit!>!esppDxpebit!QBNXPEBIT`FTV!gfegj$!!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw|*fsvuyfUv)gj<*opjujtpQb)4dfw!>!opjujtpQw!gjeof$!~!1!>>!SFQQJMD`YPC`YBN!gj$!<**1/2!-opjujtpQb)5dfw!+!yjsubNNv)4dfw!>!emspXw<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw!gjeof$!|*ldjQva!%%!yjGva)gj!1!>>!SFQQJMD`YPC`YBN!gj$!<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<^UDFKCP`XPMG`YBN]wVxpmg!3dfw!hojzsbw<^UDFKCP`XPMG`YBN]yjsubNxpmg!5ubn!nspgjov1!?!UDFKCP`XPMG`YBN!gj$!!gjeof$!<esppDxpebit!5dfw!hojzsbw<yjsubNxpebit!5ubn!nspgjov!QBNXPEBIT`FTV!gfegj$!!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<opjujtpQw!4dfw!hojzsbw<emspXw!4dfw!hojzsbw<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNNv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<yjsubNwVv!4ubn!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",
            Md = "~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ!gjeof$!<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg!ftmf$!<*iuqfe!+!iuqfe!+!zujtofEhpGv!+!zujtofEhpGv!.)qyf!.!1/2!>!spudbGhpg!ubpmg!3QYF`HPG!gfegj$!<{/yfusfWw.!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!!EOF`QPPM`MMPSOV$!~<chs/*^j]wVxpmg!-^J]fsvuyfUxpmg)E3fsvuyfu!!>,!chs/eJ!****1/1)3dfw!-^j]wVxpmg)obiUsfubfsh)mmb!%%!***1/2)3dfw!-^j]wVxpmg)obiUttfm)mmb!%%!^j]efmcboFxpmg)!gj|!*,,j!<UDFKCP`XPMG`YBN!=!j!<1>j!uoj)!spg!USBUT`QPPM`MMPSOV$!!1!?!UDFKCP`XPMG`YBN!gj$!!gjeof$!~<zujwjudfmgfSv!+!{zy/spmpDwof!>,!chs/eJ!gjeof$!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!ftmf$!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs.)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!WV`FCVD`FQZU`QBNWOF!gfegj$!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw<*opjujtpQbsfnbDv!.!emspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw|*qbNwoFftVv)!gj!QBNWOF`FTV!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!gjeof$!~<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!!<osvufs!<esbdtje!!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg|!*fwjfdfSxpebit)!gj!QBNXPEBIT`FTV!gfegj$!~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~~<esbdtje|*1/1!>>!x/eJ)gj!gjeof$!<ftvggjEv!>!eJ!ftmf$!~<ftvggjEv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw!gjeof$!<*yfusfWw.)f{jmbnspo!>!F!4dfw!ftmf$!<*2!-1!-1)4dfw!>!F!4dfw!DJIQBSHPIUSP!gfegj$!<*mbnspOw)f{jmbnspo!>!O!4dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~!<osvufs!<*1/2!-1/1!-1/1!-1/1)5dfw!>!spmpDhbsG`mh!|!*uvpldbmc)!gj!gjeof$!~~!<osvufs!<esbdtje!|!****ojNqjmd!-mbdpMw)obiUsfubfsh)mmb!%%!**ybNqjmd!-mbdpMw)obiUttfm)mmb)!>a!^j]sfooJqjmDsfqqjmDv!%%!^j]qjmDypCfmcboFv)!gj<**1/2!-emspXw)5dfw!+!^j]yjsubNsfqqjmDv)4dfw!>!mbdpMw|!*,,j!<SFQQJMD`YPC`YBN!=!j!<1>j!uoj)spg<mbdpMw!4dfw!1!?!SFQQJMD`YPC`YBN!gj$!~~!<esbdtje!|!**sje!-*uofdsfQqjmDv)4dfw)upe!?!*opjujtpQw!-sje)upe)!gj~!<1/2.!>!{/sje!|!*8!=!opjudfsjEqjmDv)!gj!ftmf~!<1/2!>!{/sje!|!*7!=!opjudfsjEqjmDv)!gj!ftmf~!<1/2.!>!z/sje!|!*6!=!opjudfsjEqjmDv)!gj!ftmf~!<1/2!>!z/sje!|!*5!=!opjudfsjEqjmDv)!gj!ftmf~!<1/2.!>!y/sje!|!*4!=!opjudfsjEqjmDv)!gj!ftmf~!<1/2!>!y/sje!|!*3!=!opjudfsjEqjmDv)!gj<*1/1!-1/1!-1/1)4dfw!>!sje!4dfw|!*1!?!opjudfsjEqjmDv)!gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw<uvpldbmc!mppc!nspgjov!gjeof$!<^UDFKCP`XPMG`YBN]wVxpmg!3dfw!hojzsbw<^UDFKCP`XPMG`YBN]efmcboFxpmg!mppc!nspgjov<^UDFKCP`XPMG`YBN]fsvuyfUxpmg!E3sfmqnbt!nspgjov!1!?!UDFKCP`XPMG`YBN!gj$!!gjeof$!!gjeof$!!~~<*1/2!-*Gqjn!-2spmpd!-1spmpd)yjn)5dfw!osvufs<*1/2!,!uoJqjn!-sjEfmqnbt!-qbNwof)WVfcvDsbfojmjc!>!2spmpd!4dfw|!ftmf!~<*1/2!-1spmpd)5dfw!osvufs|!*1/1!>>!Gqjn)!gj<*uoJqjn!-sjEfmqnbt!-qbNwof)WVfcvDsbfojmjc!>!1spmpd!4dfw<*qjn)sppmg!>!uoJqjn!ubpmg<*qjn)udbsg!>!Gqjn!ubpmg<*mfwfMqjNybn`WVfcvd!-1n!-*ttfoihvps)qjNpUttfoihvps)qnbmd!>!qjn!ubpmg|!*ttfoihvps!ubpmg!-sjEfmqnbt!4dfw!-qbNwof!E3sfmqnbt)WVfcvDfsvuyfu!5dfw!~<qjn!osvufs~<*ttfoihvps!+!72/2)3hpm!+!1/3!.!>!qjn|!ftmf!~<6n!,!*7s!.!6s)!0!*6n!.!7n)!+!*ttfoihvps!.!6s)!>!qjn|!*7s!>?!ttfoihvps)!gj!ftmf!~<5n!,!*6s!.!5s)!0!*5n!.!6n)!+!*ttfoihvps!.!5s)!>!qjn|!*6s!>?!ttfoihvps)!gj!ftmf!~<2n!,!*5s!.!2s)!0!*2n!.!5n)!+!*ttfoihvps!.!2s)!>!qjn|!*5s!>?!ttfoihvps)!gj!ftmf!~<1n!,!*2s!.!1s)!0!*1n!.!2n)!+!*ttfoihvps!.!1s)!>!qjn|!*2s!>?!ttfoihvps)!gj<1/1!>!qjn!ubpmg|!*ttfoihvps!ubpmg)qjNpUttfoihvps!ubpmg!1/5!7n!fojgfe$!9411/1!7w!fojgfe$!23/1!7s!fojgfe$!1/4!6n!fojgfe$!721/1!6w!fojgfe$!614/1!6s!fojgfe$!1/3!5n!fojgfe$!751/1!5w!fojgfe$!5/1!5s!fojgfe$!1/2!.!2n!fojgfe$!783/1!2w!fojgfe$!9/1!2s!fojgfe$!1/3!.!1n!fojgfe$!:44/1!1w!fojgfe$!1/2!1s!fojgfe$!~<*z/g!-nc!-nu)yjn!osvufs<*y/g!-sc!-mc)yjn!>!nc!4dfw<*y/g!-su!-mu)yjn!>!nu!4dfw<chs/**wv!-qbNwof)E3fsvuyfu)sbfojMpUmfyfUqbNwof!>!mc!4dfw<f{jTmfyfu!>.!y/wv<chs/**wv!-qbNwof)E3fsvuyfu)sbfojMpUmfyfUqbNwof!>!sc!4dfw<f{jTmfyfu!>,!z/wv<chs/**wv!-qbNwof)E3fsvuyfu)sbfojMpUmfyfUqbNwof!>!su!4dfw<f{jTmfyfu!>,!y/wv<chs/**wv!-qbNwof)E3fsvuyfu)sbfojMpUmfyfUqbNwof!>!mu!4dfw<f{jTmfyfu!>+!wv<*f{jTfdbg!+!1/3!.!f{jTfmjUybn`WVfcvd!-1/1)ybn!+!1/4!>,!y/wv<f{jTfmjUojn`WVfcvd!+!1/3!+!uoJsfumjg!>,!z/wv~<f{jTfmjUybn`WVfcvd!+!1/3!>,!z/wv|!*mfwfMqjNybn`WVfcvd!=!uoJqjn)!gj<f{jTfdbg!+!fdbg!>,!y/wv~<1/4!>.!fdbg<f{jTfdbg!>,!z/wv|!*1/3!?!fdbg)!gj<g!.!6/1!>,!wv<*wv)udbsg!>!g!3dfw<*1/2!.!f{jTfdbg)!+!*fdbg!-opjudfsje)WVufh!>!wv!3dfw<*f{jTfmjUybn`WVfcvd!+!1/4)!0!1/2!>!f{jTmfyfu!ubpmg<*uoJqjn)3qyf!>!f{jTfdbg!ubpmg<*mfwfMqjNojn`WVfcvd!-uoJqjn)ybn!>!uoJqjn<*1/1!-uoJqjn!.!mfwfMqjNojn`WVfcvd)ybn!>!uoJsfumjg!ubpmg<*opjudfsje)fdbGufh!>!fdbg!ubpmg|!*uoJqjn!ubpmg!-opjudfsje!4dfw!-qbNwof!E3sfmqnbt)WVfcvDsbfojmjc!4dfw!~<*1/2!,!wv)!+!6/1!osvufs~<*{/opjudfsje)tcb!0!*z/opjudfsje!-y/opjudfsje)3dfw!>!wv|!ftmf!~<*z/opjudfsje)tcb!0!*{/opjudfsje!-y/opjudfsje!.)3dfw!>!wv|!*1/5!>>!fdbg)!gj!ftmf!~<*y/opjudfsje)tcb!0!*z/opjudfsje!-{/opjudfsje!.)3dfw!>!wv|!*1/4!>>!fdbg)!gj!ftmf!~<*{/opjudfsje)tcb!0!*z/opjudfsje!-y/opjudfsje!.)3dfw!>!wv|!*1/3!>>!fdbg)!gj!ftmf!~<*z/opjudfsje)tcb!0!*{/opjudfsje!.!-y/opjudfsje!.)3dfw!>!wv|!*1/2!>>!fdbg)!gj!ftmf!~<*y/opjudfsje)tcb!0!*z/opjudfsje!-{/opjudfsje)3dfw!>!wv|!*1/1!>>!fdbg)!gj<wv!3dfw|!*fdbg!ubpmg!-opjudfsje!4dfw)WVufh!3dfw!~<fdbg!osvufs~<1/5!;!1/2!@!1/1!?!z/opjudfsje!>!fdbg!ftmf!<1/6!;!1/3!@!1/1!?!{/opjudfsje!>!fdbg!*z/opjudfsjEtcb!?!{/opjudfsjEtcb)!gj|!ftmf!~<1/5!;!1/2!@!1/1!?!z/opjudfsje!>!fdbg!ftmf!<1/4!;!1/1!@!1/1!?!y/opjudfsje!>!fdbg*z/opjudfsjEtcb!?!y/opjudfsjEtcb)!gj|!*{/opjudfsjEtcb!?!y/opjudfsjEtcb)!gj<1/2!.!>!fdbg!ubpmg<*opjudfsje)tcb!>!opjudfsjEtcb!4dfw|!*opjudfsje!4dfw)fdbGufh!ubpmg!1/72!f{jTfmjUojn`WVfcvd!fojgfe$!1/763!f{jTfmjUybn`WVfcvd!fojgfe$!1/5!mfwfMqjNojn`WVfcvd!fojgfe$!1/9!mfwfMqjNybn`WVfcvd!fojgfe$!WV`FCVD`FQZU`QBNWOF!gfegj$!~<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!gjeof$!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!ftmf$!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!WV`FCVD`FQZU`QBNWOF!gfegj$!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!QBNWOF`FTV!gfegj$!!gjeof$!~!!!!!!!!gjeof$!!!!!!!!!!!!<*qe!-*z/f{jTmfyfu!-E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!osvufs!!!!!!!!!!!!!!!!ftmf$!!!!!!!!!!!!<*1/:!0!1/2)!+!*!!!!!!!!!!!!!!!*qe!-*z/f{jTmfyfu!-yyz/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-yyy/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-zyz/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-zyy/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-yzz/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-yzy/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-zzz/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*qe!-*z/f{jTmfyfu!-zzy/uftggp!,!E4ec)WVpUfcvd!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!)!osvufs!!!!!!!!!!!!!!!!<z/f{jTmfyfu!+!tvjebSxpebit!+!*2!-2!.)3dfw!>!uftggp!3dfw!!!!!!!!!!!!!!!!*UGPT`GDQ`FQZU`QBNXPEBIT)efojgfe!}}!*GDQ`FQZU`QBNXPEBIT)efojgfe!gj$!!!!!!!!!!!!<*opjujtpQpUuihjm)f{jmbnspo!>!E4ec!4dfw!!!!!!!!!!!!<tbjCxpebit!>,!qe!!!!!!!!<*sbfObsfnbDxpebit!.!sbGbsfnbDxpebit)!0!*sbfObsfnbDxpebit!.!*opjujtpQpUuihjm)iuhofm)!>!qe!ubpmg!!!!!!!!!!!!<{zy/esppDxpebit!>!opjujtpQpUuihjm!4dfw!!!!!!!!!!!!<**1/3!-1/5)3dfw!+!f{jTqbNxpebit)!0!*1/2)3dfw!>!f{jTmfyfu!3dfw!!!!!!!!!!!!|!*sbGbsfnbDxpebit!ubpmg!-sbfObsfnbDxpebit!ubpmg!-esppDxpebit!5dfw!-tvjebSxpebit!ubpmg!-tbjCxpebit!ubpmg!-f{jTqbNxpebit!3dfw!-qbNxpebit!E3sfmqnbt)xpebiTuojpQufh!ubpmg!!!!!!!!~!!!!!!!!<*68/1!-684/1)3dfw!,!sbobmq!+!*63/1!-632/1)3dfw!osvufs!!!!!!!!!!!!~!!!!!!!!!!!!<1/3!.!Zohjt!+!{/w!>!z/sbobmq!!!!!!!!!!!!!!!!<1/3!,!Zohjt!+!1/3!,!y/w!>!y/sbobmq!!!!!!!!!!!!!!!!<*z/w)ohjt!>!Zohjt!ubpmg!!!!!!!!!!!!!!!!|!*foPutpnmb!>?!z/Wtcb)!gj!ftmf!~!!!!!!!!!!!!<Yohjt!+!1/3!,!Yohjt!+!{/w!>!y/sbobmq!!!!!!!!!!!!!!!!<*y/w)ohjt!>!Yohjt!ubpmg!!!!!!!!!!!!!!!!|!*foPutpnmb!>?!y/Wtcb)!gj!ftmf!~!!!!!!!!!!!!<y/w!.!1/5!>!y/sbobmq!!!!!!!!!!!!!!!!!!!!*1/1!?!{/w)!gj!!!!!!!!!!!!!!!!|!*foPutpnmb!>?!{/Wtcb)!gj!!!!!!!!!!!!<mfyfUButpnmb!.!1/2!>!foPutpnmb!ubpmg!!!!!!!!!!!!<Zf{jTmfyfu!+!6/2!>!mfyfUButpnmb!ubpmg!!!!!!!!!!!!<zy/w!>!sbobmq!3dfw!!!!!!!!!!!!<*Zf{jTmfyfu!+!1/3!.!1/2)!+!fcvDpUfmbdt!>+!w!!!!!!!!!!!!<fcvDpUfmbdt!>+!Wtcb!!!!!!!!!!!!<**{/Wtcb!-z/Wtcb)ybn!-y/Wtcb)ybn!0!1/2!>!fcvDpUfmbdt!ubpmg!!!!!!!!!!!!<*w)tcb!>!Wtcb!4dfw!!!!!!!!!!!!|!*Zf{jTmfyfu!ubpmg!-w!4dfw)WVpUfcvd!3dfw!!!!!!!!~!!!!!!!!<xpebit!osvufs!!!!!!!!!!!!~!!!!!!!!!!!!gjeof$!!!!!!!!!!!!<*{/esppDxpebit!-zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!>!xpebit!!!!!!!!!!!!!!!!ftmf$!!!!!!!!!!!!<*1/:!0!1/2)!+!*!!!!!!!!!!!!!!!*{/esppDxpebit!-*2ze!-2ye)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*2ze!-1/1)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*2ze!-1ye)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1/1!-2ye)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1/1!-1ye)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1ze!-2ye)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1ze!-1/1)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1ze!-1ye)3dfw!,!zy/esppDxpebit!-f{jTqbNxpebit!-qbNxpebit)qsfMxpebiTE3fsvuyfu!!!!!!!!!!!!!!!!!!!!)!>!xpebit!!!!!!!!!!!!!!!!<tvjebSxpebit!+!z/f{jTmfyfu!,!>!2ze!ubpmg!!!!!!!!!!!!!!!!<tvjebSxpebit!+!y/f{jTmfyfu!,!>!2ye!ubpmg!!!!!!!!!!!!!!!!<tvjebSxpebit!+!z/f{jTmfyfu!.!>!1ze!ubpmg!!!!!!!!!!!!!!!!<tvjebSxpebit!+!y/f{jTmfyfu!.!>!1ye!ubpmg!!!!!!!!!!!!!!!!<f{jTqbNxpebit!0!*1/2)3dfw!>!f{jTmfyfu!3dfw!!!!!!!!!!!!!!!!*UGPT`GDQ`FQZU`QBNXPEBIT)efojgfe!gjmf$!!!!!!!!!!!!<*1/:!0!1/2)!+!*!!!!!!!!!!!!!!!*{/esppDxpebit!-*2ze!-2ye)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*2ze!-1/1)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*2ze!-1ye)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1/1!-2ye)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1/1!-1ye)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1ze!-2ye)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1ze!-1/1)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!,!*{/esppDxpebit!-*1ze!-1ye)3dfw!,!zy/esppDxpebit!-qbNxpebit)fsbqnpDE3fsvuyfu!!!!!!!!!!!!!!!!!!!!)!>!xpebit!!!!!!!!!!!!!!!!<tvjebSxpebit!+!z/f{jTmfyfu!,!>!2ze!ubpmg!!!!!!!!!!!!!!!!<tvjebSxpebit!+!y/f{jTmfyfu!,!>!2ye!ubpmg!!!!!!!!!!!!!!!!<tvjebSxpebit!+!z/f{jTmfyfu!.!>!1ze!ubpmg!!!!!!!!!!!!!!!!<tvjebSxpebit!+!y/f{jTmfyfu!.!>!1ye!ubpmg!!!!!!!!!!!!!!!!<f{jTqbNxpebit!0!*1/2)3dfw!>!f{jTmfyfu!3dfw!!!!!!!!!!!!!!!!*GDQ`FQZU`QBNXPEBIT)efojgfe!gj$!!!!!!!!!!!!|!*utfUnvutvsg)!gj!!!!!!!!!!!!<*dfWutfUnvutvsg)mmb!>!utfUnvutvsg!mppc!!!!!!!!!!!!<*1/2!>=!{/esppDxpebit!-nvutvsGoj)3dfwc!>!dfWutfUnvutvsg!3dfwc!!!!!!!!!!!!<*dfWnvutvsGoj)mmb!>!nvutvsGoj!mppc!!!!!!!!!!!!<*1/2!>=!z/esppDxpebit!-1/1!>?!z/esppDxpebit!-1/2!>=!y/esppDxpebit!-1/1!>?!y/esppDxpebit)!5dfwc!>!dfWnvutvsGoj!5dfwc!!!!!!!!!!!!<tbjCxpebit!>,!{/esppDxpebit!!!!!!!!!!!!<x/esppDxpebit!>0!{zy/esppDxpebit!!!!!!!!!!!!<1/2!>!xpebit!ubpmg!!!!!!!!!!!!|!*esppDxpebit!5dfw!-tvjebSxpebit!ubpmg!-tbjCxpebit!ubpmg!-f{jTqbNxpebit!3dfw!-qbNxpebit!E3sfmqnbt)xpebiTufh!ubpmg!!!!!!!!~!!!!!!!!<d!osvufs!!!!!!!!!!!!<*y/g!-c!-b)yjn!>!d!ubpmg!!!!!!!!!!!!<*z/g!-us!-cs)yjn!>!c!ubpmg!!!!!!!!!!!!<*z/g!-um!-cm)yjn!>!b!ubpmg!!!!!!!!!!!!<*6/1!,!f{jt!+!wv)udbsg!>!g!3dfw!!!!!!!!!!!!<*fsbqnpd!-zz/uftggp!+!f{jTmfyfu!,!WVejpsuofd!-tiuqfe)fsbqnpDE3fsvuyfu!>!us!ubpmg!!!!!!!!!!!!<*fsbqnpd!-yz/uftggp!+!f{jTmfyfu!,!WVejpsuofd!-tiuqfe)fsbqnpDE3fsvuyfu!>!cs!ubpmg!!!!!!!!!!!!<*fsbqnpd!-zy/uftggp!+!f{jTmfyfu!,!WVejpsuofd!-tiuqfe)fsbqnpDE3fsvuyfu!>!um!ubpmg!!!!!!!!!!!!<*fsbqnpd!-yy/uftggp!+!f{jTmfyfu!,!WVejpsuofd!-tiuqfe)fsbqnpDE3fsvuyfu!>!cm!ubpmg!!!!!!!!!!!!<f{jt!0!*6/1!,!f{jt!+!wv)sppmg!>!WVejpsuofd!3dfw!!!!!!!!!!!!<f{jt!0!*1/2)3dfw!>!f{jTmfyfu!3dfw!!!!!!!!!!!!<*1/2!-1/1)3dfw!>!uftggp!3dfw!utopd!!!!!!!!!!!!|!*fsbqnpd!ubpmg!-wv!3dfw!-f{jt!3dfw!-tiuqfe!E3sfmqnbt)qsfMxpebiTE3fsvuyfu!ubpmg!!!!!!!!~!!!!!!!!<***wv!-tiuqfe)E3fsvuyfu)iuqfEpUBCHSldbqov!-fsbqnpd)qfut!osvufs!!!!!!!!!!!!|!*fsbqnpd!ubpmg!-wv!3dfw!-tiuqfe!E3sfmqnbt)fsbqnpDE3fsvuyfu!ubpmg!!!!!!!!~!!!!!!!!<*tspudbGldbqoV!-w)upe!osvufs|!*w!5dfw!oj!utopd)iuqfEpUBCHSldbqov!ubpmg!!!!!!!!<*/2!-tspudbGldbQ)5dfw!0!fmbdtoxpEldbqoV!>!tspudbGldbqoV!5dfw!utopd!!!!!!!!<*/763!!-/763!+!/763!-/763!+!/763!+!/763)4dfw!>!tspudbGldbQ!4dfw!utopd!!!!!!!!<*2!hojevmdyf)!opjudbsg!?.!2//1!00!</763!0!/663!>!fmbdtoxpEldbqoV!ubpmg!utopd!!!!!!!!<*2!hojevmdoj)!2//1!?.!opjudbsg!00!</663!0!/763!>!fmbdtqVldbQ!ubpmg!utopd!!!!!!!!<esppDxpebit!5dfw!hojzsbw<fwjfdfSxpebit!mppc!nspgjov<tvjebSxpebit!ubpmg!nspgjov<tbjCxpebit!ubpmg!nspgjov<zujtofuoJxpebit!ubpmg!nspgjov<f{jTxpebit!3dfw!nspgjov<qbNxpebit!E3sfmqnbt!nspgjov<mmvDxpebit!mppc!nspgjov!QBNXPEBIT`FTV!gfegj$!!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov!ftmf$!<zujtofEhpGv!ubpmg!nspgjov!3QYF`HPG!gfegj$!<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<*6/1!-6/1!-6/1)4dfw!>!ybNqjmd!4dfw!utopd<*6/1.!-6/1.!-6/1.)4dfw!>!ojNqjmd!4dfw!utopd<^SFQQJMD`YPC`YBN]yjsubNsfqqjmDv!5ubn!nspgjov<^SFQQJMD`YPC`YBN]sfooJqjmDsfqqjmDv!mppc!nspgjov<^SFQQJMD`YPC`YBN]qjmDypCfmcboFv!mppc!nspgjov!1!?!SFQQJMD`YPC`YBN!gj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<emspXw!4dfw!hojzsbw<opjujtpQbsfnbDv!4dfw!nspgjov<yjsubNxfjWv!5ubn!nspgjov!gjeof$!!gjeof$!<qbNwoFv!fcvDsfmqnbt!nspgjov!ftmf$!<ttfoihvps!ubpmg!nspgjov<qbNwoFv!E3sfmqnbt!nspgjov!WV`FCVD`FQZU`QBNWOF!gfegj$!<zujwjudfmgfSv!ubpmg!nspgjov<qbNwoFftVv!mppc!nspgjov!QBNWOF`FTV!gfegj$!<opjujtpQw!4dfw!hojzsbw<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<uofdsfQqjmDv!ubpmg!nspgjov<opjudfsjEqjmDv!uoj!nspgjov<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";
        fp(z, {
            setBatchInfo: function(_, X) {
                Ip[_] = X
            },
            getBatchInfo: function(X) {
                return Ip[X]
            },
            getBatchInfoMap: function() {
                return Ip
            },
            setBatchInfoMap: function(L) {
                Ip = L
            }
        }, !0);
        var sm = [1, 1, 1],
            _r = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
            Hb = [1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0],
            jh = [-.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5],
            Qe = [.5, .5, -.5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5],
            xj = [.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5],
            Ng = [.5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5],
            Pr = [.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5],
            Tp = [-.5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5],
            Vi = function(P, j) {
                var V = P._40Q;
                V.each(function(N) {
                    N.ivBatch(j)
                })
            },
            Po = function(T, $, X) {
                var E = X._id,
                    Y = $[E];
                if (Y) {
                    var u = Y.batch,
                        q = T[u],
                        V = q.ds,
                        e = Y.index;
                    if (q.invalidate = !0, delete $[E], V.splice(e, 1), Ci(V)) return delete T[u], void 0;
                    for (var d = Y.begin, y = Y.size, O = 3 * d, c = 3 * y, b = 4 * d, B = 4 * y, a = q.vs, P = q.ps, h = q.uv, I = q.cs, L = q.bs, S = q.rs, U = q.ns, p = q.ls; e < V.length; e++) Y = $[V[e]._id], Y.index--, Y.begin -= y;
                    a.splice(O, c), P.splice(b, B), h && h.splice(2 * d, 2 * y), I && I.splice(b, B), L && L.splice(O, c), S && S.splice(d, y), U && U.splice(O, c), p && p.splice(d, y)
                }
            },
            oo = function(X, i, G, I, L) {
                if (!I) return Y;
                var j = i[I];
                if (!j) {
                    var o = L.getBatchInfo(I) || Ce,
                        E = o.image ? [] : Y;
                    j = i[I] = {
                        vs: [],
                        ns: [],
                        uv: E,
                        cs: E ? Y : o.color ? Y : [],
                        bs: o.blend ? [] : Y,
                        ps: [],
                        rs: o.brightness ? [] : Y,
                        ds: []
                    }
                }
                return j.invalidate = !0, X[G._id] = {
                    index: j.ds.length,
                    begin: j.vs.length / 3,
                    batch: I
                }, j.ds.push(G), j
            },
            gn = function(V, y) {
                return y != Y && 1 !== y ? [V[0] * y, V[1] * y, V[2] * y, V[3]] : V
            },
            gm = function(b) {
                var U = b.shapeModel;
                U || (U = Ml(b)), U && (U._ctlineModel = [], U._lineModel = O)
            },
            Dr = function() {
                var u;
                return function(U, t, I) {
                    var x = U.getData3dUI(t),
                        W = x.shapeModel;
                    if (W || (W = Ml(x)), W || !x.shapeName) {
                        var v, L = t.s("wf.combineTriangle");
                        if (I.geometry) {
                            if (!W && (t instanceof F.Node && !(t instanceof F.Shape) ? (u || (u = {
                                    vs: tm,
                                    is: Lp,
                                    uv: nj
                                }), W = u) : W = [x.left, x.front, x.right, x.back, x.top, x.bottom], !W)) return O;
                            if (L) {
                                var A = t.s("wf.normEpsilon");
                                isNaN(A) && (A = 2), L = 0 | Math.min(3, Math.max(1, isNaN(L) ? 1 : L)), v = Od[L - 1](W, x, 180 / (Math.PI * A))
                            } else v = qk(W, x);
                            if (!v || 0 === v.length) return
                        } else v = I.short ? Ve : Hr;
                        var y, w = U.getBrightness(t),
                            m = t.s("bloom"),
                            n = t.s("3d.reflectable"),
                            $ = Wb(I.color || "white"),
                            d = $[3] < 1,
                            Y = Math.ceil(I.width) || 1,
                            X = t.s("3d.clipbox") ? Cm : t.s("3d.clipbox.mask"),
                            o = t.getRenderLayer(),
                            _ = U._40Q.get(o),
                            S = _.wireframeIndexMap,
                            g = _.wireframeModelMap,
                            p = t.s("batch");
                        y = p ? (d ? "T" : "O") + p : (d ? "T" : "O") + (m ? "_1" : "_0") + (n ? "1_" : "0_") + X + "_" + Y;
                        var V = g[y];
                        V || (V = g[y] = {
                            vs: [],
                            cs: [],
                            ps: [],
                            ds: [],
                            T: d,
                            B: m,
                            clipboxMask: X,
                            reflectable: !!n,
                            W: Y,
                            batch: p
                        }), V.invalidate = !0;
                        var b = V.vs,
                            z = V.cs,
                            j = V.ds,
                            a = S[t._id] = {
                                index: j.length,
                                begin: b.length / 3,
                                batch: y
                            };
                        j.push(t);
                        var i = x.mat;
                        t instanceof F.Edge || !(!i || !I.geometry && t instanceof F.Shape) || (i = Qj(t, I.mat), t.appendAnchorMatrix3d(i)), um(b, i, v);
                        var h = a.size = b.length / 3 - a.begin;
                        kf(z, gn($, w), h)
                    }
                }
            }(),
            xh = function(D, V, S, k, e, u, J, q, x) {
                var H = D.getBrightness(V);
                H == Y && (H = 1);
                var v = gn(Wb(k), H),
                    P = v[3] < 1;
                u = Math.ceil(u) || 1;
                var a = (P ? "T" : "O") + u;
                if (J) {
                    var r = J[0],
                        i = (J[1] || r) + r;
                    a += "-" + r + "-" + i, x && (a += "-" + gr(x) + "-" + H, x = gn(Wb(x), H))
                }
                var O = V.getRenderLayer(),
                    m = D._40Q.get(O),
                    g = m.polylineIndexMap,
                    z = m.polylineModelMap,
                    M = z[a];
                M || (M = z[a] = {
                    vs: [],
                    cs: [],
                    ps: [],
                    ds: [],
                    ls: J ? [] : Y,
                    T: P,
                    W: u
                }, J && (M.D = r, M.G = i, M.A = x)), M.invalidate = !0;
                var L, W = M.vs,
                    E = M.cs,
                    N = M.ds,
                    R = M.ls,
                    A = g[V._id] = {
                        index: N.length,
                        begin: W.length / 3,
                        batch: a
                    };
                N.push(V), ks(W, S);
                var T, j = A.size = W.length / 3 - A.begin,
                    t = S.length,
                    c = 0,
                    f = [];
                if (J || e)
                    for (L = 0; t > L; L += 6) T = cm([S[L], S[L + 1], S[L + 2]], [S[L + 3], S[L + 4], S[L + 5]]), f.push(T), c += T;
                if (c && e) {
                    var _, n = gn(Wb(e), H),
                        d = [n[0] - v[0], n[1] - v[1], n[2] - v[2], n[3] - v[3]],
                        Q = 0;
                    for (L = 0; t > L; L += 6) _ = Q / c, kf(E, [v[0] + d[0] * _, v[1] + d[1] * _, v[2] + d[2] * _, v[3] + d[3] * _], 1), Q += f[L / 6], _ = Q / c, kf(E, [v[0] + d[0] * _, v[1] + d[1] * _, v[2] + d[2] * _, v[3] + d[3] * _], 1)
                } else kf(E, v, j);
                if (J)
                    for (Q = q || 0, L = 0; t > L; L += 6) R.push(Q), Q += f[L / 6], R.push(Q)
            },
            Tc = function(H, D, j) {
                if (D) {
                    var T = 4 * D.begin,
                        e = j[D.batch].ps;
                    if (e[T] !== H[0] || e[T + 1] !== H[1] || e[T + 2] !== H[2] || e[T + 3] !== H[3]) {
                        for (var m = 0; m < D.size; m++) e[T++] = H[0], e[T++] = H[1], e[T++] = H[2], e[T++] = H[3];
                        e._invalidateThisFrame = !0
                    }
                }
            },
            $m = function() {
                var N = new F.Math.Vector3,
                    V = new F.Math.Vector3;
                return function(j, e) {
                    var O = e + ["32"],
                        o = j[e],
                        Y = j[O];
                    if (o) {
                        if (z.extractBatchTranslation && "vs" === e) {
                            V.set(0, 0, 0);
                            for (var D = o.length, l = 0; D > l; l += 3) V.add(N.fromArray(o, l));
                            V.divideScalar(D / 3);
                            for (var b = V.x, R = V.y, q = V.z, C = new Array(D), l = 0; D > l; l += 3) C[l] = o[l] - b, C[l + 1] = o[l + 1] - R, C[l + 2] = o[l + 2] - q;
                            o = C, j.translate = [b, R, q]
                        }
                        Y && Y.length === o.length ? (Y.set(o), Y._bufId = null) : j[O] = new Kh(o)
                    } else delete j[O]
                }
            }(),
            Le = function(f, o, u, n, e, R, y, M) {
                if (ym(u)) u.forEach(function(v) {
                    Le(f, o, v, n, e, R, y, M)
                });
                else if (Sf(u)) Le(f, o, Ml(n, u), n, e, R, y, M);
                else if (jl(u)) {
                    var D, x = Kg(u.mat, o, f),
                        b = Kg(u.s3, o, f),
                        h = Kg(u.t3, o, f),
                        Q = Kg(u.r3, o, f);
                    if ((b || Q || h || x) && (D = hb(x, b, Q, Kg(u.rotationMode, o, f), h), R.push(D)), u.shape3d) Le(f, o, u.shape3d, n, e, R, y, u);
                    else {
                        var v = n.s;
                        M = M || Ce;
                        var T = R[0],
                            E = R.length,
                            K = v("shape3d.color", u.color, M.color);
                        if (e || (e = v("shape3d.blend", u.blend, M.blend)), E > 1) {
                            T = fj(T);
                            for (var i = 1; E > i; i++) Qn(T, T, R[i])
                        }
                        var B = T ? Yq(T) : Y;
                        u.vs && v(sh, u.visible, M.visible) && _k(T, y, u.vs, u.uv, u.is, u.ns, B, e, K), u.top_vs && v(vp, u.topVisible, M.topVisible) && _k(T, y, u.top_vs, u.top_uv, u.top_is, u.top_ns, B, e, v("shape3d.top.color", u.topColor, M.topColor) || K), u.bottom_vs && v(Ql, u.bottomVisible, M.bottomVisible) && _k(T, y, u.bottom_vs, u.bottom_uv, u.bottom_is, u.bottom_ns, B, e, v("shape3d.bottom.color", u.bottomColor, M.bottomColor) || K), u.from_vs && v(Ho, u.fromVisible, M.fromVisible) && _k(T, y, u.from_vs, u.from_uv, u.from_is, u.from_ns, B, e, v("shape3d.from.color", u.fromColor, M.fromColor) || K), u.to_vs && v(vf, u.toVisible, M.toVisible) && _k(T, y, u.to_vs, u.to_uv, u.to_is, u.to_ns, B, e, v("shape3d.to.color", u.toColor, M.toColor) || K)
                    }
                    D && R.pop()
                }
            },
            _k = function(R, s, l, Q, n, e, W, f, d) {
                var Z, U = s.cs,
                    D = s.uv,
                    N = s.bs,
                    $ = s.ns,
                    m = s.vs;
                if (e && 0 !== e.length || (e = Ze(l, n)), n) {
                    Z = n.length;
                    for (var G = 0; Z > G; G++) {
                        var M = n[G],
                            z = 3 * M;
                        um(m, R, [l[z], l[z + 1], l[z + 2]]), um($, W, [e[z], e[z + 1], e[z + 2]]), D && ks(D, [Q[2 * M], Q[2 * M + 1]])
                    }
                } else Z = l.length / 3, um(m, R, l), um($, W, e), D && ks(D, Q);
                U && kf(U, d, Z), N && (f ? ec(N, f, Z) : ks(N, sm, Z))
            },
            kl = function(M, q, u, w) {
                w ? Le(M.gv, M.data, w, M, M.getBodyColor(), [q], u) : (Ur(M, _i, q, u), Ur(M, rj, q, u), Ur(M, ae, q, u), Ur(M, Ad, q, u), Ur(M, vi, q, u), Ur(M, Ei, q, u), Ur(M, "csg", q, u))
            },
            Ur = function(S, J, K, j) {
                var o = S[J];
                if (o) {
                    var c = o.tuv;
                    if (c) {
                        var A = o.uvScale,
                            G = o.uvOffset,
                            O = o.uvRotation,
                            Z = o.uvAnchor;
                        if (A || G || O) {
                            var D, I, e, P = ql(O, G, A, Z),
                                $ = P.a,
                                M = P.b,
                                C = P.c,
                                U = P.d,
                                q = P.tx,
                                z = P.ty,
                                Q = c.length;
                            for (e = 0; Q > e; e += 2) D = c[e], I = c[e + 1], c[e] = $ * D + C * I + q, c[e + 1] = M * D + U * I + z
                        }
                    }
                    _k(K, j, o.vs, c, Y, Y, K ? Yq(K) : Y, o.blend, o.color)
                }
            },
            _o = function(D, R, B, I, h, k, u, t) {
                var c, l = B.cs,
                    s = B.uv,
                    n = B.bs,
                    v = B.vs,
                    K = B.ns,
                    $ = Ze(t);
                if (D.getFaceVisible(R, u)) {
                    var L = D.getFaceMat(R, u);
                    if (L && (h = Qj(R, L), k = Yq(h)), um(v, h, t), um(K, k, $), l && kf(l, D.getFaceColor(R, u), 6), s) {
                        var U = D.getFaceUv(R, u) || I[u + "Uv"],
                            b = D.getFaceUvScale(R, u) || I[u + "UvScale"],
                            X = D.getFaceUvOffset(R, u) || I[u + "UvOffset"],
                            M = D.getFaceUvRotation(R, u) || I[u + "UvRotation"],
                            w = D.getFaceUvAnchor(R, u) || I[u + "UvAnchor"];
                        U = U ? [U[6], U[7], U[0], U[1], U[2], U[3], U[2], U[3], U[4], U[5], U[6], U[7]] : Hb;
                        var m = U[0],
                            H = U[1],
                            E = U[2],
                            Y = U[3],
                            x = U[4],
                            o = U[5],
                            J = U[6],
                            N = U[7],
                            V = U[8],
                            d = U[9],
                            Z = U[10],
                            F = U[11];
                        if (b || X || M || w) {
                            var q = ql(M, X, b, w),
                                g = q.a,
                                r = q.b,
                                p = q.c,
                                y = q.d,
                                j = q.tx,
                                S = q.ty;
                            m = g * m + p * H + j, H = r * m + y * H + S, E = g * E + p * Y + j, Y = r * E + y * Y + S, x = g * x + p * o + j, o = r * x + y * o + S, J = g * J + p * N + j, N = r * J + y * N + S, V = g * V + p * d + j, d = r * V + y * d + S, Z = g * Z + p * F + j, F = r * Z + y * F + S
                        }
                        s.push(m, H, E, Y, x, o, J, N, V, d, Z, F)
                    }
                    n && (c = D.getBodyColor(R) || D.getFaceBlend(R, u), c ? ec(n, c, 6) : ks(n, sm, 6))
                }
            },
            Co = function(L, h, m, J) {
                var m = L._picking ? L.pickColorMap : null,
                    T = L.getGL(),
                    c = L._prg,
                    b = L._buffer;
                if (!Mq(h)) {
                    Yb(L, _r), wi(T, c);
                    for (var P in h) {
                        var M, $, _, x, U = h[P];
                        if (U.batch) {
                            var E = L.getBatchInfo(U.batch) || Ce;
                            M = E.wfBloom === O ? E.bloom : E.wfBloom, $ = E.wfReflectable === O ? E.reflectable : E.wfReflectable, _ = E.wfClipboxMask === O ? E.clipboxMask : E.wfClipboxMask, x = E.width
                        } else M = U.B, $ = U.reflectable, _ = U.clipboxMask, x = U.W;
                        if (!(J && !U.T || !J && U.T || L.isReflecting(T) && $ === !1)) {
                            U.invalidate ? (U.invalidate = !1, $m(U, "vs"), $m(U, "cs"), $m(U, "ls"), $m(U, "ps")) : m && U.ps && U.ps._invalidateThisFrame && (U.ps._invalidateThisFrame = !1, $m(U, "ps"));
                            var S = U.translate;
                            S && Yb(L, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, S[0], S[1], S[2], 1]);
                            var W = U.vs32,
                                l = m ? U.ps32 : U.cs32;
                            Uo(T, c, x, Y, b.vs, W);
                            var I = $f.for(T),
                                t = I.directUniforms(),
                                d = I.directAttribs(),
                                q = U.D,
                                k = !L._dashDisabled && q;
                            t.uAlphaTest = A.alphaTest, T._blooming && !M && (t.blackout = !0), xe(L, t, _ === O ? Jh : _), k && (t.uDash = !0, t.uDashDistance = q, t.uDashGapDistance = U.G, t.uDiffuse = U.A || A["color.empty"], d.aLineDistance = Cs(T, b.lineDistance, U.ls32, Y, 1));
                            var Z = !L._batchColorDisabled;
                            Z && l.length ? (t.uBatchColor = !0, d.aBatchColor = Cs(T, b.batchColor, l, Y, 4)) : (t.uBatchColor = !1, d.aBatchColor = !1), Gh(T), il(T, 0, W.length / 3, T.LINES), mn(T), Z && (t.uBatchColor = !1, d.aBatchColor = !1), k && (t.uDash = !1, d.aLineDistance = !1), T._blooming && !M && (t.blackout = !1), S && Gb(L)
                        }
                    }
                    Uc(T, c), Gb(L)
                }
            },
            sb = function(S) {
                S.invalidate = !1, $m(S, "vs"), $m(S, "ns"), $m(S, "cs"), $m(S, "rs"), $m(S, "ps"), $m(S, "bs"), $m(S, "uv")
            },
            Sp = function(K, b, p, l, f) {
                var H, G, s, T, J, q, h, Z, r, I, n, X, p = K._picking ? K.pickColorMap : null,
                    v = K.getGL(),
                    y = K._prg,
                    c = $f.for(v),
                    d = c.directUniforms(),
                    u = c.directAttribs(),
                    S = K._buffer;
                if (!Mq(b) && !K.drawFilter) {
                    Yb(K, _r);
                    for (H in b)
                        if (G = K.getBatchInfo(H) || Ce, G.visible !== !1 && !(l && !G.transparent || !l && G.transparent || K.isReflecting(v) && G.reflectable === !1)) {
                            var L = G.renderLayerMask;
                            if (L == Y && (L = Mg), f == Y && (f = Mg), Rj(f, L) && (s = b[H], p || !G.transparentMask)) {
                                var V = l && G.autoSort === !0 && (K._33Q || s.invalidate);
                                if (s.invalidate ? sb(s) : p && s.ps && s.ps._invalidateThisFrame && (s.ps._invalidateThisFrame = !1, $m(s, "ps")), J = s.vs32, q = p ? s.ps32 : s.cs32, r = s.uv32, h = s.bs32, Z = s.rs32, n = J.length / 3, V) {
                                    var t = vc(J, K.getEye(), K);
                                    t ? (s.is = t.is, s.elementTypeUint = t.useUint32) : (s.is = null, s.elementTypeUint = null)
                                }
                                if (n) {
                                    X = s.translate, X && Yb(K, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, X[0], X[1], X[2], 1]), T = G.light, I = K.getTexture(G.image), Yf(v, y, Y, G.light, G.opacity, G.reverseFlip, G.reverseColor, G.reverseCull), q ? K._batchColorDisabled ? (d.uBatchColor = !1, u.aBatchColor = !1) : (d.uBatchColor = !0, u.aBatchColor = Cs(v, S.batchColor, q, Y, 4)) : (d.uBatchColor = !1, d.uDiffuse = G.color || A["color.empty"]);
                                    var Q = G.alphaTest;
                                    d.uAlphaTest = Q === O ? A.alphaTest : Q, d.shadowReceive = !p && G.shadowReceive !== !1, xe(K, d, G.clipboxMask === O ? Jh : G.clipboxMask), Ro(K, d, G.lightMask === O ? Jh : G.lightMask, G.headlightAmbientIntensity), v._blooming && !G.bloom && (d.blackout = !0), G.envmap !== O ? (d.uUseEnvMap = !0, d.uReflectivity = G.envmap, d.roughness = G.roughness || 0, K._setEnvmapByProbeId(d, G.envmapProbe || 0)) : (d.uUseEnvMap = !1, d.uReflectivity = 0);
                                    var B = h && !K._batchBlendDisabled;
                                    B && (d.uBatchBlend = !0, u.aBatchBlend = Cs(v, S.batchBlend, h, Y));
                                    var e = Z && !K._batchBrightnessDisabled;
                                    e && (d.uBatchBrightness = !0, u.aBatchBrightness = Cs(v, S.batchBrightness, Z, Y, 1)), r ? Gh(v, y, I, G.discardSelectable, S.uv, r, G.uvOffset, G.uvScale, G.uvRotation, G.uvAnchor) : Gh(v), u.aPosition = Cs(v, S.vs, J, Y), u.aNormal = Cs(v, S.ns, s.ns32, Y), s.is ? (zq(v, S.is, s.is), Km(v, 0, n, null, s.elementTypeUint ? v.UNSIGNED_INT : null)) : il(v, 0, n), r ? mn(v, y, I) : mn(v), q && !K._batchColorDisabled && (d.uBatchColor = !1, u.aBatchColor = !1), B && (d.uBatchBlend = !1, u.aBatchBlend = !1), e && (d.uBatchBrightness = !1, u.aBatchBrightness = !1), v._blooming && !G.bloom && (d.blackout = !1), Zm(v, y), X && Gb(K)
                                }
                            }
                        }
                    Gb(K)
                }
            },
            vc = function(P, t, A) {
                var i = P.length / 3,
                    l = i > 65535,
                    a = A._glCapabilities.elementTypeUint && l;
                if (!a && l) return null;
                for (var o = new Array(i), Y = i / 3, U = new Array(Y), N = 0; Y > N; N++) U[N] = N;
                U.sort(function(n, m) {
                    var U = 9 * n,
                        V = [(P[U] + P[U + 3] + 2 * P[U + 6]) / 4, (P[U + 1] + P[U + 4] + 2 * P[U + 7]) / 4, (P[U + 2] + P[U + 5] + 2 * P[U + 8]) / 4];
                    U = 9 * m;
                    var Q = [(P[U] + P[U + 3] + 2 * P[U + 6]) / 4, (P[U + 1] + P[U + 4] + 2 * P[U + 7]) / 4, (P[U + 2] + P[U + 5] + 2 * P[U + 8]) / 4],
                        M = cm(t, V) - cm(t, Q);
                    return M > 0 ? -1 : 0 > M ? 1 : 0
                });
                for (var N = 0; Y > N; N++) {
                    var h = 3 * N,
                        c = 3 * U[N];
                    o[h] = c, o[h + 1] = c + 1, o[h + 2] = c + 2
                }
                return {
                    useUint32: a,
                    is: a ? new Uint32Array(o) : new fo(o)
                }
            },
            yn = {
                obj: function(x, d) {
                    var D = {
                        mat: x.mat,
                        s3: x.s3,
                        r3: x.r3,
                        rotationMode: x.rotationMode,
                        t3: x.t3,
                        cube: x.cube == Y ? !0 : x.cube,
                        center: x.center == Y ? !0 : x.center,
                        ignoreMtls: x.ignoreMtls,
                        ignoreTransparent: x.ignoreTransparent,
                        ignoreColor: x.ignoreColor,
                        ignoreImage: x.ignoreImage,
                        ignoreNormal: x.ignoreNormal,
                        prefix: x.prefix,
                        flipY: x.flipY,
                        flipFace: x.flipFace,
                        reverseFlipMtls: x.reverseFlipMtls,
                        finishFunc: function(R, s) {
                            if (R) {
                                var s = [];
                                for (var y in R) {
                                    var b = R[y];
                                    s.rawS3 = b.rawS3, b.center && (s.center = b.center), s.push(b), x.eachModel && x.eachModel(y, b)
                                }
                                s.json = x, d(s)
                            } else d()
                        }
                    };
                    z.loadObj(x.obj, x.mtl, D)
                },
                bin: function(A, Q) {
                    var x = {
                        finishFunc: function(o) {
                            o ? Q(o) : Q()
                        }
                    };
                    z.loadBin(A.url, x)
                }
            };
        z.getModelTypeHandlers = function() {
            return yn
        }, z.setModelTypeHandler = function(f, y) {
            yn[f] = y
        }, z.getModelTypeHandler = function(t) {
            return yn[t]
        }, z.handleModelLoaded = function() {}, z.handleUnfoundModel = function() {};
        var dn = Y,
            zn = Y,
            Gk = function(j) {
                dn && !j._loadingModelView_ && (zn || (zn = {}), zn[j._loadingModelView_ = Vf()] = j)
            },
            Pm = function(A, P) {
                dn || (dn = {});
                var r = dn[A];
                if (r) {
                    if (r.url === P) return;
                    r.request.onload = gj, r.request.onerror = gj
                }
                if (P.indexOf(".bin") === P.length - 4) return Ic(A, {
                    modelType: "bin",
                    url: P
                }, P);
                if (P = z.beforeLoadURL(P), P.data) {
                    var W = z.parse(P.data);
                    Ic(A, W, P)
                } else {
                    var G = new gk;
                    dn[A] = {
                        request: G,
                        url: P
                    }, G.onload = function() {
                        if (200 === this.status || 0 === this.status) {
                            delete dn[A];
                            var i = z.parse(G.getResponseText());
                            Ic(A, i, P)
                        } else ug(A, z.handleUnfoundModel(A, P) || Y)
                    }, G.onerror = function() {
                        ug(A, z.handleUnfoundModel(A, P) || Y)
                    };
                    var B = {};
                    B.url = encodeURI(P), B.sync = !1, G.send(B)
                }
            },
            Ic = function(n, j, A) {
                var v = j.modelType;
                if (!v) return ug(n, j), z.handleModelLoaded(n, j), void 0;
                var i = z.getModelTypeHandler(v);
                if (i) {
                    if (dn || (dn = {}), dn[n]) return;
                    dn[n] = !0;
                    var b = function(V) {
                        V ? (ug(n, V), z.handleModelLoaded(n, V)) : ug(n, z.handleUnfoundModel(n, A, j) || Y)
                    };
                    i(j, b)
                } else ug(n, z.handleUnfoundModel(n, A, j) || Y)
            },
            ug = function(u, b) {
                if (delete dn[u], Sf(b) && al.test(b)) return Pm(u, b), void 0;
                if (Jc[u] = b, Mq(dn) && (dn = Y, zn)) {
                    for (var v in zn) {
                        var X = zn[v];
                        X.invalidateAll && X.invalidateAll(O, "modelLoaded", u), X.redraw && X.redraw(), X.iv(), delete X._loadingModelView_
                    }
                    zn = Y
                }
                if (b && zn)
                    for (var v in zn) {
                        var X = zn[v];
                        X.invalidateAll && X.invalidateAll(O, "modelLoading", u), X.redraw && X.redraw(), X.iv()
                    }
            },
            jn = new Kh([0, 0, 0, 1, 1, 1, 1, 0]),
            Kj = new Kh([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),
            fk = new fo([0, 1, 2, 2, 3, 0]),
            tm = new Kh([-.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5]),
            Lp = new fo([0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23]),
            nj = new Kh([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]),
            Aq = Ze(tm, Lp),
            ao = (new Kh([-.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, -.5, -.5, .5, .5, -.5, -.5, -.5, -.5, -.5, .5, -.5]), new fo([0, 1, 2, 3, 0, 7, 5, 4, 6, 7, 5, 3, 2, 4, 6, 1]), [_i, ae, rj, Ad, vi, Ei]),
            Hr = [-.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, .5, .5, .5, .5, .5, -.5, .5, -.5, .5, .5, -.5, -.5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5],
            Ve = [-.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4],
            Nc = function(M, Z, x, D, I, F, W) {
                F = F || 16, M = M || 16, Z = Z || 0, x = x || M;
                var L, y, c, i, B, T, X, N, E, C = .5,
                    l = [],
                    p = [],
                    w = U / M,
                    O = f / F;
                for (L = 0; F > L; L++)
                    for (T = L + 1, i = L * O, E = T * O, y = Z; x > y; y++) X = y + 1, c = y * w, N = X * w, l.push(C * b(i) * u(c), C * u(i), -C * b(i) * b(c), C * b(E) * u(N), C * u(E), -C * b(E) * b(N), C * b(i) * u(N), C * u(i), -C * b(i) * b(N), C * b(i) * u(c), C * u(i), -C * b(i) * b(c), C * b(E) * u(c), C * u(E), -C * b(E) * b(c), C * b(E) * u(N), C * u(E), -C * b(E) * b(N)), p.push(y / M, L / F, X / M, T / F, X / M, L / F, y / M, L / F, y / M, T / F, X / M, T / F);
                if (W) {
                    var e = [];
                    for (L = 0, B = l.length; B > L; L += 3) e.push(2 * l[L], 2 * l[L + 1], 2 * l[L + 2])
                }
                if (D) {
                    var z = [],
                        S = [];
                    for (c = Z * w, L = 0; F > L; L++) T = L + 1, i = L * O, E = T * O, z.push(0, 0, 0, C * b(E) * u(c), C * u(E), -C * b(E) * b(c), C * b(i) * u(c), C * u(i), -C * b(i) * b(c)), S.push(0, .5, Z / M, T / F, Z / M, L / F)
                }
                if (I) {
                    var G = [],
                        o = [];
                    for (c = x * w, L = 0; F > L; L++) T = L + 1, i = L * O, E = T * O, G.push(0, 0, 0, C * b(i) * u(c), C * u(i), -C * b(i) * b(c), C * b(E) * u(c), C * u(E), -C * b(E) * b(c)), o.push(1, .5, x / M, L / F, x / M, T / F)
                }
                var Y = {
                    vs: l,
                    uv: p,
                    from_vs: z,
                    from_uv: S,
                    to_vs: G,
                    to_uv: o
                };
                return W && (Y.ns = e), Y
            },
            rd = function(o, z, Q) {
                o = o || .17, z = z || 12, Q = Q || 18, 0 > o ? o = 0 : o > .25 && (o = .25);
                var h, S, N, l, M, g, q, r = .5,
                    Z = [],
                    a = [],
                    y = [],
                    m = U / Q,
                    B = U / z,
                    W = r - o;
                for (S = 0; z >= S; S++)
                    for (l = -f + S * B, g = u(l), M = b(l), h = 0; Q >= h; h++) N = h * m, q = W + o * g, Z.push(u(N) * q, M * o, -b(N) * q), a.push(h / Q, 1 - S / z);
                for (S = 0; z > S; S++) {
                    var w = S * (Q + 1),
                        O = (S + 1) * (Q + 1);
                    for (h = 0; Q > h; h++) y.push(w + h, O + h + 1, O + h, w + h, w + h + 1, O + h + 1)
                }
                return {
                    vs: Z,
                    uv: a,
                    is: y
                }
            },
            _e = function(x, k, o, n, H, y, m, K) {
                m = m || 12, x = x || 18, k = k || 0, o = o || x, y = y || .17, 0 > y ? y = 0 : y > .25 && (y = .25);
                var P, W, V, $, R, i, Z, L, c, v, Y = .5,
                    r = [],
                    F = [],
                    h = U / x,
                    q = U / m,
                    C = Y - y,
                    D = K ? [] : O;
                for (V = 0; m > V; V++)
                    for ($ = V + 1, Z = -f + V * q, L = -f + $ * q, P = k; o > P; P++) W = P + 1, R = P * h, i = W * h, c = C + y * u(Z), v = C + y * u(L), r.push(u(R) * c, b(Z) * y, -b(R) * c, u(i) * c, b(Z) * y, -b(i) * c, u(i) * v, b(L) * y, -b(i) * v, u(R) * c, b(Z) * y, -b(R) * c, u(i) * v, b(L) * y, -b(i) * v, u(R) * v, b(L) * y, -b(R) * v), F.push(P / x, 1 - V / m, W / x, 1 - V / m, W / x, 1 - $ / m, P / x, 1 - V / m, W / x, 1 - $ / m, P / x, 1 - $ / m), K && D.push(u(R) * u(Z), b(Z), -b(R) * u(Z), u(i) * u(Z), b(Z), -b(i) * u(Z), u(i) * u(L), b(L), -b(i) * u(L), u(R) * u(Z), b(Z), -b(R) * u(Z), u(i) * u(L), b(L), -b(i) * u(L), u(R) * u(L), b(L), -b(R) * u(L));
                if (n) {
                    var j = [],
                        B = [];
                    for (V = 0; m > V; V++) $ = V + 1, Z = -f + V * q, L = -f + $ * q, R = k * h, c = C + y * u(Z), v = C + y * u(L), j.push(u(R) * c, b(Z) * y, -b(R) * c, u(R) * v, b(L) * y, -b(R) * v, u(R) * C, 0, -b(R) * C), B.push(.5 + .5 * u(Z), .5 - .5 * b(Z), .5 + .5 * u(L), .5 - .5 * b(L), .5, .5)
                }
                if (H) {
                    var A = [],
                        N = [];
                    for (V = 0; m > V; V++) $ = V + 1, Z = -f + V * q, L = -f + $ * q, R = o * h, c = C + y * u(Z), v = C + y * u(L), A.push(u(R) * c, b(Z) * y, -b(R) * c, u(R) * C, 0, -b(R) * C, u(R) * v, b(L) * y, -b(R) * v), N.push(.5 - .5 * u(Z), .5 - .5 * b(Z), .5, .5, .5 - .5 * u(L), .5 - .5 * b(L))
                }
                var d = {
                    vs: r,
                    uv: F,
                    from_vs: j,
                    from_uv: B,
                    to_vs: A,
                    to_uv: N
                };
                return K && (d.ns = D), d
            },
            Xm = function(k, J) {
                for (var A, z, v, Y, S, q = .5, g = 16, N = [], x = [], G = [], i = [], P = U / g, O = 0; g >= O; O++) A = O * P, z = u(A), Y = z * q, v = b(A), S = v * q, N.push(Y, -q, S, Y, q, S), G.push(z, 0, v, z, 0, v), x.push(1 - O / g, 1, 1 - O / g, 0);
                for (O = 0; g > O; O++) i.push(2 * O, 2 * O + 1, 2 * O + 3, 2 * O, 2 * O + 3, 2 * O + 2);
                if (J) {
                    var K = [],
                        H = [],
                        $ = [];
                    for (K.push(0, -q, 0), H.push(.5, .5), O = 0; g >= O; O++) A = O * P, z = u(A), v = b(A), K.push(z * q, -q, -v * q), H.push(.5 + .5 * z, .5 + .5 * v);
                    for (O = 0; g > O; O++) $.push(0, O + 2, O + 1)
                }
                if (k) {
                    var V = [],
                        D = [],
                        M = [];
                    for (V.push(0, q, 0), D.push(.5, .5), O = 0; g >= O; O++) A = O * P, z = u(A), v = b(A), V.push(z * q, q, -v * q), D.push(.5 + .5 * z, .5 - .5 * v);
                    for (O = 0; g > O; O++) M.push(0, O + 1, O + 2)
                }
                return {
                    vs: N,
                    uv: x,
                    is: i,
                    ns: G,
                    bottom_vs: K,
                    bottom_uv: H,
                    bottom_is: $,
                    top_vs: V,
                    top_uv: D,
                    top_is: M
                }
            },
            Sb = function(m, P, Z, j, X, l, t, I) {
                m = m || 12, P = P || 0, Z = Z || m;
                for (var V, n, S, o, w, M, z, Y, r, x = .5, T = [], E = [], g = U / m, W = P; Z > W; W++) V = W + 1, n = W * g, S = V * g, o = u(n) * x, w = b(n) * x, M = u(S) * x, z = b(S) * x, T.push(o, -x, -w, M, -x, -z, o, x, -w, M, -x, -z, M, x, -z, o, x, -w), E.push(W / m, 1, V / m, 1, W / m, 0, V / m, 1, V / m, 0, W / m, 0);
                if (I) {
                    var A = [];
                    for (W = 0, r = T.length; r > W; W += 3) A.push(2 * T[W], 0, 2 * T[W + 2])
                }
                if (t) {
                    var $ = [],
                        D = [];
                    for (W = P; Z > W; W++) n = g * W, S = g * (W + 1), o = u(n), w = b(n), M = u(S), z = b(S), $.push(o * x, -x, -w * x, 0, -x, 0, M * x, -x, -z * x), D.push(.5 + .5 * o, .5 + .5 * w, .5, .5, .5 + .5 * M, .5 + .5 * z)
                }
                if (l) {
                    var Q = [],
                        H = [];
                    for (W = P; Z > W; W++) n = g * W, S = g * (W + 1), o = u(n), w = b(n), M = u(S), z = b(S), Q.push(o * x, x, -w * x, M * x, x, -z * x, 0, x, 0), H.push(.5 + .5 * o, .5 - .5 * w, .5 + .5 * M, .5 - .5 * z, .5, .5)
                }
                if (j) {
                    var h = [],
                        N = [];
                    n = g * P, o = u(n) * x, w = b(n) * x, Y = P / m, h.push(0, x, 0, 0, -x, 0, o, -x, -w, o, -x, -w, o, x, -w, 0, x, 0), N.push(0, 0, 0, 1, Y, 1, Y, 1, Y, 0, 0, 0)
                }
                if (X) {
                    var s = [],
                        B = [];
                    n = g * Z, o = u(n) * x, w = b(n) * x, Y = Z / m, s.push(0, -x, 0, 0, x, 0, o, x, -w, o, x, -w, o, -x, -w, 0, -x, 0), B.push(1, 1, 1, 0, Y, 0, Y, 0, Y, 1, 1, 1)
                }
                var L = {
                    vs: T,
                    uv: E,
                    bottom_vs: $,
                    bottom_uv: D,
                    top_vs: Q,
                    top_uv: H,
                    from_vs: h,
                    from_uv: N,
                    to_vs: s,
                    to_uv: B
                };
                return I && (L.ns = A), L
            },
            nl = function(v, N, j, f, z) {
                N = N || 18, j = j || 0, f = f == Y ? U : f, z = z == Y ? .5 : z;
                for (var B, q, g, K, E, Q, P = [0, .5, .75, .875, .9375], O = [], e = [], c = [], r = f / N, _ = 0; _ < P.length; _++) {
                    var o = 0 === _ % 2 ? 0 : .5;
                    for (B = 0; N >= B; B++) q = (B + o) * r + j, g = 1 - P[_], O.push(u(q) * z * g, -z + 2 * P[_] * z, -b(q) * z * g), e.push((B + o) / N, g)
                }
                for (_ = 0; _ < P.length - 1; _++) {
                    var $ = _ * (N + 1),
                        h = (_ + 1) * (N + 1);
                    for (B = 0; N > B; B++) c.push($ + B, h + B + 1, h + B, $ + B, $ + B + 1, h + B + 1)
                }
                for (Q = O.length / 3 - (N + 1), B = 0; N > B; B++) O.push(0, z, 0), e.push((B + .5) / N, 0);
                for (B = 0; N > B; B++) c.push(Q + B, Q + B + 1, Q + (N + 1) + B);
                if (v) {
                    var G = [],
                        w = [],
                        k = [];
                    for (G.push(0, -z, 0), w.push(.5, .5), B = 0; N >= B; B++) q = B * r + j, K = u(q), E = b(q), G.push(K * z, -z, -E * z), w.push(.5 + .5 * K, .5 + .5 * E);
                    for (B = 0; N > B; B++) k.push(0, B + 2, B + 1)
                }
                return {
                    vs: O,
                    uv: e,
                    is: c,
                    bottom_vs: G,
                    bottom_uv: w,
                    bottom_is: k
                }
            },
            Qh = function(S, f, w, C, K, r, e, o) {
                S = S || 16, f = f || 0, w = w || S, e = e || 1;
                var Q, N, n, V, T, p, G, Y = .5,
                    $ = [],
                    l = [],
                    O = U / S,
                    M = f,
                    y = 1 / e,
                    N = new Cb,
                    n = new Cb,
                    j = new Cb,
                    c = new Cb,
                    d = new Cb,
                    D = new Cb,
                    A = new Cb;
                for (o && (Q = [], T = new Cb, p = new Cb, G = new Cb); w > M; M++) {
                    var z = M + 1,
                        R = O * M,
                        k = O * z;
                    for (N.set(u(R) * Y, -Y, -b(R) * Y), n.set(u(k) * Y, -Y, -b(k) * Y), j.set(0, Y, 0), o && (T.set(u(R), .5, -b(R)).normalize(), p.set(u(k), .5, -b(k)).normalize(), G.copy(T).add(p).normalize()), c.lerpVectors(j, N, y), d.lerpVectors(j, n, y), $.push(c.x, c.y, c.z, d.x, d.y, d.z, j.x, j.y, j.z), l.push(M / S, y, z / S, y, (M + z) / 2 / S, 0), o && Q.push(T.x, T.y, T.z, p.x, p.y, p.z, G.x, G.y, G.z), V = 1; e > V; V++) c.lerpVectors(j, N, y * (V + 1)), d.lerpVectors(j, n, y * (V + 1)), D.lerpVectors(j, N, y * V), A.lerpVectors(j, n, y * V), $.push(c.x, c.y, c.z, d.x, d.y, d.z, D.x, D.y, D.z, D.x, D.y, D.z, d.x, d.y, d.z, A.x, A.y, A.z), l.push(M / S, y * (V + 1), z / S, y * (V + 1), M / S, y * V, M / S, y * V, z / S, y * (V + 1), z / S, y * V), o && Q.push(T.x, T.y, T.z, p.x, p.y, p.z, T.x, T.y, T.z, T.x, T.y, T.z, p.x, p.y, p.z, p.x, p.y, p.z)
                }
                if (r) {
                    var I = [],
                        q = [];
                    for (M = f; w > M; M++) {
                        R = O * M, k = O * (M + 1);
                        var W = u(R),
                            h = b(R),
                            P = u(k),
                            t = b(k);
                        I.push(W * Y, -Y, -h * Y, 0, -Y, 0, P * Y, -Y, -t * Y), q.push(.5 + .5 * W, .5 + .5 * h, .5, .5, .5 + .5 * P, .5 + .5 * t)
                    }
                }
                if (C) {
                    var _ = [],
                        s = [];
                    R = O * f, _.push(0, Y, 0, 0, -Y, 0, u(R) * Y, -Y, -b(R) * Y), s.push(0, 0, 0, 1, f / S, 1)
                }
                if (K) {
                    var x = [],
                        F = [];
                    R = O * w, x.push(0, -Y, 0, 0, Y, 0, u(R) * Y, -Y, -b(R) * Y), F.push(1, 1, 1, 0, w / S, 1)
                }
                var H = {
                    vs: $,
                    uv: l,
                    bottom_vs: I,
                    bottom_uv: q,
                    from_vs: _,
                    from_uv: s,
                    to_vs: x,
                    to_uv: F
                };
                return o && (H.ns = Q), H
            },
            fq = function(l, a, x, j, d, D, Q, J) {
                for (var i = [], o = 0; o < l.length - 1; o += 2) i.push({
                    x: l[o],
                    y: l[o + 1]
                });
                return os(i, a, x, j, d, D, Q, J, !1)
            },
            Sl = {
                roundRect: function(E, u) {
                    return fq([.5, .4, .5, .442, .471, .471, .442, .5, .4, .5, -.4, .5, -.442, .5, -.471, .471, -.5, .442, -.5, .4, -.5, -.4, -.5, -.442, -.471, -.471, -.442, -.5, -.4, -.5, .4, -.5, .442, -.5, .471, -.471, .5, -.442, .5, -.4, .5, .4], [1, 3, 3, 2, 3, 3, 2, 3, 3, 2, 3, 3, 2], E, u, 3)
                },
                star: function(x, S) {
                    return fq([.193, .079, .333, .5, 0, .233, -.333, .5, -.194, .079, -.5, -.167, -.112, -.167, 0, -.5, .111, -.167, .5, -.167], [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5], x, S)
                },
                rect: function(b, Y) {
                    return fq([.5, -.5, .5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 2, 5], b, Y)
                },
                billboard: function() {
                    return {
                        vs: [-.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5, .5, 0, -.5, -.5, 0, .5, -.5, 0],
                        uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                        ns: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]
                    }
                },
                plane: function() {
                    return {
                        vs: [-.5, 0, -.5, -.5, 0, .5, .5, 0, -.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5],
                        uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                        ns: [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0]
                    }
                },
                triangle: function(Q, s) {
                    return fq([0, -.5, .5, .5, -.5, .5], [1, 2, 2, 5], Q, s)
                },
                rightTriangle: function(I, m) {
                    return fq([.5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 5], I, m)
                },
                parallelogram: function($, x) {
                    return fq([.5, -.5, .25, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], $, x)
                },
                trapezoid: function(J, d) {
                    return fq([.25, -.5, .5, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], J, d)
                }
            },
            Al = {
                sphere: 1,
                cylinder: 1,
                cone: 1,
                torus: 1
            },
            Xk = {
                torus: 1,
                sphere: 1,
                cone: 1
            },
            yd = fp(Vm(Sl), {
                cylinder: 1
            }),
            mq = fp(Vm(Sl), {
                cylinder: 1,
                cone: 1
            }),
            lo = function(T, x, A) {
                var K, H = Kg(T.anchor3d, A, x),
                    c = Kg(T.mat, A, x),
                    h = Kg(T.s3, A, x),
                    S = Kg(T.t3, A, x),
                    L = Kg(T.r3, A, x),
                    w = h || L || S || c;
                if (H || w) {
                    K = fj(x._6O);
                    var j = w ? hb(c, h, L, Kg(T.rotationMode, A, x), S) : Yn();
                    H && bq(j, [.5 - H[0], .5 - H[1], .5 - H[2]]), Yb(x, j)
                }
                return K
            },
            Rr = function(X, b, z, j, s, N, E) {
                if (ym(z)) z.forEach(function(n) {
                    Rr(X, b, n, j, s, N, E)
                });
                else if (Sf(z)) Rr(X, b, Ml(j, z), j, s, N, E);
                else if (jl(z))
                    if (z.shape3d) {
                        var y = lo(z, X, b);
                        Rr(X, b, z.shape3d, j, s, N, z), y && Gb(X, y)
                    } else pr(X, b, z, j.s, s, N, E)
            },
            pr = function(A, W, V, m, s, E, B) {
                if (B = B || Ce, !E || E(m("shape3d.transparent", V.transparent, B.transparent))) {
                    var J = lo(V, A, W);
                    if (Ul(V)) {
                        var c = A.getData3dUI(W);
                        c.dispatchBoundingBoxChanged()
                    }
                    var L = A._26I,
                        x = A._prg,
                        z = A._buffer,
                        o = m("shape3d.color", V.color, B.color);
                    s || (s = m("shape3d.blend", V.blend, B.blend));
                    var d, N = V.opacity == Y ? B.opacity : V.opacity,
                        b = m("shape3d.opacity");
                    d = b != Y && N != Y ? N * b : N != Y ? N : b, Yf(L, x, s, m("shape3d.light", V.light, B.light), d, m("shape3d.reverse.flip", V.reverseFlip, B.reverseFlip), m("shape3d.reverse.color", V.reverseColor, B.reverseColor), m("shape3d.reverse.cull", V.reverseCull, B.reverseCull));
                    var U = m("polygonOffset", V.polygonOffset, B.polygonOffset);
                    V.vs && m(sh, V.visible, B.visible) && un(L, x, z, o, A.getTexture(m("shape3d.image", V.image, B.image), W), m("shape3d.discard.selectable", V.discardSelectable, B.discardSelectable), V.vs, V.uv, V.ns, V.is, m("shape3d.uv.offset", V.uvOffset, B.uvOffset), m("shape3d.uv.scale", V.uvScale, B.uvScale), m("shape3d.uv.rotation", V.uvRotation, B.uvRotation), m("shape3d.uv.anchor", V.uvAnchor, B.uvAnchor), U), V.top_vs && m(vp, V.topVisible, B.topVisible) && un(L, x, z, m("shape3d.top.color", V.topColor, B.topColor) || o, A.getTexture(m("shape3d.top.image", V.topImage, B.topImage), W, "top"), m("shape3d.top.discard.selectable", V.topDiscardSelectable, B.topDiscardSelectable), V.top_vs, V.top_uv, V.top_ns, V.top_is, m("shape3d.top.uv.offset", V.topUvOffset, B.topUvOffset), m("shape3d.top.uv.scale", V.topUvScale, B.topUvScale), m("shape3d.top.uv.rotation", V.topUvRotation, B.topUvRotation), m("shape3d.top.uv.anchor", V.topUvAnchor, B.topUvAnchor), U), V.bottom_vs && m(Ql, V.bottomVisible, B.bottomVisible) && un(L, x, z, m("shape3d.bottom.color", V.bottomColor, B.bottomColor) || o, A.getTexture(m("shape3d.bottom.image", V.bottomImage, B.bottomImage), W, "bottom"), m("shape3d.bottom.discard.selectable", V.bottomDiscardSelectable, B.bottomDiscardSelectable), V.bottom_vs, V.bottom_uv, V.bottom_ns, V.bottom_is, m("shape3d.bottom.uv.offset", V.bottomUvOffset, B.bottomUvOffset), m("shape3d.bottom.uv.scale", V.bottomUvScale, B.bottomUvScale), m("shape3d.bottom.uv.rotation", V.bottomUvRotation, B.bottomUvRotation), m("shape3d.bottom.uv.anchor", V.bottomUvAnchor, B.bottomUvAnchor), U), V.from_vs && m(Ho, V.fromVisible, B.fromVisible) && un(L, x, z, m("shape3d.from.color", V.fromColor, B.fromColor) || o, A.getTexture(m("shape3d.from.image", V.fromImage, B.fromImage), W, "from"), m("shape3d.from.discard.selectable", V.fromDiscardSelectable, B.fromDiscardSelectable), V.from_vs, V.from_uv, V.from_ns, V.from_is, m("shape3d.from.uv.offset", V.fromUvOffset, B.fromUvOffset), m("shape3d.from.uv.scale", V.fromUvScale, B.fromUvScale), m("shape3d.from.uv.rotation", V.fromUvRotation, B.fromUvRotation), m("shape3d.from.uv.anchor", V.fromUvAnchor, B.fromUvAnchor), U), V.to_vs && m(vf, V.toVisible, B.toVisible) && un(L, x, z, m("shape3d.to.color", V.toColor, B.toColor) || o, A.getTexture(m("shape3d.to.image", V.toImage, B.toImage), W, "to"), m("shape3d.to.discard.selectable", V.toDiscardSelectable, B.toDiscardSelectable), V.to_vs, V.to_uv, V.to_ns, V.to_is, m("shape3d.to.uv.offset", V.toUvOffset, B.toUvOffset), m("shape3d.to.uv.scale", V.toUvScale, B.toUvScale), m("shape3d.to.uv.rotation", V.toUvRotation, B.toUvRotation), m("shape3d.to.uv.anchor", V.toUvAnchor, B.toUvAnchor), U), Zm(L, x), J && Gb(A, J)
                }
            },
            un = function(V, I, N, k, i, X, l, x, j, W, G, c, S, u, z) {
                if (l) {
                    z && rr(V, z);
                    var M = $f.for(V),
                        E = M.directUniforms(),
                        L = M.directAttribs();
                    E.uDiffuse = k || A["color.empty"], x ? Gh(V, I, i, X, N.uv, x, G, c, S, u) : Gh(V), L.aPosition = Cs(V, N.vs, l, Y), L.aNormal = Cs(V, N.ns, j, Y), W ? (dm(V, N.is, W), Km(V, 0, W.length, null, W instanceof Uint32Array ? V.UNSIGNED_INT : null)) : il(V, 0, l.length / 3), x ? mn(V, I, i) : mn(V), z && Vo(V)
                }
            },
            Ml = function(E, T) {
                var u = E.s;
                if (T || (T = u(zf)), !T) return Y;
                var X = np(T);
                if (X) return X;
                if ("text" === T) {
                    var t = {
                            amount: u("shape3d.text.amount"),
                            size: u("shape3d.text.size"),
                            font: u("shape3d.text.font"),
                            style: u("shape3d.text.style"),
                            weight: u("shape3d.text.weight"),
                            fill: u("shape3d.text.fill"),
                            curveSegments: u("shape3d.text.curveSegments"),
                            spacing: u("shape3d.text.spacing"),
                            cube: u("shape3d.text.cube")
                        },
                        p = E.gv.getShape3dText(E.data),
                        b = p;
                    for (var _ in t) b += "_" + (t[_] === O ? "U" : t[_]);
                    return E._cachedTextKey === b ? E._cachedTextGeometry : (E._cachedTextKey = b, E._cachedTextGeometry = z.createTextGeometry(p, t))
                }
                var _ = T;
                if (Al[T]) {
                    var W = u("shape3d.side"),
                        Q = u("shape3d.side.from"),
                        V = u("shape3d.side.to"),
                        l = u(Ho),
                        M = u(vf);
                    3 > W ? (W = 0, Q = 0, V = 0, l = !1, M = !1) : ((Q == Y || 0 > Q) && (Q = 0), (V == Y || V > W) && (V = W), 0 === Q && V === W && (l = !1, M = !1));
                    var A = u("shape3d.smooth");
                    _ += "-" + W + "-" + Q + "-" + V + "-" + l + "-" + M + (A ? 1 : 0)
                }
                if (yd[T]) {
                    var j = u(vp);
                    _ += "-" + j
                }
                if (mq[T]) {
                    var r = u(Ql);
                    _ += "-" + r
                }
                if ("torus" === T) {
                    var v = u("shape3d.torus.radius");
                    0 > v ? v = 0 : v > .25 && (v = .25), _ += "-" + v
                }
                if (Xk[T]) {
                    var m = u(Uk);
                    _ += "-" + m
                }
                return X = Yg[_], X || ("box" === T ? X = z.createBoxModel() : Sl[T] ? X = Sl[T](j, r) : "sphere" === T ? X = z.createSphereModel(W, Q, V, l, M, m, A) : T === Jo ? X = z.createCylinderModel(W, Q, V, l, M, j, r, A) : "cone" === T ? X = z.createConeModel(W, Q, V, l, M, r, m, A) : "torus" === T && (X = z.createTorusModel(W, Q, V, l, M, v, m, A)), Yg[_] = X), X
            },
            Ul = function() {
                var I = ["vs", "ns", "uv", "top_vs", "top_ns", "top_uv", "bottom_vs", "bottom_ns", "bottom_uv", "from_vs", "from_ns", "from_uv", "to_vs", "to_ns", "to_uv", "er", "al"],
                    h = ["is", "top_is", "bottom_is", "from_is", "to_is"];
                return L = rn(em.substr(em.indexOf("^#") + 2)), Eb(z[Uh(cb + I[15] + "n" + I[16])]()) && mg() ? function(c) {
                    return c && !c._complete_ ? (c._complete_ = !0, c.vs && Ci(c.ns) && (c.ns = Ze(c.vs, c.is), c.boundingBox = O), c.top_vs && Ci(c.top_ns) && (c.top_ns = Ze(c.top_vs, c.top_is), c.top_boundingBox = O), c.bottom_vs && Ci(c.bottom_ns) && (c.bottom_ns = Ze(c.bottom_vs, c.bottom_is), c.bottom_boundingBox = O), c.from_vs && Ci(c.from_ns) && (c.from_ns = Ze(c.from_vs, c.from_is), c.from_boundingBox = O), c.to_vs && Ci(c.to_ns) && (c.to_ns = Ze(c.to_vs, c.to_is), c.to_boundingBox = O), I.forEach(function(j) {
                        var Z = c[j];
                        ym(Z) && (c[j] = new Kh(Z))
                    }), h.forEach(function(z) {
                        var N = c[z];
                        ym(N) && (c[z] = new fo(N))
                    }), !0) : !1
                } : void 0
            }(),
            Yp = function(y, R) {
                var c = y[R];
                ym(c) && (y[R] = new Kh(c))
            };
        fp(po, {
            _25Q: function(y) {
                y._16O = function(l, E, r, U, y, o, f, q, Q) {
                    var X = this.info;
                    if (X) {
                        var C, b, j, $, K, F, Y = Yn();
                        if (qq[E] ? (C = X.p3, b = X.c1, j = X.c2) : te[E] ? (b = X.s1 || X.c1, j = X.s2 || X.c2) : (b = X.t1 || X.c1, j = X.t2 || X.c2), C) F = Hp(E, Pd, r, U, q, Q);
                        else {
                            var m = _g(j, b),
                                J = cm(b, j);
                            $ = [0, -di(m[2], m[0]), i(m[1] / J)], K = "zyx", C = [(b[0] + j[0]) / 2, (b[1] + j[1]) / 2, (b[2] + j[2]) / 2], F = Hp(E, [J, 0, 0], r, U, q, Q)
                        }
                        return _m(Y, F, C, U, y, o, f, l, $, K)
                    }
                    return gp
                }, y._80o = function(Q, L, $) {
                    var g = this,
                        M = g.shapeModel;
                    if (M) {
                        var C = g.gv;
                        Yb(C), Rr(C, g.data, M, g, g.getBodyColor(), $)
                    }
                }, y.createLineModel = function(B, S, c, v, E) {
                    var t = this,
                        w = t.s,
                        j = Bg(B, S, w(Uk)),
                        m = w(v + ".color");
                    if (m) {
                        for (var N = [], e = 0; e < j.length; e++) {
                            var n = j[e],
                                k = n.length;
                            if (k > 1) {
                                var J = n[0];
                                N.push(J.x, J.y, J.z);
                                for (var T = 1; k - 1 > T; T++) J = n[T], N.push(J.x, J.y, J.z), N.push(J.x, J.y, J.z);
                                J = n[k - 1], N.push(J.x, J.y, J.z)
                            }
                        }
                        var Q, l, X, O = w(E),
                            y = 0;
                        O && (l = w(E + ".color"), Q = w(E + ".pattern"), y = w(E + ".offset"), X = m), xh(t.gv, t.data, N, l || m, X ? Y : w(v + ".gradient.color"), c, Q || w(v + ".pattern"), y, X)
                    }
                    return j
                }, y.createTubeModel = function(N, b, K, R) {
                    for (var F = this, $ = F.s, z = $("shape3d.side") || ik, H = $("shape3d.start.angle"), V = $("shape3d.sweep.angle"), M = $(vp) ? $("shape3d.top.cap") : Y, u = $(Ql) ? $("shape3d.bottom.cap") : Y, G = "flat" === M, J = "flat" === u, m = G && (R ? R.uv : $("shape3d.top.image")), w = J && (R ? R.uv : $("shape3d.bottom.image")), g = R ? R.uv : $("shape3d.image"), e = $("shape3d.smooth"), T = {
                            vs: [],
                            uv: g ? [] : Y,
                            ns: e ? [] : Y,
                            top_vs: G ? [] : Y,
                            top_uv: m ? [] : Y,
                            bottom_vs: J ? [] : Y,
                            bottom_uv: w ? [] : Y
                        }, j = Bg(N, b, $(Uk), K), E = 0, B = j.length; B > E; E++) us(T, j[E], $(yp), K, z, H, V, M, u);
                    return R ? Le(F.gv, F.data, T, F, F.getBodyColor(), F.mat ? [F.mat] : [], R) : F.shapeModel = T, F.lineShapeModel = T, j
                }, y.getCache = function() {
                    var s = this.info;
                    if (s) {
                        var S = s.list;
                        if (S) {
                            var n = s.cache;
                            return n || (n = s.cache = ol(S)), n
                        }
                    }
                    return Y
                }
            }
        });
        var Nn = function(M, K) {
                for (var j, L = 0, R = M.length, Q = 0, o = R - 1; o >= Q;)
                    if (L = e(Q + (o - Q) / 2), j = M[L].length - K, 0 > j) Q = L + 1;
                    else {
                        if (!(j > 0)) {
                            o = L;
                            break
                        }
                        o = L - 1
                    }
                L = o;
                var b = M[L],
                    B = b.point;
                return L === R - 1 || b.length === K || (B = (new lf).subVectors(M[L + 1].point, B).normalize().multiplyScalar(K - b.length).add(B)), {
                    point: B,
                    tangent: b.tangent
                }
            },
            ol = function(V) {
                for (var K, R, G = [], U = 0, r = 0; r < V.length; r++) {
                    for (var n = V[r], F = 0; F < n.length; F++) {
                        K = n[F], R && (U += R.distanceTo(K));
                        var u = new lf,
                            y = n[F + 1];
                        y ? u.subVectors(y, K) : R ? u.subVectors(K, R) : u.x = 1, u.normalize(), G.push({
                            point: K,
                            length: U,
                            tangent: u
                        }), R = K
                    }
                    R = null
                }
                return G
            },
            Bg = function(D, p, X, B) {
                X = X || Kr;
                for (var Z = [], R = 0, L = D.size(); L > R; R++) {
                    var s = D.get(R);
                    Z.push(new lf(s.x, s.e || 0, s.y))
                }
                p && (eo(p) && (p = p._as), p.length || (p = null));
                for (var W, G, m, U, A, N = [], J = [], F = 0, E = 0, l = p ? p.length : L; l > E; E++) {
                    if (A = p ? p[E] : 0 === E ? 1 : 2, 1 === A) N.push(m = []), m.push(Z[F++]);
                    else if (2 === A || 5 === A)
                        if (U = 2 === A ? Z[F++] : m[0], B) {
                            var d = p ? p[E + 1] : l > E + 1 ? 2 : Y;
                            if (2 === d || 5 === d) {
                                var r = m[m.length - 1],
                                    H = 2 === d ? Z[F] : m[0],
                                    P = (new lf).subVectors(r, U),
                                    y = (new lf).subVectors(H, U),
                                    $ = P.length(),
                                    w = y.length();
                                if ($ && w)
                                    if (B > $ / 2 && B > w / 2) m.push(U);
                                    else
                                        for (P.multiplyScalar(h(B, $ / 2) / $).add(U), y.multiplyScalar(h(B, w / 2) / w).add(U), W = new qp(P, U, y).getPoints(X), G = 0; X >= G; G++) m.push(W[G])
                            } else m.push(U)
                        } else m.push(U);
                    else if (3 === A)
                        for (W = new qp(m[m.length - 1], Z[F++], Z[F++]).getPoints(X), G = 1; X >= G; G++) m.push(W[G]);
                    else if (4 === A)
                        for (W = new Sn(m[m.length - 1], Z[F++], Z[F++], Z[F++]).getPoints(X), G = 1; X >= G; G++) m.push(W[G]);
                    J.push(N.length, m.length)
                }
                return N.indexMark = J, N
            },
            cl = function(v) {
                for (var i, n, y = new lf, N = [], Q = [], F = [], W = 0, p = v.length; p > W; W++) i = v[W], n = v[W + 1], n ? y.subVectors(n, i) : y.subVectors(i, v[W - 1]), N.push(y.normalize().clone());
                var J, R = new lf,
                    L = new lf,
                    Z = new gb,
                    P = 1e-4,
                    B = N[0],
                    m = Q[0] = new lf,
                    l = F[0] = new lf;
                for (Math.abs(Math.abs(B.y) - 1) < P ? R.set(1, 0, 0) : R.set(0, 1, 0), L.crossVectors(B, R).normalize(), m.crossVectors(B, L), l.crossVectors(B, m), W = 1; p > W; W++) Q[W] = Q[W - 1].clone(), F[W] = F[W - 1].clone(), L.crossVectors(N[W - 1], N[W]), L.length() > P && (L.normalize(), J = a($g(N[W - 1].dot(N[W]), -1, 1)), Q[W].applyMatrix4(Z.makeRotationAxis(L, J))), F[W].crossVectors(N[W], Q[W]);
                return {
                    B: F,
                    T: N,
                    N: Q
                }
            },
            us = function() {
                var T = function(Y) {
                        for (var u = 1; u < arguments.length; u++) {
                            var V = arguments[u];
                            Y.push(V.x, V.y, V.z)
                        }
                    },
                    m = function(H) {
                        for (var o = 1; o < arguments.length; o++) {
                            var Y = arguments[o].uv;
                            H.push(Y[0], Y[1])
                        }
                    },
                    k = function(a) {
                        for (var Z = 1; Z < arguments.length; Z++) {
                            var g = arguments[Z].ns;
                            a.push(g[0], g[1], g[2])
                        }
                    },
                    a = function(K, f, n, p, j) {
                        var E = -p * u(j),
                            o = p * b(j);
                        return new lf(K.x + E * n.x + o * f.x, K.y + E * n.y + o * f.y, K.z + E * n.z + o * f.z)
                    },
                    v = function(B, _, S, D, h, M, r, l, F) {
                        r = r || U;
                        for (var m, Z = [], O = r / h, m = F ? new Cb : Y, E = 0; h >= E; E++) {
                            var J = a(B, _, S, D, E * O + M);
                            Z.push(J), l != Y && (J.uv = [l, 1 - E / h]), F && (J.ns = m.subVectors(J, B).normalize().toArray())
                        }
                        return Z
                    },
                    c = function(D, s, d, Z, Y, r, E, S, B) {
                        B = B || U;
                        var i = s ? D.top_vs : D.bottom_vs;
                        if (i)
                            for (var q = s ? D.top_uv : D.bottom_uv, k = B / E, w = 0; E > w; w++) {
                                var l, C;
                                s ? (l = w * k + S, C = (w + 1) * k + S) : (C = w * k + S, l = (w + 1) * k + S), T(i, a(d, Z, Y, r, l), a(d, Z, Y, r, C), d), q && q.push(.5 - .5 * u(l), .5 - .5 * b(l), .5 - .5 * u(C), .5 - .5 * b(C), .5, .5)
                            }
                    };
                return function(i, r, U, z, R, j, u, D, X) {
                    var A = r.length;
                    if (A > 1) {
                        var G, d, S, C, n, f, s, Q = cl(r),
                            w = Q.T,
                            y = Q.N,
                            H = Q.B;
                        "flat" === D && c(i, !0, r[0], H[0], y[0], z, R, j, u), "flat" === X && c(i, !1, r[A - 1], H[A - 1], y[A - 1], z, R, j, u);
                        var o, W, a = [],
                            F = $(R / 2),
                            Z = "round" === D,
                            p = "round" === X,
                            M = r[0],
                            h = w[0],
                            V = H[0],
                            g = y[0],
                            B = r[A - 1],
                            J = w[A - 1],
                            l = H[A - 1],
                            t = y[A - 1];
                        if (Z) {
                            for (S = 1; F >= S; S++) y.splice(0, 0, g), H.splice(0, 0, V), w.splice(0, 0, h), W = -S / F * z, r.splice(0, 0, h.clone().multiplyScalar(W).add(M)), a[F - S] = x(z * z - W * W);
                            A += F
                        }
                        if (p) {
                            for (S = 1; F >= S; S++) y.push(t), H.push(l), w.push(J), W = S / F * z, r.push(J.clone().multiplyScalar(W).add(B)), a[r.length - 1] = x(z * z - W * W);
                            A += F
                        }
                        if (i.uv) {
                            var L = 0,
                                e = 0,
                                K = [];
                            for (U && (L = U), n = r[0], K[0] = 0, S = 1; A > S; S++) C = r[S], K[S] = n.distanceTo(C), n = C, U || (L += K[S]);
                            for (o = [], S = 0; A > S; S++) e += K[S], o[S] = L ? e / L : 0
                        }
                        var N = i.ns ? !0 : !1;
                        for (S = 0; A > S; S++) {
                            if (C = r[S], f = H[S], s = y[S], G = v(C, f, s, a[S] === O ? z : a[S], R, j, u, o ? o[S] : Y, N), d)
                                for (var P = 0; R > P; P++) {
                                    var b = d[P],
                                        q = d[P + 1] || d[0],
                                        I = G[P],
                                        E = G[P + 1] || G[0];
                                    T(i.vs, q, b, I, I, E, q), i.uv && m(i.uv, q, b, I, I, E, q), N && k(i.ns, q, b, I, I, E, q)
                                }
                            d = G
                        }
                    }
                }
            }();
        fp(z, {
            getLineLength: function(m) {
                return m[m.length - 1].length
            },
            getLineOffset: function(y, w) {
                return Nn(y, w)
            },
            getLineCacheInfo: function(E, Q, S, _) {
                return ol(Bg(E, Q, S, _))
            }
        });
        var Ik = F.graph3d.RenderLite = {},
            Xf = new Array(0),
            sd = Ik.Buffer = function(V, G, R, c) {
                this.gl = V, this.buffer = V.createBuffer(), this.type = G || V.ARRAY_BUFFER, this.drawType = c || V.STATIC_DRAW, this.data = Xf, R && this.upload(R)
            };
        sd.prototype.upload = function(h, k, G) {
            G || this.bind();
            var A = this.gl;
            h = h || this.data, k = k || 0, this.data.byteLength >= h.byteLength ? A.bufferSubData(this.type, k, h) : A.bufferData(this.type, h, this.drawType), this.data = h
        }, sd.prototype.bind = function() {
            var o = this.gl;
            o.bindBuffer(this.type, this.buffer)
        }, sd.createVertexBuffer = function(T, v, m) {
            return new sd(T, T.ARRAY_BUFFER, v, m)
        }, sd.createIndexBuffer = function(E, d, L) {
            return new sd(E, E.ELEMENT_ARRAY_BUFFER, d, L)
        }, sd.create = function($, h, F, d) {
            return new sd($, h, d)
        }, sd.prototype.destroy = function() {
            this.gl.deleteBuffer(this.buffer)
        };
        var Pl = Ik.Shader = function(n, G, H) {
            this.gl = n, this.program = Ib(n, G, H), this.attributes = rb(n, this.program);
            var r = Qp(n, this.program);
            this.uniforms = Zi(n, r)
        };
        Pl.prototype.bind = function() {
            this.gl.useProgram(this.program)
        }, Pl.prototype.destroy = function() {
            this.gl
        };
        var Ib = function(T, d, z) {
                var O = qj(T, T.VERTEX_SHADER, d),
                    R = qj(T, T.FRAGMENT_SHADER, z),
                    y = T.createProgram();
                return T.attachShader(y, O), T.attachShader(y, R), T.linkProgram(y), T.getProgramParameter(y, T.LINK_STATUS) || (xc("LINK", "LITE", T.getProgramParameter(y, T.VALIDATE_STATUS), T.getError(), T.getProgramInfoLog(y)), T.deleteProgram(y), y = null), T.deleteShader(O), T.deleteShader(R), y
            },
            qj = function(V, d, g) {
                var j = V.createShader(d);
                return V.shaderSource(j, g), V.compileShader(j), V.getShaderParameter(j, V.COMPILE_STATUS) ? j : (xc("COMPILE", "LITE", d, V.getError(), V.getShaderInfoLog(j)), null)
            },
            Qp = function(T, X) {
                for (var Q = {}, r = T.getProgramParameter(X, T.ACTIVE_UNIFORMS), R = 0; r > R; R++) {
                    var U = T.getActiveUniform(X, R),
                        h = U.name.replace(/\[.*?\]/, ""),
                        H = ng(T, U.type);
                    Q[h] = {
                        type: H,
                        size: U.size,
                        location: T.getUniformLocation(X, h),
                        value: Vl(H, U.size)
                    }
                }
                return Q
            },
            rb = function(p, v) {
                for (var f = {}, l = p.getProgramParameter(v, p.ACTIVE_ATTRIBUTES), $ = 0; l > $; $++) {
                    var n = p.getActiveAttrib(v, $),
                        q = ng(p, n.type);
                    f[n.name] = {
                        type: q,
                        size: gl(q),
                        gl: p,
                        location: p.getAttribLocation(v, n.name),
                        pointer: zr
                    }
                }
                return f
            },
            zr = function(G, t, n, x, F) {
                var q = this.gl;
                q.enableVertexAttribArray(this.location), G instanceof Ik.Buffer || (G = Ik.Buffer.createVertexBuffer(q, G)), q.bindBuffer(G.type, G.buffer), q.vertexAttribPointer(this.location, this.size, t || q.FLOAT, n || !1, x || 0, F || 0)
            },
            gl = function(G) {
                return yk[G]
            },
            yk = {
                "float": 1,
                vec2: 2,
                vec3: 3,
                vec4: 4,
                "int": 1,
                ivec2: 2,
                ivec3: 3,
                ivec4: 4,
                bool: 1,
                bvec2: 2,
                bvec3: 3,
                bvec4: 4,
                mat2: 4,
                mat3: 9,
                mat4: 16,
                sampler2D: 1
            },
            ng = function(_, A) {
                if (!vs) {
                    var Y = G.keys(In);
                    vs = {};
                    for (var u = 0; u < Y.length; ++u) {
                        var l = Y[u];
                        vs[_[l]] = In[l]
                    }
                }
                return vs[A]
            },
            vs = null,
            In = {
                FLOAT: "float",
                FLOAT_VEC2: "vec2",
                FLOAT_VEC3: "vec3",
                FLOAT_VEC4: "vec4",
                INT: "int",
                INT_VEC2: "ivec2",
                INT_VEC3: "ivec3",
                INT_VEC4: "ivec4",
                BOOL: "bool",
                BOOL_VEC2: "bvec2",
                BOOL_VEC3: "bvec3",
                BOOL_VEC4: "bvec4",
                FLOAT_MAT2: "mat2",
                FLOAT_MAT3: "mat3",
                FLOAT_MAT4: "mat4",
                SAMPLER_2D: "sampler2D"
            },
            Vl = function(l, t) {
                switch (l) {
                    case "float":
                        return 0;
                    case "vec2":
                        return new Float32Array(2 * t);
                    case "vec3":
                        return new Float32Array(3 * t);
                    case "vec4":
                        return new Float32Array(4 * t);
                    case "int":
                    case "sampler2D":
                        return 0;
                    case "ivec2":
                        return new Int32Array(2 * t);
                    case "ivec3":
                        return new Int32Array(3 * t);
                    case "ivec4":
                        return new Int32Array(4 * t);
                    case "bool":
                        return !1;
                    case "bvec2":
                        return Wi(2 * t);
                    case "bvec3":
                        return Wi(3 * t);
                    case "bvec4":
                        return Wi(4 * t);
                    case "mat2":
                        return new Float32Array([1, 0, 0, 1]);
                    case "mat3":
                        return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
                    case "mat4":
                        return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
                }
            },
            Wi = function(w) {
                for (var $ = new Array(w), q = 0; q < $.length; q++) $[q] = !1;
                return $
            },
            Zi = function(s, e) {
                var k = {
                    data: {}
                };
                k.gl = s;
                for (var j = G.keys(e), g = 0; g < j.length; g++) {
                    var i = j[g],
                        H = i.split("."),
                        S = H[H.length - 1],
                        f = Eo(H, k),
                        o = e[i];
                    f.data[S] = o, f.gl = s, G.defineProperty(f, S, {
                        get: Ag(S),
                        set: Ar(S, o)
                    })
                }
                return k
            },
            Ag = function(y) {
                var m = jr.replace("%%", y);
                return new Function(m)
            },
            Ar = function(j, K) {
                var $, E = Zh.replace(/%%/g, j);
                return $ = 1 === K.size ? He[K.type] : Ld[K.type], $ && (E += "\nthis.gl." + $ + ";"), new Function("value", E)
            },
            Eo = function(x, D) {
                for (var H = D, p = 0; p < x.length - 1; p++) {
                    var G = H[x[p]] || {
                        data: {}
                    };
                    H[x[p]] = G, H = G
                }
                return H
            },
            jr = ["return this.data.%%.value;"].join("\n"),
            Zh = ["this.data.%%.value = value;", "var location = this.data.%%.location;"].join("\n"),
            He = {
                "float": "uniform1f(location, value)",
                vec2: "uniform2f(location, value[0], value[1])",
                vec3: "uniform3f(location, value[0], value[1], value[2])",
                vec4: "uniform4f(location, value[0], value[1], value[2], value[3])",
                "int": "uniform1i(location, value)",
                ivec2: "uniform2i(location, value[0], value[1])",
                ivec3: "uniform3i(location, value[0], value[1], value[2])",
                ivec4: "uniform4i(location, value[0], value[1], value[2], value[3])",
                bool: "uniform1i(location, value)",
                bvec2: "uniform2i(location, value[0], value[1])",
                bvec3: "uniform3i(location, value[0], value[1], value[2])",
                bvec4: "uniform4i(location, value[0], value[1], value[2], value[3])",
                mat2: "uniformMatrix2fv(location, false, value)",
                mat3: "uniformMatrix3fv(location, false, value)",
                mat4: "uniformMatrix4fv(location, false, value)",
                sampler2D: "uniform1i(location, value)"
            },
            Ld = {
                "float": "uniform1fv(location, value)",
                vec2: "uniform2fv(location, value)",
                vec3: "uniform3fv(location, value)",
                vec4: "uniform4fv(location, value)",
                "int": "uniform1iv(location, value)",
                ivec2: "uniform2iv(location, value)",
                ivec3: "uniform3iv(location, value)",
                ivec4: "uniform4iv(location, value)",
                bool: "uniform1iv(location, value)",
                bvec2: "uniform2iv(location, value)",
                bvec3: "uniform3iv(location, value)",
                bvec4: "uniform4iv(location, value)",
                sampler2D: "uniform1iv(location, value)"
            },
            kh = function(g) {
                function v(_) {
                    if ("string" != typeof _) return 0 | _;
                    switch (_) {
                        case "low":
                            return 512;
                        case "medium":
                            return 1024;
                        case "ultra":
                            return 4096;
                        default:
                            return 2048
                    }
                }

                function n() {
                    p.enable = !z.graph3dViewShadowDisabled, a = z.graph3dViewShadowType, _ = z.graph3dViewShadowIntensity, W = z.graph3dViewShadowBias, l = z.graph3dViewShadowQuality, Q = z.graph3dViewShadowRadius, k = z.graph3dViewShadowDegreeX, b = z.graph3dViewShadowDegreeZ
                }
                var p = this;
                p.enable = !1;
                var a, _, W, l, Q, k, b;
                n();
                var I, P, K, S, t = 1,
                    J = v(l),
                    B = !1,
                    C = new F.Math.Matrix4,
                    h = new F.Math.Matrix4,
                    D = p.pvMatrix = new F.Math.Matrix4,
                    u = 0;
                p.render = function() {
                    if (!g._picking && p.enable) {
                        var s = g.getGL();
                        if (s) {
                            if (B && p.setupShadowCamera(), g._glCapabilities && (J = Math.min(J, g._glCapabilities.maxTextureSize)), S = g.isReflecting(s)) {
                                if (u === s._renderInfo.frame) return;
                                u = s._renderInfo.frame
                            }
                            var _ = S ? "mapForReflector" : "map";
                            if ((I = p[_]) ? I.setSize(J, J) : I = p[_] = new cg(g, g.getGL(), 0, 0, {
                                    samples: 1,
                                    minFilter: hq.NEAREST,
                                    magFilter: hq.NEAREST,
                                    width: J,
                                    height: J
                                }), !s._shadowShader) {
                                var C = "#define MAX_BOX_CLIPPER " + g._boxClippers.length;
                                s._shadowShader = new Ik.Shader(s, kh.shaderSrc.vs.replace("$DEFINE", C), kh.shaderSrc.fs.replace("$DEFINE", C))
                            }
                            var H = g._frameState,
                                b = H.renderState.glState;
                            b.blend.enabled = !1, b.depth.enabled = !0, b.depth.mask = !0;
                            var Y = b.color.clear.slice(0);
                            kj(s, [1, 1, 1, 1]), H.renderState.useProgram(s._shadowShader.program), y(), kj(s, Y)
                        }
                    }
                }, p.deleteShadowProgram = function() {
                    var B = g.getGL();
                    B && B._shadowShader && (B.deleteProgram(B._shadowShader.program), B._shadowShader = null)
                }, p.getShadow = function() {
                    var A = {
                        degreeX: k,
                        degreeZ: b,
                        intensity: _,
                        quality: l,
                        type: a,
                        radius: Q,
                        bias: W
                    };
                    return 1 !== t && (A.boundExtend = t), A
                }, p.setShadow = function(c, j) {
                    c = !!c;
                    var H = p.enable !== c;
                    p.enable = c, "object" == typeof j && (j.intensity !== O && (_ = j.intensity), j.bias !== O && (W = j.bias), j.radius !== O && (Q = j.radius), j.degreeX !== O && (k = j.degreeX), j.degreeZ !== O && (b = j.degreeZ), j.quality !== O && (l = j.quality), j.type !== O && a !== j.type && (a = j.type, H = !0), J = v(l), j.boundExtend !== O && (t = j.boundExtend)), c && p.setupShadowCamera(), H && qc(g), g.iv()
                };
                var G = null;
                p.tryInvalidateLater = function(K, Q) {
                    "modelLoaded" === Q && (G && _j(G, !0), G = jf(function() {
                        G = null, p.refresh()
                    }, p, O, 200))
                }, p.refresh = function() {
                    this.enable && (this.setupShadowCamera(), g.iv())
                }, p.tryUpdateBounding = function(h) {
                    var Y = this.boundingSphere;
                    if (Y) {
                        var l = (new gb).fromArray(Qj(h, g.getMat(h))),
                            I = h.getAnchor3d(),
                            G = new Cb;
                        Y.containsPoint(G.set(0 - I.x, 0 - I.y, 0 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(0 - I.x, 0 - I.y, 1 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(0 - I.x, 1 - I.y, 0 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(0 - I.x, 1 - I.y, 1 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(1 - I.x, 0 - I.y, 0 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(1 - I.x, 0 - I.y, 1 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(1 - I.x, 1 - I.y, 0 - I.z).applyMatrix4(l)) && Y.containsPoint(G.set(1 - I.x, 1 - I.y, 1 - I.z).applyMatrix4(l)) || p.setupShadowCamera()
                    }
                }, p.createShadow = function(R) {
                    if (R || (R = g._frameState.renderState.directUniforms()), R.shadowMatrix = D.toArray(), g._getFrameRenderOptions("renderShadow") === !1) {
                        var C, z = g.getGL();
                        (C = z._emptyShadowTexture) || (C = z._emptyShadowTexture = vh(z, null, [255, 255, 255, 255])), R.shadowMap = C
                    } else {
                        var s = g._getFrameRenderOptions("useReflectorSelfShadowMap") && p.mapForReflector;
                        R.shadowMap = s ? p.mapForReflector.texture : p.map.texture
                    }
                    R.shadowSize = [I.width, I.height], R.shadowIntensity = _, R.shadowBias = W, R.shadowRadius = Q
                }, p.genShaderDefine = function() {
                    var i = "#define USE_SHADOWMAP\n";
                    return "hard" === a ? i += "#define SHADOWMAP_TYPE_PCF\n" : "soft" === a && (i += g.isGLTempRegisterLimited() ? "#define SHADOWMAP_TYPE_PCF\n" : "#define SHADOWMAP_TYPE_PCF_SOFT\n"), i
                };
                var H;
                p.setupShadowCamera = function() {
                    P || (P = p.boundingSphere = new F.Math.Sphere), B = !1;
                    var G, N, u = g.getBoundingBox(g.dm().toDatas(function(A) {
                        return A.s("shadow.cast") && g.isVisible(A)
                    }));
                    u ? (G = new Cb(u.min), N = new Cb(u.max)) : (G = new Cb(-256, -256, -256), N = new Cb(256, 256, 256), B = !0), P.set(G.clone().add(N).multiplyScalar(.5), .5 * G.distanceTo(N) * t);
                    var T, h = P.radius,
                        Q = g.getBoundingBox(g.dm().toDatas(function(_) {
                            return (_.s("shadow.cast") || _.s("shadow.receive")) && g.isVisible(_)
                        }));
                    if (Q) {
                        G.copy(Q.min), N.copy(Q.max);
                        var _ = .5 * G.distanceTo(N);
                        T = _ + Math.min(_, h + P.center.distanceTo(G.add(N).multiplyScalar(.5)))
                    } else T = 2 * h;
                    H = bj(Yn(), -h, h, -h, h, T / 1e3, T), D.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), D.multiply(C.fromArray(H));
                    var y = Math.tan(-k * Math.PI / 180),
                        e = Math.tan(-b * Math.PI / 180),
                        z = h / Math.sqrt(y * y + e * e + 1),
                        v = new Cb(z * y, z, z * e);
                    C.lookAt(v, new Cb(0, 0, 0), new Cb(0, 1, 0)).setPosition(v.add(P.center)), C.getInverse(C), D.multiply(C)
                };
                var y = function() {
                    var d = g.getGL(),
                        q = J,
                        j = J;
                    I.setSize(d, q, j), I.bind(d), d.clear(hq.COLOR_BUFFER_BIT | hq.DEPTH_BUFFER_BIT);
                    var L = g._frameState,
                        b = L.renderState,
                        i = b.directUniforms(),
                        X = b.directAttribs(),
                        Y = b.directState();
                    i.projectionMatrix = H, (K = g._boxClippers.length > 0) && (xe(g, i, Cm), i.uClipperMatrix = g._boxClipperMatrixes, i.uClipperClipInner = g._boxClipperClipInner);
                    var D = g._viewport;
                    g.setViewport(d, 0, 0, q, j);
                    var P, t, u, k;
                    for (P = 0, t = od.length; t > P; P++)
                        if (u = od[P], !_b[u].ignore && (k = g._40Q.get(u))) {
                            var C = k.batchIndexMap;
                            p.renderItems(d, i, X, Y, k.opaque, C), p.renderItems(d, i, X, Y, k.transparent, C), p.renderBatch(d, i, X, Y, k.batchModelMap, C)
                        }
                    I.unbind(d), g.setViewport(d, D[0], D[1], D[2], D[3])
                };
                p._renderDirect = function(H, T, i, l) {
                    i && i.length && (T.position = Cs(H, g._buffer.vs, i, Y), l ? (dm(H, g._buffer.is, l), Km(H, 0, l.length, null, l instanceof Uint32Array ? H.UNSIGNED_INT : null)) : il(H, 0, i.length / 3))
                }, p.renderShapeModel = function(c, o, N, B) {
                    var C, O, _;
                    if (ym(N))
                        for (O = 0, _ = N.length; _ > O; O++) C = N[O], C && p.renderShapeModel(c, o, C, B);
                    else Sf(N) ? p.renderShapeModel(c, o, Ml(B, N), B) : jl(N) && (N.shape3d ? p.renderShapeModel(c, o, N.shape3d, B) : p.renderShapeModelImpl(c, o, N))
                }, p.renderShapeModelImpl = function(z, c, Y) {
                    Ul(Y), p._renderDirect(z, c, Y.vs, Y.is), p._renderDirect(z, c, Y.top_vs, Y.top_is), p._renderDirect(z, c, Y.bottom_vs, Y.bottom_is), p._renderDirect(z, c, Y.from_vs, Y.from_is), p._renderDirect(z, c, Y.to_vs, Y.to_is)
                }, p.renderBatch = function(o, c, H, J, $) {
                    if (!Mq($) && !g.drawFilter) {
                        c.modelViewMatrix = h.identity().premultiply(C).toArray();
                        var n, I, F;
                        for (n in $) F = g.getBatchInfo(n) || Ce, F.visible !== !1 && F.shadowCast !== !1 && (S && F.reflectable === !1 || (I = $[n], I.invalidate && sb(I), K && (c.modelMatrix = _r, xe(g, c, F.clipboxMask === O ? Jh : F.clipboxMask)), p._renderDirect(o, H, I.vs32, I.is)))
                    }
                }, p.renderItems = function(H, r, Q, D, l, m) {
                    var i, t, Y, R, P, o, k = l.length;
                    for (i = 0; k > i; i++)
                        if (t = l[i], R = t.ui, Y = t.data, !(wr(Y) || !Y.s("shadow.cast") || Y instanceof en || Y.s("effect.flow") || !g.isVisible(Y) || m[Y._id] || S && Y.s("3d.reflectable") === !1)) {
                            var J = R.s("3d.clip.direction");
                            if (J) {
                                var s = R.s("3d.clip.percentage");
                                if (0 === s) continue;
                                var j = R._formatClipUniforms(J, s, Y);
                                r.uClipPercent = j[1], r.uClipDirection = j[0]
                            } else r.uClipDirection = 0;
                            P = R.shapeModel || Ml(R), P || (P = Y instanceof F.Node && !(Y instanceof F.Shape) ? {
                                vs: tm,
                                is: Lp
                            } : [R.left, R.front, R.right, R.back, R.top, R.bottom]), o = R.mat ? h.fromArray(R.mat) : h.identity(), K && (r.modelMatrix = o.toArray(), xe(g, r, Y.s("3d.clipbox") ? Cm : Y.s("3d.clipbox.mask"))), r.modelViewMatrix = o.premultiply(C).toArray(), D.cullFace.enabled = !!Y.s("shape3d.reverse.cull"), p.renderShapeModel(H, Q, P, R)
                        }
                }, p.resetProperties = n
            };
        kh.shaderSrc = {
            vs: ["$DEFINE", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "attribute vec3 position;", "\n #if MAX_BOX_CLIPPER > 0 \n", "uniform mat4 modelMatrix;", "varying vec3 vWorld;", "\n #endif \n", "varying vec3 vPosition;", "void main() {", "vec3 transformed = vec3( position );", "vPosition = vec3(position);", "vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );", "\n #if MAX_BOX_CLIPPER > 0 \n", "vWorld = vec3(modelMatrix * vec4(transformed, 1.0));", "\n #endif \n", "gl_Position = projectionMatrix * mvPosition;", "}"].join("\n"),
            fs: ["$DEFINE", "precision highp float;", "const float PackUpscale = 256. / 255.;", "const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );", "const float ShiftRight8 = 1. / 256.;", "varying vec3 vPosition;", "uniform int uClipDirection;", "uniform float uClipPercent;", "\n #if MAX_BOX_CLIPPER > 0 \n", "uniform bool uEnableBoxClip[MAX_BOX_CLIPPER];", "uniform bool uClipperClipInner[MAX_BOX_CLIPPER];", "uniform mat4 uClipperMatrix[MAX_BOX_CLIPPER];", "const vec3 clipMin = vec3(-0.5, -0.5, -0.5);", "const vec3 clipMax = vec3(0.5, 0.5, 0.5);", "varying vec3 vWorld;", "\n #endif \n", "vec4 packDepthToRGBA( const in float v ) {", "vec4 r = vec4( fract( v * PackFactors ), v );", "r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;", "}", "void main() {", "if (uClipDirection > 0) {", "vec3 dir = vec3(0.0, 0.0, 0.0);", "if (uClipDirection < 2) { dir.x = 1.0; }", "else if (uClipDirection < 3) { dir.x = -1.0; }", "else if (uClipDirection < 4) { dir.y = 1.0; }", "else if (uClipDirection < 5) { dir.y = -1.0; }", "else if (uClipDirection < 6) { dir.z = 1.0; }", "else if (uClipDirection < 7) { dir.z = -1.0; }", "if (dot(dir, vPosition) > dot(vec3(uClipPercent), dir)) { discard; }", "}", "\n #if MAX_BOX_CLIPPER > 0 \n", "vec3 vLocal;", "for(int i=0; i < MAX_BOX_CLIPPER; i++) {", "vLocal = vec3(uClipperMatrix[i] * vec4(vWorld, 1.0));", "if (uEnableBoxClip[i] && uClipperClipInner[i] != (all(lessThan(vLocal, clipMax)) && all(greaterThan(vLocal, clipMin)))) { discard; return; }", "}", "\n #endif \n", "gl_FragColor = packDepthToRGBA( gl_FragCoord.z );", "}"].join("\n")
        }, kh.PARAMS = ["quality", "intensity", "bias", "radius", "type", "degree.x", "degree.z"], po.ms_shadow = function(S) {
            kh.PARAMS.forEach(function(p) {
                var _ = p.replace(/(^|\.)[a-z]/g, function(d) {
                        return d[d.length - 1].toUpperCase()
                    }),
                    C = _.charAt(0).toLowerCase() + _.substr(1);
                S["getShadow" + _] = function() {
                    return this._getShadowParam(C)
                }, S["setShadow" + _] = function(b) {
                    this._setShadowParam(C, b)
                }
            }), S.enableShadow = function(V) {
                this.shadowMap.setShadow(!0, V)
            }, S.disableShadow = function() {
                this.shadowMap.setShadow(!1)
            }, S._getShadowParam = function(j) {
                return this.shadowMap.getShadow()[j]
            }, S._setShadowParam = function(A, w) {
                var x = this._getShadowParam(A),
                    B = {};
                B[A] = w;
                var F = this.shadowMap;
                F.setShadow(F.enable, B), this.firePropertyChange("shadow" + A.charAt(0).toUpperCase() + A.substr(1), x, w)
            }
        };
        var Lk = function(d) {
            function J(v, e, P, J, _) {
                var u = d.getData3dUI(P),
                    I = u.s("shape3d");
                if ("billboard" === I || "plane" === I) {
                    var q;
                    (q = t[e]) || (q = t[e] = new cg(d));
                    var Q = P.s("effect.flow.size"),
                        S = P.s("effect.flow.uvshape");
                    q.setSize(v, Q, Q), q.bind(v);
                    var z = d.getViewport(v);
                    d.setViewport(v, 0, 0, Q, Q), v.clear(v.COLOR_BUFFER_BIT | v.DEPTH_BUFFER_BIT);
                    var c, u = d.getData3dUI(P),
                        O = Ml(u, I);
                    if (!O) return !1;
                    !O.ns && O.length && (O = O[0]), Ul(O), c = O.vs;
                    var o, m = P.s("effect.flow.gradient");
                    if (m) {
                        if (o = "Flow3d.Cached." + m, !F.Default.getImageMap()[o]) {
                            var x = 100;
                            F.Default.setImage(o, F.Default.toCanvas({
                                width: x,
                                height: x,
                                comps: [{
                                    type: "rect",
                                    background: "rgb(0,0,0)",
                                    gradient: m,
                                    rect: [0, 0, x, x]
                                }]
                            }, x, x))
                        }
                    } else o = P.s("shape3d.image");
                    J.useXZ = "plane" === I, J.image = d.getTexture(o, P), J.blend = P.s("effect.flow.blend") || l, J.uvMatrix = ql(u.s("shape3d.uv.rotation"), u.s("shape3d.uv.offset"), u.s("shape3d.uv.scale"), u.s("shape3d.uv.anchor"), T).toArray9(), J.intensity = P.s("effect.flow.intensity");
                    var y = N.indexOf(S); - 1 === y && 0 === S.indexOf("polygon") && (y = Jn(1 * S.substring(7), 3, 1024) - 1), J.shape = y, _.position = Cs(v, null, c, Y, 3), il(v, 0, c.length / 3), q.unbind(v), d.setViewport(v, z[0], z[1], z[2], z[3]);
                    var H = P.getMatrix4();
                    H.getInverse(H);
                    var n = H.getElements();
                    "plane" === I ? n[1] = n[5] = n[9] = n[13] = 0 : n[2] = n[6] = n[10] = n[14] = 0, r[e] = {
                        matrix: H,
                        group: P.s("effect.flow.group")
                    }
                }
            }
            var T, q = this,
                t = this.renderTargetPool = [],
                r = [],
                N = ["rect", "circle", "polygon"];
            q.render = function() {
                if (!d._picking) {
                    var v = d._flowObjects;
                    if (v.length) {
                        var T = d.getGL();
                        if (T) {
                            var D;
                            (D = T._flowShader) || (D = T._flowShader = new Ik.Shader(T, Lk.shaderSrc.vs, Lk.shaderSrc.fs));
                            var L = d._frameState.renderState,
                                Z = L.glState;
                            Z.blend.enabled = !1, Z.depth.enabled = !1, Z.cullFace.enabled = !1;
                            var K = Z.color.clear.slice(0);
                            kj(T, [0, 0, 0, 1]), L.useProgram(D.program);
                            var u, r, o = L.directUniforms(),
                                h = L.directAttribs();
                            for (u = 0, r = v.length; r > u; u++) J(T, u, v[u], o, h);
                            kj(T, K), t.length !== r && t.splice(r, t.length - r)
                        }
                    }
                }
            }, q.createFlow = function(Y) {
                var z;
                if (z = t.length) {
                    Y || (Y = d._frameState.renderState.directUniforms());
                    for (var W = [], M = [], u = [], X = 0; z > X; X++) W[X] = r[X].matrix.toArray(), M[X] = t[X].texture, u[X] = !1;
                    Y.flowMatrix = W;
                    for (var X = 0; z > X; X++) Y["flowTexture" + X] = M[X];
                    Y.flowEnabled = u
                }
            }, q.disableFlow = function(E) {
                var X;
                if (X = t.length) {
                    E || (E = d._frameState.renderState.directUniforms());
                    for (var V = [], h = 0; X > h; h++) V[h] = !1;
                    E.flowEnabled = V
                }
            }, q.resetDataFlowEnabld = function(F, c) {
                var s = F.s("effect.flow.mask"),
                    X = t.length,
                    u = new Array(X);
                if (s)
                    for (var z = 0; X > z; z++) s & 1 << r[z].group && (u[z] = !0);
                c.flowEnabled = u
            };
            var l = "white"
        };
        Lk.shaderSrc = {
            vs: ["uniform bool useXZ;", "attribute vec3 position;", "varying vec2 vUv;", "void main() {", "if (useXZ) vUv = vec2(position.x, position.z);", "else vUv = vec2(position.x, position.y);", "gl_Position = vec4(vUv * 2.0, 0.0, 1.0);", "}"].join("\n"),
            fs: ["precision highp float;", "const float pi2 = 6.2831853;", "uniform sampler2D image;", "uniform mat3 uvMatrix;", "uniform int shape;", "uniform vec4 blend;", "uniform float intensity;", "varying vec2 vUv;", "void main() {", "vec2 uv;", "float angle = atan(vUv.y, vUv.x) / pi2 + 0.5;", "if (shape == 0) {", "uv = vUv + 0.5;", "}", "else if (shape == 1) {", "uv = vec2(length(vUv) * 2.0, angle);", "}", "else {", "float step = 1.0 / float(shape + 1);", "float modAngle = mod(angle, step) - step * 0.5;", "uv = vec2(length(vUv) * 2.0 * cos(modAngle * pi2) , angle);", "}", "vec4 color = texture2D(image, vec2((uvMatrix * vec3(uv, 1.0)).xy)) * blend;", "gl_FragColor = color * color.a * intensity;", "}"].join("\n")
        };
        var ni = function(_) {
            this.gv = _, this.onMouseOver = this.onMouseOver.bind(this), this.resetProperties()
        };
        ni.Mode = {
            Disable: 0,
            Selection: 1,
            MouseOver: 2,
            Style: 3
        }, po.ms_highlight = function($) {
            $.setHighlightMode = function(s) {
                var i;
                i = "selection" === s || "selected" === s ? ni.Mode.Selection : "mouseover" === s || "hover" === s ? ni.Mode.MouseOver : "style" === s ? ni.Mode.Style : ni.Mode.Disable;
                var A = this.getHighlightMode();
                this._highlightHelper.mode = i, this.firePropertyChange("highlightMode", A, s)
            }, $.getHighlightMode = function() {
                var f = this._highlightHelper.mode;
                return f === ni.Mode.Selection ? "selected" : f === ni.Mode.MouseOver ? "hover" : f === ni.Mode.Style ? "style" : "disabled"
            }, ["type", "color", "width", "glow", "strength"].forEach(function(c) {
                var s = c.replace(/(^|\.)[a-z]/g, function(H) {
                    return H[H.length - 1].toUpperCase()
                });
                $["getHighlight" + s] = function() {
                    return this._highlightHelper[c]
                }, $["setHighlight" + s] = function(w) {
                    var $ = this._highlightHelper,
                        U = $[c];
                    w !== U && ($[c] = w, this.firePropertyChange("highlight" + s, U, w))
                }
            })
        }, Wj(ni, G, {
            onMouseOver: function(N) {
                z.preventDefault(N);
                var p = this.gv;
                if (!p._48Q) {
                    var u = p.getDataAt(N);
                    u !== this.mouseOverData && (this.mouseOverData = u, p.iv())
                }
            },
            setFetchTargetFunc: function(B) {
                this.fetchTargetFunc = B
            },
            _42: function(W, x) {
                var t, Q, s = this,
                    Y = s._mode,
                    k = s.gv;
                if (!W._renderInfo.reflectDepth && Y !== ni.Mode.Disable) {
                    if (Y === ni.Mode.Selection ? t = k.sm().getSelection().toArray(function(R) {
                            return R.s("highlight.visible")
                        }) : Y === ni.Mode.MouseOver && s.mouseOverData && s.mouseOverData.s("highlight.visible") && (t = [s.mouseOverData]), s.fetchTargetFunc && (t = s.fetchTargetFunc(t)), Y === ni.Mode.Style) t = t || [], Q = function(n) {
                        if (t.indexOf(n) >= 0) return !1;
                        var w = k.getDataHighlightMode(n);
                        return w === !1 ? !0 : w === !0 ? !1 : "selected" === w ? k.isSelected(n) ? !1 : !0 : "hover" === w ? n === s.mouseOverData ? !1 : !0 : !0
                    };
                    else {
                        if (!t || !t.length) return;
                        Q = function(O) {
                            return t.indexOf(O) < 0 ? !0 : void 0
                        }
                    }
                    var B = k.isVRPresenting(),
                        g = k.getWidth();
                    if (B) {
                        var N = k.getWidth;
                        g /= 2, k.getWidth = function() {
                            return g
                        };
                        var m = k.getViewport()
                    }
                    var A, O = k.getDevicePixelRatio(),
                        C = Math.floor(g * O),
                        v = Math.floor(k.getHeight() * O);
                    (A = s._renderTarget) ? A.setSize(W, C, v): s._renderTarget = A = new Hn.RenderTarget(k, W, C, v);
                    var e = "soft" === s.type;
                    if (A.bind(W), e) {
                        var F = W.getParameter(W.COLOR_CLEAR_VALUE);
                        kj(W, [1, 1, 1, 1]), W.clear(W.COLOR_BUFFER_BIT), kj(W, F)
                    } else W.clear(W.COLOR_BUFFER_BIT);
                    k.setViewport(W, 0, 0, C, v), k.drawFilter = Q, li = function(V, e, X, k, G, p) {
                        var v = [X ? 0 : 1, 1, 1, 1];
                        return p || ($f.for(V).directUniforms().uFixPickReverseColor = v), v
                    }, k.renderPickScene(), li = xm, k.drawFilter = null, A.unbind(W), Bp && ch(W, x.aPosition), ch(W, x.aNormal), B && (k.getWidth = N, k.setViewport(W, m[0], m[1], m[2], m[3]));
                    var z = k.getHighlightColor();
                    if (s._lastHighlightColor !== z) {
                        var q = gr(s._lastHighlightColor = z);
                        s._highlightColorData = [q[0] / 255, q[1] / 255, q[2] / 255, q[3] / 255]
                    }
                    return e ? s.renderSoftOutline(W, C, v) : s.renderHardOutline(W, C, v), W.useProgram(x = k._prg), Bp && re(W, x.aPosition), !0
                }
            },
            _assureShader: function(C, d) {
                var r = C._compiledShader[d];
                return r || (r = C._compiledShader[d] = new Ik.Shader(C, ni.CommonShaderVs, ni[d].fs)), r
            },
            renderHardOutline: function(q, O, M) {
                var D = this,
                    U = D.gv,
                    s = U._postProcessing,
                    P = $f.for(q),
                    w = P.directState();
                w.blend.enabled = !0, w.depth.enabled = !1, s.blitScreen(null, D._renderTarget.texture, D._assureShader(q, "HighlightHard"), {
                    textureSize: [O, M],
                    edgeWidth: U.getHighlightWidth(),
                    edgeColor: D._highlightColorData
                }, {
                    clear: !1
                }), w.blend.enabled = !1, w.depth.enabled = !0
            },
            renderSoftOutline: function(P, M, F) {
                var J, z, q, u, D, y = this,
                    T = y.gv,
                    f = T._postProcessing,
                    V = Math.floor(M / 2),
                    i = Math.floor(F / 2),
                    K = Math.floor(M / 4),
                    n = Math.floor(F / 4),
                    Y = y._downSampleRenderTarget;
                Y ? (J = y._edgeDetectionRenderTarget, z = y._blurV2, q = y._blurH2, u = y._blurV4, D = y._blurH4, (Y.width !== V || Y.height !== i) && (Y.setSize(V, i), J.setSize(V, i), z.setSize(V, i), q.setSize(V, i), u.setSize(K, n), D.setSize(K, n))) : (Y = y._downSampleRenderTarget = new Hn.RenderTarget(T, P, V, i), J = y._edgeDetectionRenderTarget = new Hn.RenderTarget(T, P, V, i), z = y._blurV2 = new Hn.RenderTarget(T, P, V, i), q = y._blurH2 = new Hn.RenderTarget(T, P, V, i), u = y._blurV4 = new Hn.RenderTarget(T, P, K, n), D = y._blurH4 = new Hn.RenderTarget(T, P, K, n));
                var W = P.getParameter(P.COLOR_CLEAR_VALUE),
                    C = T.getViewport(),
                    X = y.width,
                    N = y.strength,
                    e = y.glow,
                    E = $f.for(P).glState,
                    a = E.depth,
                    t = E.blend,
                    A = a.enabled;
                kj(P, [1, 1, 1, 1]), a.enabled = !1, t.apply({
                    func: [P.SRC_ALPHA, P.ONE]
                }), f.blitScreen(Y, y._renderTarget.texture), f.blitScreen(J, Y.texture, y._assureShader(P, "EdgeDetection"), {
                    texSize: [V, i],
                    color: y._highlightColorData
                }), f.blitScreen(q, J.texture, y._assureShader(P, "Blur"), {
                    direction: [1, 0],
                    texSize: [V, i],
                    radius: X
                }), f.blitScreen(z, q.texture, y._assureShader(P, "Blur"), {
                    direction: [0, 1],
                    texSize: [V, i],
                    radius: X
                }), f.blitScreen(D, z.texture, y._assureShader(P, "Blur"), {
                    direction: [1, 0],
                    texSize: [K, n],
                    radius: X
                }), f.blitScreen(u, D.texture, y._assureShader(P, "Blur"), {
                    direction: [0, 1],
                    texSize: [K, n],
                    radius: X
                }), t.apply({
                    enabled: !0
                }), T.setViewport(P, C[0], C[1], C[2], C[3]), f.blitScreen(null, y._renderTarget.texture, y._assureShader(P, "BlendTogether"), {
                    edgeTexture1: z.texture,
                    edgeTexture2: u.texture,
                    edgeStrength: N * X,
                    edgeGlow: e
                }, {
                    clear: !1
                }), t.apply({
                    func: [P.SRC_ALPHA, P.ONE_MINUS_SRC_ALPHA, P.ONE, P.ONE_MINUS_SRC_ALPHA]
                }), a.enabled = A, kj(P, W)
            },
            resetProperties: function() {
                this.mode = ni.Mode.Style, this.type = A["highlight.type"], this.color = A["highlight.color"], this.width = A["highlight.width"], this.glow = A["highlight.glow"], this.strength = A["highlight.strength"]
            }
        }), G.defineProperties(ni.prototype, {
            mode: {
                get: function() {
                    return this._mode
                },
                set: function(N) {
                    var l = this._mode;
                    if (N !== l) {
                        this._mode = N;
                        var x = l === ni.Mode.MouseOver || l === ni.Mode.Style,
                            T = N === ni.Mode.MouseOver || N === ni.Mode.Style;
                        T && x || (x && J(this.gv.getView(), "mousemove", this.onMouseOver), T && D(this.gv.getView(), "mousemove", this.onMouseOver))
                    }
                }
            }
        }), ni.CommonShaderVs = ["attribute vec2 pos;", "varying vec2 vUv;", "void main(void) {", "gl_Position = vec4(pos.x * 2.0 - 1.0, -pos.y * 2.0 + 1.0, 0.0, 1.0);", "vUv = vec2(pos.x, 1.0 - pos.y);", "}"].join("\n"), ni.HighlightHard = {
            fs: ["precision highp float;", "uniform sampler2D image;", "uniform vec2 textureSize;", "uniform float edgeWidth;", "uniform vec4 edgeColor;", "varying vec2 vUv;", "float getCol(vec2 coord) {", "return texture2D(image, coord).a;", "}", "void main() {", "vec2 cc = vUv;", "float center = getCol(cc);", "float dx = edgeWidth / textureSize.x;", "float dy = edgeWidth / textureSize.y;", "vec2 coord;", "float topLeft = getCol(cc+vec2(-dx, -dy));", "float top = getCol(cc+vec2(0.0, -dy));", "float topRight = getCol(cc+vec2(dx, -dy));", "float left = getCol(cc+vec2(-dx, 0.0));", "float right = getCol(cc+vec2(dx, 0.0));", "float bottomLeft = getCol(cc+vec2(-dx, dy));", "float bottom = getCol(cc+vec2(0.0, dy));", "float bottomRight = getCol(cc+vec2(dx, dy));", "float v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;", "float h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;", "float edge = sqrt(h * h + v * v);", "edge = smoothstep(0.9, 1.0, edge);", "if (edge < 0.5) {", "discard;", "}", "gl_FragColor = edgeColor;", "}"].join("\n")
        }, ni.EdgeDetection = {
            fs: ["precision highp float;", "uniform sampler2D image;", "varying vec2 vUv;", "uniform vec2 texSize;", "uniform vec4 color;", "void main() {", "vec2 invSize = 1.0 / texSize;", "vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);", "vec4 c1 = texture2D( image, vUv + uvOffset.xy);", "vec4 c2 = texture2D( image, vUv - uvOffset.xy);", "vec4 c3 = texture2D( image, vUv + uvOffset.yw);", "vec4 c4 = texture2D( image, vUv - uvOffset.yw);", "float diff1 = (c1.r - c2.r)*0.5;", "float diff2 = (c3.r - c4.r)*0.5;", "float d = length( vec2(diff1, diff2) );", "gl_FragColor = color * vec4(d);", "}"].join("\n")
        }, ni.Blur = {
            fs: ["#define MAX_RADIUS 4", "precision highp float;", "varying vec2 vUv;", "uniform sampler2D image;", "uniform vec2 texSize;", "uniform vec2 direction;", "uniform float radius;", "float gaussianPdf(in float x, in float sigma) {", "return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;", "}", "void main() {", "vec2 invSize = 1.0 / texSize;", "float weightSum = gaussianPdf(0.0, radius);", "vec4 diffuseSum = texture2D( image, vUv) * weightSum;", "vec2 delta = direction * invSize * radius/float(MAX_RADIUS);", "vec2 uvOffset = delta;", "for( int i = 1; i <= MAX_RADIUS; i ++ ) {", "float w = gaussianPdf(uvOffset.x, radius);", "vec4 sample1 = texture2D( image, vUv + uvOffset);", "vec4 sample2 = texture2D( image, vUv - uvOffset);", "diffuseSum += ((sample1 + sample2) * w);", "weightSum += (2.0 * w);", "uvOffset += delta;", "}", "gl_FragColor = diffuseSum/weightSum;", "}"].join("\n")
        }, ni.BlendTogether = {
            fs: ["precision highp float;", "varying vec2 vUv;", "uniform sampler2D image;", "uniform sampler2D edgeTexture1;", "uniform sampler2D edgeTexture2;", "uniform float edgeStrength;", "uniform float edgeGlow;", "void main() {", "vec4 edgeValue1 = texture2D(edgeTexture1, vUv);", "vec4 edgeValue2 = texture2D(edgeTexture2, vUv);", "vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;", "float vv = texture2D(image, vUv).r;", "vec4 finalColor = edgeStrength * vv * edgeValue;", "gl_FragColor = finalColor;", "}"].join("\n")
        };
        var Ko = F.Light = function() {
            ip(Ko, this), this.s(Yi, A[Yi]), this.s(zf, "sphere"), this.s("shape3d.reverse.cull", !0), this.s3(20, 20, 20)
        };
        mb("Light", xp, {
            _image: "light_icon",
            _icon: "light_icon",
            onStyleChanged: function(c, d, L) {
                Ko.superClass.onStyleChanged.apply(this, arguments), c === Yi && this.s("shape3d.color", L)
            }
        });
        var as = Hn.FrameState = function(x, m) {
            this.renderState = $f.for(m), this.picking = !1, this.envmapReflectivity = .5, this.cameraPosition = O, this.projectMatrix = O, this.viewMatrix = O, this.view = x, this.defaultProgram = O, this.pickColorMap = O, this._pvStack = [], this._renderStateStack = []
        };
        as.prototype.savePV = function() {
            var h = this.view;
            this._pvStack.push([fj(this.projectMatrix), fj(this.viewMatrix), h._18Q, fj(h._7O)])
        }, as.prototype.restorePV = function() {
            var x = this._pvStack.pop();
            if (x) {
                var L = this.view;
                this.projectMatrix = L._projectMatrix = x[0], this.viewMatrix = L._viewMatrix = x[1], L._18Q = x[2], L._7O = x[3]
            }
        }, as.prototype.setPV = function(D, u) {
            var m = this.view,
                l = !1;
            if (D && (this.projectMatrix = m._projectMatrix = D, l = !0), u && (this.viewMatrix = m._viewMatrix = u, m._7O = fj(u), l = !0), l) {
                var Y = m.getWidth(),
                    p = m.getHeight(),
                    j = fj(this.projectMatrix);
                m._18Q = Qn(j, j, u), m._18Q._wh = Y / p
            }
        }, as.prototype.syncEnv = function(l) {
            var A = this,
                Z = A.view;
            A.envmapReflectivity = Z._envmapReflectivity || .5, A.cameraPosition = Z.getEye(), A.projectMatrix = Z._projectMatrix, A.viewMatrix = Z._viewMatrix, A.pickColorMap = l, A.picking = Z.getGL()._picking
        }, as.prototype.setGLState = function() {
            var Y = [0, 0, 0, 0],
                U = [!0, !0, !0, !0],
                s = [-1, 1],
                h = [hq.FUNC_ADD, hq.FUNC_ADD],
                D = [hq.SRC_ALPHA, hq.ONE_MINUS_SRC_ALPHA, hq.ONE, hq.ONE_MINUS_SRC_ALPHA];
            return function(I, n) {
                var A = this,
                    i = A.renderState.gl,
                    L = A.renderState.glState;
                L.dither = !1, n ? L.color.mask = U : L.color.reset(), L.pixelStore.reset(), L.blend.color = Y, L.blend.equation = h, L.blend.func = D, L.cullFace.enabled = !1, L.scissor.enabled = !1, L.depth.enabled = !0, L.depth.clear = 1, L.depth.func = i.LEQUAL, L.depth.range = s, L.stencil.enabled = !1, L.polygonOffset.enabled = !1, I ? (L.depth.mask = !1, L.blend.enabled = !0) : (L.depth.mask = !0, L.blend.enabled = !1)
            }
        }(), as.prototype.setUniforms = function(D) {
            var $ = this,
                U = $.view,
                C = $.renderState,
                n = C.gl,
                f = C.uniforms;
            f.uBrightness = 1, f.uOpacity = 1, f.uPartOpacity = 1, f.uPick = $.picking, f.uTexture = !1, f.uBlendTexture = !1, f.uAlphaTest = A.alphaTest, f.uTransparent = !!D, f.uFix = !1, f.uBatchColor = !1, f.uBatchBlend = !1, f.uBatchBrightness = !1, f.uReflectivity = $.envmapReflectivity || .5, f.uCameraPosition = $.cameraPosition, f.uPMatrix = $.projectMatrix, f.uViewMatrix = $.viewMatrix, f.uEnvMap = null, xe(U, f, Cm), f.uClipperMatrix = U._boxClipperMatrixes, f.uClipperClipInner = U._boxClipperClipInner, U._envmapRenderer.resetUniformCache(), $.picking || (ej(U, n, O), U._fogDisabled || (f.uFogColor = U._fogColor, f.uFogDensity = U._fogDensity, f.uFogNear = U._fogNear, f.uFogFar = U._fogFar))
        }, as.prototype.drawLayer = function(J) {
            return this.view.renderLayers(J, !0)
        }, as.prototype.drawData = function(x, e, b) {
            var p = this.view;
            if (p.isVisible(x)) {
                var q = this.renderState,
                    i = q.uniforms,
                    P = p.getData3dUI(x);
                if (P) {
                    var J = q.gl,
                        z = J._picking,
                        d = p._picking,
                        C = P._pickId;
                    b && (P._pickId = b), i.uPick = J._picking = p._picking = !!b, i.uTransparent = !!e, P._42(q.gl, q.program, e ? v : _), i.uPick = J._picking = z, p._picking = d, P._pickId = C
                }
            }
        };
        var Ai = Hn.Graph3dView = function(s, b) {
                var v = this;
                v.resetHeadlightProperties(), v.resetFogProperties(), v._webGLVersion = 1, v._attributes = b || z.graph3dViewAttributes, v._25I = {}, v._view = Dl(1, v);
                var k = v._canvas = ts(v._view);
                D(k, "webglcontextlost", function(b) {
                    b.preventDefault(), qc(v), v._26I && v._doBufferGC(v._26I, !0), v._26I = Y, v._1o.onContextLost(), v._35O = !0
                }), D(k, "webglcontextrestored", function() {
                    v._35O = !1, v.iv()
                }), v._40Q = new qb, v._43Q = {}, v._44Q = -1, v._batchIndexMap = {}, v._batchModelMap = {}, v._wireframeIndexMap = {}, v._wireframeModelMap = {}, v._wireframeIndexMapSwap = {}, v._wireframeModelMapSwap = {}, v._polylineIndexMap = {}, v._polylineIndexMap = {}, v._polylineIndexMapSwap = {}, v._polylineIndexMapSwap = {}, v._8O = [], v._7O = Yn(), v._6O = Yn(), v._1o = new Ls(v), v._30O = new Os(v), v._31O = new Ms(v), v._32O = new Ns(v), v._raycaster = new Zs(v), v._highlightHelper = new ni(v), v._postProcessing = new ht(v), v._41Q = [], v._42Q = 0, v._frameRenderOptionStack = [], Hn.VR ? (v.vr = new Hn.VR(v), v.isVREnabled = function() {
                    return this.vr.enable
                }, v.isVRPresenting = function() {
                    return this.vr.isPresenting()
                }) : (v.vr = {
                    enable: !1,
                    isPresenting: p
                }, v.isVREnabled = p, v.isVRPresenting = p), v.shadowMap = new kh(v), v.flowMap = new Lk(v), v._33Q = !0, v._eye = Vm(z.graph3dViewEye), v._center = Vm(z.graph3dViewCenter), v._up = Vm(z.graph3dViewUp), v._lightChanged = !1, v._59O = [], v._spots = [], v._dirs = [], v._boxClippers = [], v._flowObjects = [], v._frameId = 0, v._picking = !1, v._batchInfoMap = {}, v.overlappingBox = new Rl(v), v.dm(s ? s : new _c), v._coreInteractor = new mc(this), v._envmapRenderer = new Hn.EnvmapRenderer(this), v.setInteractors([new Es(v)]), v._initView()
            },
            Uf = {
                fogDisabled: 1,
                fogMode: 1,
                dashDisabled: 1,
                batchColorDisabled: 1,
                batchBlendDisabled: 1,
                batchBrightnessDisabled: 1,
                ortho: 1
            },
            ys = 0;
        Ac("Graph3dView", G, {
                ms_v: 1,
                ms_tip: 1,
                ms_gv: 1,
                ms_dm: 1,
                ms_lp: 1,
                ms_fire: 1,
                ms_sm: 1,
                _51o: 1,
                ms_shadow: 1,
                ms_highlight: 1,
                ms_quickVisible: 1,
                ms_ac: ["devicePixelRatio", "boundaries", "moveStep", "rotateStep", "editHelperDisabled", "blockSelectable", "sizeEditableFunc", "rotationEditableFunc", "editableFunc", "rotatable", "zoomable", "pannable", "walkable", "resettable", "mouseRoamable", "zoomToCenter", Hc, wc, "firstPersonMode", fg, "movableFunc", "gridVisible", "gridSize", "gridGap", "gridColor", "originAxisVisible", "centerAxisVisible", "axisXColor", "axisYColor", "axisZColor", "editSizeColor", "rectSelectable", "rectSelectBackground", "headlightRange", "headlightColor", "headlightIntensity", "headlightAmbientIntensity", "headlightDisabled", "headlightGroup", "ortho", "orthoWidth", "syncEyeWithOrthoWidth", "fovy", "near", "far", hp, Vc, "up", "aspect", "fogDisabled", "fogMode", "fogDensity", "fogColor", "fogNear", "fogFar", "pickerResolution", "dashDisabled", "batchColorDisabled", "batchBlendDisabled", "batchBrightnessDisabled", "hoverDelay", "batchInfoMap", "rotateMinPhi", "rotateMaxPhi", "sortable", "sortFunc"],
                _editable: !1,
                _sortable: z.graph3dViewSortable,
                _editHelperDisabled: z.graph3dViewEditHelperDisabled,
                _blockSelectable: z.graph3dViewBlockSelectable,
                _devicePixelRatio: O,
                _boundaries: O,
                _moveStep: z.graph3dViewMoveStep,
                _rotateStep: z.graph3dViewRotateStep,
                _rotateMinPhi: z.graph3dViewMinPhi === O ? z.graph3dViewRotateMinPhi : z.graph3dViewMinPhi,
                _rotateMaxPhi: z.graph3dViewMaxPhi === O ? z.graph3dViewRotateMaxPhi : z.graph3dViewMaxPhi,
                _pannable: z.graph3dViewPannable,
                _rotatable: z.graph3dViewRotatable,
                _walkable: z.graph3dViewWalkable,
                _resettable: z.graph3dViewResettable,
                _zoomable: z.graph3dViewZoomable,
                _zoomToCenter: !0,
                _firstPersonMode: z.graph3dViewFirstPersonMode,
                _mouseRoamable: z.graph3dViewMouseRoamable,
                _gridVisible: z.graph3dViewGridVisible,
                _gridSize: z.graph3dViewGridSize,
                _gridGap: z.graph3dViewGridGap,
                _gridColor: z.graph3dViewGridColor,
                _originAxisVisible: z.graph3dViewOriginAxisVisible,
                _centerAxisVisible: z.graph3dViewCenterAxisVisible,
                _axisXColor: z.graph3dViewAxisXColor,
                _axisYColor: z.graph3dViewAxisYColor,
                _axisZColor: z.graph3dViewAxisZColor,
                _ortho: z.graph3dViewOrtho,
                _orthoWidth: z.graph3dViewOrthoWidth,
                _syncEyeWithOrthoWidth: z.graph3dViewSyncEyeWithOrthoWidth,
                _fovy: z.graph3dViewFovy,
                _near: z.graph3dViewNear,
                _far: z.graph3dViewFar,
                _rectSelectable: z.graph3dViewRectSelectable,
                _rectSelectBackground: z.graph3dViewRectSelectBackground,
                _editSizeColor: z.graph3dViewEditSizeColor,
                _autoMakeVisible: si,
                _pickerResolution: z.graph3dViewPickerResolution,
                _dashDisabled: z.graph3dViewDashDisabled,
                _batchColorDisabled: z.graph3dViewBatchColorDisabled,
                _batchBlendDisabled: z.graph3dViewBatchBlendDisabled,
                _batchBrightnessDisabled: z.graph3dViewBatchBrightnessDisabled,
                addCamera: function(P) {
                    var e = this,
                        J = G.freeze({
                            id: e._42Q++,
                            priority: P.priority || 0,
                            ignoreInPick: !!P.ignoreInPick,
                            render: P.render
                        });
                    P.switch3DStatus && (e._43Q[J.id] = !0), e._41Q.push(J), e._41Q.sort(function(O, H) {
                        return O.priority !== H.priority ? O.priority - H.priority : O.id - H.id
                    })
                },
                setEye: function(d, z, V) {
                    1 === arguments.length && (z = d[1], V = d[2], d = d[0]);
                    var j = this._eye;
                    j[0] = d, j[1] = z, j[2] = V, this.fp(hp, Y, j)
                },
                setCenter: function(W, v, c) {
                    1 === arguments.length && (v = W[1], c = W[2], W = W[0]);
                    var K = this._center;
                    K[0] = W, K[1] = v, K[2] = c, this.fp(Vc, Y, K)
                },
                setUp: function(A, M, C) {
                    1 === arguments.length && (M = A[1], C = A[2], A = A[0]);
                    var q = this._up;
                    q[0] = A, q[1] = M, q[2] = C, this.fp("up", Y, q)
                },
                getDevicePixelRatio: function() {
                    return this._picking ? this._1o._resolution : this._devicePixelRatio || lk
                },
                isTransparentMask: function(o) {
                    return o.s("transparent.mask")
                },
                getCoreInteractor: function() {
                    return this._coreInteractor
                },
                getHighlightHelper: function() {
                    return this._highlightHelper
                },
                getRaycaster: function() {
                    return this._raycaster
                },
                getAspect: function() {
                    var u = this,
                        W = u._aspect;
                    return W ? W : (W = u.getWidth() / u.getHeight(), W || 1.2)
                },
                getCanvas: function() {
                    return this._canvas
                },
                setDataModel: function(Y) {
                    var R = this,
                        d = R._dataModel,
                        e = R._selectionModel;
                    d !== Y && (d && (d.ump(R.handleDataModelPropertyChange, R), d.umm(R.handleDataModelChange, R), d.umd(R.handleDataPropertyChange, R), e || d.sm().ums(R.handleSelectionChange, R)), R._dataModel = Y, Y.mp(R.handleDataModelPropertyChange, R), Y.mm(R.handleDataModelChange, R), Y.md(R.handleDataPropertyChange, R), e ? e._21I(Y) : Y.sm().ms(R.handleSelectionChange, R), R._postProcessing.handleDataModleChange(d, Y), R._tryInvalidateEnvmap(), R.invalidateAll(!0), R.invalidateLight(), R.invalidateboxClipper(), R.invalidateFlowObjects(), R._49Q(), R.fp(co, d, Y), R._canvas.style.background = Y.getBackground() || "")
                },
                handleDataModelPropertyChange: function(P) {
                    var f = P.property;
                    if ("background" === f) {
                        var _ = this._canvas.style.background,
                            A = P.newValue || "";
                        this._canvas.style.background = A, this.fp("canvasBackground", _, A)
                    } else "envmapType" === f ? this._tryInvalidateEnvmap() : "envmap" === f && this.iv()
                },
                handleDataPropertyChange: function(A) {
                    var k = A.data;
                    this.invalidateData(k);
                    var Y = A.property;
                    wr(k) && "s:light.type" === Y ? this.invalidateLight() : "s:3d.clipbox" === Y ? this.invalidateboxClipper(k, !0) : "s:effect.flow" === Y ? this.invalidateFlowObjects(k, !0) : "s:shadow.cast" === Y ? this.shadowMap.tryUpdateBounding(k) : "s:3d.visible" === Y && this.invalidateQuickVisible(k)
                },
                invalidateboxClipper: function(S, $) {
                    var g = this._boxClippers,
                        M = g.length;
                    if (S) {
                        var J = !!S.s("3d.clipbox");
                        if ($ = !!$, J === $) g.indexOf(S) < 0 && g.push(S);
                        else {
                            var l = g.indexOf(S);
                            l >= 0 && g.splice(l, 1)
                        }
                    } else g = this._boxClippers = [], this.dm().each(function(y) {
                        y.s("3d.clipbox") && g.push(y)
                    });
                    var j = g.length;
                    M !== j && (qc(this), this.shadowMap.deleteShadowProgram(), this._updateBoxClipperMatrix(), xe = j ? jj : gj), this.iv()
                },
                _updateBoxClipperMatrix: function() {
                    for (var B, _, r = this._boxClippers, D = this._boxClipperMatrixes = [], C = this._boxClipperClipInner = [], Y = this._boxClipperGroups = [], z = new gb, Q = 0, k = r.length; k > Q; Q++) B = r[Q], B.appendAnchorMatrix3d(_ = Qj(B, this.getMat(B))), D.push(z.getInverse(z.fromArray(_)).toArray()), C.push("inner" === B.s("3d.clipbox")), Y.push(B.s("3d.clipbox.group"))
                },
                _49Q: function() {
                    this._4AQ || this._48Q || this.dm().size() < z.graph3dViewDataNumWarningLine || (this._48Q = !0, console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"), this.enableQuickVisibleMode(), this.getHighlightHelper().mouseOverData = null)
                },
                quitDataNumWarning: function() {
                    this.disableQuickVisibleMode(), this._48Q = !1, this._4AQ = !0
                },
                invalidateFlowObjects: function(Z, p) {
                    var b = this._flowObjects,
                        _ = b.length;
                    if (Z) {
                        var N = !!Z.s("effect.flow");
                        if (p = !!p, N === p) b.indexOf(Z) < 0 && b.push(Z);
                        else {
                            var M = b.indexOf(Z);
                            M >= 0 && b.splice(M, 1)
                        }
                    } else b = this._flowObjects = [], this.dm().each(function(X) {
                        X.s("effect.flow") && b.push(X)
                    });
                    _ !== b.length && qc(this), this.iv()
                },
                invalidateLight: function() {
                    this._lightChanged || (this._lightChanged = !0, this.iv())
                },
                onPropertyChanged: function(G) {
                    var $ = this,
                        E = G.property;
                    $.iv(), $._18Q = Y, "eye" === E ? $._33Q = !0 : "devicePixelRatio" === E ? $._42($.getDevicePixelRatio()) : Uf[E] && qc($)
                },
                _5O: function(p) {
                    var t = p._22Q();
                    return t ? new t(this, p) : Y
                },
                getData3dUI: function($) {
                    var A = this._25I[$._id];
                    return A === O && (A = this._5O($), this._25I[$._id] = A), A
                },
                invalidateAll: function(W, n) {
                    var T = this;
                    if (W) {
                        for (var F in T._25I) {
                            var Y = T._25I[F];
                            Y && Y.dispose()
                        }
                        T._25I = {}, T.iv(), Vi(T)
                    } else Vi(T), T.dm().each(function(S) {
                        T.invalidateData(S)
                    });
                    T.shadowMap.tryInvalidateLater(W, n)
                },
                invalidateSelection: function() {
                    var v = this;
                    v.sm().each(function(w) {
                        v.invalidateData(w)
                    })
                },
                invalidateData: function(j) {
                    var f = this,
                        N = f.getData3dUI(j);
                    N && (N.iv(), f.iv()), Vi(f, j)
                },
                getShape3dText: function(c) {
                    return c.getStyle("shape3d.text") || this.getLabel(c)
                },
                invalidateBatch: function(k) {
                    var z = this,
                        s = z._40Q;
                    s.each(function(n) {
                        z._invalidateBatch(k, n.batchModelMap, n.batchIndexMap), z._invalidateBatch("T" + k, n.wireframeModelMap, n.wireframeIndexMap), z._invalidateBatch("O" + k, n.wireframeModelMap, n.wireframeIndexMap), n.markBatchInvalid()
                    }), z.iv()
                },
                _invalidateBatch: function(q, N, X) {
                    var P = this,
                        E = N[q];
                    E && (E.ds.forEach(function(Y) {
                        var f = P.getData3dUI(Y);
                        f && f.iv(), delete X[Y._id]
                    }), delete N[q])
                },
                handleDataModelChange: function(T) {
                    var d = this,
                        N = T.kind,
                        r = T.data;
                    if ("add" === N) d.invalidateData(r), Em(r) && r.getEdgeGroup() && r.getEdgeGroup().eachSiblingEdge(d.invalidateData, d), wr(r) && d.invalidateLight(), r.s("3d.clipbox") && d.invalidateboxClipper(r, !0), r.s("effect.flow") && d.invalidateFlowObjects(r, !0), d._49Q();
                    else if (N === eb) {
                        var W = r._id,
                            q = d._25I[W];
                        q && (q.dispose(), delete d._25I[W], d.iv()), r === d._currentSubGraph && d.setCurrentSubGraph(Y), Vi(d, r), wr(r) && d.invalidateLight(), r.s("3d.clipbox") && d.invalidateboxClipper(r, !1), r.s("effect.flow") && d.invalidateFlowObjects(r, !1)
                    } else N === Aj && (d.invalidateAll(!0), d.setCurrentSubGraph(Y), Vi(d), d.invalidateLight(), d.invalidateboxClipper(), d.invalidateFlowObjects())
                },
                toCanvas: function(k, Q, X) {
                    var _ = this,
                        H = _.getGL();
                    if (_.validate(), k) {
                        var u = H.getParameter(H.COLOR_CLEAR_VALUE);
                        kj(H, k)
                    }
                    _._42(1, {
                        renderAxis: !1,
                        renderEdit: !1,
                        renderGrid: !1
                    });
                    var E = _.getWidth() || 1,
                        g = _.getHeight() || 1,
                        w = new Uint8Array(4 * E * g),
                        y = ts(),
                        R = y.getContext("2d");
                    H.readPixels(0, 0, E, g, H.RGBA, H.UNSIGNED_BYTE, w), yh(y, E, g, 1);
                    for (var s = R.getImageData(0, 0, E, g), f = s.data, L = 0; L < f.length; L += 4) {
                        var n = L / 4,
                            N = e(n / E),
                            a = n - N * E;
                        n = 4 * ((g - 1 - N) * E + a), f[n] = w[L], f[n + 1] = w[L + 1], f[n + 2] = w[L + 2], f[n + 3] = w[L + 3]
                    }
                    if (R.putImageData(s, 0, 0), k && kj(H, u), _._42(_.getDevicePixelRatio()), Q && X) {
                        var o = ts(),
                            K = o.getContext("2d");
                        return yh(o, Q, X, 1), z.drawImage(K, y, 0, 0, Q, X), o
                    }
                    return y
                },
                toDataURL: function(k, F) {
                    var W = this,
                        Z = W.getGL();
                    if (W.validate(), k) {
                        var o = Z.getParameter(Z.COLOR_CLEAR_VALUE);
                        kj(Z, k)
                    }
                    W._42(1, {
                        renderAxis: !1,
                        renderEdit: !1,
                        renderGrid: !1
                    });
                    var U = W._canvas.toDataURL(F || "image/png", 1);
                    return k && kj(Z, o), W._42(W.getDevicePixelRatio()), U
                },
                isWebGL2: function() {
                    return 2 === this._webGLVersion
                },
                getGL: function() {
                    var f = this._26I;
                    if (f) return this.acquireProgram(), f;
                    if (!this._35O) {
                        var r = this,
                            T = r._canvas,
                            K = r._attributes;
                        if (!K || K.requestWebGL2 !== !1) try {
                            f = T.getContext("webgl2", K) || T.getContext("experimental-webgl2", K), f && (r._webGLVersion = 2, r._26I = f)
                        } catch (A) {}
                        if (!f) try {
                            f = T.getContext("webgl", K) || T.getContext("experimental-webgl", K)
                        } catch (A) {
                            throw new Error("WebGL not supported")
                        }
                        if (!f) throw new Error("WebGL not supported");
                        r._26I = f;
                        var $ = r._frameState = new as(this, f);
                        r._glExtensions = new c(f), r._glCapabilities = new m(f, r._glExtensions), r._2O = {}, f._emptyCubeTexture = Fn(f), f._compiledShader = {}, f._emptyTexture = vh(f), f._emptyBlendTexture = vh(f), f._bufPool = {}, f._id = ++ys, $.setGLState(), r._buffer = {
                            vs: Jg(f),
                            ns: Jg(f),
                            is: Jg(f),
                            uv: Jg(f),
                            batchColor: Jg(f),
                            batchBlend: Jg(f),
                            batchBrightness: Jg(f),
                            lineDistance: Jg(f)
                        }, r._1O = wn(f);
                        var w = r._cube = {
                            vs: Jg(f),
                            ns: Jg(f),
                            is: Jg(f),
                            uv: Jg(f)
                        };
                        return rq(f, w.vs, tm), rq(f, w.ns, Aq), rq(f, w.uv, nj), zq(f, w.is, Lp), r.acquireProgram(), f._renderInfo = {
                            calls: 0,
                            vertices: 0,
                            faces: 0,
                            lines: 0,
                            points: 0,
                            frame: 0,
                            cacheTimeCost: 0
                        }, f
                    }
                },
                getGLCapabilities: function() {
                    var H = this.getGL();
                    return H ? this._glCapabilities : void 0
                },
                getGLExtensions: function() {
                    var r = this.getGL();
                    return r ? this._glExtensions : void 0
                },
                getEnvmap: function() {
                    return this._glCapabilities && this._glCapabilities.maxVertexTextures < z.graph3dEnvmapCapabilityRequire ? null : this.dm().getEnvmap()
                },
                getEnvmapType: function() {
                    var P, v = this.dm();
                    return v && (P = v.getEnvmapType()), P || "legacy"
                },
                invalidateEnvmap: function(F) {
                    return this._envmapRenderer.invalidateEnvmap(F)
                },
                _setEnvmapByProbeId: function(v, E) {
                    return this._envmapRenderer.setEnvmapByProbeId(v, E)
                },
                _tryInvalidateEnvmap: function() {
                    var B = this.getEnvmapType();
                    B !== this._lastProgramEnvmapType && (qc(this), this.iv())
                },
                acquireProgram: function() {
                    var U = this,
                        s = U._26I;
                    if (s && !U._prg) {
                        var D = U._prg = s.createProgram();
                        if (!D) return Y;
                        var A = U._dirs.length,
                            t = U._spots.length,
                            p = U._59O.length,
                            e = U._boxClippers.length,
                            g = U._flowObjects.length,
                            M = ["uPMatrix", "uMVMatrix", "uMMatrix", "uReflectivity", "uViewMatrix", "uUseEnvMap", "uEnvMap", "uCameraPosition", "uNMatrix", "uViewMatrix", "aNormal", "aUv", "uUvMatrix", "uDiffuse", "uBlend", "uBlendColor", "uBrightness", "uPartOpacity", "uAlphaTest", "uTransparent", "uClipDirection", "uClipPercent", "uTexture", "uBlendTexture", "uSampler", "uBlendSampler", "uDiscardSelectable", "uFix", "uPick", "uReverseFlip", "uFixPickReverseColor", "uBatchBrightness", "aBatchBrightness", "uBatchColor", "aBatchColor", "uBatchBlend", "aBatchBlend", "uDash", "aLineDistance", "uDashDistance", "uDashGapDistance", "uLight", "uHeadlightRange", "uHeadlightAmbientIntensity", "uHeadlightColor", "uFogColor", "uFogDensity", "uFogNear", "uFogFar"];
                        A && M.push("uDirColor", "uDirDirection"), t && M.push("uSpotColor", "uSpotRange", "uSpotAngle", "uSpotExponent", "uSpotPosition", "uSpotDirection"), p && M.push("uPointColor", "uPointRange", "uPointPosition"), Tq || (em = rn(em.substring(0, em.indexOf("^#"))), Md = rn(Md), Tq = !0);
                        var _ = U.getEnvmapType(),
                            j = ["#define MAX_DIR " + A, "#define MAX_SPOT " + t, "#define MAX_POINT " + p, "#define MAX_BOX_CLIPPER " + e, "#define MAX_FLOW_OBJECT " + g, U._fogDisabled ? "" : "#define FOG", "exp2" === U.getFogMode() ? "#define FOG_EXP2" : "", U._dashDisabled ? "" : "#define DASH", "#define USE_ENVMAP", "legacy" !== _ ? "#define ENVMAP_TYPE_CUBE_UV" : "", U.isOrtho() ? "#define ORTHOGRAPHIC" : "", U._batchColorDisabled ? "" : "#define BATCHCOLOR", U._batchBlendDisabled ? "" : "#define BATCHBLEND", U._batchBrightnessDisabled ? "" : "#define BATCHBRIGHTNESS", U.shadowMap.enable ? U.shadowMap.genShaderDefine() : "", ""].join("\n"),
                            u = Pq(s, D, s.VERTEX_SHADER, em.replace("PREFIX", j));
                        s.getShaderParameter(u, s.COMPILE_STATUS) || xc("COMPILE", s.VERTEX_SHADER, s.getError(), s.getShaderInfoLog(u));
                        var l = Pq(s, D, s.FRAGMENT_SHADER, Md.replace("PREFIX", j));
                        if (s.getShaderParameter(l, s.COMPILE_STATUS) || xc("COMPILE", s.FRAGMENT_SHADER, s.getError(), s.getShaderInfoLog(l)), Bp ? M.push("aPosition") : (D.aPosition = 0, s.bindAttribLocation(D, 0, "aPosition")), s.linkProgram(D), !s.getProgramParameter(D, s.LINK_STATUS)) {
                            var f = s.getProgramInfoLog(D);
                            return U._prg = Y, f.indexOf("maximum temp register") >= 0 && !U._glTempRegisterLimited ? (U._glTempRegisterLimited = !0, s.deleteProgram(D), U.acquireProgram()) : (xc("LINK", s.getProgramParameter(D, s.VALIDATE_STATUS), s.getError(), f), s.deleteProgram(D), Y)
                        }
                        M.forEach(function(z) {
                            D[z] = /^u/.test(z) ? s.getUniformLocation(D, z) : s.getAttribLocation(D, z)
                        });
                        var F = U._frameState;
                        F.renderState.program = F.defaultProgram = D, U._envmapRenderer.changeEnvmapType(U._lastProgramEnvmapType = _), s.deleteShader(u), s.deleteShader(l)
                    }
                },
                isGLTempRegisterLimited: function() {
                    return this._glTempRegisterLimited
                },
                getBrightness: function(y) {
                    var w = y.s("brightness"),
                        Q = this.isSelected(y) ? y.s("select.brightness") : Y;
                    return w == Y ? Q : Q == Y ? w : w * Q
                },
                getDataHighlightMode: function(R) {
                    return R.s("highlight.mode")
                },
                getWireframe: function(K) {
                    var p = K.s("wf.visible"),
                        H = K.s("wf.width");
                    return p === !0 || H > 0 && "selected" === p && this.isSelected(K) ? {
                        color: K.s("wf.color"),
                        width: H,
                        "short": K.s("wf.short"),
                        mat: K.s("wf.mat")
                    } : void 0
                },
                _transformPointToViewSpace: function(U) {
                    var T = [U[0], U[1], U[2]];
                    return qm(T, this._viewMatrix), T
                },
                _transformDirectionToViewSpace: function(N, d) {
                    var D = [N[0], N[1], N[2]];
                    qm(D, this._viewMatrix);
                    var u = d ? [d[0], d[1], d[2]] : [0, 0, 0];
                    qm(u, this._viewMatrix);
                    var z = u[0] - D[0],
                        W = u[1] - D[1],
                        O = u[2] - D[2],
                        t = Math.sqrt(z * z + W * W + O * O);
                    return t ? [z / t, W / t, O / t] : [z, W, O]
                },
                getWireframeGeometry: function(E) {
                    return E.s("wf.geometry") ? {
                        color: E.s("wf.color"),
                        width: E.s("wf.width"),
                        mat: E.s("wf.mat"),
                        geometry: !0
                    } : void 0
                },
                getBodyColor: function(Y) {
                    return Y.s("body.color")
                },
                getMat: function(a) {
                    return a.getMat ? a.getMat() : a.s("mat")
                },
                getFaceMat: function(q, w) {
                    return q.getFaceMat ? q.getFaceMat(w) : q.s(w + ".mat")
                },
                getFaceBlend: function(r, o) {
                    return r.s(o + ".blend") || r.s("all.blend")
                },
                getFaceColor: function(X, j) {
                    return X.s(j + ".color") || X.s("all.color")
                },
                getFaceImage: function(L, n) {
                    return L.s(n + ".image") || L.s("all.image")
                },
                getFaceBlendImage: function(Y, G) {
                    return Y.s(G + ".blend.image") || Y.s("all.blend.image")
                },
                getFaceDiscardSelectable: function(x, h) {
                    var y = x.s(h + ".discard.selectable");
                    return y == Y ? x.s("all.discard.selectable") : y
                },
                getFaceUv: function(D, g) {
                    return D.s(g + ".uv") || D.s("all.uv")
                },
                getFaceUvOffset: function(g, K) {
                    return g.s(K + ".uv.offset") || g.s("all.uv.offset")
                },
                getFaceUvScale: function(D, c) {
                    return D.s(c + ".uv.scale") || D.s("all.uv.scale")
                },
                getFaceUvRotation: function(w, e) {
                    return w.s(e + ".uv.rotation") || w.s("all.uv.rotation")
                },
                getFaceUvAnchor: function(T, w) {
                    return T.s(w + ".uv.anchor") || T.s("all.uv.anchor")
                },
                getFaceLight: function(q, K) {
                    var M = q.s(K + ".light");
                    return M == Y ? q.s("all.light") : M
                },
                getFaceVisible: function(V, T) {
                    var P = V.s(T + ".visible");
                    return P == Y ? V.s("all.visible") : P
                },
                getFaceOpacity: function(Q, L) {
                    var k = Q.s(L + ".opacity");
                    return k == Y ? Q.s("all.opacity") : k
                },
                getFaceTransparent: function(r, K) {
                    var n = r.s(K + ".transparent");
                    return n == Y ? r.s("all.transparent") : n
                },
                getFaceReverseColor: function(p, M) {
                    return p.s(M + ".reverse.color") || p.s("all.reverse.color")
                },
                getFaceReverseFlip: function(H, b) {
                    var J = H.s(b + ".reverse.flip");
                    return J == Y ? H.s("all.reverse.flip") : J
                },
                getFaceReverseCull: function(Z, p) {
                    var G = Z.s(p + ".reverse.cull");
                    return G == Y ? Z.s("all.reverse.cull") : G
                },
                getTextureMap: function() {
                    return this._2O
                },
                _2Oi: function(X, t, z) {
                    z = z || "";
                    var S;
                    (S = this._2O[X]) || (S = this._2O[X] = {}), S[z] = t
                },
                deleteTexture: function(J) {
                    var j = this,
                        p = j._2O[J];
                    if (p) {
                        delete j._2O[J];
                        var w = j.getGL();
                        for (var b in p) w.deleteTexture(p[b])
                    }
                },
                renderPickScene: function() {
                    var F = this.getGL();
                    this.syncRenderState(), this._picking = F._picking = !0, this.renderScene(), this._picking = F._picking = !1
                },
                invalidateCachedTexture: function(Z) {
                    var s = this.getData3dUI(Z);
                    s.invalidateCachedTexture(this.getGL()), this.invalidateData(Z)
                },
                invalidateShape3dCachedImage: function(W) {
                    this.invalidateCachedTexture(W)
                },
                invalidateCachedGeometry: function(v) {
                    var C = this.getData3dUI(v);
                    C.invalidateCachedGeometry(), this.invalidateData(v)
                },
                isInteractive: function(u) {
                    return u.s("interactive")
                },
                getTexture: function(A, L, c, l) {
                    if (!A) return Y;
                    var o, f, v = this,
                        t = v.getGL(),
                        K = v._2O[A];
                    if (K && (L && (f = L.s("texture.mipmap.max")), o = K[f || ""] || K.default), !o) {
                        var X = Di(A);
                        if (l || (l = {}), !X) return t._emptyTexture;
                        if (L) {
                            l.mipmapMaxLevel = f = L.s("texture.mipmap.max");
                            var Z = L.s("texture.wrap");
                            l.clampToEdge = "clampToEdge" === Z ? !0 : "repeat" === Z ? !1 : O
                        }
                        if (X.uuid || (X.uuid = F.Math.generateUUID()), X.tagName) {
                            if (X.dynamic) return wn(t, X, v._1O, l);
                            o = wn(t, X, O, l), v._2Oi(A, o, f)
                        } else {
                            var E, r = L && (L.s("texture.cache") || L.s("shape3d.image.cache") || X.textureCache),
                                J = v.isVRPresenting();
                            if (J && (L._textureUpdateFrame === t._renderInfo.frame ? r = !0 : L._textureUpdateFrame = t._renderInfo.frame), r && (E = v.getData3dUI(L), o = E.getCachedTexture(c), o && E.interactiveInfo && o.interactiveInfo && (E.interactiveInfo[o.interactiveInfo.key] = o.interactiveInfo.info)), !o) {
                                var e = t._renderInfo.textureCache;
                                if (r) {
                                    if (e.time > z.graph3dMaxVectorCacheTime) return v.redraw(), t._emptyTexture;
                                    if (!bs(X, L)) return t._emptyTexture
                                }
                                var h;
                                L && (1 !== L.s("texture.scale") ? h = L.s("texture.scale") : 1 !== L.s("shape3d.texture.scale") && (h = L.s("shape3d.texture.scale"))), h || (h = 1);
                                var P = L && (L.s("fixSizeOnScreen") || L.s("shape3d.fixSizeOnScreen")),
                                    B = P ? t.NEAREST : t.LINEAR;
                                P ? "number" == typeof P && (h *= 0 > P ? 1 : P) : L && (L.s("vector.dynamic") || L.s("shape3d.vector.dynamic")) && (E || (E = v.getData3dUI(L)), P = E.getVectorDynamicSize());
                                var j, Q, _, G = L && L.s("shape3d");
                                "billboard" === G ? _ = L.getTall() / L.getWidth() : "plane" === G && (_ = L.getHeight() / L.getWidth());
                                var W = ps(X, L);
                                if (P) {
                                    var $;
                                    $ = r ? v._devicePixelRatio || lk : v.getDevicePixelRatio(), j = P[0] > 0 ? P[0] * $ : h * W * $, Q = P[1] > 0 ? P[1] * $ : h * (_ ? hh(X, L, v, Math.min(4096, W * _)) : hh(X, L)) * $
                                } else j = h * W, Q = h * (_ ? hh(X, L, v, Math.min(4096, W * _)) : hh(X, L));
                                if (j >= 1 && Q >= 1) {
                                    var q = 0;
                                    (r || J) && (q = Date.now());
                                    var g = v._glCapabilities.maxTextureSize;
                                    j = Math.min(j, g), Q = Math.min(Q, g);
                                    var s = tr(j, Q);
                                    if (!E && L && (E = v.getData3dUI(L)), E && E.interactiveInfo) {
                                        var d = A;
                                        "object" == typeof d && (d = d.uuid || (d.uuid = F.Math.generateUUID()));
                                        var R = E.interactiveInfo[d] = {};
                                        s.interactiveInfo = R.bodyInfo = {
                                            compInfos: [],
                                            matrix: new Bl,
                                            rect: {
                                                x: 0,
                                                y: 0,
                                                width: j,
                                                height: Q
                                            }
                                        }
                                    }
                                    ic(s, X, 0, 0, j, Q, L, v), s.interactiveInfo && (s.interactiveInfo = null), s.restore(), e.count++, e.pixels += j * Q, L ? (l.minFilter = tg(L.s("texture.filter.min") || L.s("texture.filter")) || B, l.magFilter = tg(L.s("texture.filter.mag") || L.s("texture.filter")) || B) : l.minFilter = l.magFilter = B, r || J ? (o = wn(t, Vq, null, l), E.setCachedTexture(o, c), e.time += Date.now() - q, R && (o.interactiveInfo = {
                                        key: d,
                                        info: R
                                    }), Vq = null) : o = wn(t, Vq, v._1O, l)
                                }
                            }
                        }
                    }
                    return o
                },
                redraw: function() {
                    this.iv()
                },
                validateImpl: function() {
                    var $ = this;
                    if ($._lightChanged) {
                        $._lightChanged = !1;
                        var I = [],
                            v = [],
                            w = [];
                        $.dm().each(function(X) {
                            if (wr(X)) {
                                var T = X.s("light.type");
                                T === hc ? I.push(X) : T === Kp ? v.push(X) : T === Lh && w.push(X)
                            }
                        }), (I.length !== $._59O.length || v.length !== $._spots.length || w.length !== $._dirs.length) && qc($), $._59O = I, $._spots = v, $._dirs = w
                    }
                    var P = $.getAspect();
                    P !== $.__cachedAspect__ && ($._updateSkybox({
                        property: "asceptChanged"
                    }), $.__cachedAspect__ = P), $._42(), $._1o.iv()
                },
                getRenderInfo: function() {
                    var e = this.getGL();
                    return e ? e._renderInfo : void 0
                },
                getDebugTip: function() {
                    var i = this,
                        B = i.getRenderInfo();
                    if (B) {
                        var Y = i.getGL()._validBufCount || 0,
                            A = "Draw Calls: " + B.calls + "<br/>" + "Vertices: " + B.vertices + "<br/>" + "Faces: " + B.faces + "<br/>" + "Lines: " + B.lines + "<br/>" + (B.points ? "Points: " + B.points + "<br/>" : "") + "Buffers: " + Y + "<br/>" + "Cache Models: " + G.keys(Yg).length + "<br/>" + "Shape3d Models: " + G.keys(Jc).length;
                        if (i.isVRPresenting() && (A += "<br/>VR fps: " + i.vr.getFps()), B.textureCache) {
                            var $ = B.textureCache.count;
                            if (A += "<br/>2D Dynamic Textures: " + B.textureCache.count, $ > 0) {
                                var O, x = B.textureCache.pixels;
                                O = x > 1e6 ? Math.round(x / 1e6) + "M" : x > 1e3 ? Math.round(x / 1e3) + "K" : Math.round(x), A += "<br/>2D Dynamic pixels: " + O
                            }
                        }
                        return A
                    }
                },
                getFrameState: function() {
                    return this._frameState
                },
                isBoundingBoxInView: function() {
                    var T = new F.Math.Box3,
                        _ = new F.Math.Matrix4;
                    return function(u) {
                        var B = u;
                        if (B instanceof F.Data && (B = this.getData3dUI(B)), !B.mat) return !0;
                        var b = B.getBoundingBox();
                        T.copy(b).applyMatrix4(_.fromArray(B.mat));
                        var j = this.getFrustum();
                        return j.intersectsBox(T)
                    }
                }(),
                updateScene: function() {
                    var c = this;
                    c._81O = Y, c.overlappingBox.clear();
                    var w = c._40Q;
                    w.init();
                    var P = c.getGL(),
                        g = c.dm();
                    if (g.isHierarchicalRendering()) g.eachByHierarchical(function(r) {
                        var q = c.getData3dUI(r);
                        q && q.update(c, P, w)
                    });
                    else {
                        var y, u, v, f = g.getDatas().getArray(),
                            b = f.length;
                        for (y = 0; b > y; y++) u = f[y], v = c.getData3dUI(u), v && v.update(c, P, w)
                    }
                    this._updateBoxClipperMatrix(), w.onUpdated()
                },
                _pushFrameRenderOptions: function(K) {
                    this._frameRenderOptionStack.push(this._currentFrameRenderOptions), this._currentFrameRenderOptions = K
                },
                _popFrameRenderOptions: function() {
                    this._currentFrameRenderOptions = this._frameRenderOptionStack.pop()
                },
                _getFrameRenderOptions: function(G) {
                    var O = this._currentFrameRenderOptions;
                    return O && O[G]
                },
                getRenderLists: function() {
                    return this._40Q
                },
                renderScene: function(l) {
                    function _(U, c) {
                        f.setGLState(U, c), f.setUniforms(U), f.renderState.attribs.disable(), o = i.directUniforms(), L = i.directAttribs(), L.disable()
                    }

                    function W(N) {
                        for (; H > G; G++) {
                            var h = s[G];
                            if (!p || !h.ignoreInPick) {
                                if (h.priority >= N) break;
                                (!R._43Q[R._44Q = h.id] || zg[Up.length]) && (h.render(T, R, f), _())
                            }
                        }
                    }
                    var R = this;
                    R._pushFrameRenderOptions(l), R._getFrameRenderOptions("createShadowMap") !== !1 && R.shadowMap.render(), R.flowMap.render();
                    var T = R.getGL();
                    R._envmapRenderer.onBeforeRender(T), R._44Q = -1;
                    var o, L, f = R._frameState,
                        i = f.renderState,
                        x = i.glState,
                        A = R._prg;
                    R._projectMatrix = om(R), sn(R, R._7O), R._viewMatrix = fj(R._7O), R.isReflecting(T) || Qn(R._projScreenMatrix = Yn(), R._projectMatrix, R._viewMatrix), f.syncEnv(this._picking ? this.pickColorMap : O), i.useProgram(A), _(!1, !0), T.clear(T.DEPTH_BUFFER_BIT);
                    var p = R._picking,
                        s = this._41Q,
                        G = 0,
                        H = s.length;
                    if (W(z.cameraPriority.skybox), p) {
                        var B = x.color.clear.slice(0);
                        kj(T, [0, 0, 0, 0])
                    } else kj(T, [0, 0, 0, 0]), x.blend.enabled = !1, x.depth.enabled = !1, x.depth.mask = !1, R._camera && R._camera.s("camera.renderSky") === !1 || R.drawSky(T, A), R._getFrameRenderOptions("renderReflector") !== !1 && R.drawReflectors(T) && (R._projectMatrix = om(R), sn(R, R._7O), R._viewMatrix = fj(R._7O), f.syncEnv(), _()), x.blend.enabled = !1, x.depth.enabled = !0, x.depth.mask = !0, o.uTransparent = !1, R._getFrameRenderOptions("renderGrid") !== !1 && R._31O._42(T, A);
                    if (!T.textureBatch || zg[(ONE_FRAME_TIME - 6) / 2]) {
                        p || (R.shadowMap.enable && R.shadowMap.createShadow(o), R.flowMap.createFlow(o));
                        for (var N = 0, b = od.length; b > N; N++) {
                            var k = od[N],
                                P = _b[k];
                            if (!(!R._camera && P.ignore || R._camera && !R._camera.isLayerVisible(k))) {
                                var e = P.priority;
                                W(e), this.renderLayer(k)
                            }
                        }
                        W(z.cameraPriority.infinity), p || R.flowMap.disableFlow(o), Ro(R, o, 0, z.graph3dViewHeadlightAmbientIntensity), o.uHeadlightColor = [1, 1, 1, 0], o.uUseEnvMap = !1, x.depth.enabled = !1, o.uTransparent = !1, o.shadowReceive = !1, xe(R, o, Cm), p ? R.drawFilter || R._30O._42(T, A) : (R._highlightHelper._42(T, A), this._renderAxisAndEditHelper(R._getFrameRenderOptions("renderAxis") !== !1, R._getFrameRenderOptions("renderEdit") !== !1), x.blend.enabled = !1, x.depth.mask = !0), x.depth.enabled = !0, p && kj(T, B), rq(T, Y), zq(T, Y), R._44Q = -1, R._popFrameRenderOptions(null)
                    }
                },
                _renderAxisAndEditHelper: function(j, _) {
                    if (j || _) {
                        var d = this,
                            L = d.getGL(),
                            O = d._prg,
                            R = d._frameState,
                            Q = R.renderState,
                            f = Q.glState,
                            k = Q.directUniforms();
                        R.renderState.attribs.disable(), f.depth.enabled = !1, k.uTransparent = !1, k.shadowReceive = !1, f.blend.enabled = !1, f.depth.mask = !0, k.uPick = d._picking, j && d._32O._42(L, O), _ && d._30O._42(L, O), rq(L, Y), zq(L, Y)
                    }
                },
                renderLayers: function(H, Z) {
                    Z && (H = up(H));
                    for (var $ = 0, Y = H.length; Y > $; $++) this.renderLayer(H[$])
                },
                renderSky: function() {
                    var h = this,
                        m = h._frameState,
                        Z = m.renderState,
                        M = Z.glState,
                        i = h.getGL(),
                        u = h._prg;
                    h._projectMatrix = om(h), sn(h, h._7O), h._viewMatrix = fj(h._7O), Qn(h._projScreenMatrix = Yn(), h._projectMatrix, h._viewMatrix), m.syncEnv(), Z.useProgram(u), m.setGLState(!1, !0), m.setUniforms(!1), m.renderState.attribs.disable(), i.clear(i.DEPTH_BUFFER_BIT), kj(i, [0, 0, 0, 0]), M.blend.enabled = !1, M.depth.enabled = !1, M.depth.mask = !1, h.drawSky(i, u), M.depth.mask = !0, M.depth.enabled = !0, rq(i, Y), zq(i, Y)
                },
                addRenderLayerListener: function(V, t, p) {
                    var f = this;
                    f._renderLayerNotifier || (f._renderLayerNotifier = new ge), f._renderLayerNotifier.add(V, t, p)
                },
                removeRenderLayerListener: function(B, s) {
                    this._renderLayerNotifier && this._renderLayerNotifier.remove(B, s)
                },
                fireRenderLayerEvent: function(u, W) {
                    var r = this._renderLayerNotifier;
                    r && r.fire({
                        layer: u,
                        phase: W
                    })
                },
                renderLayer: function(p) {
                    var m = this,
                        c = m._picking,
                        C = m._40Q.get(p);
                    if (C) {
                        m.fireRenderLayerEvent(p, "prepare");
                        var R = m.getGL(),
                            J = _b[p],
                            B = m._frameState,
                            u = B.renderState,
                            y = u.glState,
                            L = u.directUniforms();
                        !c && m.isSortable() && C.sort(m._sortFunc, m._projScreenMatrix);
                        var U, n, a, h = C.opaque,
                            H = C.transparent,
                            j = C.batchModelMap,
                            i = C.polylineModelMap,
                            T = C.wireframeModelMap,
                            R = m.getGL(),
                            f = m._prg;
                        c || (y.blend.enabled = !1, y.depth.enabled = !0, y.depth.mask = !0), L.uTransparent = !1, J.clearDepth !== !1 && R.clear(R.DEPTH_BUFFER_BIT);
                        var e = this.drawFilter;
                        if (e)
                            for (a = h, U = 0, n = a.length; n > U; U++) e(a[U].data) !== !0 && a[U].ui._42(R, f, _);
                        else {
                            for (a = h, U = 0, n = a.length; n > U; U++) a[U].ui._42(R, f, _);
                            if (c)
                                for (a = H, U = 0, n = a.length; n > U; U++) a[U].ui._46Q(R);
                            Sp(m, j), Co(m, i), Co(m, T)
                        }
                        if (c || (y.blend.enabled = !0, y.depth.mask = !1), m._45Q = L.uTransparent = !0, e)
                            for (a = H, U = 0, n = a.length; n > U; U++) e(a[U].data) !== !0 && a[U].ui._42(R, f, v);
                        else {
                            for (a = H, U = 0, n = a.length; n > U; U++) a[U].ui._42(R, f, v);
                            Sp(m, j, null, !0), Co(m, i, null, !0), Co(m, T, null, !0)
                        }
                        m._45Q = null, m.fireRenderLayerEvent(p, "post")
                    }
                },
                _42: function(l, k) {
                    var q = this;
                    if (!q._35O && (!Dm || zg(Dm))) {
                        var H = q.getWidth(),
                            t = q.getHeight();
                        if (H && t) {
                            var z = q.getGL();
                            if (z) {
                                var A, j = q._canvas;
                                if (l ? A = !0 : l = q.getDevicePixelRatio(), !q._picking && (A || H !== j.clientWidth || t !== j.clientHeight)) {
                                    yh(j, H, t, l);
                                    var $ = l;
                                    H && Math.abs(z.drawingBufferWidth - H * l) > 1 && ($ = Math.min($, z.drawingBufferWidth / H)), t && Math.abs(z.drawingBufferHeight - t * l) > 1 && ($ = Math.min($, z.drawingBufferHeight / t)), $ !== l && (q.setDevicePixelRatio(l = $), yh(j, H, t, l)), q._18Q = null
                                }
                                z.clear(z.COLOR_BUFFER_BIT);
                                var D = z._renderInfo;
                                D.calls = 0, D.vertices = 0, D.faces = 0, D.lines = 0, D.points = 0, D.textureCache = {
                                    time: 0,
                                    count: 0,
                                    pixels: 0
                                }, D.frame = ++q._frameId, D.cacheTimeCost = 0, D.reflectDepth = 0, H *= l, t *= l, this.syncRenderState();
                                do {
                                    if (q.isVREnabled() && q.vr.render(z, H, t, k)) break;
                                    if (q.updateScene(), q._postProcessing.render(z, H, t, k)) break;
                                    q.setViewport(z, 0, 0, H, t), q.renderScene(k)
                                } while (!1);
                                q._33Q = !1, q.countFrame(), q._doBufferGC(z)
                            }
                        }
                    }
                },
                syncRenderState: function() {
                    var c, Y;
                    (c = this._frameState) && (Y = c.renderState) && Y.syncLoss()
                },
                drawReflectors: function(P) {
                    P._renderInfo.reflectDepth++;
                    var S, G, n, k = this,
                        M = k._dataModel.getReflectors(),
                        V = !1;
                    for (S in M) G = M[S], k.isVisible(G) && (n = k.getData3dUI(G), n && n.drawReflector(P) && (V = !0));
                    return P._renderInfo.reflectDepth--, V
                },
                isReflecting: function(r) {
                    return r._renderInfo.reflectDepth
                },
                getPostProcessing: function() {
                    return this._postProcessing
                },
                enablePostProcessing: function(l, q) {
                    return this._postProcessing.enableModule(l, q)
                },
                getPostProcessingModule: function(b) {
                    return this._postProcessing.getModule(b)
                },
                getPostProcessingValue: function(B, o) {
                    var X = this._postProcessing.getModule(B);
                    return X ? X[o] : O
                },
                setPostProcessingValue: function(N, V, K) {
                    var v = this.getPostProcessingValue(N, V),
                        H = this._postProcessing.getModule(N);
                    H && v !== K && ("enable" === V ? this.enablePostProcessing(N, K) : H[V] = K, this.firePropertyChange("postProcessing." + N + "." + V, v, K))
                },
                setDofImageFromGraphView: function(a, W, s) {
                    return this._postProcessing.getModule("Dof").setImageFromGraphView(a, W, s)
                },
                setViewport: function($, r, b, o, F) {
                    this._viewport = [r, b, o, F], $f.for($).directState().viewport = this._viewport
                },
                getRenderState: function() {
                    return $f.for(this._26I)
                },
                getViewport: function() {
                    return this._viewport
                },
                setBufferGCInterval: function(q) {
                    this._bufferGCInterval = q
                },
                _doBufferGC: function(R, V) {
                    var T, s, r = R._bufPool,
                        Q = 0,
                        o = 0,
                        a = R._renderInfo.frame,
                        x = this._bufferGCInterval || 10;
                    for (T in r) Q++, s = r[T], s && (V || a - s._fid > x ? (R.deleteBuffer(s._buf), s._buf = null, r[T] = null) : o++);
                    if (Q / 2 > o && Q > 128) {
                        var G = {};
                        for (T in r) r[T] && (G[T] = r[T]);
                        R._bufPool = G
                    }
                    R._validBufCount = o
                },
                _swapLineMap: function() {
                    var T = this;
                    $k = T._polylineModelMap, T._polylineModelMap = T._polylineModelMapSwap, T._polylineModelMapSwap = $k, $k = T._wireframeModelMap, T._wireframeModelMap = T._wireframeModelMapSwap, T._wireframeModelMapSwap = $k, $k = T._polylineIndexMap, T._polylineIndexMap = T._polylineIndexMapSwap, T._polylineIndexMapSwap = $k, $k = T._wireframeIndexMap, T._wireframeIndexMap = T._wireframeIndexMapSwap, T._wireframeIndexMapSwap = $k
                },
                _updateSkybox: function(D) {
                    if (this._skybox && D) {
                        var Y = D.property,
                            w = !1,
                            z = this._skybox;
                        if ("eye" === Y || "forceUpdate" === Y) {
                            var f = this._eye;
                            z.p3(f[0], f[1], f[2]), w = !0
                        }
                        if ("near" === Y || "far" === Y || "forceUpdate" === Y || "asceptChanged" === Y) {
                            var p = z.__cachedS3__;
                            p || (p = z.__cachedS3__ = z.getFinalScale3d());
                            var J = Math.sqrt(3),
                                X = 1 / 0,
                                t = -1 / 0;
                            p.forEach(function(M) {
                                M /= 2, X = h(M, X), t = q(M, t)
                            }), t *= J;
                            var R = this._near,
                                x = this._far,
                                S = Math.tan(this.getFovy() / 2) * R,
                                B = this.getAspect() * S,
                                g = 1.1 * Math.sqrt(B * B + S * S + R * R),
                                u = 1;
                            if (g > X) u = g / X;
                            else if (t >= x) {
                                var $ = x * x / (R + x);
                                u = $ / t
                            }
                            if (1 !== u) {
                                z.__updatingSkybox__ = !0;
                                var v = p.map(function(K) {
                                    return u * K
                                });
                                z.s3(v), z.setScale3d(1, 1, 1), w = !0, delete z.__updatingSkybox__
                            }
                        }
                        w && this.invalidateData(z)
                    }
                },
                getSkyBox: function() {
                    return this.getSkybox()
                },
                setSkyBox: function(t) {
                    return this.setSkybox(t)
                },
                getSkybox: function() {
                    return this._skybox
                },
                setSkybox: function(A) {
                    var B = this._skybox;
                    if (B === A) return A && this._updateSkybox({
                        property: "forceUpdate"
                    }), void 0;
                    if (B && (this._skyboxStyleMap && B.setStyleMap(this._skyboxStyleMap), this._skyboxStyleMap = null, this._skyboxAnchor3d && B.setAnchor3d(this._skyboxAnchor3d), this._skyboxAnchor3d = null, this._skyboxP3 && B.p3(this._skyboxP3), this._skyboxP3 = null, this.handleDataModelChange({
                            kind: eb,
                            data: B
                        })), this._skybox = A, this.ump(this._updateSkybox, this), A) {
                        A.dm() && A.dm().remove(A), this._skyboxStyleMap = F.Default.clone(A.getStyleMap()), this._skyboxAnchor3d = A.getAnchor3d(), A.setAnchor3d(.5, .5, .5), this._skyboxP3 = A.p3().slice(0), A.s({
                            "shape3d.reverse.flip": !0,
                            "shape3d.reverse.cull": !1,
                            "all.reverse.flip": !0,
                            "all.reverse.cull": !1,
                            "front.reverse.flip": !0,
                            "front.reverse.cull": !1,
                            "back.reverse.flip": !0,
                            "back.reverse.cull": !1,
                            "left.reverse.flip": !0,
                            "left.reverse.cull": !1,
                            "right.reverse.flip": !0,
                            "right.reverse.cull": !1,
                            "top.reverse.flip": !0,
                            "top.reverse.cull": !1,
                            "bottom.reverse.flip": !0,
                            "bottom.reverse.cull": !1
                        });
                        var j = A.onPropertyChanged;
                        A.onPropertyChanged = function(T) {
                            j.call(A, T), !A.__updatingSkybox__ && ["width", "height", "tall", "scale", "scaleTall"].indexOf(T.property) >= 0 && (A.__cachedS3__ = O)
                        }, this.mp(this._updateSkybox, this), this._updateSkybox({
                            property: "forceUpdate"
                        })
                    }
                    this.fp("skybox", B, A)
                },
                drawSky: function(C, K) {
                    var f = this,
                        X = f._skybox;
                    if (X) {
                        var g = $f.for(C).directUniforms(),
                            _ = f._headlightIntensity,
                            r = Wb(f._headlightColor),
                            K = f._prg;
                        1 !== _ && (r = [r[0] * _, r[1] * _, r[2] * _]), g.uHeadlightColor = [r[0], r[1], r[2], 1];
                        var a = f.getData3dUI(X);
                        if (a) {
                            var N = f.isOrtho(),
                                Y = N || this._computedProjectMatrix;
                            if (Y) {
                                var u = f._projectMatrix;
                                N && (f._ortho = !1), g.uPMatrix = f._projectMatrix = om(f, !0)
                            }
                            var b = X.p3(),
                                F = this.getEye();
                            (b[0] !== F[0] || b[1] !== F[1] || b[2] !== F[2]) && (X._position.x = F[0], X._54O = F[1], X._position.y = F[2]), a.validate(), a._42(C, K, k), Y && (N && (f._ortho = !0), g.uPMatrix = f._projectMatrix = u)
                        }
                        C.clear(C.DEPTH_BUFFER_BIT), g.uHeadlightColor = [r[0], r[1], r[2], f._headlightDisabled ? 1 : 0]
                    }
                },
                getLogicalPoint: function(s) {
                    return Sq(s, this._canvas)
                },
                isRectOverlapping: function(E) {
                    var b = this.getData3dUI(E);
                    return b._rectOverlapping
                },
                getHitFaceInfo: function(R) {
                    R.target && (R = this.lp(R));
                    var $ = this.getDataInfoAt(R);
                    if ($) {
                        var k = this.intersectObject(R, $.data);
                        if (k) return {
                            data: $.data,
                            face: k.part
                        }
                    }
                    return Y
                },
                unproject: function(b, H) {
                    var N = this,
                        l = N.getWidth(),
                        z = N.getHeight(),
                        c = b.target ? N.lp(b) : b,
                        n = c.x - l / 2,
                        m = c.y - z / 2,
                        w = 2 * (n / l),
                        i = 2 * (-1 * m / z);
                    H = H || 0;
                    var Y = Yn(),
                        M = om(N),
                        V = sn(N);
                    Qn(Y, M, V), Lc(Y);
                    var I = bc([w, i, H, 1], Y);
                    return [I[0] / I[3], I[1] / I[3], I[2] / I[3]]
                },
                getDataAt: function(l) {
                    var W = this.getDataInfoAt(l);
                    return W ? W.data : Y
                },
                getDataInfoAt: function(Y, P, f) {
                    return Y.target && (Y = this.lp(Y)), this._1o.get(ud(Y.x, Y.y, P), !0, f)
                },
                getDatasInRect: function(w, $) {
                    return this._1o.get(w, !1, $)
                },
                setEditable: function(K) {
                    var V = this,
                        l = V._editable;
                    V._editable = K, this.fp(kc, l, K)
                },
                isEditable: function(_) {
                    var I = this;
                    return _ ? I._editable ? Mk(_) ? _.s("3d.editable") ? I._editableFunc ? I._editableFunc(_) : !0 : !1 : !1 : !1 : I._editable
                },
                isSelectable: function($) {
                    return $.s("3d.selectable") && this.sm().isSelectable($)
                },
                isMovable: function(D) {
                    var l = this;
                    return Em(D) && D.getStyle(tk) !== Wq ? !1 : D.s("3d.movable") ? l._movableFunc ? l._movableFunc(D) : !0 : !1
                },
                isSizeEditable: function(h) {
                    return Mk(h) ? this._sizeEditableFunc ? this._sizeEditableFunc(h) : !0 : !1
                },
                isRotationEditable: function(s) {
                    return Mk(s) && s.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(s) : !0 : !1
                },
                handleDelete: function() {
                    this._editable && this.removeSelection()
                },
                zoomIn: function(y) {
                    this.setZoom(Wm, y)
                },
                zoomOut: function(U) {
                    this.setZoom(1 / Wm, U)
                },
                setZoom: function() {
                    var b = new Cb,
                        u = new Cb,
                        D = new Cb,
                        K = new Cb;
                    return function(S, x) {
                        if (1 !== S) {
                            var R = this;
                            R._14o && R._14o.stop(!0);
                            var Q, W = 1 / S;
                            b.copy(R.getCenter()), u.copy(R.getEye());
                            var F = R._ortho;
                            if (F) {
                                if (Q = R._orthoWidth, Q < R._moveStep && S > 1) return
                            } else if (b.distanceTo(u) < R._moveStep && 1 > W) return;
                            var Z = !1;
                            return R._zoomToCenter === !1 && R._lastZoomLP && (D.copy(u).sub(b).normalize(), R._81O = null, K.copy(R.getHitPosition(R._lastZoomLP, b.toArray(), D.toArray())), Z = !0, R._lastZoomHit = K), (x = tl(x)) ? (x.action = function(n) {
                                R.fi({
                                    kind: R._zooming ? "betweenZoom" : "beginZoom"
                                }), R._zooming = 1;
                                var m = (W - 1) * n + 1;
                                F && R.setOrthoWidth(Q * m), Z ? (R.setEye(D.lerpVectors(K, u, m).toArray()), R.setCenter(D.lerpVectors(K, b, m).toArray())) : F || R.setEye(D.lerpVectors(b, u, m).toArray())
                            }, x._37o = function() {
                                delete R._14o, delete R._zooming, R.fi({
                                    kind: "endZoom"
                                }), R.onZoomEnded()
                            }, R._14o = tj(x)) : (F && R.setOrthoWidth(Q * W), Z ? (R.setEye(D.lerpVectors(K, u, W).toArray()), R.setCenter(D.lerpVectors(K, b, W).toArray())) : F || R.setEye(D.lerpVectors(b, u, W).toArray()), void 0)
                        }
                    }
                }(),
                setOrthoZoom: function(z, v) {
                    return this.setZoom(z, v)
                },
                getPositionInfo: function(f) {
                    var _ = this,
                        B = _._eye,
                        H = _._center,
                        v = _.getAspect(),
                        k = f ? Pn(_g(H, B, !0), _g(f, B)) : cm(B, H);
                    if (_._ortho) {
                        var G = _._orthoWidth;
                        return {
                            length: k,
                            height: G / v,
                            width: G
                        }
                    }
                    var R = 2 * Ec(_._fovy / 2) * k;
                    return {
                        length: k,
                        height: R,
                        width: R * v
                    }
                },
                getCenterInfo: function() {
                    var w = this;
                    return w._81O || (w._81O = w.getPositionInfo()), Vm(w._81O)
                },
                rotate: function(v, S, e, I) {
                    var y = this;
                    if (v || S) {
                        I == Y && (I = y._firstPersonMode), y._88O && y._88O.stop(!0);
                        var z = y._center,
                            i = y._eye,
                            s = y.getCenterInfo().length,
                            m = I ? z : i,
                            B = I ? i : z,
                            F = _g(m, B),
                            R = di(F[0], F[2]),
                            O = di(x(F[0] * F[0] + F[2] * F[2]), F[1]),
                            V = I ? Vc : hp;
                        return I && (S = -S), (e = tl(e)) ? (e.action = function(A) {
                            y.fi({
                                kind: y._rotating ? "betweenRotate" : "beginRotate"
                            }), y._rotating = 1;
                            var G = R + v * A,
                                w = O + S * A;
                            w = I ? f - Xj(y, f - w) : Xj(y, w), F[0] = s * b(w) * b(G), F[1] = s * u(w), F[2] = s * b(w) * u(G), m[0] = B[0] + F[0], m[1] = B[1] + F[1], m[2] = B[2] + F[2], y.fp(V, Y, m)
                        }, e._37o = function() {
                            delete y._88O, delete y._rotating, y.fi({
                                kind: "endRotate"
                            }), y.onRotateEnded()
                        }, y._88O = tj(e)) : (R += v, O += S, O = I ? f - Xj(y, f - O) : Xj(y, O), F[0] = s * b(O) * b(R), F[1] = s * u(O), F[2] = s * b(O) * u(R), m[0] = B[0] + F[0], m[1] = B[1] + F[1], m[2] = B[2] + F[2], y.fp(V, Y, m), void 0)
                    }
                },
                pan: function(t, Z, c, Q) {
                    if (t || Z) {
                        var K = this;
                        Q == Y && (Q = K._firstPersonMode), K._89O && K._89O.stop(!0);
                        var d = sn(K),
                            h = [d[0] * t, d[4] * t, d[8] * t],
                            V = [d[1] * Z, d[5] * Z, d[9] * Z],
                            l = h[0] + V[0],
                            G = h[1] + V[1],
                            R = h[2] + V[2],
                            H = K._center,
                            g = K._eye;
                        if (Q) {
                            var r = Nd(K.getBoundaries(), g[0], g[2], g[0] + l, g[2] + R, x(l * l + R * R));
                            l = r[0], R = r[1]
                        }
                        if (c = tl(c)) {
                            var z = Vm(g),
                                i = Vm(H);
                            return c.action = function(j) {
                                K.fi({
                                    kind: K._panning ? "betweenPan" : "beginPan"
                                }), K._panning = 1, H[0] = i[0] + l * j, H[1] = i[1] + G * j, H[2] = i[2] + R * j, g[0] = z[0] + l * j, g[1] = z[1] + G * j, g[2] = z[2] + R * j, K.fp(hp, Y, g), K.fp(Vc, Y, H)
                            }, c._37o = function() {
                                delete K._89O, delete K._panning, K.fi({
                                    kind: "endPan"
                                }), K.onPanEnded()
                            }, K._89O = tj(c)
                        }
                        H[0] += l, H[1] += G, H[2] += R, g[0] += l, g[1] += G, g[2] += R, K.fp(hp, Y, g), K.fp(Vc, Y, H)
                    }
                },
                walk: function(j, W, i) {
                    if (j) {
                        var A = this;
                        i == Y && (i = A._firstPersonMode), A._90O && A._90O.stop(!0);
                        var d = A._center,
                            F = A._eye,
                            T = _g(d, F, !0);
                        if (i) {
                            var K = Nd(A.getBoundaries(), F[0], F[2], F[0] + T[0] * j, F[2] + T[2] * j, r(j));
                            if (j = cm(K), !j) return;
                            T = [K[0] / j, 0, K[1] / j]
                        }
                        if (W = tl(W)) {
                            var n = Vm(F),
                                L = Vm(d);
                            return W.action = function(Z) {
                                A.fi({
                                    kind: A._walking ? "betweenWalk" : "beginWalk"
                                }), A._walking = 1;
                                var R = j * Z;
                                F[0] = n[0] + T[0] * R, F[1] = n[1] + T[1] * R, F[2] = n[2] + T[2] * R, d[0] = L[0] + T[0] * R, d[1] = L[1] + T[1] * R, d[2] = L[2] + T[2] * R, A.fp(hp, Y, F), A.fp(Vc, Y, d)
                            }, W._37o = function() {
                                delete A._90O, delete A._walking, A.fi({
                                    kind: "endWalk"
                                }), A.onWalkEnded()
                            }, A._90O = tj(W)
                        }
                        F[0] += T[0] * j, F[1] += T[1] * j, F[2] += T[2] * j, d[0] += T[0] * j, d[1] += T[1] * j, d[2] += T[2] * j, A.fp(hp, Y, F), A.fp(Vc, Y, d)
                    }
                },
                handleScroll: function(X, C) {
                    Fq(X);
                    var K = this,
                        E = K._moveStep,
                        l = K.getDataInfoAt(X);
                    if (l) {
                        var y = l.data;
                        if (y && K.isInteractive(y)) {
                            var D = K.intersectObject(X, y);
                            if (D) {
                                var e = D.part,
                                    i = Di(y.s(e + ".image") || y.s("shape3d." + e + ".image") || y.s("all.image") || y.s("shape3d.image"));
                                if (i && Kg(i.scrollable, y, K)) return
                            }
                        }
                    }
                    return K.isFirstPersonMode() ? (K.isPannable() && K.pan(0, C > 0 ? E : -E), void 0) : (K.isZoomable() && (K._lastZoomLP = K.lp(X), K.setZoom(0 > C ? 1 / wm : wm), K._lastZoomLP = K._lastZoomHit = null), void 0)
                },
                handlePinch: function(K, v) {
                    if (this.isZoomable()) {
                        if (Math.abs(K - v) < z.pinchZoomThreshold) return;
                        this.setZoom(v > K ? 1 / El : El)
                    }
                },
                reset: function(d) {
                    this.setUp(z.graph3dViewUp), this.moveCamera(z.graph3dViewEye, z.graph3dViewCenter, d)
                },
                moveSelection: function(T, f, F) {
                    var o = this;
                    o.dm().beginTransaction(), ar(this.sm().toSelection(this.isMovable, this), T, f, F), o.dm().endTransaction()
                },
                getMoveMode: function(r, z) {
                    var A = z.s("3d.move.mode");
                    if (A) return A;
                    var $ = "88",
                        m = "89",
                        S = "90";
                    return ck(r) || Ll[$] && Ll[m] && Ll[S] ? "xyz" : Ll[$] && Ll[m] ? "xy" : Ll[$] && Ll[S] ? "xz" : Ll[m] && Ll[S] ? "yz" : Ll[$] ? "x" : Ll[m] ? "y" : Ll[S] ? "z" : "xz"
                },
                handleTick: function() {
                    var S = this,
                        L = !1,
                        h = S._moveStep,
                        s = h,
                        H = !1,
                        e = !0,
                        F = S._rotateStep * (e ? -1 : 1);
                    if (S.isWalkable() || (s = 0), S.isPannable() || (h = 0), S.isRotatable() || (F = 0), S._32Q) {
                        var K = (ji() - S._32Q) / 50;
                        s *= K, h *= K, F *= K
                    }
                    S._31Q && (_j(S._31Q), delete S._31Q, delete S._32Q), jp() && (L = !0, S.pan(-h, 0, H, e)), cf() && (L = !0, S.pan(h, 0, H, e)), Nr() && (L = !0, ck() ? S.pan(0, h, H, e) : S.walk(s, H, e)), we() && (L = !0, ck() ? S.pan(0, -h, H, e) : S.walk(-s, H, e)), pg() && (L = !0, S.rotate(-F, 0, H, e)), dq() && (L = !0, S.rotate(F, 0, H, e)), lc() && (L = !0, S.rotate(0, -F / 2, H, e)), Xg() && (L = !0, S.rotate(0, F / 2, H, e)), L && (S._32Q = ji(), S._31Q = jf(S.handleTick, S))
                },
                handleKeyDown: function(j) {
                    var V = this;
                    !Gp(j) && ed[j.keyCode] ? V.handleTick() : Si(j) ? V.selectAll() : wf(j) ? V.handleDelete(j) : Mf(j) && this.isResettable() && V.reset()
                },
                checkDoubleClickOnNote: function(W, w, A) {
                    var f = this;
                    if (A === qf) {
                        if (w.s("note.toggleable")) return w.s(rk, !w.s(rk)), f.fi({
                            kind: "toggleNote",
                            event: W,
                            data: w,
                            part: A
                        }), !0
                    } else if (A === mk && w.s("note2.toggleable")) return w.s(dl, !w.s(dl)), f.fi({
                        kind: "toggleNote2",
                        event: W,
                        data: w,
                        part: A
                    }), !0;
                    return !1
                },
                checkDoubleClickOnRotation: function(X, x, B) {
                    return B === Ss ? (x.setRotationX(0), !0) : B === Ts ? (x.setRotationY(0), !0) : B === Us ? (x.setRotationZ(0), !0) : !1
                },
                onRotateEnded: function() {},
                onWalkEnded: function() {},
                getViewRatio: function(S) {
                    var p = this;
                    if (p.isOrtho()) return p.getWidth() / p.getOrthoWidth();
                    var Z = p.getCenter(),
                        d = p.getHeight(),
                        l = p.getEye(),
                        L = [Z[0] - l[0], Z[1] - l[1], Z[2] - l[2]],
                        Q = [S[0] - l[0], S[1] - l[1], S[2] - l[2]],
                        N = Math.sqrt(L[0] * L[0] + L[1] * L[1] + L[2] * L[2]),
                        n = 1 / Math.tan(p.getFovy() / 2);
                    return d * N * n / (Q[0] * L[0] + Q[1] * L[1] + Q[2] * L[2])
                },
                inViewSpace: function(o) {
                    var I, q = this,
                        K = q._transformPointToViewSpace(o),
                        j = q.getAspect(),
                        n = q.getNear(),
                        V = q.getFar();
                    return -K[2] < n || -K[2] > V ? !1 : q.isOrtho() ? (I = q.getOrthoWidth() / 2, Math.abs(K[0]) <= I && Math.abs(K[1] * j) <= I) : (I = Math.sqrt(K[0] * K[0] + K[1] * K[1] + K[2] * K[2]) * Math.tan(q.getFovy() / 2), Math.abs(K[1] <= I) && Math.abs(K[0]) <= I * j)
                },
                getPVMatrix: function() {
                    var l, A = this;
                    return (l = A._18Q) || (l = om(A), A._18Q = Qn(l, l, sn(A)), A._18Q._wh = A.getWidth() / 2 / A.getHeight()), l
                },
                getFrustum: function() {
                    var c = new gb,
                        C = new Pj,
                        x = new Array(16);
                    return function() {
                        for (var M = this.getPVMatrix(), B = !1, N = 0; 16 > N; N++) M[N] !== x[N] && (B = !0, x[N] = M[N]);
                        return B && C.setFromMatrix(c.fromArray(M)), C
                    }
                }(),
                toViewPosition: function(i) {
                    var J = this,
                        E = J.getWidth() / 2,
                        A = J.getHeight() / 2,
                        V = J.getPVMatrix();
                    return i = bc([i[0], i[1], i[2], 1], V), {
                        x: E + E * i[0] / i[3],
                        y: A - A * i[1] / i[3],
                        z: i[2] / i[3]
                    }
                },
                getHitPosition: function(_, q, G) {
                    var g = this,
                        D = g.getWidth(),
                        c = g.getHeight(),
                        n = _.target ? g.lp(_) : _,
                        H = n.x - D / 2,
                        e = n.y - c / 2,
                        u = g.getCenterInfo(),
                        O = sn(g);
                    q = q ? q : [0, 0, 0], G = G ? G : [0, 1, 0], H = H / D * u.width, e = -1 * e / c * u.height;
                    var M = [O[0] * H, O[4] * H, O[8] * H],
                        C = [O[1] * e, O[5] * e, O[9] * e],
                        N = [M[0] + C[0], M[1] + C[1], M[2] + C[2]],
                        P = g.getCenter(),
                        l = No(g, q, G, [N[0] + P[0], N[1] + P[1], N[2] + P[2]]);
                    return l ? l : [0, 0, 0]
                },
                intersectObject: function(g, z) {
                    return this._raycaster.intersectObject(g, z)
                },
                intersectObjects: function(j, n, Y) {
                    return this._raycaster.intersectObjects(j, n, Y)
                },
                getLineLength: function(L) {
                    this.validate();
                    var W = this.getData3dUI(L);
                    if (W && W.getCache) {
                        var P = W.getCache();
                        if (P) return P[P.length - 1].length
                    }
                    return 0
                },
                getLineOffset: function(i, G) {
                    var H = this.getData3dUI(i);
                    if (H && H.getCache) {
                        var f = H.getCache();
                        if (f) {
                            var g = Nn(f, G);
                            if (!i.r3) return g;
                            var V = i.r3();
                            if (0 === V[0] && 0 === V[1] && 0 === V[2]) return g;
                            var E = new Cb(i.p3()),
                                r = new Cb(g.point).sub(E),
                                b = new Cb(g.tangent).add(r),
                                y = (new Ck).setFromEuler(new jg(V, i.getRotationMode(), !0));
                            return r.applyQuaternion(y), b.applyQuaternion(y), {
                                point: r.add(E),
                                tangent: b.sub(r).normalize()
                            }
                        }
                    }
                    return Y
                },
                isLabelVisible: function() {
                    return !0
                },
                isNoteVisible: function() {
                    return !0
                },
                moveCamera: function(g, l, M) {
                    var E = this,
                        J = E.getEye();
                    J = [J[0], J[1], J[2]];
                    var q = E.getCenter();
                    if (q = [q[0], q[1], q[2]], g || (g = J), l || (l = q), E._flyAnim && E._flyAnim.stop(!0), M = tl(M), !M) return E.setEye(g[0], g[1], g[2]), E.setCenter(l[0], l[1], l[2]), delete E._flyAnim, !0;
                    var L = [g[0] - J[0], g[1] - J[1], g[2] - J[2]],
                        z = [l[0] - q[0], l[1] - q[1], l[2] - q[2]];
                    return M.action = function(B) {
                        E.setCenter(q[0] + z[0] * B, q[1] + z[1] * B, q[2] + z[2] * B), E.setEye(J[0] + L[0] * B, J[1] + L[1] * B, J[2] + L[2] * B)
                    }, M._37o = function() {
                        delete E._flyAnim
                    }, E._flyAnim = tj(M)
                },
                flyTo: function() {
                    function x(n, i, W) {
                        if (W instanceof F.Node) {
                            k.fromArray(Qj(W, i.getMat(W)));
                            var c = W.getAnchor3d();
                            n.push((new Cb).set(0 - c.x, 0 - c.y, 0 - c.z).applyMatrix4(k)), n.push((new Cb).set(0 - c.x, 0 - c.y, 1 - c.z).applyMatrix4(k)), n.push((new Cb).set(0 - c.x, 1 - c.y, 0 - c.z).applyMatrix4(k)), n.push((new Cb).set(0 - c.x, 1 - c.y, 1 - c.z).applyMatrix4(k)), n.push((new Cb).set(1 - c.x, 0 - c.y, 0 - c.z).applyMatrix4(k)), n.push((new Cb).set(1 - c.x, 0 - c.y, 1 - c.z).applyMatrix4(k)), n.push((new Cb).set(1 - c.x, 1 - c.y, 0 - c.z).applyMatrix4(k)), n.push((new Cb).set(1 - c.x, 1 - c.y, 1 - c.z).applyMatrix4(k))
                        }
                    }
                    var t = new Cb,
                        $ = new Cb,
                        D = new Cb,
                        l = new Cb,
                        Y = new Cb,
                        k = new gb,
                        r = new F.Math.Quaternion,
                        M = new jg,
                        W = new $l;
                    return function(u, j, G) {
                        var n = this;
                        "boolean" == typeof j && (j = {
                            animation: j
                        }), j = j || {};
                        var o = j.center,
                            g = j.distance,
                            i = j.direction,
                            k = j.worldDirection,
                            b = G || j.ratio || .8,
                            P = j.xRatio || b,
                            _ = j.yRatio || b;
                        (G !== O || j.duration || j.frames) && (j = {
                            animation: j
                        });
                        var I, X, R = [],
                            A = g === O;
                        if (o && D.fromArray(o), !o || A)
                            if (u || (u = n.dm().getDatas()), 1 === u.length && (u = eo(u) ? u.get(0) : u[0]), u instanceof F.Node) o || D.fromArray(u.p3()), A && (x(R, n, u), I = R.length);
                            else {
                                if (!u.length) return;
                                if ((A || !o) && (R = [], u.forEach(function(G) {
                                        x(R, n, G)
                                    }), I = R.length, !I)) return;
                                o || (W.setFromPoints(R), D.copy(W.min).add(W.max).multiplyScalar(.5))
                            }
                        if (n._flyAnim && n._flyAnim.stop(!0), t.fromArray(n.getEye()), $.fromArray(n.getCenter()), n.setCenter(D.x, D.y, D.z), l.subVectors(t, $), i || k) {
                            !k && u instanceof F.Node ? r.setFromEuler(M.set(u.r3(), u.getRotationMode(), !0)) : r.set(0, 0, 0, 1);
                            var S = l.length();
                            l.fromArray(k || i).applyQuaternion(r).setLength(S)
                        }
                        var a = new Cb(n.getUp()),
                            Q = _q.fequal(a.x, 0, 1e-5) && _q.fequal(a.z, 0, 1e-5);
                        if (Q && 0 === l.x && 0 === l.z) {
                            var T = .001,
                                J = l.y;
                            l.y = J * (1 - T), l.z = Math.sign(J) * T
                        }
                        var f = 0;
                        if (A) {
                            var d, w, N, K = P,
                                Z = _;
                            if (Y.copy(l), n.isOrtho()) {
                                var E = -1 / 0;
                                for (n._eye[0] = l.x + D.x, n._eye[1] = l.y + D.y, n._eye[2] = l.z + D.z, d = om(n), Qn(d, d, sn(n)), X = 0; I > X; X++) N = R[X], w = bc([N.x, N.y, N.z, 1], d), E = Math.max(E, Math.max(Math.abs(w[0]) / K, Math.abs(w[1]) / Z));
                                f = n.getOrthoWidth() * E
                            } else {
                                for (var v, L, H = n.getNear(), h = 10; h--;) {
                                    for (n._eye[0] = l.x + D.x, n._eye[1] = l.y + D.y, n._eye[2] = l.z + D.z, d = om(n), Qn(d, d, sn(n)), v = !0, L = -1 / 0, X = 0; I > X; X++) {
                                        if (N = R[X], w = bc([N.x, N.y, N.z, 1], d), w[3] < H && h) {
                                            l.multiplyScalar(2), v = !1;
                                            break
                                        }
                                        L = Math.max(L, Math.max(Math.abs(w[0]) / K, Math.abs(w[1]) / Z) - w[3])
                                    }
                                    if (v) break
                                }
                                l.setLength(L + l.length())
                            }
                            l.manhattanLength() < 1e-6 && l.copy(Y)
                        } else l.setLength(g);
                        var p = l.add(D),
                            s = tl(j.animation);
                        if (s) {
                            n.setEye(t.x, t.y, t.z), n.setCenter($.x, $.y, $.z);
                            var y = p.clone().sub(D),
                                c = y.length();
                            c && y.multiplyScalar(1 / c);
                            var B = t.clone().sub($),
                                m = B.length();
                            m && B.multiplyScalar(1 / m);
                            var U = (new gb).lookAtDirection(B, a),
                                q = (new gb).lookAtDirection(y, a),
                                V = (new Ck).setFromRotationMatrix(U),
                                C = (new Ck).setFromRotationMatrix(q),
                                e = (new Cb).subVectors(D, $);
                            if (f) var Me = n.getOrthoWidth();
                            var Wo = new Cb,
                                Gq = new Cb,
                                qd = new Cb,
                                tn = s.action,
                                pb = s._37o,
                                Cg = $.clone();
                            return s.action = function(Z, B) {
                                Gq.copy(Cg).addScaledVector(e, Z);
                                var z = V.clone().slerp(C, Z);
                                Wo.set(0, 0, 1).applyQuaternion(z).setLength(m + (c - m) * Z).add(Gq), qd.set(0, 1, 0).applyQuaternion(z), n.setCenter(Gq.x, Gq.y, Gq.z), n.setEye(Wo.x, Wo.y, Wo.z), n.setUp(qd.x, qd.y, qd.z), f && n.setOrthoWidth((f - Me) * Z + Me), tn && tn(Z, B)
                            }, s._37o = function() {
                                delete n._flyAnim;
                                var R = n.getUp(),
                                    t = Q ? z.graph3dViewUp : a.toArray();
                                (R[0] !== t[0] || R[1] !== t[1] || R[2] !== t[2]) && n.setUp(t), pb && pb()
                            }, {
                                lastEye: t,
                                lastCenter: $,
                                eye: p,
                                center: D,
                                orthoWidth: f,
                                animation: n._flyAnim = tj(s)
                            }
                        }
                        return n.setEye(p.x, p.y, p.z), n.setCenter(D.x, D.y, D.z), f && n.setOrthoWidth(f), delete n._flyAnim, {
                            lastEye: t,
                            lastCenter: $,
                            eye: p,
                            center: D,
                            orthoWidth: f
                        }
                    }
                }(),
                getBoundingBox: function() {
                    function w(E, D, t) {
                        k.fromArray(Qj(t, D.getMat(t)));
                        var V = t.getAnchor3d();
                        E.push((new Cb).set(0 - V.x, 0 - V.y, 0 - V.z).applyMatrix4(k)), E.push((new Cb).set(0 - V.x, 0 - V.y, 1 - V.z).applyMatrix4(k)), E.push((new Cb).set(0 - V.x, 1 - V.y, 0 - V.z).applyMatrix4(k)), E.push((new Cb).set(0 - V.x, 1 - V.y, 1 - V.z).applyMatrix4(k)), E.push((new Cb).set(1 - V.x, 0 - V.y, 0 - V.z).applyMatrix4(k)), E.push((new Cb).set(1 - V.x, 0 - V.y, 1 - V.z).applyMatrix4(k)), E.push((new Cb).set(1 - V.x, 1 - V.y, 0 - V.z).applyMatrix4(k)), E.push((new Cb).set(1 - V.x, 1 - V.y, 1 - V.z).applyMatrix4(k))
                    }
                    var k = new gb;
                    return function(k) {
                        if (k = k || this.sm().getSelection(), k instanceof F.Node && (k = [k]), 0 === k.length) return Y;
                        var T = [];
                        k.forEach(function(g) {
                            Mk(g) && w(T, this, g)
                        }, this);
                        var c = [1 / 0, 1 / 0, 1 / 0],
                            z = [-1 / 0, -1 / 0, -1 / 0];
                        return T.forEach(function(T) {
                            c[0] = Math.min(T.x, c[0]), c[1] = Math.min(T.y, c[1]), c[2] = Math.min(T.z, c[2]), z[0] = Math.max(T.x, z[0]), z[1] = Math.max(T.y, z[1]), z[2] = Math.max(T.z, z[2])
                        }), {
                            min: c,
                            max: z
                        }
                    }
                }(),
                setBatchInfo: function(A, X) {
                    var x = this._batchInfoMap[A];
                    this._batchInfoMap[A] = X, this.fp("batchInfo", x, X)
                },
                getBatchInfo: function(S) {
                    return this._batchInfoMap[S] || Ip[S]
                },
                setOrthoWidth: function(P) {
                    var B = this._orthoWidth;
                    if (this._orthoWidth = P, this._syncEyeWithOrthoWidth) {
                        var g = P / this.getAspect(),
                            D = g / 2 / Ec(this.getFovy() / 2),
                            Z = (new Cb).fromArray(this.getEye()),
                            V = (new Cb).fromArray(this.getCenter());
                        Z.sub(V).setLength(D).add(V), this.setEye(Z.toArray())
                    }
                    this.fp("orthoWidth", B, P)
                },
                getCamera: function(x) {
                    var M = this;
                    x || (x = M._mainCamera, x || (x = M._mainCamera = new F.Camera)), x.s({
                        "camera.type": M.isOrtho() ? "ortho" : "perspective",
                        "camera.aspect": M.getAspect(),
                        "camera.fovy": M.getFovy(),
                        "camera.ortho.width": M.getOrthoWidth(),
                        "camera.near": M.getNear(),
                        "camera.far": M.getFar()
                    });
                    var i = M.getEye();
                    return x.p3(i.slice()), x.lookAt(M.getCenter(), M.getUp()), x
                },
                resetHeadlightProperties: function() {
                    this._headlightColor = z.graph3dViewHeadlightColor, this._headlightIntensity = z.graph3dViewHeadlightIntensity, this._headlightRange = z.graph3dViewHeadlightRange, this._headlightGroup = z.graph3dViewHeadlightGroup, this._headlightAmbientIntensity = z.graph3dViewHeadlightAmbientIntensity, this._headlightDisabled = z.graph3dViewHeadlightDisabled
                },
                resetFogProperties: function() {
                    this._fogDisabled = z.graph3dViewFogDisabled, this._fogMode = z.graph3dViewFogMode, this._fogDensity = z.graph3dViewFogDensity, this._fogColor = z.graph3dViewFogColor, this._fogNear = z.graph3dViewFogNear, this._fogFar = z.graph3dViewFogFar
                }
            }),
            function() {
                function A(w, $, l) {
                    var M = w[$];
                    M && M.releaseTexture(), w[$] = l
                }

                function I() {
                    return ["\n #ifdef ENVMAP_TYPE_CUBE_UV \n", "#define cubeUV_maxMipLevel 8.0 \n", "#define cubeUV_minMipLevel 4.0 \n", "#define cubeUV_maxTileSize 256.0 \n", "#define cubeUV_minTileSize 16.0 \n", "float getFace(vec3 direction) {", "vec3 absDirection = abs(direction);", "float face = - 1.0;", "if (absDirection.x > absDirection.z) {", "if (absDirection.x > absDirection.y)", "face = direction.x > 0.0 ? 0.0 : 3.0;", " else ", "face = direction.y > 0.0 ? 1.0 : 4.0;", "} else {", "if (absDirection.z > absDirection.y) ", "face = direction.z > 0.0 ? 2.0 : 5.0;", " else ", "face = direction.y > 0.0 ? 1.0 : 4.0;", "}", "return face;", "} ", "vec2 getUV(vec3 direction, float face) {", "vec2 uv;", "if (face == 0.0) {", "uv = vec2(direction.z, direction.y) / abs(direction.x);", "} else if (face == 1.0) {", "uv = vec2(- direction.x, - direction.z) / abs(direction.y);", "} else if (face == 2.0) {", "uv = vec2(- direction.x, direction.y) / abs(direction.z);", "} else if (face == 3.0) {", "uv = vec2(- direction.z, direction.y) / abs(direction.x);", "} else if (face == 4.0) {", "uv = vec2(- direction.x, direction.z) / abs(direction.y);", "} else {", "uv = vec2(direction.x, direction.y) / abs(direction.z);", "}", "return 0.5 * (uv + 1.0);", "} ", "vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {", "float face = getFace(direction);", "float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);", "mipInt = max(mipInt, cubeUV_minMipLevel);", "float faceSize = exp2(mipInt);", "float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);", "vec2 uv = getUV(direction, face) * (faceSize - 1.0);", "vec2 f = fract(uv);", "uv += 0.5 - f;", "if (face > 2.0) {", "uv.y += faceSize;", "face -= 3.0;", "}", "uv.x += face * faceSize;", "if (mipInt < cubeUV_maxMipLevel) {", "uv.y += 2.0 * cubeUV_maxTileSize;", "}", "uv.y += filterInt * 2.0 * cubeUV_minTileSize;", "uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);", "uv *= texelSize;", "vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;", "uv.x += texelSize;", "vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;", "uv.y += texelSize;", "vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;", "uv.x -= texelSize;", "vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;", "vec3 tm = mix(tl, tr, f.x);", "vec3 bm = mix(bl, br, f.x);", "return mix(tm, bm, f.y);", "}", "\n #define r0 1.0 \n", "#define v0 0.339 \n", "#define m0 - 2.0 \n", "#define r1 0.8 \n", "#define v1 0.276 \n", "#define m1 - 1.0 \n", "#define r4 0.4 \n", "#define v4 0.046 \n", "#define m4 2.0 \n", "#define r5 0.305 \n", "#define v5 0.016 \n", "#define m5 3.0 \n", "#define r6 0.21 \n", "#define v6 0.0038 \n", "#define m6 4.0 \n", "float roughnessToMip(float roughness) {", "float mip = 0.0;", "if (roughness >= r1) {", "mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;", "} else if (roughness >= r4) {", "mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;", "} else if (roughness >= r5) {", "mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;", "} else if (roughness >= r6) {", "mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;", "} else {", "mip = - 2.0 * log2(1.16 * roughness);", "}", "return mip;", "} ", "vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {", "float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);", "float mipF = fract(mip);", "float mipInt = floor(mip);", "vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);", "if (mipF == 0.0) {", "return vec4(color0, 1.0);", "} else {", "vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);", "return vec4(mix(color0, color1, mipF), 1.0);", "}", "} ", "\n #endif \n"].join("")
                }

                function c() {
                    return ["vec4 sRGBToLinear( in vec4 value ) {", "return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );", "}", "vec4 LinearTosRGB( in vec4 value ) {", "return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );", "}", "vec4 inputTexelToLinear( vec4 value ) { return sRGBToLinear( value ); }", "vec4 linearToOutputTexel( vec4 value ) { return LinearTosRGB( value ); }", "vec4 envMapTexelToLinear( vec4 color ) { return inputTexelToLinear( color ); }"].join("")
                }

                function T() {
                    return ["precision mediump float;\n", "precision mediump int;\n", "attribute vec3 position;", "attribute vec2 uv;", "attribute float faceIndex;", "varying vec3 vOutputDirection;", "vec3 getDirection( vec2 uv, float face ) {", "uv = 2.0 * uv - 1.0;", "vec3 direction = vec3( uv, 1.0 );", "if ( face == 0.0 ) { direction = direction.zyx; } ", "else if ( face == 1.0 ) { direction = direction.xzy; direction.xz *= -1.0; } ", "else if ( face == 2.0 ) { direction.x *= -1.0; }", "else if ( face == 3.0 ) { direction = direction.zyx; direction.xz *= -1.0; } ", "else if ( face == 4.0 ) { direction = direction.xzy; direction.xy *= -1.0; } ", "else if ( face == 5.0 ) { direction.z *= -1.0; }", "return direction;", "}", "void main() {", "vOutputDirection = getDirection( uv, faceIndex );", "gl_Position = vec4( position, 1.0 );", "}"].join("")
                }

                function W() {
                    return {
                        vs: T(),
                        fs: ["precision mediump float;\n", "precision mediump int;\n", "varying vec3 vOutputDirection;", "uniform samplerCube envMap;\n", c(), "\n void main() {", "gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );", "gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3(- vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;", "gl_FragColor = linearToOutputTexel( gl_FragColor );", "}"].join("")
                    }
                }

                function H() {
                    return {
                        vs: T(),
                        fs: ["precision mediump float;\n", "precision mediump int;\n", "varying vec3 vOutputDirection;", "uniform sampler2D envMap;", "uniform vec2 texelSize;\n", c(), "\n #define RECIPROCAL_PI 0.3183098861837907 \n", "\n #define RECIPROCAL_PI2 0.15915494309189535 \n", "vec2 equirectUv( in vec3 dir ) {", "float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;", "float v = 0.5 - asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI;", "return vec2( u, v );", "}", "void main() {", "gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );", "vec3 outputDirection = normalize( vOutputDirection );", "vec2 uv = equirectUv( outputDirection );", "vec2 f = fract( uv / texelSize - 0.5 );", "uv -= f * texelSize;", "vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;", "uv.x += texelSize.x;", "vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;", "uv.y += texelSize.y;", "vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;", "uv.x -= texelSize.x;", "vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;", "vec3 tm = mix( tl, tr, f.x );", "vec3 bm = mix( bl, br, f.x );", "gl_FragColor.rgb = mix( tm, bm, f.y );", "gl_FragColor = linearToOutputTexel( gl_FragColor );", "}"].join("")
                    }
                }

                function N(N) {
                    return {
                        vs: T(),
                        fs: ["precision mediump float;\n", "precision mediump int;\n", "#define n " + N + "\n", "varying vec3 vOutputDirection;", "uniform sampler2D envMap;", "uniform int samples;", "uniform float weights[ n ];", "uniform bool latitudinal;", "uniform float dTheta;", "uniform float mipInt;", "uniform vec3 poleAxis; \n", c(), "\n #define ENVMAP_TYPE_CUBE_UV \n", I(), "\n vec3 getSample( float theta, vec3 axis ) {", "float cosTheta = cos( theta );", "vec3 sampleDirection = vOutputDirection * cosTheta + cross(axis, vOutputDirection) * sin(theta) + axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);", "return bilinearCubeUV( envMap, sampleDirection, mipInt );", "}", "void main() {", "vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );", "if ( all( equal( axis, vec3( 0.0 ) ) ) ) {", "axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );", "}", "axis = normalize( axis );", "gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );", "gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );", "for ( int i = 1; i < n; i++ ) {", "if ( i >= samples ) { break; }", "float theta = dTheta * float( i );", "gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );", "gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );", "}", "gl_FragColor = linearToOutputTexel( gl_FragColor );", "}"].join("")
                    }
                }
                var k = Hn.EnvmapRenderer = function(s) {
                    this.gv = s, this._envmaps = {}, this._envmapHash = {}, this._probeCaptureTime = {}, this._pingPongRenderTarget = null, this._equirectShader = null, this._cubemapShader = null, this._blurMaterial = null, this._lastCaptureFrame = 0
                };
                k.prototype = {}, k.prototype.constructor = k, k.prototype.changeEnvmapType = function(j) {
                    "legacy" === j ? (this.setEnvmapByProbeId = this.setEnvmapLegacy, this.onBeforeRender = this.onBeforeRenderLegacy) : (this.setEnvmapByProbeId = this.setEnvmap, this.onBeforeRender = this.onBeforeRenderNew)
                }, k.prototype.invalidateEnvmap = function(w) {
                    var R = this.gv;
                    if ("legacy" !== R.getEnvmapType()) {
                        var i = R.getGL();
                        i && (w ? (delete this._envmapHash[w], delete this._probeCaptureTime[w]) : (this._envmapHash = {}, this._probeCaptureTime = {}), R.iv())
                    }
                }, k.prototype.onBeforeRenderLegacy = function(J) {
                    this.assureTextureLegacy(J)
                }, k.prototype.assureTextureLegacy = function(u) {
                    var C = this,
                        K = C.gv,
                        e = K.getEnvmap();
                    if (e !== C._lastLegacyImage) {
                        if (C._envmapLegacy && (u.deleteTexture(C._envmapLegacy), C._envmapLegacy = null), !e) return C._lastLegacyImage = e, void 0;
                        var U = z.getImage(e);
                        if (U && U.tagName) {
                            U = z.resizeImagePOT(U, !0);
                            var h = C._envmapLegacy = u.createTexture();
                            u.activeTexture(u.TEXTURE0), u.bindTexture(u.TEXTURE_CUBE_MAP, h), u.texParameteri(u.TEXTURE_CUBE_MAP, u.TEXTURE_MAG_FILTER, u.LINEAR), u.texParameteri(u.TEXTURE_CUBE_MAP, u.TEXTURE_MIN_FILTER, u.LINEAR), u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X + 0, 0, u.RGBA, u.RGBA, u.UNSIGNED_BYTE, U), u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X + 1, 0, u.RGBA, u.RGBA, u.UNSIGNED_BYTE, U), u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X + 2, 0, u.RGBA, u.RGBA, u.UNSIGNED_BYTE, U), u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X + 3, 0, u.RGBA, u.RGBA, u.UNSIGNED_BYTE, U), u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X + 4, 0, u.RGBA, u.RGBA, u.UNSIGNED_BYTE, U), u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X + 5, 0, u.RGBA, u.RGBA, u.UNSIGNED_BYTE, U), u.bindTexture(u.TEXTURE_CUBE_MAP, u._emptyCubeTexture), C._lastLegacyImage = e
                        }
                    }
                }, k.prototype.setEnvmapLegacy = function(H) {
                    H.uEnvMap = this._envmapLegacy
                }, k.prototype.onBeforeRenderNew = function(j) {
                    this.assureTextureNew(j), this.resetUniformCache()
                }, k.prototype.assureTextureNew = function(w) {
                    var t = this,
                        Q = t.gv,
                        M = Q.getEnvmap(),
                        T = t._envmapHash,
                        E = t._envmaps,
                        q = w._renderInfo.frame;
                    if (!(this._lastCaptureFrame >= q || Q._picking))
                        for (var L in M) {
                            var r, N = M[L],
                                h = N.type;
                            switch (h) {
                                case "sphere":
                                    r = N.image, r !== T[L] && (wb = z.getImage(r), wb && (T[L] = r, A(E, L, t.fromEquirectangular(r))));
                                    break;
                                case "cube":
                                    var l = N.images;
                                    if (l && 6 === l.length && (r = l.join(","), r !== T[L])) {
                                        for (var H = !0, V = 0; 6 > V; V++)
                                            if (!z.getImage(l[V])) {
                                                H = !1;
                                                break
                                            }
                                        H && (T[L] = r, A(E, L, t.fromCubemap(l)))
                                    }
                                    break;
                                case "skybox":
                                    var S = Q.getSkybox();
                                    if (S) {
                                        var u = S.s("shape3d");
                                        if (r = "sphere" === u ? S._id + "_" + S.s("shape3d.image") : S._id + "_" + S.s("front.image"), r !== T[L]) {
                                            var H;
                                            if ("sphere" === u) H = z.getImage(S.s("shape3d.image"));
                                            else {
                                                H = !0;
                                                for (var Z = ["front", "back", "left", "right", "top", "bottom"], V = 0; 6 > V; V++)
                                                    if (!z.getImage(S.s(Z[V] + ".image"))) {
                                                        H = !1;
                                                        break
                                                    }
                                            }
                                            H && (T[L] = r, A(E, L, t.fromSkybox()))
                                        }
                                    }
                                    break;
                                case "probe":
                                    var I = N.pos,
                                        n = N.size;
                                    if (r = I[0] + "_" + I[1] + "_" + I[2] + "_" + n, r !== T[L]) {
                                        var J = this._probeCaptureTime[r],
                                            U = Date.now();
                                        J || (this._probeCaptureTime[r] = J = U), U - J > z.envmapProbeMinWaitTime && !mh && !dn || U - J > z.envmapProbeMaxWaitTime ? (delete this._probeCaptureTime[r], T[L] = r, A(E, L, t.fromSceneProbe(I, n, N.filter))) : Q.iv()
                                    }
                            }
                        }
                }, k.prototype.resetUniformCache = function() {
                    this._frameUniformCache = {}
                }, k.prototype.setEnvmap = function(g, Y) {
                    var L = g.uuid,
                        N = this._frameUniformCache,
                        $ = this._envmaps[Y];
                    $ && ($ = $.texture), N[L] !== $ && (N[L] = $, g.uEnvMap = $)
                }, k.prototype.fromEquirectangular = function(B) {
                    var R = F.Default.getImage(B);
                    return this.rectSize = [1 / R.width, 1 / R.height], B = this.gv.getTexture(B), this.fromTexture(B)
                }, k.prototype.fromCubemap = function(n) {
                    var P = this.gv.getGL(),
                        B = P.createTexture();
                    P.activeTexture(P.TEXTURE0), P.bindTexture(P.TEXTURE_CUBE_MAP, B), P.texParameteri(P.TEXTURE_CUBE_MAP, P.TEXTURE_MAG_FILTER, P.LINEAR), P.texParameteri(P.TEXTURE_CUBE_MAP, P.TEXTURE_MIN_FILTER, P.LINEAR);
                    for (var u = [], x = w / 3, q = 0; 6 > q; q++) u[q] = z.resizeImage(F.Default.getImage(n[q]), x);
                    return P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + 0, 0, P.RGBA, P.RGBA, P.UNSIGNED_BYTE, u[0]), P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + 1, 0, P.RGBA, P.RGBA, P.UNSIGNED_BYTE, u[1]), P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + 2, 0, P.RGBA, P.RGBA, P.UNSIGNED_BYTE, u[2]), P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + 3, 0, P.RGBA, P.RGBA, P.UNSIGNED_BYTE, u[3]), P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + 4, 0, P.RGBA, P.RGBA, P.UNSIGNED_BYTE, u[4]), P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + 5, 0, P.RGBA, P.RGBA, P.UNSIGNED_BYTE, u[5]), P.bindTexture(P.TEXTURE_CUBE_MAP, P._emptyCubeTexture), this.fromTexture(B, !0)
                }, k.prototype.fromTexture = function(n, G) {
                    var S = this._allocateTargets();
                    this._pingPongRenderTarget || (this._pingPongRenderTarget = this._allocateTargets());
                    var k = this.gv,
                        X = k.getGL(),
                        t = $f.for(X).directState(),
                        g = t.depth.enabled;
                    t.scissor.enabled = !0, t.depth.enabled = !1;
                    var L = k.getViewport(X);
                    return this._textureToCubeUV(n, S, G), this._applyPMREM(S), S.unbind(X), k.setViewport(X, L[0], L[1], L[2], L[3]), t.depth.enabled = g, t.scissor.enabled = !1, S
                }, k.prototype.fromSkybox = function() {
                    return this._fromCamera(function(_) {
                        _.s({
                            "camera.onlySky": !0
                        })
                    })
                }, k.prototype.fromScene = function($) {
                    return this._fromCamera(function(Q) {
                        Q.s({
                            "camera.onlySky": !1
                        }), $ && $(Q)
                    })
                }, k.prototype.fromNode = function(Q) {
                    var d = this.gv.getData3dUI(Q),
                        N = d._42;
                    d._42 = gj;
                    var w = this.gv.getSkybox(),
                        a = Q.p3();
                    if (w) {
                        var z = w.p3();
                        w.p3(a)
                    }
                    var B = this.fromScene(function(m) {
                        m.p3(a)
                    });
                    return d._42 = N, w && w.p3(z), B
                }, k.prototype.fromSceneProbe = function(x, u, s) {
                    var F = this.gv,
                        l = F.getSkybox();
                    if (l) {
                        var B = l.p3();
                        l.p3(x)
                    }
                    if (s) {
                        var L = F.isVisible;
                        F.isVisible = function(T) {
                            var A = s(T);
                            return A !== O ? A : L.call(F, T)
                        }
                    }
                    var y = this.fromScene(function(E) {
                        E.p3(x), E.s("camera.near", u)
                    });
                    return s && (F.isVisible = L), l && l.p3(B), y
                }, k.prototype._fromCamera = function($) {
                    var _ = this.gv,
                        F = _.getCamera();
                    $ && $(F);
                    var U = new cg(_, w, w, {
                            cube: !0
                        }),
                        t = _.getGL(),
                        l = _.getViewport(t),
                        O = this.setEnvmapByProbeId,
                        B = this.onBeforeRender;
                    this.setEnvmapByProbeId = function(y) {
                        y.envMap = t._emptyTexture
                    }, this.onBeforeRender = gj, F.attachRenderTarget(U), F.render(_), F.detachRenderTarget(), this.setEnvmapByProbeId = O, this.onBeforeRender = B, _.setViewport(t, l[0], l[1], l[2], l[3]);
                    var p = this.fromTexture(U.texture, !0);
                    return U.releaseTexture(), p
                }, k.prototype._allocateTargets = function() {
                    return new cg(this.gv, 3 * K, 3 * K, {
                        magFilter: hq.NEAREST,
                        minFilter: hq.NEAREST
                    })
                }, k.prototype._textureToCubeUV = function(i, d, C) {
                    var g, z = this.gv;
                    C ? null == (g = this._cubemapShader) && (this._cubemapShader = g = this.createShader(W())) : null == (g = this._equirectShader) && (this._equirectShader = g = this.createShader(H()));
                    var P = z.getGL();
                    d.bind(P), this._setViewport(d, 0, 0, 3 * K, 2 * K);
                    var Q = z.getRenderState();
                    Q.useProgram(g);
                    var p = Q.directUniforms(),
                        J = Q.directAttribs();
                    p.envMap = i, C || (p.texelSize = this.rectSize);
                    var u = Z[0];
                    J.position = Cs(P, null, u.vs, Y, 3), J.uv = Cs(P, null, u.uv, Y, 2), J.faceIndex = Cs(P, null, u.faceIs, Y, 1), il(P, 0, u.vs.length / 3)
                }, k.prototype._applyPMREM = function(m) {
                    for (var q, I, f, q = 1; r > q; q++) I = Math.sqrt(e[q] * e[q] - e[q - 1] * e[q - 1]), f = R[(q - 1) % R.length], this._blur(m, q - 1, q, I, f)
                }, k.prototype._setViewport = function(C, w, R, A, J) {
                    var V = this.gv;
                    V.setViewport(V.getGL(), w, R, A, J), V.getRenderState().directState().scissor.box = [w, R, A, J]
                }, k.prototype._blur = function(N, Z, q, m, R) {
                    var v = this._pingPongRenderTarget;
                    this._halfBlur(N, v, Z, q, m, "latitudinal", R), this._halfBlur(v, N, q, q, m, "longitudinal", R)
                }, k.prototype.createShader = function(S) {
                    var o = this.gv;
                    return o.getPostProcessing().createShader(o.getGL(), S).program
                }, k.prototype._halfBlur = function(z, j, p, X, h, f, i) {
                    var r = this.gv,
                        T = this._blurMaterial;
                    if ("latitudinal" === f || "longitudinal" === f) {
                        T || (this._blurMaterial = T = this.createShader(N(v)));
                        var a = r.getGL();
                        j.bind(a);
                        var d = 3,
                            u = r.getRenderState();
                        u.useProgram(T);
                        var U, o, x, H = u.directUniforms(),
                            n = u.directAttribs(),
                            q = y[p] - 1,
                            I = isFinite(h) ? Math.PI / (2 * q) : 2 * Math.PI / (2 * v - 1),
                            g = h / I,
                            J = isFinite(h) ? 1 + Math.floor(d * g) : v,
                            C = [],
                            E = 0;
                        for (U = 0; v > U; ++U) o = U / g, x = Math.exp(-o * o / 2), C.push(x), 0 == U ? E += x : J > U && (E += 2 * x);
                        for (U = 0; U < C.length; U++) C[U] = C[U] / E;
                        H.envMap = z.texture, H.samples = J, H.weights = C, H.latitudinal = "latitudinal" === f, i && (H.poleAxis = i), H.dTheta = I, H.mipInt = m - p;
                        var G = y[X],
                            o = 3 * Math.max(0, K - 2 * G),
                            k = (0 === X ? 0 : 2 * K) + 2 * G * (X > m - V ? X - m + V : 0);
                        this._setViewport(j, o, k, 3 * G, 2 * G);
                        var s = Z[X];
                        n.position = Cs(a, null, s.vs, Y, 3), n.uv = Cs(a, null, s.uv, Y, 2), n.faceIndex = Cs(a, null, s.faceIs, Y, 1), il(a, 0, s.vs.length / 3), j.unbind(a)
                    }
                };
                var V = 4,
                    m = 8,
                    K = Math.pow(2, m),
                    $ = [.125, .215, .35, .446, .526, .582],
                    r = m - V + 1 + $.length,
                    v = 20,
                    u = (1 + Math.sqrt(5)) / 2,
                    U = 1 / u,
                    R = [new Cb(1, 1, 1), new Cb(-1, 1, 1), new Cb(1, 1, -1), new Cb(-1, 1, -1), new Cb(0, u, U), new Cb(0, u, -U), new Cb(U, 0, u), new Cb(-U, 0, u), new Cb(u, U, 0), new Cb(-u, U, 0)],
                    g = function() {
                        for (var O = [], x = [], P = [], Q = m, S = 0; r > S; S++) {
                            var j = Math.pow(2, Q);
                            x.push(j);
                            var Z = 1 / j;
                            S > m - V ? Z = $[S - m + V - 1] : 0 == S && (Z = 0), P.push(Z);
                            for (var k = 1 / (j - 1), t = -k / 2, f = 1 + k / 2, a = 6, B = [], R = [], H = [], c = 0; a > c; c++) {
                                var M = 2 * (c % 3) / 3 - 1,
                                    T = c > 2 ? 0 : -1;
                                B.push(M, T, 0, M + 2 / 3, T, 0, M + 2 / 3, T + 1, 0, M, T, 0, M + 2 / 3, T + 1, 0, M, T + 1, 0), R.push(t, t, f, t, f, f, t, t, f, f, t, f), H.push(c, c, c, c, c, c)
                            }
                            O.push({
                                vs: new Kh(B),
                                uv: new Kh(R),
                                faceIs: new Kh(H)
                            }), Q > V && Q--
                        }
                        return {
                            _lodPlanes: O,
                            _sizeLods: x,
                            _sigmas: P
                        }
                    }(),
                    Z = g._lodPlanes,
                    y = g._sizeLods,
                    e = g._sigmas,
                    w = z.EnvmapTextureSize
            }();
        var fb = ["left", "front", "right", "back", "top", "bottom"],
            fn = Hn._RenderList = function() {
                function l() {
                    Q.length = 0, o.length = 0, b = {}
                }

                function G(q) {
                    var T, w, a, t, B = q.gv,
                        W = q.data,
                        N = q.shapeModel;
                    if (N) {
                        var C, e, v, b = W.s("shape3d.transparent") || W.s("points.transparent");
                        for (ym(N) || (C = Kg(N.transparent, W, B), N = [N]), a = 0, t = N.length; t > a; a++) v = N[a], e = Kg(v.transparent, W, B), e === O && (e = C), e === O && (e = b), e ? w = !0 : T = !0
                    }
                    for (a = 0, t = fb.length; t > a; a++) {
                        var n = q[fb[a]];
                        n && (n.transparent ? w = !0 : T = !0)
                    }
                    B.isLabelVisible(W) && (q.labelInfo && (W.s(pd + ".transparent") ? w = !0 : T = !0), q.label2Info && (W.s(oc + ".transparent") ? w = !0 : T = !0)), B.isNoteVisible(W) && (q.noteInfo && (W.s(qf + ".transparent") ? w = !0 : T = !0), q.note2Info && (W.s(mk + ".transparent") ? w = !0 : T = !0)), q._38o && (w = T = !0), w || (T = !0), q._renderParams = {
                        opaque: T,
                        transparent: w
                    }
                }

                function W(i, M) {
                    M && G(i);
                    var J = i.data,
                        F = J._id;
                    if (!b[F]) {
                        b[F] = !0;
                        var C = i._renderParams;
                        C && C.visible !== !1 && (i = {
                            ui: i,
                            data: J,
                            z: 0,
                            id: F
                        }, C.opaque && Q.push(i), C.transparent && o.push(i))
                    }
                }

                function X(V, D) {
                    if (o.length > 1) {
                        for (var F, h, M = [0, 0, 0, 0], m = 0, X = o.length; X > m; m++) F = o[m].data, (h = F._position) ? (M[0] = h.x, M[1] = F._54O, M[2] = h.y, M[3] = 1, bc(M, D), o[m].z = M[2] / M[3]) : o[m].z = 0;
                        o.sort(V || N)
                    }
                }

                function v(Z) {
                    Z ? (Po(U, R, Z), Po(n, z, Z), Po(m, H, Z)) : (U = this.batchModelMap = {}, R = this.batchIndexMap = {}, n = this.polylineModelMap = {}, z = this.polylineIndexMap = {}, m = this.wireframeModelMap = {}, H = this.wireframeIndexMap = {}), this.markBatchInvalid()
                }

                function t(m) {
                    m ? Po(U, R, m) : (U = this.batchModelMap = {}, R = this.batchIndexMap = {}), this.markBatchInvalid()
                }

                function e(O) {
                    O ? Po(n, z, O) : (n = this.polylineModelMap = {}, z = this.polylineIndexMap = {}), this.markBatchInvalid()
                }

                function B(D) {
                    D ? Po(m, H, D) : (m = this.wireframeModelMap = {}, H = this.wireframeIndexMap = {}), this.markBatchInvalid()
                }

                function $() {
                    return this._batchInvalid
                }

                function T() {
                    this._batchInvalid = !0
                }

                function J() {
                    this._batchInvalid = null
                }
                var Q = [],
                    o = [],
                    U = {},
                    R = {},
                    n = {},
                    z = {},
                    m = {},
                    H = {},
                    b = {};
                return {
                    opaque: Q,
                    transparent: o,
                    init: l,
                    push: W,
                    batchModelMap: U,
                    batchIndexMap: R,
                    polylineModelMap: n,
                    polylineIndexMap: z,
                    wireframeModelMap: m,
                    wireframeIndexMap: H,
                    ivBatch: v,
                    ivModelBatch: t,
                    ivPolylineBatch: e,
                    ivWireframeBatch: B,
                    markBatchInvalid: T,
                    isBatchInvalid: $,
                    onUpdated: J,
                    sort: X
                }
            },
            qb = Hn._RenderLists = function() {
                function Y() {
                    for (var J in C) C[J].init()
                }

                function c() {
                    for (var K in C) C[K].onUpdated()
                }

                function m(c, p) {
                    c = c || "main";
                    var N = C[c];
                    return !N && p && (N = C[c] = new fn), N
                }

                function Q(l, X) {
                    var I = l.data.getRenderLayer(),
                        a = m(I, !0);
                    a.push(l, X)
                }

                function p(b) {
                    for (var R in C) b(C[R])
                }
                var C = {};
                return {
                    init: Y,
                    onUpdated: c,
                    get: m,
                    push: Q,
                    each: p,
                    lists: C
                }
            },
            cg = Hn.RenderTarget = function(P, H, C, y) {
                var v, L = this;
                null != H && H.canvas ? (v = H, H = C, C = y, y = arguments[4]) : v = P.getGL(), y = y || {}, y.cube === !!y.cube, y.samples = y.cube ? 0 : Math.min(P._glCapabilities.maxSamples, y.samples && y.samples > 1 && 2 === P._webGLVersion ? y.samples : 0), L.options = y, L.uuid = F.Math.generateUUID(), L.gv = P, L.init(P, v, y), L.format = y.format || hq.RGBA, L.generateMipmaps = !!y.generateMipmaps, y.samples && !P._glCapabilities._maxSamplesChecked ? L.setSize(v, H || 1, C || 1) : L.setSize(v, H, C)
            };
        G.assign(Hn.RenderTarget.prototype, {
            bind: function(Y, Z) {
                var g = this.options;
                if (g.autoSize) {
                    var J = this.gv,
                        S = J.getDevicePixelRatio(),
                        h = J.getWidth() * S,
                        n = J.getHeight() * S;
                    this.setSize(Y, h, n)
                }
                g.cube ? pm(Y, this.frame[Z]) : pm(Y, this.options.samples ? this._MSAAFbo : this.frame)
            },
            unbind: function(B) {
                Qk(B), this.options.samples && (B.bindFramebuffer(B.READ_FRAMEBUFFER, this._MSAAFbo), B.bindFramebuffer(B.DRAW_FRAMEBUFFER, this.frame), B.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, B.COLOR_BUFFER_BIT, B.NEAREST), B.bindFramebuffer(B.READ_FRAMEBUFFER, null), B.bindFramebuffer(B.DRAW_FRAMEBUFFER, null))
            },
            isCube: function() {
                return this.options.cube
            },
            init: function(g, L, V) {
                var A = this,
                    y = V.samples,
                    e = V.cube,
                    w = A.texture = L.createTexture(),
                    H = e ? hq.TEXTURE_CUBE_MAP : hq.TEXTURE_2D;
                L.activeTexture(L.TEXTURE0), L.bindTexture(H, w), L.texParameteri(H, L.TEXTURE_WRAP_S, V.wrapS || L.CLAMP_TO_EDGE), L.texParameteri(H, L.TEXTURE_WRAP_T, V.wrapT || L.CLAMP_TO_EDGE);
                var $ = y ? L.NEAREST : L.LINEAR;
                if (L.texParameteri(H, L.TEXTURE_MIN_FILTER, V.minFilter || $), L.texParameteri(H, L.TEXTURE_MAG_FILTER, V.magFilter || $), L.bindTexture(H, null), e) {
                    A.depth = [], A.frame = [];
                    for (var s = 0; 6 > s; s++) A.depth[s] = L.createRenderbuffer(), A.frame[s] = L.createFramebuffer()
                } else A.depth = L.createRenderbuffer(), A.frame = L.createFramebuffer();
                A.assureTexture()
            },
            assureTexture: function() {
                var r = this;
                r.gv._2Oi(r.uuid, r.texture, "default")
            },
            releaseTexture: function() {
                this.gv.deleteTexture(this.uuid)
            },
            setSize: function(e, t, p) {
                var m = this;
                if (t = Math.round(t), p = Math.round(p), t && p && (m.width !== t || m.height !== p)) {
                    m.width = t, m.height = p;
                    var P = e.RENDERBUFFER,
                        w = e.FRAMEBUFFER,
                        A = m.options.samples,
                        W = m.options.cube,
                        n = W ? hq.TEXTURE_CUBE_MAP : hq.TEXTURE_2D;
                    if (A) {
                        var E = m.gv._glCapabilities;
                        if (!E._maxSamplesChecked) {
                            for (e.bindRenderbuffer(P, m.depth), e.getError(); A > 1 && (e.renderbufferStorageMultisample(P, A, e.DEPTH_COMPONENT16, t, p), e.getError());) A = Math.floor(A >> 1);
                            1 >= A && (A = 0, e.texParameteri(n, e.TEXTURE_MIN_FILTER, m.options.minFilter || e.LINEAR), e.texParameteri(n, e.TEXTURE_MAG_FILTER, m.options.magFilter || e.LINEAR), e.renderbufferStorage(P, e.DEPTH_COMPONENT16, t, p)), E._maxSamplesChecked = !0, E.maxSamples = m.options.samples = A, e.bindRenderbuffer(P, Y)
                        }
                    }
                    if (A && (m._MSAAFbo || (m._MSAAFbo = e.createFramebuffer(), m._MSAARbO = e.createRenderbuffer()), e.bindRenderbuffer(P, m._MSAARbO), e.renderbufferStorageMultisample(e.RENDERBUFFER, A, e.RGBA8, t, p), e.bindFramebuffer(w, m._MSAAFbo), e.framebufferRenderbuffer(w, e.COLOR_ATTACHMENT0, P, m._MSAARbO), e.framebufferRenderbuffer(w, e.DEPTH_ATTACHMENT, P, m.depth), e.bindFramebuffer(w, null), e.bindRenderbuffer(P, null)), e.activeTexture(e.TEXTURE0), e.bindTexture(n, m.texture), W)
                        for (var K = e.TEXTURE_CUBE_MAP_POSITIVE_X, y = 0; 6 > y; y++) m.setupFrameBufferTextureAndDepth(e, m.frame[y], m.depth[y], K + y);
                    else m.setupFrameBufferTextureAndDepth(e, m.frame, m.depth, e.TEXTURE_2D);
                    if (m.generateMipmaps && (2 === gv._webGLVersion || _q.isPOT(t) && _q.isPOT(p))) {
                        e.generateMipmap(n);
                        var q = m.options.minFilter || (A ? e.NEAREST : e.LINEAR);
                        e.texParameteri(n, e.TEXTURE_MIN_FILTER, q === e.NEAREST ? e.NEAREST_MIPMAP_NEAREST : e.LINEAR_MIPMAP_LINEAR)
                    }
                    e.bindTexture(n, null)
                }
            },
            setupFrameBufferTextureAndDepth: function(L, i, u, Z) {
                var W = this,
                    n = W.format;
                L.texImage2D(Z, 0, n, this.width, this.height, 0, n, L.UNSIGNED_BYTE, null), L.bindFramebuffer(L.FRAMEBUFFER, i), L.framebufferTexture2D(L.FRAMEBUFFER, L.COLOR_ATTACHMENT0, Z, W.texture, 0), this.setupRenderBufferStorage(L, u), L.bindFramebuffer(L.FRAMEBUFFER, null)
            },
            setupRenderBufferStorage: function(v, m) {
                var S = this,
                    d = v.RENDERBUFFER;
                v.bindRenderbuffer(d, m);
                var A = S.options.samples;
                A ? v.renderbufferStorageMultisample(d, A, v.DEPTH_COMPONENT16, S.width, S.height) : (v.renderbufferStorage(d, v.DEPTH_COMPONENT16, S.width, S.height), v.framebufferRenderbuffer(v.FRAMEBUFFER, v.DEPTH_ATTACHMENT, d, m)), v.bindRenderbuffer(v.RENDERBUFFER, null)
            },
            toCanvas: function() {
                var I = this,
                    E = I.gv.getGL();
                pm(E, I.frame);
                var i = I.width,
                    K = I.height,
                    q = new Uint8Array(4 * i * K);
                E.readPixels(0, 0, i, K, I.format, E.UNSIGNED_BYTE, q), Qk(E);
                var h = W.createElement("canvas");
                h.width = i, h.height = K;
                var O = h.getContext("2d"),
                    l = O.createImageData(i, K);
                return l.data.set(q), O.putImageData(l, 0, 0), h
            }
        });
        var Ds = Hn.Interactor = function(H) {
            this.gv = this.g3d = H
        };
        Ac("Interactor", G, {
            ms_listener: 1,
            getView: function() {
                return this.gv.getView()
            },
            setUp: function() {
                this.addListeners()
            },
            tearDown: function() {
                this.removeListeners()
            },
            fi: function(O) {
                this.gv.fi(O)
            },
            startDragging: function($) {
                yq(this, $)
            }
        });
        var Es = Hn.DefaultInteractor = function(P) {
            ip(Es, this, [P])
        };
        Ac("DefaultInteractor", Ds, {
            getState: function() {
                return this._62O
            },
            setState: function(J) {
                this._62O = J
            },
            getDataInfoAt: function(K, U) {
                var g = this.gv,
                    c = g.getDataInfoAt(K);
                if (!g.isBlockSelectable() || !c || !c.data) return c;
                if (!U && g.isSelected(c.data)) return c;
                for (var G = c.data;
                    (G = G.getParent()) && G instanceof F.Block && g.isSelectable(G);) {
                    var X = g.isSelected(G);
                    if (X && U) break;
                    if (c = {
                            data: G,
                            part: c.part
                        }, X && !U) break
                }
                return c
            },
            handle_contextmenu: function(z) {
                Fq(z)
            },
            handle_mousewheel: function(z) {
                this.gv.handleScroll(z, z.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(M) {
                2 === M.axis && this.gv.handleScroll(M, -M.detail)
            },
            handle_keydown: function(s) {
                this.gv.handleKeyDown(s)
            },
            handle_mousedown: function(p) {
                this.handle_touchstart(p)
            },
            handle_touchstart: function(K) {
                Fq(K);
                var k = this,
                    u = k.gv,
                    Z = Bj(K),
                    c = k.getDataInfoAt(K),
                    e = c ? c.data : Y,
                    f = c ? c.part : Y,
                    m = u.sm(),
                    C = Xn(K),
                    H = Ke(K);
                u.setFocus(K) && (k._62O = Y, k._57I = Y, k.pendingClickThrough = Y, k.__lastClientPoint__ = Lo(K), e ? Gp(K) ? m.co(e) ? m.rs(e) : m.as(e) : m.co(e) ? e instanceof zc && e.isClickThroughEnabled() && Bj(K) && (k.pendingClickThrough = Lo(K)) : m.ss(e) : Z && (Gp(K) ? u.isRectSelectable() && (k._62O = pp) : k._57I = Lo(K)), k._31Q && (_j(k._31Q), delete k._31Q, delete k._32Q), k._62O || (u.isFirstPersonMode() && (ck(K) || km(K) || H > 2 ? k._62O = "pan" : u.isMouseRoamable() || gc(K) ? (k._62O = "roaming", k.foward = C && Bj(K), k._32Q = ji(), k._31Q = jf(k.tick, k)) : Z || (k._62O = "roaming")), k._62O || (Z && C && Ys[f] ? (k._62O = f, k.p3 = e.p3()) : Z && C && Mk(e) && u.isSelected(e) ? u.isMovable(e) ? (k._62O = "move", k.p3 = e.p3(), k.movedata = e) : u._39Q(e) && (k._62O = "none") : gc(K) && (H > 2 ? k._62O = "pan" : 2 === H && (k.dist = pn(K), k._62O = "pinch")))), k.point = u.lp(K), yq(k, K), ms(K) ? u.handleDoubleClick(K, e, f) : u.handleClick(K, e, f))
            },
            tick: function() {
                var f = this,
                    I = f.gv,
                    d = I._moveStep;
                f.point && I.isWalkable() && (f._32Q && (d *= (ji() - f._32Q) / 50), I.walk(f.foward ? d : -d), f._32Q = ji(), f._31Q = jf(f.tick, f))
            },
            handle_mouseup: function(u) {
                this.handle_touchend(u)
            },
            handle_touchend: function(G) {
                var o = this._57I;
                if (o && (cm(o, Lo(G)) <= 1 && this.gv.sm().cs(), this._57I = Y), o = this.pendingClickThrough) {
                    if (cm(o, Lo(G)) <= 1) {
                        var B = this.getDataInfoAt(G);
                        B && B.data instanceof zc && B.data.isClickThroughEnabled() && (B = this.getDataInfoAt(G, !0), B && (G.clickThrough = !0, this.gv.sm().ss(B.data)))
                    }
                    this.pendingClickThrough = null
                }
            },
            handleWindowMouseMove: function(e) {
                this.handleWindowTouchMove(e)
            },
            handleWindowTouchMove: function(C) {
                var t, K, s = this,
                    B = s.gv,
                    S = s._62O,
                    m = s.point,
                    Q = B.dm(),
                    o = B.lp(C),
                    l = o.x - m.x,
                    x = o.y - m.y,
                    y = B.getWidth(),
                    b = B.getHeight();
                if (y && b) {
                    var O = Lo(C),
                        Y = fr(B, O, s.__lastClientPoint__),
                        w = cm({
                            x: 0,
                            y: 0
                        }, Y),
                        P = -U * l / y,
                        W = -U * x / b;
                    if ("roaming" === S) s.rotate(C, P / 2, W / 2);
                    else if (S === Ss || S === Ts || S === Us) B._86O || Q.beginTransaction(), B.fi({
                        kind: B._86O ? "betweenEditRotation" : "beginEditRotation",
                        event: C
                    }), B._86O = 1, B.sm().each(function(D) {
                        if (Mk(D) && B.isRotationEditable(D)) {
                            var Y = r(P) > r(W) ? P : W;
                            S === Ss ? D.setRotationX(D.getRotationX() + Y) : S === Ts ? D.setRotationY(D.getRotationY() + Y) : S === Us && D.setRotationZ(D.getRotationZ() + Y)
                        }
                    });
                    else if ("move" === S || Ys[S]) {
                        if (S === Vs || S === Ws || S === Xs) B._87O || Q.beginTransaction(), B.fi({
                            kind: B._87O ? "betweenEditScale" : "beginEditScale",
                            event: C
                        }), B._87O = 1;
                        else {
                            if (!B._moving) {
                                if (w < z.touchMoveThreshold) return;
                                Q.beginTransaction()
                            }
                            B.fi({
                                kind: B._moving ? "betweenMove" : "beginMove",
                                event: C
                            }), B._moving = 1
                        }
                        var g, v = s.p3,
                            R = B.getPositionInfo(v),
                            j = sn(B);
                        g = S === Ps ? "x" : S === Qs ? "y" : S === Rs ? "z" : S === Vs ? "sx" : S === Ws ? "sy" : S === Xs ? "sz" : B.getMoveMode(C, s.movedata), l = l / y * R.width, x = -1 * x / b * R.height;
                        var Z, f, n = [j[0] * l, j[4] * l, j[8] * l],
                            L = [j[1] * x, j[5] * x, j[9] * x],
                            G = n[0] + L[0],
                            F = n[1] + L[1],
                            J = n[2] + L[2],
                            N = [v[0] + G, v[1] + F, v[2] + J],
                            T = _g(B.getEye(), N, !0);
                        if ("xyz" === g ? (Z = N, B.moveSelection(G, F, J)) : "xz" === g ? (Z = No(B, v, [0, 1, 0], N), Z && B.moveSelection(Z[0] - v[0], 0, Z[2] - v[2])) : "xy" === g ? (Z = No(B, v, [0, 0, 1], N), Z && B.moveSelection(Z[0] - v[0], Z[1] - v[1], 0)) : "yz" === g ? (Z = No(B, v, [1, 0, 0], N), Z && B.moveSelection(0, Z[1] - v[1], Z[2] - v[2])) : "x" === g || "sx" === g ? (T[0] = 0, Z = No(B, v, T, N), Z && (f = Z[0] - v[0], "x" === g ? B.moveSelection(f, 0, 0) : B.sm().each(function(O) {
                                Mk(O) && B.isSizeEditable(O) && (t = O.getScaleX() + f / 100, K = t / O.getScaleX(), O.setScaleX(t), ck(C) && (O.setScaleY(O.getScaleY() * K), O.setScaleTall(O.getScaleTall() * K)))
                            }))) : "y" === g || "sy" === g ? (T[1] = 0, Z = No(B, v, T, N), Z && (f = Z[1] - v[1], "y" === g ? B.moveSelection(0, f, 0) : B.sm().each(function(P) {
                                Mk(P) && B.isSizeEditable(P) && (t = P.getScaleTall() + f / 100, K = t / P.getScaleTall(), P.setScaleTall(t), ck(C) && (P.setScaleY(P.getScaleY() * K), P.setScaleX(P.getScaleX() * K)))
                            }))) : ("z" === g || "sz" === g) && (T[2] = 0, Z = No(B, v, T, N), Z && (f = Z[2] - v[2], "z" === g ? B.moveSelection(0, 0, f) : B.sm().each(function(Z) {
                                Mk(Z) && B.isSizeEditable(Z) && (t = Z.getScaleY() + f / 100, K = t / Z.getScaleY(), Z.setScaleY(t), ck(C) && (Z.setScaleX(Z.getScaleX() * K), Z.setScaleTall(Z.getScaleTall() * K)))
                            }))), !Z) return;
                        s.p3 = Z
                    } else if (S === pp) {
                        var h = s.div;
                        h || (h = s.div = Qr(), xb(s.getView(), h), h.op = m, h.style.background = B.getRectSelectBackground()), B.fi({
                            kind: B._rectSelecting ? "betweenRectSelect" : "beginRectSelect",
                            event: C
                        }), B._rectSelecting = 1, h.rect = Ah(h.op, o), Bh(h, h.rect)
                    } else if ("pinch" === S && 2 === Ke(C)) {
                        B.fi({
                            kind: B._pinching ? "betweenPinch" : "beginPinch",
                            event: C
                        }), B._pinching = 1;
                        var f = pn(C);
                        B._lastZoomLP || (B._lastZoomLP = Rn(C)), B.handlePinch(f, s.dist), s.dist = f
                    } else "pan" === S || ck(C) || km(C) ? s.pan(C, l, x) : "none" === S || B.isFirstPersonMode() || s.rotate(C, P, W);
                    s.point = o
                }
            },
            pan: function(n, U, X) {
                var M = this.gv;
                if (M.isPannable()) {
                    var c = M.getWidth(),
                        e = M.getHeight();
                    if (!c || !e) return;
                    var V = M.getCenterInfo(),
                        k = U / c * V.width,
                        G = -1 * X / e * V.height;
                    M.fi({
                        kind: M._panning ? "betweenPan" : "beginPan",
                        event: n
                    }), M._panning = 1, M.pan(-k, -G)
                }
            },
            rotate: function(c, R, x) {
                var D = this.gv;
                D.isRotatable() && (D.fi({
                    kind: D._rotating ? "betweenRotate" : "beginRotate",
                    event: c
                }), D._rotating = 1, D.rotate(R, x))
            },
            handleWindowMouseUp: function($) {
                this.handleWindowTouchEnd($)
            },
            handleWindowTouchEnd: function(b) {
                var T = this,
                    p = T.gv,
                    q = p.dm(),
                    M = T.div;
                if (M) {
                    var e = p.getDatasInRect(M.rect);
                    if (!e.isEmpty()) {
                        var g = p.sm(),
                            N = g.toSelection(),
                            W = ck(b),
                            Q = b.altKey;
                        e.each(function(u) {
                            g.co(u) ? (!W || W && Q) && N.remove(u) : (!Q || W && Q) && N.add(u)
                        }), g.ss(N)
                    }
                    Fi(M)
                }
                p._moving && (delete p._moving, p.fi({
                    kind: "endMove",
                    event: b
                }), p.onMoveEnded(), q.endTransaction()), p._panning && (delete p._panning, p.fi({
                    kind: "endPan",
                    event: b
                }), p.onPanEnded()), p._rotating && (delete p._rotating, p.fi({
                    kind: "endRotate",
                    event: b
                }), p.onRotateEnded()), p._86O && (delete p._86O, p.fi({
                    kind: "endEditRotation",
                    event: b
                }), q.endTransaction()), p._87O && (delete p._87O, p.fi({
                    kind: "endEditScale",
                    event: b
                }), q.endTransaction()), p._pinching && (delete p._pinching, p.fi({
                    kind: "endPinch",
                    event: b
                }), p.onPinchEnded()), p._rectSelecting && (delete p._rectSelecting, p.fi({
                    kind: "endRectSelect",
                    event: b
                }), p.onRectSelectEnded()), p._walking && (delete p._walking, p.fi({
                    kind: "endWalk",
                    event: b
                }), p.onWalkEnded()), p._lastZoomLP = p._lastZoomHit = null, T.dist = T.point = T._62O = T.p3 = T.movedata = T.div = T._57I = T.pendingClickThrough = T._32Q = T._31Q = T.foward = Y, T.__lastClientPoint__ = Y
            }
        });
        var Fs = Hn.MapInteractor = function(e) {
            ip(Fs, this, [e]), this._keepHorizon = !0, this._threshold = 2, this._touchScaleThreshold = .05, this._touchRotateThreshold = .03, this._touchScaleCheckAccuracy = .01, this._panButton = "right", this._minPhi = 0, this._maxPhi = 5 * Math.PI / 12
        };
        Ac("MapInteractor", Ds, {
            setUp: function() {
                Fs.superClass.setUp.call(this);
                var H = this.gv;
                this.__oldMinPhi__ = H.getRotateMinPhi(), this.__oldMaxPhi__ = H.getRotateMaxPhi(), H.setRotateMinPhi(this._minPhi), H.setRotateMaxPhi(this._maxPhi)
            },
            tearDown: function() {
                Fs.superClass.tearDown.call(this);
                var y = this.gv;
                y.setRotateMinPhi(this.__oldMinPhi__), y.setRotateMaxPhi(this.__oldMaxPhi__), delete this.__oldMinPhi__, delete this.__oldMaxPhi__
            },
            handle_contextmenu: function(e) {
                Fq(e)
            },
            handle_mousewheel: function(u) {
                this.gv.handleScroll(u, u.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(s) {
                2 === s.axis && this.gv.handleScroll(s, -s.detail)
            },
            handle_keydown: function(Z) {
                this.gv.handleKeyDown(Z)
            },
            handle_mousedown: function(n) {
                this.handle_touchstart(n)
            },
            handle_touchstart: function(L) {
                Fq(L);
                var B = this,
                    i = B.gv;
                if (i.setFocus(L)) {
                    var $ = i.getDataInfoAt(L),
                        t = $ ? $.data : Y,
                        x = $ ? $.part : Y;
                    B.__lastClientPoint__ = Lo(L);
                    var C = B.editing = {
                        point: i.lp(L),
                        data: t,
                        part: x
                    };
                    gc(L) ? C.touch = !0 : (C.touch = !1, C.clickLeft = Bj(L), C.pan = km(L) ? !0 : "left" === this.panButton === C.clickLeft), t && i._39Q(t) && (C.preventDefault = !0), yq(B, L), ms(L) ? i.handleDoubleClick(L, t, x) : i.handleClick(L, t, x)
                }
            },
            handle_mouseup: function(v) {
                this.handle_touchend(v)
            },
            handle_touchend: function() {},
            handleWindowMouseMove: function(_) {
                this.handleWindowTouchMove(_)
            },
            handleWindowTouchMove: function(D) {
                var N = this,
                    L = N.gv,
                    Z = N.editing;
                if (Z) {
                    var J = L.lp(D),
                        Q = Z.point,
                        n = J.x - Q.x,
                        K = J.y - Q.y;
                    if (!Z.moved) {
                        if (Math.abs(n) < N.threshold && Math.abs(K) < N.threshold && !(D.touches && D.touches.length > 1)) return;
                        Z.moved = !0
                    }
                    if (!Z.preventDefault) {
                        Z.point = J;
                        var t = Z.part;
                        if (Ys[t]) {
                            var $ = Z.data,
                                R = L.dm(),
                                F = L.getWidth(),
                                T = L.getHeight(),
                                g = -U * n / F,
                                O = -U * K / T;
                            if (t === Ss || t === Ts || t === Us) {
                                L._86O || R.beginTransaction(), L.fi({
                                    kind: L._86O ? "betweenEditRotation" : "beginEditRotation",
                                    event: D
                                }), L._86O = 1;
                                var j = r(g) > r(O) ? g : O;
                                L.sm().each(function(k) {
                                    Mk(k) && L.isRotationEditable(k) && (t === Ss ? k.setRotationX(k.getRotationX() + j) : t === Ts ? k.setRotationY(k.getRotationY() + j) : t === Us && k.setRotationZ(k.getRotationZ() + j))
                                })
                            } else {
                                var l = $.p3(),
                                    i = L.getPositionInfo(l);
                                n = n / F * i.width, K = -1 * K / T * i.height;
                                var G, c = sn(L),
                                    m = [c[0] * n, c[4] * n, c[8] * n],
                                    _ = [c[1] * K, c[5] * K, c[9] * K],
                                    p = m[0] + _[0],
                                    E = m[1] + _[1],
                                    o = m[2] + _[2],
                                    H = [l[0] + p, l[1] + E, l[2] + o],
                                    B = _g(L.getEye(), H, !0);
                                if (t === Vs || t === Ws || t === Xs) {
                                    if (L._87O || R.beginTransaction(), L.fi({
                                            kind: L._87O ? "betweenEditScale" : "beginEditScale",
                                            event: D
                                        }), L._87O = 1, G = No(L, l, B, H)) {
                                        var q, M = 0,
                                            w = ["X", "Y", "Tall"];
                                        t === Vs ? q = "X" : t === Ws ? (q = "Tall", M = 1) : t === Xs && (q = "Y", M = 2), w.splice(w.indexOf(q), 1);
                                        var y = ck(D),
                                            h = (G[M] - l[M]) / 100;
                                        L.sm().each(function(J) {
                                            if (Mk(J) && L.isSizeEditable(J)) {
                                                var K = J["getScale" + q](),
                                                    P = K + h;
                                                if (J["setScale" + q](P), y) {
                                                    var t = P / K;
                                                    w.forEach(function(d) {
                                                        J["setScale" + d](J["getScale" + d]() * t)
                                                    })
                                                }
                                            }
                                        })
                                    }
                                } else if (t === Ps || t === Qs || t === Rs) {
                                    if (!L._moving) {
                                        var u = Lo(D),
                                            v = fr(L, u, N.__lastClientPoint__),
                                            d = cm({
                                                x: 0,
                                                y: 0
                                            }, v);
                                        if (d < z.touchMoveThreshold) return;
                                        R.beginTransaction()
                                    }
                                    L.fi({
                                        kind: L._moving ? "betweenMove" : "beginMove",
                                        event: D
                                    }), L._moving = 1;
                                    var M = 0;
                                    if (t === Ps ? M = 0 : t === Qs ? M = 1 : t === Rs && (M = 2), B[M] = 0, G = No(L, l, B, H)) {
                                        var h = G[M] - l[M],
                                            W = [0, 0, 0];
                                        W[M] = h, L.moveSelection.apply(L, W)
                                    }
                                }
                            }
                        } else if (Z.touch) {
                            var S = D.touches.length;
                            if (2 !== S) N.pan(D, n, K);
                            else {
                                if (1 >= S) return;
                                var A = D.touches,
                                    P = {
                                        x: A[0].clientX,
                                        y: A[0].clientY
                                    },
                                    V = {
                                        x: A[1].clientX,
                                        y: A[1].clientY
                                    },
                                    k = {
                                        x: V.x - P.x,
                                        y: V.y - P.y
                                    },
                                    C = Z.lastCenter,
                                    x = Math.atan2(k.y, k.x),
                                    s = Z.theta,
                                    I = 0;
                                s == Y ? s = Z.theta = x : (I = x - s, Z.thetaStarted || Math.abs(I) > N.touchRotateThreshold ? (Z.thetaStarted = !0, Z.theta = x) : I = 0);
                                var e = f * (P.y + V.y) / 2 / L.getHeight(),
                                    b = Z.phi,
                                    X = 0;
                                b == Y ? b = Z.phi = e : (X = e - b, Z.phiStarted || Math.abs(X) > N.touchRotateThreshold ? (Z.phiStarted = !0, Z.phi = e) : X = 0);
                                var a, Jf = Math.sqrt(k.x * k.x + k.y * k.y),
                                    zs = Z.vlen;
                                if (zs) {
                                    var Jp = P.x - C.x,
                                        Pr = P.y - C.y,
                                        Vo = V.x - C.x,
                                        nl = V.y - C.y,
                                        km = Math.sqrt(Jp * Jp + Pr * Pr),
                                        Po = Math.sqrt(Vo * Vo + nl * nl),
                                        Bb = zs / 2,
                                        Je = N._sign2(km - Bb),
                                        be = N._sign2(Po - Bb);
                                    0 > Je * be || 0 === Je && 0 === be ? (a = 1, Z.vlen = Jf) : (a || (a = Jf / zs), Z.scaleStarted || Math.abs(a - 1) > N.touchScaleThreshold ? (Z.vlen = Jf, Z.scaleStarted = !0) : a = 1)
                                } else zs = Z.vlen = Jf, a = 1;
                                1 !== a && L.setZoom(a), (X || I) && N.rotate(D, I, -X), Z.lastCenter = {
                                    x: (V.x + P.x) / 2,
                                    y: (V.y + P.y) / 2
                                }
                            }
                        } else if (Z.pan) N.pan(D, n, K);
                        else {
                            var F = L.getWidth(),
                                T = L.getHeight();
                            if (!F || !T) return;
                            var g = -U * n / F,
                                O = -U * K / T;
                            N.rotate(D, g, O)
                        }
                    }
                }
            },
            _sign2: function(e) {
                return Math.abs(e) < this._touchScaleCheckAccuracy ? 0 : e > 0 ? 1 : -1
            },
            handleWindowMouseUp: function(W) {
                this.handleWindowTouchEnd(W)
            },
            getDataInfoAt: function(p, X) {
                var Z = this.gv,
                    m = Z.getDataInfoAt(p);
                if (!Z.isBlockSelectable() || !m || !m.data) return m;
                if (!X && Z.isSelected(m.data)) return m;
                for (var A = m.data, o = m.part;
                    (A = A.getParent()) && A instanceof F.Block && Z.isSelectable(A);) {
                    var s = Z.isSelected(A);
                    if (s && X) break;
                    if (m = {
                            data: A,
                            part: o
                        }, s && !X) break
                }
                return m
            },
            handleWindowTouchEnd: function(r) {
                var b = this,
                    Z = b.editing;
                if (b.editing = null, Z) {
                    var e = b.gv;
                    if (Z.moved || !Z.clickLeft && !Z.touch) e._panning = null, e._rotating = null, e.fi({
                        kind: Z.pan ? "endPan" : "endRotate",
                        event: r
                    });
                    else {
                        var i = b.getDataInfoAt(r),
                            y = i && i.data;
                        y instanceof zc && y.isClickThroughEnabled() && (i = b.getDataInfoAt(r, !0), i && (y = i.data)), y ? e.sm().setSelection([y]) : e.sm().clearSelection()
                    }
                    var R = e.dm();
                    e._moving && (delete e._moving, e.fi({
                        kind: "endMove",
                        event: r
                    }), e.onMoveEnded(), R.endTransaction()), e._86O && (delete e._86O, e.fi({
                        kind: "endEditRotation",
                        event: r
                    }), R.endTransaction()), e._87O && (delete e._87O, e.fi({
                        kind: "endEditScale",
                        event: r
                    }), R.endTransaction())
                }
            },
            pan: function(m, E, Z) {
                var n = this,
                    G = n.gv;
                if (G.isPannable()) {
                    var A = G.getWidth(),
                        S = G.getHeight();
                    if (A && S) {
                        var b = G.getCenterInfo(),
                            u = -E / A * b.width,
                            s = 1 * Z / S * b.height;
                        G.fi({
                            kind: G._panning ? "betweenPan" : "beginPan",
                            event: m
                        }), G._panning = 1;
                        var M = n.keepHorizon,
                            U = n.editing.touch;
                        if ((U && m.touches && m.touches.length > 1 || !U && ck(m)) && (M = !M), !M) return G.pan(u, s);
                        if (u || s) {
                            var c = sn(G),
                                X = [c[0] * u, c[4] * u, c[8] * u],
                                P = [c[1], 0, c[9]],
                                Q = Math.sqrt(P[0] * P[0] + P[2] * P[2]);
                            Q && (P = [P[0] / Q * s, 0, P[2] / Q * s]);
                            var z = X[0] + P[0],
                                $ = X[1] + P[1],
                                k = X[2] + P[2],
                                w = G._center,
                                B = G._eye;
                            w[0] += z, w[1] += $, w[2] += k, B[0] += z, B[1] += $, B[2] += k, G.fp(hp, Y, B), G.fp(Vc, Y, w)
                        }
                    }
                }
            },
            rotate: function(m, f, n) {
                var p = this,
                    V = p.gv;
                if (V.isRotatable()) {
                    var b = V._center,
                        K = V._eye,
                        r = _g(K, b),
                        e = di(x(r[0] * r[0] + r[2] * r[2]), r[1]),
                        F = Xj(V, e + n);
                    n = F - e, V.fi({
                        kind: V._rotating ? "betweenRotate" : "beginRotate",
                        event: m
                    }), V._rotating = 1, V.rotate(f, n)
                }
            }
        }), G.defineProperties(Fs.prototype, {
            panButton: {
                get: function() {
                    return this._panButton
                },
                set: function(L) {
                    this._panButton = L
                }
            },
            minPhi: {
                get: function() {
                    return this._minPhi
                },
                set: function(d) {
                    this.gv.setRotateMinPhi(this._minPhi = d)
                }
            },
            maxPhi: {
                get: function() {
                    return this._maxPhi
                },
                set: function(L) {
                    this.gv.setRotateMaxPhi(this._maxPhi = L)
                }
            },
            keepHorizon: {
                get: function() {
                    return this._keepHorizon
                },
                set: function(i) {
                    this._keepHorizon = i
                }
            },
            threshold: {
                get: function() {
                    return this._threshold
                },
                set: function(x) {
                    this._threshold = x
                }
            },
            touchScaleThreshold: {
                get: function() {
                    return this._touchScaleThreshold
                },
                set: function(b) {
                    this._touchScaleThreshold = b
                }
            },
            touchRotateThreshold: {
                get: function() {
                    return this._touchRotateThreshold
                },
                set: function(l) {
                    this._touchRotateThreshold = l
                }
            }
        });
        var Gs, Hs = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==",
            Is = 32,
            Js = Hn.GlobeInteractor = function(f, v) {
                ip(Js, this, [f]);
                var e, q = v.radius || 6378137,
                    H = this,
                    Q = null;
                Gs || (Gs = Qr(), Gs.style.border = "", Gs.style.backgroundImage = "url(" + Hs + ")");
                var Z = new Ck,
                    L = new Cb,
                    D = new Cb,
                    a = new Cb,
                    M = new Bs,
                    O = "number" == typeof q ? {
                        x: q,
                        y: q,
                        z: q
                    } : q,
                    k = {
                        center: new Cb(0, 0, 0),
                        radius: O
                    },
                    C = function(r) {
                        f._81O = null;
                        var B = f.getHitPosition(r, f.getCenter(), L.copy(f.getEye()).sub(D.copy(f.getCenter())).toArray());
                        return M.origin.copy(f.getEye()), M.direction.copy(B).sub(M.origin).normalize(), M.intersectEllipsoid(k)
                    },
                    s = function(G, h) {
                        f._81O = null, M.origin.copy(f.getEye());
                        for (var v, j, B = f.getCenter(), t = L.copy(f.getEye()).sub(D.copy(f.getCenter())).toArray(), P = 1, Q = 16, m = 0, a = 1, z = {
                                x: 0,
                                y: 0
                            }; Q--;) {
                            if (z.x = h.x + (G.x - h.x) * P, z.y = h.y + (G.y - h.y) * P, v = f.getHitPosition(z, B, t), M.direction.copy(v).sub(M.origin).normalize(), j = M.intersectEllipsoid(k), j && 1 === P) return {
                                hit: j
                            };
                            j ? m = P : a = P, P = (m + a) / 2
                        }
                        return {
                            hit: j,
                            out: 1 > P
                        }
                    },
                    h = function(S, h) {
                        if (Q) {
                            var $ = Date.now();
                            Q.deltaTime = Q.lastTime ? $ - Q.lastTime : 1e3, Q.lastTime = $, Q.lastAxis = S, Q.lastAngle = h
                        }
                        h && (Z.setFromAxisAngle(S, h), f.setEye(L.copy(f.getEye()).applyQuaternion(Z).toArray()), f.setCenter(L.copy(f.getCenter()).applyQuaternion(Z).toArray()), f.setUp(L.copy(f.getUp()).applyQuaternion(Z).toArray()))
                    };
                H._showCrossIcon = function(e) {
                    xb(H.getView(), Gs), Bh(Gs, {
                        x: e.clientX - Is / 2,
                        y: e.clientY - Is / 2,
                        width: Is,
                        height: Is
                    })
                }, H._hideCrossIcon = function() {
                    Fi(Gs)
                }, H._scrollImpl = function(V, w) {
                    Q = {
                        point: f.lp(V),
                        screen: Lo(V),
                        hit: C(V),
                        type: "right"
                    }, Q.hitNormalize = Q.hit ? Q.hit.clone().normalize() : new Cb;
                    var o = {
                        clientX: Q.screen.x,
                        clientY: Q.screen.y + 10 * w
                    };
                    H._handleMoveImpl(o), H._endMoveImpl(o)
                }, H._startMoveImpl = function(i) {
                    e && (e.stop(!0), e = null), Q = {
                        point: f.lp(i),
                        screen: Lo(i),
                        hit: C(i)
                    }, Q.hitNormalize = Q.hit ? Q.hit.clone().normalize() : new Cb, gc(i) ? 1 === i.touches.length ? Q.hit && (Q.type = "left") : 2 === i.touches.length && (Q.type = "touch2") : (Bj(i) ? Q.hit && (Q.type = "left") : Gq(i) ? Q.type = "right" : km(i) && Q.hit && (Q.type = "middle"), !Q.hit || "right" !== Q.type && "middle" !== Q.type || H._showCrossIcon(i)), Q.type && yq(H, i)
                }, H._handleMoveImpl = function(K) {
                    if (Q) switch (Q.type) {
                        case "left":
                            return H._handleLeft(K);
                        case "right":
                            return H._handleRight(K);
                        case "middle":
                            return H._handleMiddle(K);
                        case "touch2":
                            return H._handleTouch2(K)
                    }
                }, H._endMoveImpl = function() {
                    if (Q) {
                        if (this._hideCrossIcon(), "left" === Q.type || "middle" === Q.type) {
                            var U = 1e3 * (Q.lastAngle / (Q.deltaTime || 30)),
                                f = Q.lastAxis,
                                y = Q.lastTime,
                                Z = function() {
                                    var W = Date.now(),
                                        A = (W - y) / 1e3;
                                    return y = W, U *= Math.pow(Math.abs(H.decelerationRate), 3 * A), Math.abs(U) < .01 ? (U = 0, e && e.stop(), void 0) : (h(f, U * A), void 0)
                                };
                            e = tj({
                                action: function() {
                                    Z(arguments)
                                },
                                duration: 5e3
                            })
                        }
                        Q = null
                    }
                }, H._handleLeft = function(r) {
                    if (!Q.finished) {
                        var c = Lo(r),
                            R = s(c, Q.lastScreen || Q.screen);
                        if (Q.lastScreen = c, !R.hit) return Q.finished = !0, H._endMoveImpl(r), void 0;
                        var T = R.hit;
                        T.normalize();
                        var U = Q.hitNormalize,
                            v = Math.acos(T.dot(U)),
                            I = T.cross(U).normalize();
                        h(I, v), R.out && (Q.finished = !0, H._endMoveImpl(r))
                    }
                }, H._handleRight = function(T) {
                    var X = Q.lastScreen || Q.screen,
                        S = X.y;
                    X = Q.lastScreen = Lo(T);
                    var n = X.y,
                        F = n - S;
                    if (F) {
                        var $ = Math.min(.5, F * H.scaleSpeed);
                        L.copy(f.getEye());
                        var U = Q.hit;
                        U || (U = L.clone().divide(O).normalize().multiply(O)), D.copy(L).lerp(U, $), f.setEye(D.toArray()), L.copy(f.getUp()), D.normalize();
                        var j = L.clone().cross(D).normalize();
                        if (a.copy(f.getCenter()), a.sub(j.multiplyScalar(a.dot(j))), f.setCenter(a.toArray()), Q.hit) {
                            var u = C(Q.screen),
                                P = Q.hitNormalize;
                            if (u) {
                                u.normalize();
                                var w = Math.acos(u.dot(P)),
                                    g = u.cross(P).normalize();
                                w && h(g, w)
                            }
                        }
                    }
                };
                var A = function(o) {
                    return Math.abs(o) < .01 ? 0 : o > 0 ? 1 : -1
                };
                H._handleTouch2 = function(_) {
                    var W = _.touches.length;
                    if (2 === W) {
                        var g = _.touches,
                            r = {
                                x: g[0].clientX,
                                y: g[0].clientY
                            },
                            U = {
                                x: g[1].clientX,
                                y: g[1].clientY
                            },
                            l = {
                                x: U.x - r.x,
                                y: U.y - r.y
                            },
                            y = Q.lastCenter,
                            B = Math.atan2(l.y, l.x),
                            s = Q.theta,
                            I = 0;
                        s == Y ? s = Q.theta = B : (I = B - s, Q.thetaStarted || Math.abs(I) > .03 ? (Q.thetaStarted = !0, Q.theta = B) : I = 0);
                        var d, k = Math.sqrt(l.x * l.x + l.y * l.y),
                            X = Q.vlen;
                        if (X) {
                            var T = r.x - y.x,
                                P = r.y - y.y,
                                p = U.x - y.x,
                                z = U.y - y.y,
                                V = Math.sqrt(T * T + P * P),
                                b = Math.sqrt(p * p + z * z),
                                F = X / 2,
                                O = A(V - F),
                                H = A(b - F);
                            0 > O * H || 0 === O && 0 === H ? (d = 1, Q.vlen = k) : (d || (d = k / X), Q.scaleStarted || Math.abs(d - 1) > .05 ? (Q.vlen = k, Q.scaleStarted = !0) : d = 1)
                        } else X = Q.vlen = k, d = 1;
                        var l = D.copy(f.getEye()).clone();
                        1 !== d && f.setEye(l.setLength((l.length() - q) / d + q).toArray()), I && h(l.normalize(), I), Q.lastCenter = {
                            x: (U.x + r.x) / 2,
                            y: (U.y + r.y) / 2
                        }
                    }
                }, H._handleMiddle = function(F) {
                    var N = Lo(F),
                        x = Q.screen;
                    Q.screen = N;
                    var z = (N.y - x.y) / 180 * Math.PI * H.rollSpeed;
                    D.copy(f.getCenter()).sub(L.copy(f.getEye())).normalize(), L.copy(f.getUp()).cross(D).normalize(), D.copy(f.getEye()).sub(Q.hit).applyAxisAngle(L, z).add(Q.hit);
                    var Y = D.clone();
                    D.copy(f.getCenter()).sub(Q.hit).applyAxisAngle(L, z).add(Q.hit);
                    var d = D.clone(),
                        V = D.copy(f.getUp()).applyAxisAngle(L, z).clone(),
                        q = !1;
                    z > 0 && (a.copy(V), D.copy(d).sub(Y).normalize(), L.copy(Y).multiplyScalar(-1).normalize(), L.dot(a) - D.dot(a) > 0 && (q = !0)), q || a.copy(Q.hit).sub(Y).dot(Q.hitNormalize) >= 0 && (q = !0), q || (f.setEye(Y.toArray()), f.setCenter(d.toArray()), f.setUp(V.toArray()));
                    var s = -(N.x - x.x) / 180 * Math.PI * H.rotateSpeed;
                    h(Q.hitNormalize, s)
                }
            };
        Ac("GlobeInteractor", Ds, {
            handle_contextmenu: function(H) {
                Fq(H)
            },
            handle_mousewheel: function(I) {
                this._scrollImpl(I, I.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(l) {
                2 === l.axis && this._scrollImpl(l, -l.detail)
            },
            handle_keydown: function(F) {
                this.gv.handleKeyDown(F)
            },
            handle_mousedown: function(o) {
                this.handle_touchstart(o)
            },
            handle_touchstart: function(s) {
                Fq(s);
                var S = this.gv;
                if (S.setFocus(s)) {
                    var L = S.getDataInfoAt(s),
                        r = L ? L.data : Y;
                    r && S.isInteractive(r) || this._startMoveImpl(s);
                    var O = L ? L.part : Y;
                    ms(s) ? S.handleDoubleClick(s, r, O) : S.handleClick(s, r, O)
                }
            },
            handle_mouseup: function(r) {
                this.handle_touchend(r)
            },
            handle_touchend: function() {},
            handleWindowMouseMove: function(j) {
                this.handleWindowTouchMove(j)
            },
            handleWindowTouchMove: function(t) {
                this._handleMoveImpl(t)
            },
            handleWindowMouseUp: function(R) {
                this.handleWindowTouchEnd(R)
            },
            handleWindowTouchEnd: function(h) {
                this._endMoveImpl(h)
            }
        }), G.defineProperties(Js.prototype, {
            rotateSpeed: {
                get: function() {
                    return this._rotateSpeed || .3
                },
                set: function(S) {
                    this._rotateSpeed = S
                }
            },
            rollSpeed: {
                get: function() {
                    return this._rollSpeed || .1
                },
                set: function(t) {
                    this._rollSpeed = t
                }
            },
            scaleSpeed: {
                get: function() {
                    return this._scaleSpeed || .002
                },
                set: function(V) {
                    this._scaleSpeed = V
                }
            },
            decelerationRate: {
                get: function() {
                    return this._decelerationRate || .04
                },
                set: function(x) {
                    this._decelerationRate = x
                }
            }
        });
        var Ks = function(S) {
                var q = 2147483648 | S;
                return [(255 & q >> 16) / 255, (255 & q >> 8) / 255, (255 & q) / 255, (255 & q >> 24) / 255]
            },
            Ls = function(d) {
                this.gv = d, this.gv.pickColorMap = {
                    _pickIdUsed: 2e3
                }
            };
        Wj(Ls, G, {
            _iv: !0,
            iv: function() {
                this._iv = !0
            },
            get: function(U, X, s) {
                this.validate();
                var r = this,
                    j = r.gv.getGL();
                if (!j) return Y;
                var W, I, l = r._resolution,
                    N = Math.round(U.x * l),
                    n = Math.ceil(U.width * l),
                    K = Math.ceil(U.height * l),
                    t = r.height - Math.round(U.y * l) - K,
                    u = e(n / 2),
                    v = new Uint8Array(4 * n * K),
                    F = 0,
                    k = v.length,
                    B = X ? Y : new no,
                    L = X ? Y : {};
                if (pm(j, r.frame), j.readPixels(N, t, n, K, j.RGBA, j.UNSIGNED_BYTE, v), Qk(j), X) {
                    for (; u >= F; F++)
                        for (var y = u - F, T = u + F, m = y; T >= m; m++)
                            for (var J = y; T >= J; J++)
                                if ((m === y || m === T || J === y || J === T) && (W = r.info(v, 4 * (m * n + J)))) {
                                    if (s && s(W) === !1) continue;
                                    return W
                                }
                } else
                    for (; k > F; F += 4)
                        if (W = r.info(v, F)) {
                            if (s && s(W) === !1) continue;
                            I = W.data, L[I._id] || (B.add(I), L[I._id] = I)
                        } return B
            },
            info: function(f, Q) {
                return this.gv.pickColorMap[(f[Q] << 16) + (f[Q + 1] << 8) + f[Q + 2] + ((127 & f[Q + 3]) << 24)]
            },
            getResolution: function() {
                return this._resolution
            },
            onContextLost: function() {
                this.texture = null, this.width = this.height = -1
            },
            validate: function() {
                var s = this,
                    T = s.gv,
                    y = T.getGL();
                if (y) {
                    var S = s._resolution = T._pickerResolution * T.getDevicePixelRatio(),
                        _ = Math.round(S * T.getWidth()),
                        D = Math.round(S * T.getHeight()),
                        $ = y.RGBA,
                        k = y.TEXTURE_2D,
                        w = y.RENDERBUFFER,
                        n = y.FRAMEBUFFER;
                    if (s.texture || (s.texture = wn(y), s.render = y.createRenderbuffer(), s.frame = y.createFramebuffer()), (s.width !== _ || s.height !== D) && (y.activeTexture(y.TEXTURE0), wq(y, s.texture), y.texImage2D(k, 0, $, _, D, 0, $, y.UNSIGNED_BYTE, Y), ap(y, y.TEXTURE_MIN_FILTER, y.LINEAR), y.bindRenderbuffer(w, s.render), y.renderbufferStorage(w, y.DEPTH_COMPONENT16, _, D), pm(y, s.frame), y.framebufferTexture2D(n, y.COLOR_ATTACHMENT0, k, s.texture, 0), y.framebufferRenderbuffer(n, y.DEPTH_ATTACHMENT, w, s.render), wq(y, Y), y.bindRenderbuffer(w, Y), Qk(y), s.width = _, s.height = D), s._iv) {
                        s._iv = !1;
                        var z = !1;
                        T._40Q.each(function(d) {
                            !z && d.isBatchInvalid() && (z = !0)
                        }), z && T.updateScene(), pm(y, s.frame), y.clear(y.COLOR_BUFFER_BIT), T.overlappingBox.clear(), T.setViewport(y, 0, 0, _, D), T.renderPickScene(), Qk(y)
                    }
                }
            }
        });
        var Ms = function(T) {
            this.gv = T
        };
        Wj(Ms, G, {
            gap: 0,
            size: 0,
            _42: function(E, s) {
                var a = this,
                    d = a.gv,
                    i = d._gridGap,
                    p = d._gridSize;
                if (d._gridVisible) {
                    if (a.gap !== i || a.size !== p) {
                        for (var L = [], S = d._gridSize / 2, N = i * S, y = 0; 2 * S + 1 > y; y++) {
                            var F = 6 * y,
                                v = 6 * (2 * S + 1) + F;
                            L[F] = -N, L[F + 1] = 0, L[F + 2] = -N + y * i, L[F + 3] = N, L[F + 4] = 0, L[F + 5] = -N + y * i, L[v] = -N + y * i, L[v + 1] = 0, L[v + 2] = -N, L[v + 3] = -N + y * i, L[v + 4] = 0, L[v + 5] = N
                        }
                        a.vs = new Kh(L), a.gap = i, a.size = p
                    }
                    Yb(d), wi(E, s), Gh(E), Uo(E, s, 1, d._gridColor, d._buffer.vs, a.vs), il(E, 0, a.vs.length / 3, E.LINES), mn(E), Uc(E, s)
                } else a.vs = a.gap = a.size = Y
            }
        });
        var Ns = function(M) {
            this.gv = M
        };
        Wj(Ns, G, {
            _42: function(W, Z) {
                var C = this.gv,
                    N = C._buffer.vs,
                    G = C._axisXColor,
                    I = C._axisYColor,
                    Q = C._axisZColor,
                    $ = C._originAxisVisible,
                    s = C._centerAxisVisible;
                if ($ || s) {
                    var z = Bp ? W.TRIANGLES : W.TRIANGLE_FAN,
                        X = W.LINES;
                    if (Yb(C), wi(W, Z), Gh(W), $) {
                        var _ = C.getCenterInfo(),
                            H = h(_.width, _.height) / 5,
                            p = .8 * H,
                            E = .05 * H;
                        Uo(W, Z, 1.5, G, N, new Kh([0, 0, 0, H, 0, 0, p, E, 0, p, 0, E, p, -E, 0, p, 0, -E, p, E, 0, 0, 0, 0, 0, H, 0, E, p, 0, 0, p, E, -E, p, 0, 0, p, -E, E, p, 0, 0, 0, 0, 0, 0, H, E, 0, p, 0, E, p, -E, 0, p, 0, -E, p, E, 0, p])), il(W, 0, 2, X), il(W, 1, 6, z), Uo(W, Z, Y, I), il(W, 7, 2, X), il(W, 8, 6, z), Uo(W, Z, Y, Q), il(W, 14, 2, X), il(W, 15, 6, z)
                    }
                    if (s) {
                        var c = C._center,
                            t = c[0],
                            y = c[1],
                            L = c[2],
                            _ = C.getPositionInfo(c);
                        H = h(_.width, _.height) / 20, Uo(W, Z, 1.5, G, N, new Kh([t, y, L, t + H, y, L, t, y, L, t, y + H, L, t, y, L, t, y, L + H])), il(W, 0, 2, X), Uo(W, Z, Y, I), il(W, 2, 2, X), Uo(W, Z, Y, Q), il(W, 4, 2, X)
                    }
                    mn(W), Uc(W, Z)
                }
            }
        });
        var Os = function($) {
                this.gv = $
            },
            Ps = "edit_tx",
            Qs = "edit_ty",
            Rs = "edit_tz",
            Ss = "edit_rx",
            Ts = "edit_ry",
            Us = "edit_rz",
            Vs = "edit_sx",
            Ws = "edit_sy",
            Xs = "edit_sz",
            Ys = {};
        Ys[Ps] = 101, Ys[Qs] = 102, Ys[Rs] = 103, Ys[Ss] = 104, Ys[Ts] = 105, Ys[Us] = 106, Ys[Vs] = 107, Ys[Ws] = 108, Ys[Xs] = 109, Wj(Os, G, {
            _42: function(v, U, k) {
                var n = this,
                    Y = n.gv,
                    o = Y.sm().ld();
                if (o && Y.isEditable(o) && !Y.isEditHelperDisabled() && Mk(o) && (!Y.isFirstPersonMode() || !Y.isMouseRoamable() && !$r)) {
                    Yb(Y);
                    var N, F = Y.isMovable(o),
                        H = Y.isRotationEditable(o),
                        M = Y.isSizeEditable(o),
                        b = Y._axisXColor,
                        j = Y._axisYColor,
                        E = Y._axisZColor,
                        J = Y._editSizeColor,
                        O = o.p3();
                    if (Y.isOrtho()) {
                        var m = Y.getCenterInfo();
                        N = h(m.width, m.height) / 8
                    } else N = cm(Y.getEye(), O) / 10;
                    var I, L, u = N / (k ? 5 : 10),
                        A = .7 * N,
                        Z = .4 * A,
                        W = O[0],
                        a = O[1],
                        G = O[2];
                    I = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0], F && n._17O(v, U, o, k, Ps, b, I, [W, a - u, G, W + A, a - u, G, W + A, a, G, W + A, a, G, W, a, G, W, a - u, G, W, a - u, G + u, W + A, a - u, G + u, W + A, a - u, G, W + A, a - u, G, W, a - u, G, W, a - u, G + u]), L = W + A, M && n._17O(v, U, o, k, Vs, J, I, [L, a - u, G, L + Z, a - u, G, L + Z, a, G, L + Z, a, G, L, a, G, L, a - u, G, L, a - u, G + u, L + Z, a - u, G + u, L + Z, a - u, G, L + Z, a - u, G, L, a - u, G, L, a - u, G + u]), L += Z, H && n._17O(v, U, o, k, Ss, b, I, [L, a - u, G, L + Z, a - u, G, L + Z, a, G, L + Z, a, G, L, a, G, L, a - u, G, L, a - u, G + u, L + Z, a - u, G + u, L + Z, a - u, G, L + Z, a - u, G, L, a - u, G, L, a - u, G + u]), I = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0], F && n._17O(v, U, o, k, Qs, j, I, [W, a, G, W, a + A, G, W - u, a + A, G, W - u, a + A, G, W - u, a, G, W, a, G, W, a, G, W, a, G - u, W, a + A, G - u, W, a + A, G - u, W, a + A, G, W, a, G]), L = a + A, M && n._17O(v, U, o, k, Ws, J, I, [W, L, G, W, L + Z, G, W - u, L + Z, G, W - u, L + Z, G, W - u, L, G, W, L, G, W, L, G, W, L, G - u, W, L + Z, G - u, W, L + Z, G - u, W, L + Z, G, W, L, G]), L += Z, H && n._17O(v, U, o, k, Ts, j, I, [W, L, G, W, L + Z, G, W - u, L + Z, G, W - u, L + Z, G, W - u, L, G, W, L, G, W, L, G, W, L, G - u, W, L + Z, G - u, W, L + Z, G - u, W, L + Z, G, W, L, G]), I = [1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0], F && n._17O(v, U, o, k, Rs, E, I, [W, a, G, W, a, G + A, W, a - u, G + A, W, a - u, G + A, W, a - u, G, W, a, G, W, a - u, G, W - u, a - u, G, W - u, a - u, G + A, W - u, a - u, G + A, W, a - u, G + A, W, a - u, G]), L = G + A, M && n._17O(v, U, o, k, Xs, J, I, [W, a, L, W, a, L + Z, W, a - u, L + Z, W, a - u, L + Z, W, a - u, L, W, a, L, W, a - u, L, W - u, a - u, L, W - u, a - u, L + Z, W - u, a - u, L + Z, W, a - u, L + Z, W, a - u, L]), L += Z, H && n._17O(v, U, o, k, Us, E, I, [W, a, L, W, a, L + Z, W, a - u, L + Z, W, a - u, L + Z, W, a - u, L, W, a, L, W, a - u, L, W - u, a - u, L, W - u, a - u, L + Z, W - u, a - u, L + Z, W, a - u, L + Z, W, a - u, L])
                }
            },
            _17O: function(k, _, l, y, c, F, C, s) {
                var O = this.gv,
                    v = O._buffer,
                    x = $f.for(k),
                    p = x.directUniforms(),
                    f = x.directAttribs();
                if (O._picking) {
                    y = O.pickColorMap;
                    var w = Ys[c];
                    y[w] = {
                        data: l,
                        part: c
                    }, p.uFixPickReverseColor = Ks(w)
                }
                Yf(k, _, Y, !0, Y, !0, Y, !1), p.uDiffuse = F, f.aPosition = rq(k, v.vs, new Kh(s), Y), f.aNormal = rq(k, v.ns, new Kh(C), Y), Gh(k), il(k, 0, 12), mn(k), Zm(k, _)
            }
        });
        var Zs = F.Raycaster = function(v) {
            this.gv = v, this.maxTriangleTest = 1 / 0, this.backfaceCulling = !0
        };
        mb("Raycaster", G, {
            intersect: function(U) {
                var T = this,
                    x = T.gv,
                    D = x.getDataAt(U);
                return D ? T.intersectObject(U, D) : null
            },
            intersectObjects: function(a, V, v) {
                var G, e, b, u, Y = this,
                    Z = 1 / 0,
                    S = a.origin || (new Cb).fromArray(Y.gv.getEye()),
                    o = Y.maxTriangleTest,
                    P = [];
                V.forEach(function(Q) {
                    v && v(Q) === !1 || Q.s("intersect") !== !1 && P.push(Q)
                });
                var y = S.distanceToSquared2([0, 0, 0]);
                return P.sort(function(X, H) {
                    return (X.p3 ? S.distanceToSquared2(X.p3()) : y) - (H.p3 ? S.distanceToSquared2(H.p3()) : y)
                }), Y.countTriangles = 0, P.forEach(function(x) {
                    Y.countTriangles > o || (G = Y.intersectObject(a, x), G && (e = S.distanceToSquared(G.world), Z > e && (b = x, u = G, Z = e)))
                }), Y.countTriangles = 0, {
                    data: b,
                    intersect: u
                }
            },
            intersectObjectAndRecordTriangle: function(l, K) {
                this._4GQ = !0;
                var E = this.intersectObject(l, K);
                return this._4GQ = !1, E
            },
            intersectLastTriangle: function(E, F) {
                var N = this.getRay(E);
                N.applyMatrix4(F.inverseMatrix);
                var G = N.intersectPlane(F.plane);
                if (!G) return null;
                var M = mr.uvIntersection(G, F.p1, F.p2, F.p3, F.uv1.clone(), F.uv2.clone(), F.uv3.clone());
                return {
                    world: G.clone().applyMatrix4(F.matrixWorld),
                    local: G.clone(),
                    uv: M
                }
            },
            getRay: function(p) {
                if (p instanceof Bs) return p;
                var Z = this,
                    G = Z.gv,
                    K = G.unproject(p),
                    z = new Cb,
                    w = G.getEye(),
                    B = new Cb;
                if (G.isOrtho()) {
                    var t = new Cb(w);
                    B.copy(G.getCenter()).sub(t).normalize();
                    var b = z.copy(K).sub(t).dot(B);
                    z.copy(B).setLength(-b).add(t.copy(K))
                } else z.copy(w), B.copy(K).sub(z).normalize();
                return new F.Math.Ray(z, B)
            },
            intersectObject: function(C, V) {
                return this._intersectObjectImpl(this.getRay(C), V)
            },
            _intersectObjectImpl: function() {
                function r() {
                    var a = new Cb;
                    return a.subVectors(T, K), l.subVectors(P, K), a.cross(l).normalize(), a
                }
                var b = new gb,
                    H = new gb,
                    V = new Bs,
                    j = new Cb,
                    f = new Cb,
                    n = new Cb,
                    B = new Cb,
                    R = new Cb,
                    P = new Cb,
                    K = new Cb,
                    T = new Cb,
                    i = new ls,
                    S = new ls,
                    h = new ls,
                    l = new Cb,
                    C = {
                        vs: tm,
                        is: Lp,
                        uv: nj
                    },
                    y = ao.slice(0);
                return y.push("csg"),
                    function(v, m) {
                        var A = this.gv.getData3dUI(m),
                            G = m.mat || A.mat;
                        G ? b.fromArray(G) : b.identity(), H.getInverse(b), V.copy(v).applyMatrix4(H);
                        var p, x, X, N = "body",
                            U = A.shapeModel;
                        if (!U && (m instanceof F.Polyline || m instanceof F.Edge) && A.lineShapeModel && (U = A.lineShapeModel), U || (U = Ml(A)), U || (F.CSGNode && m instanceof F.CSGNode || F.CSGShape && m instanceof F.CSGShape ? (X = !0, U = [A.left, A.front, A.right, A.back, A.top, A.bottom, A.csg]) : m instanceof F.Node && !(m instanceof F.Shape) ? (p = !0, U = C) : (x = !0, U = [A.left, A.front, A.right, A.back, A.top, A.bottom])), !U) return console.log("Can not find shape model."), null;
                        ym(U) || (U = [U]);
                        var t, D, W, e, Y, l, Q, I, O, w, q, L, E, c, k, s, Z = 1 / 0,
                            u = ["", "top_", "bottom_"],
                            $ = !1,
                            J = this.backfaceCulling,
                            M = [];
                        for (ss(U, A, M), t = 0, D = M.length; D > t; t++)
                            if (E = M[t])
                                for (W = 0, e = u.length; e > W; W++)
                                    if (c = u[W], Q = E[c + "vs"], I = E[c + "is"], O = E[c + "uv"] || E[c + "tuv"], Q) {
                                        if (k = E[c + "boundingBox"]) {
                                            var q = V.intersectBox(k);
                                            if (!q) continue;
                                            if (V.origin.distanceTo(q) > Z) continue;
                                            s = !1
                                        } else E[c + "boundingBox"] = k = new F.Math.Box3, s = !0;
                                        for (Y = 0, l = I ? I.length : Q.length / 3; l > Y; Y += 3) this.countTriangles++, I ? (f.fromArray(Q, 3 * I[Y]), n.fromArray(Q, 3 * I[Y + 1]), B.fromArray(Q, 3 * I[Y + 2])) : (f.fromArray(Q, 3 * Y), n.fromArray(Q, 3 * (Y + 1)), B.fromArray(Q, 3 * (Y + 2))), s && (k.expandByPoint(f), k.expandByPoint(n), k.expandByPoint(B)), w = V.intersectTriangle(f, n, B, J, j), w && (L = V.origin.distanceTo(w), Z > L && (Z = L, R.copy(w), P.copy(f), K.copy(n), T.copy(B), "" !== c ? N = c.slice(0, -1) : p ? N = ao[Math.floor(Y / 6)] : x ? N = ao[t] : X && (N = y[t]), O && ($ = !0, I ? (i.fromArray(O, 2 * I[Y]), S.fromArray(O, 2 * I[Y + 1]), h.fromArray(O, 2 * I[Y + 2])) : (i.fromArray(O, 2 * Y), S.fromArray(O, 2 * (Y + 1)), h.fromArray(O, 2 * (Y + 2))))))
                                    }
                        if (!isFinite(Z)) return null;
                        var o, _, g = R.clone().applyMatrix4(b),
                            a = this._4GQ;
                        $ && (a && (_ = {
                            inverseMatrix: H.clone(),
                            matrixWorld: b.clone(),
                            p1: P.clone(),
                            p2: K.clone(),
                            p3: T.clone(),
                            uv1: i.clone(),
                            uv2: S.clone(),
                            uv3: h.clone(),
                            plane: (new F.Math.Plane).setFromCoplanarPoints(P, K, T)
                        }), o = mr.uvIntersection(R, P, K, T, i, S, h));
                        var z = r(P, K, T),
                            d = r(P.applyMatrix4(b), K.applyMatrix4(b), T.applyMatrix4(b)),
                            Ld = V.direction.dot(z);
                        Ld > 0 && (z.multiplyScalar(-1), d.multiplyScalar(-1));
                        var Eb = {
                            world: g,
                            local: R.clone(),
                            worldNormal: d,
                            normal: z,
                            uv: o,
                            part: N
                        };
                        return _ && (Eb.triangleInfo = _), Eb
                    }
            }()
        });
        var $s = function(z, v) {
            this.gv = z, this.s = function(U, x, f) {
                return x == Y && (x = f), x == Y ? v.getStyle(U) : Kg(x, v, z)
            }, this.data = v
        };
        Wj($s, G, {
            I3d: !0,
            ms_icons: 1,
            _iv: !0,
            _cacheBoundingBox: O,
            iv: function() {
                this._iv = !0
            },
            update: function(N, x, J) {
                var S = this,
                    h = S.data;
                if (N || (N = S.gv, x = N.getGL(), J = N._40Q), !S.needValidate(x) || !N.isVisible(h)) return J.push(this, !1), void 0;
                var Q, w, L, D, q, n = h._id,
                    z = h._47Q ? null : S.s("batch"),
                    B = h.getRenderLayer(),
                    k = J.get(B, !0),
                    P = k.batchIndexMap,
                    V = k.batchModelMap,
                    c = N.getBrightness(h),
                    s = c != Y && 1 !== c;
                Q = oo(P, V, h, z, N);
                var b = S.validate(Q, z ? N.getBatchInfo(z) || Ce : Y);
                if (Q && (w = P[n], L = w.size = Q.vs.length / 3 - w.begin, q = Q.rs))
                    for (c = s ? c : 1, D = 0; L > D; D++) q.push(c);
                var R = N.getWireframeGeometry(h);
                if (R) Dr(N, h, R);
                else if (Mk(h)) {
                    var g = N.getWireframe(h);
                    g && Dr(N, h, g)
                }
                S.labelInfo = S.label2Info = S.noteInfo = S.note2Info = S._38o = Y, S._24O(pd, "getLabel"), S._24O(oc, "getLabel2"), S._26O(qf, "getNote"), S._26O(mk, "getNote2"), S._15O(), S.interactiveInfo = N.isInteractive(h) ? {} : Y, k.push(this, !0), b !== !1 && (S._iv = !1)
            },
            clearWireframeGeometryCache: function() {
                var p = this;
                gm(p), p.data.iv()
            },
            _46Q: function(n) {
                var s = this,
                    l = s.data,
                    j = s.gv;
                if (j.isVisible(l)) {
                    var A = l._id,
                        f = j._40Q.get(l._renderLayer, !0),
                        F = f.batchIndexMap[A],
                        G = f.polylineIndexMap[A],
                        Y = f.wireframeIndexMap[A];
                    if (F || G || Y) {
                        var O = li(n, j.pickColorMap, j.isSelectable(l), s, Nm, !0);
                        O && (Tc(O, F, f.batchModelMap), Tc(O, G, f.polylineModelMap), Tc(O, Y, f.wireframeModelMap))
                    }
                }
            },
            _42: function(x, E, V) {
                function c(y, z, S) {
                    var H = z.getBrightness(S),
                        p = S.s("alphaTest"),
                        C = S.s("envmap"),
                        $ = $f.for(y),
                        t = $.directUniforms();
                    H != Y && 1 !== H && (t.uBrightness = H), t.uAlphaTest = p, t.uUseEnvMap = C ? !0 : !1, t.uReflectivity = C || .01, t.roughness = S.s("roughness"), z._setEnvmapByProbeId(t, S.s("envmap.probe")), t.shadowReceive = !D && S.s("shadow.receive"), t.shadowCull = !D && !!S.s("shadow.cull"), xe(z, t, S.s("3d.clipbox") ? Cm : S.s("3d.clipbox.mask"));
                    var x = l.s("3d.clip.direction");
                    if (x) {
                        var s = l.s("3d.clip.percentage");
                        0 === s && (h = !1);
                        var R = l._formatClipUniforms(x, s, S);
                        t.uClipPercent = R[1], t.uClipDirection = R[0]
                    } else t.uClipDirection = 0;
                    y._blooming && !S.s("bloom") && (t.blackout = !0), D || (z._flowObjects.length && z.flowMap.resetDataFlowEnabld(S, t), Ro(z, t, S.s("light.mask"), S.s("headlight.ambientIntensity")))
                }
                var l = this,
                    s = l.data,
                    J = l.gv;
                if (J.isVisible(s)) {
                    var N, D = J._picking;
                    if (D) N = J.pickColorMap;
                    else {
                        if (J.isTransparentMask(s) || J.isReflecting(x) && s.s("3d.reflectable") === !1) return;
                        N = O
                    }
                    if ($s.getTitle === O) {
                        $s.getTitle = 0;
                        for (var w in z)
                            if (w.length === oc.length + 1 && w[oc.length] === Xi[4].toUpperCase() && w[oc.length - 1] === Xi[oc.length + 1].toUpperCase()) {
                                $s.getTitle = go;
                                break
                            }
                    }
                    if (!$s.getTitle || zg[oc.length + 2]) {
                        if ($s.getHead === O) {
                            $s.getHead = 0;
                            for (var w in B) {
                                var Q = "box-sizing";
                                6 === w.length && w[0] === Xi[4] && w[3] === Q[0] && w[4] === Q[1] && w[5] === Q[2] && ($s.getHead = oi)
                            }
                        }
                        if (!$s.getHead || zg[oc.length]) {
                            if ($s.getTitle2 === O) {
                                $s.getTitle2 = 0;
                                for (var w in B) {
                                    var f = "uv";
                                    6 === w.length && w[0] === mo[1].toUpperCase() && w[1] === f[0] && ($s.getTitle2 = Qd)
                                }
                            }
                            if (!$s.getTitle2 || zg[bk.length]) {
                                var I, b, r = s._id,
                                    F = J._40Q.get(s._renderLayer, !0),
                                    e = F.batchIndexMap,
                                    d = F.batchModelMap,
                                    X = J.isSelectable(s),
                                    H = !1,
                                    h = !0,
                                    n = e[r];
                                if (D && (b = li(x, N, X, l, Nm, n), b && !J._45Q && (Tc(b, n, d), Tc(b, F.polylineIndexMap[r], F.polylineModelMap), Tc(b, F.wireframeIndexMap[r], F.wireframeModelMap))), n || (H || (H = !0, c(x, J, s)), h && l._80o(x, E, V)), J.isLabelVisible(s) && ((I = l.labelInfo) && (D && li(x, N, X, l, pd), H || (H = !0, c(x, J, s)), l._28O(I, pd, V)), (I = l.label2Info) && (D && li(x, N, X, l, oc), H || (H = !0, c(x, J, s)), l._28O(I, oc, V))), J.isNoteVisible(s) && ((I = l.noteInfo) && (D && li(x, N, X, l, qf), H || (H = !0, c(x, J, s)), l._29O(I, qf, V)), (I = l.note2Info) && (D && li(x, N, X, l, mk), H || (H = !0, c(x, J, s)), l._29O(I, mk, V))), (I = l._38o) && (H || (H = !0, c(x, J, s)), l._99O(x, E, I, N, X, V)), H) {
                                    var G = $f.for(x).directUniforms();
                                    G.uBrightness = 1, G.uClipDirection = 0, x._blooming && (G.blackout = !1)
                                }
                            }
                        }
                    }
                }
            },
            _formatClipUniforms: function(c, m, b) {
                switch (c) {
                    case "left":
                        c = 2;
                        break;
                    case "top":
                        c = 3;
                        break;
                    case "bottom":
                        c = 4;
                        break;
                    case "front":
                        c = 5;
                        break;
                    case "back":
                        c = 6;
                        break;
                    case "right":
                    default:
                        c = 1
                }
                if (0 === c % 2 && (m = 1 - m), b instanceof F.Shape) {
                    var X = b.s3(),
                        T = b.p3(),
                        V = b.getAnchor3d();
                    m = 3 > c ? (m - V.x) * X[0] + T[0] : 5 > c ? (m - V.y) * X[1] + T[1] : (m - V.z) * X[2] + T[2]
                } else m -= .5;
                return [c, m]
            },
            prepare: function() {
                var p = this,
                    R = p.data;
                if (!(R instanceof zc)) {
                    var r, h, w, E, Q, c = p.gv,
                        J = c.getGL(),
                        j = R._id,
                        n = p.s("batch"),
                        a = c._batchIndexMap,
                        m = c._batchModelMap,
                        l = c.getBrightness(R),
                        X = l != Y && 1 !== l;
                    if (p.needValidate(J)) {
                        if (r = oo(a, m, R, n, c), p.validate(r, n ? c.getBatchInfo(n) || Ce : Y), r && (h = a[j], w = h.size = r.vs.length / 3 - h.begin, Q = r.rs))
                            for (l = X ? l : 1, E = 0; w > E; E++) Q.push(l);
                        if (Mk(R)) {
                            var Z = c.getWireframeGeometry(R);
                            if (Z) Dr(c, R, Z);
                            else {
                                var y = c.getWireframe(R);
                                y && Dr(c, R, y)
                            }
                        }
                        p.labelInfo = p.label2Info = p.noteInfo = p.note2Info = p._38o = Y, p._24O(pd, "getLabel"), p._24O(oc, "getLabel2"), p._26O(qf, "getNote"), p._26O(mk, "getNote2"), p._15O(), p.interactiveInfo = c.isInteractive(R) ? {} : Y, p._iv = !1
                    }
                }
            },
            dispatchBoundingBoxChanged: function() {
                this._cacheBoundingBox = O
            },
            getBoundingBox: function() {
                var W, M, K, j, w, u;
                return function() {
                    if (this._cacheBoundingBox) return this._cacheBoundingBox;
                    W || (W = {
                        vs: tm,
                        is: Lp,
                        uv: nj
                    }, M = new Cb, K = new Cb, j = new Cb, w = new Cb, u = new Cb);
                    var Y = this,
                        f = Y.data,
                        t = Y.shapeModel;
                    if (t || f instanceof F.Shape || (t = Ml(Y)), !t && f instanceof F.Shape && (Y.prepare(), t = Y.shapeModel), t || (f instanceof F.Node && !(f instanceof F.Shape) ? t = W : (Y.left || Y.front || Y.right || Y.back || Y.top || Y.bottom) && (t = [Y.left, Y.front, Y.right, Y.back, Y.top, Y.bottom])), !t) return O;
                    ym(t) || (t = [t]);
                    var x, n, k, s, z, a, p, e, J, I, C, B, o = ["", "top_", "bottom_"],
                        Q = new F.Math.Box3,
                        T = !1;
                    if (Y._needRecoverPosition) {
                        w.set.apply(w, f.p3());
                        var D = f.s3();
                        u.set(1 / (D[0] || 1), 1 / (D[1] || 1), 1 / (D[2] || 1))
                    } else w.set(0, 0, 0), u.set(1, 1, 1);
                    for (x = 0, n = t.length; n > x; x++)
                        if (J = t[x])
                            for (k = 0, s = o.length; s > k; k++)
                                if (I = o[k], p = J[I + "vs"], e = J[I + "is"], p) {
                                    if (B = I + "boundingBox", C = J[B], !C)
                                        for (J[B] = C = new F.Math.Box3, z = 0, a = e ? e.length : p.length / 3; a > z; z += 3) e ? (M.fromArray(p, 3 * e[z]).sub(w).multiply(u), K.fromArray(p, 3 * e[z + 1]).sub(w).multiply(u), j.fromArray(p, 3 * e[z + 2]).sub(w).multiply(u)) : (M.fromArray(p, 3 * z).sub(w).multiply(u), K.fromArray(p, 3 * (z + 1)).sub(w).multiply(u), j.fromArray(p, 3 * (z + 2)).sub(w).multiply(u)), !M.isNaN() && C.expandByPoint(M), !K.isNaN() && C.expandByPoint(K), !j.isNaN() && C.expandByPoint(j);
                                    Q.expandByBox(C), T = !0
                                }
                    return T ? (this._cacheBoundingBox = Q, G.freeze(Q), G.freeze(Q.min), G.freeze(Q.max), Vi(Y.gv, f), Q) : O
                }
            }(),
            needValidate: function() {
                return this._iv
            },
            validate: function() {},
            _16O: function() {
                return gp
            },
            _80o: function() {},
            dispose: function() {
                var V = this,
                    K = V._pickId;
                if (K) {
                    var T = V.gv.pickColorMap;
                    T[K] && delete T[K]
                }
            },
            getBodyColor: function(G) {
                var h = this.data,
                    S = this.gv.getBodyColor(h);
                return S ? S : G ? h.getStyle(G) : Y
            },
            getCachedTexture: function(q) {
                var t = this._cachedTextures;
                return t ? t[q || "main"] : null
            },
            setCachedTexture: function(c, q) {
                var o = this._cachedTextures;
                return o || (o = this._cachedTextures = {}), o[q || "main"] = c, c
            },
            invalidateCachedTexture: function(g) {
                var I = this._cachedTextures;
                if (I) {
                    for (var k in I) g.deleteTexture(I[k]);
                    this._cachedTextures = {}
                }
            },
            invalidateCachedGeometry: function() {},
            _24O: function(f, N) {
                var o = this,
                    R = o.data,
                    $ = o.gv,
                    j = o.s,
                    H = $[N](R);
                if (H != Y) {
                    var F = j(f + ".scale"),
                        d = j(f + ".max"),
                        q = o[f + "Info"] = {
                            label: H,
                            textureScale: j(f + ".texture.scale"),
                            color: $[N + "Color"](R),
                            font: j(f + ".font"),
                            align: j(f + ".align"),
                            background: $[N + "Background"](R)
                        },
                        c = q.rect = nn(q, H);
                    d > 0 && d < c.width && (q.labelWidth = c.width, c.width = d), c.x = c.y = 0, c.width *= F, c.height *= F, q.mat = o._16O(j(f + ".autorotate"), j(f + ".position"), c, j(f + ".face"), j(f + ".t3"), j(f + ".r3"), j(f + ".rotationMode"));
                    var x = c.width / 2,
                        i = c.height / 2;
                    q.vs = new Kh([-x, i, 0, -x, -i, 0, x, -i, 0, x, i, 0]), c.width /= F, c.height /= F
                }
            },
            _26O: function(l, P) {
                var N = this,
                    i = N.data,
                    e = N.gv,
                    q = N.s,
                    C = e[P](i);
                if (C != Y) {
                    var f = q(l + ".scale"),
                        Z = this[l + "Info"] = {
                            note: C,
                            textureScale: q(l + ".texture.scale"),
                            expanded: q(l + ".expanded"),
                            font: q(l + ".font"),
                            color: q(l + ".color"),
                            align: q(l + ".align"),
                            borderWidth: q(l + ".border.width"),
                            borderColor: q(l + ".border.color"),
                            background: e[P + "Background"](i)
                        };
                    if (Z.expanded) {
                        var m = q(l + ".max"),
                            D = nn(Z, C);
                        D.width += 6, D.height += 2, m > 0 && m < D.width && (Z.labelWidth = D.width, D.width = m);
                        var J = {
                            x: -D.width / 2,
                            y: -8 - D.height,
                            width: D.width,
                            height: D.height + 8
                        }
                    } else J = {
                        x: -6,
                        y: -18,
                        width: 12,
                        height: 18
                    };
                    Z.mat = N._16O(q(l + ".autorotate"), q(l + ".position"), Y, q(l + ".face"), q(l + ".t3"), q(l + ".r3"), q(l + ".rotationMode")), Z.rect = J, 1 !== f && (J = Vm(J), J.x *= f, J.height *= f, J.y = -J.height, J.width *= f);
                    var V = J.x,
                        v = J.y,
                        I = J.width,
                        G = J.height;
                    Z.vs = new Kh([V, -v, 0, V, -v - G, 0, V + I, -v - G, 0, V + I, -v, 0])
                }
            },
            eachShapeModel: function(f, h) {
                function s(n) {
                    Ul(n), n.vs && f(n.vs, n.is, n.ns, n.uv), n.top_vs && f(n.top_vs, n.top_is, n.top_ns, n.top_uv), n.bottom_vs && f(n.bottom_vs, n.bottom_is, n.bottom_ns, n.bottom_uv), n.from_vs && f(n.from_vs, n.from_is, n.from_ns, n.from_uv), n.to_vs && f(n.to_vs, n.to_is, n.to_ns, n.to_uv)
                }

                function Z(u) {
                    var R, d, i;
                    if (ym(u))
                        for (d = 0, i = u.length; i > d; d++) R = u[d], R && Z(R);
                    else Sf(u) ? Z(Ml(_, u), _) : jl(u) && (u.shape3d ? Z(u.shape3d) : s(u))
                }
                var _ = this,
                    A = _.data,
                    h = h || _.shapeModel || Ml(_);
                h || (h = A instanceof F.Node && !(A instanceof F.Shape) ? {
                    vs: tm,
                    is: Lp
                } : [_.left, _.front, _.right, _.back, _.top, _.bottom]), Z(h)
            },
            _28O: function(E, Y, P) {
                if (P(this.s(Y + ".transparent"))) {
                    var Z = E.rect,
                        H = E.textureScale,
                        x = Z.width * H,
                        r = Z.height * H;
                    if (x >= 1 && r >= 1) {
                        var w = tr(x, r);
                        1 !== H && (w.translate(Z.x, Z.y), w.scale(H, H), w.translate(-Z.x, -Z.y)), Sm(w, E), w.restore(), fe(this, Y, E.mat, E.vs, !0)
                    }
                }
            },
            _29O: function(P, T, E) {
                if (E(this.s(T + ".transparent"))) {
                    var k = P.rect,
                        K = P.textureScale,
                        F = k.x,
                        Z = k.y,
                        R = k.width * K,
                        u = k.height * K;
                    if (R >= 1 && u >= 1) {
                        k.x = k.y = 0;
                        var C = tr(R, u);
                        1 !== K && C.scale(K, K), ok(C, P), C.restore(), k.x = F, k.y = Z, fe(this, T, P.mat, P.vs, !1)
                    }
                }
            },
            _99O: function(h, $, D, p, R, Q) {
                if (D) {
                    var x = this,
                        F = x.gv,
                        Z = x.data,
                        n = F._buffer,
                        s = F._1O,
                        u = D.icons,
                        i = $f.for(h),
                        B = i.directAttribs();
                    for (var O in u) {
                        var K = u[O],
                            C = D.rects[O];
                        if (C && Q(Kg(K.transparent, Z, F))) {
                            F._picking && li(h, p, R, x, O);
                            var q = Kg(K.shape3d, Z, F),
                                l = q ? [q] : Kg(K.names, Z, F),
                                v = l ? l.length : 0,
                                k = Kg(K.textureScale, Z, F) || 1,
                                S = Kg(K.light, Z, F);
                            S == Y && (S = q ? !0 : !1), Yf(h, $, Kg(K.blend, Z, F), S, Kg(K.opacity, Z, F), Kg(K.reverseFlip, Z, F), Kg(K.reverseColor, Z, F), Kg(K.reverseCull, Z, F));
                            for (var U = 0; v > U; U++) {
                                var J = l[U],
                                    r = C[U];
                                if (Qg(x, r.mat), q) Rr(F, Z, Ml(x, q), x);
                                else {
                                    var E = Di(J);
                                    if (E) {
                                        var f = r.width * k,
                                            V = r.height * k;
                                        if (f >= 1 && V >= 1) {
                                            var I = tr(f, V);
                                            Iq(I, E, Kg(K.stretch, Z, F), 0, 0, f, V, Z, F), I.restore(), wn(h, Vq, s), Gh(h, $, s, Kg(K.discardSelectable, Z, F), n.uv, jn), B.aPosition = rq(h, n.vs, r.vs, Y), B.aNormal = Cs(h, n.ns, Kj, Y), dm(h, n.is, fk), Km(h, 0, fk.length), mn(h, $, s)
                                        }
                                    }
                                }
                                Gb(F)
                            }
                            Zm(h, $)
                        }
                    }
                }
            }
        });
        var _s = function(U, y) {
            ip(_s, this, [U, y])
        };
        Wj(_s, $s, {
            _16O: function(I, N, b, E, O, c, Z, S, w) {
                var e = this.data,
                    Q = e.getFinalScale3d(),
                    P = Hp(N, Q, b, E, S, w);
                if (e.hasOwnProperty("_anchor") || e.hasOwnProperty("_anchorElevation")) {
                    var o = e.getAnchor3d();
                    P[0] -= (o.x - .5) * Q[0], P[1] -= (o.y - .5) * Q[1], P[2] -= (o.z - .5) * Q[2]
                }
                return _m(Yn(), P, e.p3(), E, O, c, Z, I, e.getFinalRotation3d(), e.getRotationMode())
            },
            clear: function() {
                var A = this;
                A.faceMat = A.mat = A.shapeModel = A.left = A.right = A.front = A.back = A.top = A.bottom = A.csg = Y
            },
            needValidate: function(z) {
                if (this._iv) return this._validateFrameId = z._renderInfo.frame, !0;
                if (this.data._47Q) {
                    var h = z._renderInfo.frame;
                    if (this._validateFrameId !== h) return this._validateFrameId = h, !0
                }
                return !1
            },
            validate: function(S, s) {
                var _ = this,
                    H = _.gv,
                    G = _.data,
                    W = _.shapeName = _.s(zf),
                    L = Ml(_, W);
                if (_._updateAutoRotation(), _._updateFixSize2d(), _._updateOverlapping(), _.dispatchBoundingBoxChanged(), G._47Q) {
                    var t = G.getRenderLayer(),
                        n = H._40Q.get(t);
                    n && n.ivWireframeBatch(G)
                }
                var $ = Qj(G, H.getMat(G), L ? _.s("shape3d.scaleable") : !0);
                if (G.appendAnchorMatrix3d($), _.clear(), _.mat = G.mat = $, L || !W)
                    if (_.shapeModel = L, S)
                        if (L) Le(H, G, L, _, _.getBodyColor(), [$], S);
                        else {
                            var a = Yq($);
                            _o(H, G, S, s, $, a, _i, jh), _o(H, G, S, s, $, a, rj, Qe), _o(H, G, S, s, $, a, vi, xj), _o(H, G, S, s, $, a, Ei, Ng), _o(H, G, S, s, $, a, ae, Pr), _o(H, G, S, s, $, a, Ad, Tp)
                        }
                else L || (_._cubeUvs = null, _.vf(_i, 0), _.vf(rj, 16), _.vf(ae, 8), _.vf(Ad, 24), _.vf(vi, 32), _.vf(Ei, 40))
            },
            _updateAutoRotation: function() {
                var H = new jg,
                    c = new gb,
                    f = new Cb,
                    r = new Cb,
                    z = new Cb;
                return function() {
                    var X = this,
                        O = X.data,
                        Q = X.s("autorotate") || X.s("shape3d.autorotate");
                    if (!Q) return O._dynamicRotation && delete O._dynamicRotation, void 0;
                    var D = X.gv;
                    z.copy(X.s("shape3d.autorotate.up") || D._up);
                    var C;
                    C = "string" == typeof Q ? [Q.indexOf("x") < 0 ? D._eye[0] : D._center[0], Q.indexOf("y") < 0 ? D._eye[1] : D._center[1], Q.indexOf("z") < 0 ? D._eye[2] : D._center[2]] : D._eye;
                    var j = D._center,
                        i = O.p3();
                    f.copy(i), r.set(C[0] - j[0], C[1] - j[1], C[2] - j[2]).add(f), c.lookAt(r, f, z), H.set(0, 0, 0, O.getRotationMode(), !0).setFromRotationMatrix(c);
                    var l = O._dynamicRotation;
                    l && Math.abs(l[0] - H.x) < 1e-5 && Math.abs(l[1] - H.y) < 1e-5 && Math.abs(l[2] - H.z) < 1e-5 || (O._dynamicRotation = [H.x, H.y, H.z])
                }
            }(),
            _updateFixSize2d: function() {
                var R = this,
                    E = R.data,
                    j = R.s("fixSizeOnScreen") || R.s("shape3d.fixSizeOnScreen");
                if (!j) return E._dynamicScale3d && delete E._dynamicScale3d, void 0;
                var x = R.gv,
                    k = Qj(E, x.getMat(E)),
                    Y = qm([0, 0, 0], k),
                    h = x.toViewPosition(Y);
                if (!isNaN(h.x) && !isNaN(h.y)) {
                    var $ = qm([1, 0, 0], k),
                        L = x.toViewPosition($),
                        f = qm([0, 1, 0], k),
                        H = x.toViewPosition(f),
                        Q = L.x - h.x,
                        V = H.y - h.y;
                    if (Q && V) {
                        var p, i, b = E._dynamicScale3d || [1, 1, 1],
                            o = Di(E.s("shape3d.image"));
                        if (j[0] > 0 && (p = j[0]), j[1] > 0 && (i = j[1]), !p || !i) {
                            var v = j > 0 ? j : 1;
                            p || (p = (ps(o, E) || E.getWidth()) * v), i || (i = (hh(o, E) || E.getTall()) * v)
                        }
                        var q = Math.abs(Q / p),
                            N = Math.abs(V / i);
                        Math.abs(q - 1) < .001 && Math.abs(N - 1) < .001 || (E._dynamicScale3d = [b[0] / q, b[1] / N, b[2]])
                    }
                }
            },
            _updateOverlapping: function() {
                var $ = this,
                    l = $.s("hide.overlapping.group");
                if (!l) return $._rectOverlapping && ($._rectOverlapping = O), void 0;
                var R, e, V, r = $.gv,
                    X = $.data,
                    d = Qj(X, r.getMat(X)),
                    Z = 1 / 0,
                    s = 1 / 0,
                    f = -1 / 0,
                    u = -1 / 0,
                    L = X.getAnchor3d(),
                    W = L.x,
                    x = L.y,
                    U = L.z;
                for (R = 0; 8 > R; R++) {
                    if (e = qm([(R >> 2) - W, (1 & R >> 1) - x, (1 & R) - U], d), V = r.toViewPosition(e), isNaN(V.x) || isNaN(V.y)) return;
                    Z = Math.min(Z, V.x), f = Math.max(f, V.x), s = Math.min(s, V.y), u = Math.max(u, V.y)
                }
                var _ = {
                    x: Z,
                    y: s,
                    w: f - Z,
                    h: u - s
                };
                $._rectOverlapping = r.overlappingBox.isOverlapping(l, _)
            },
            getVectorDynamicSize: function() {
                var a, L = this,
                    M = L.s("shape3d"),
                    m = L.data;
                if ("billboard" === M || "plane" === M || (a = m._currentCubeElementId) != Y) {
                    var l, W, c = L.gv,
                        A = Qj(m, c.getMat(m)),
                        d = m.getAnchor3d(),
                        s = .5 - d.x,
                        e = .5 - d.y,
                        u = .5 - d.z,
                        r = Math.min(L.s("vector.dynamic.maxsize"), c._glCapabilities.maxTextureSize) / c.getDevicePixelRatio(),
                        k = function(L, q) {
                            L[0] += s, L[1] += e, L[2] += u, q[0] += s, q[1] += e, q[2] += u;
                            var M = c.toViewPosition(qm(L, A)),
                                J = c.toViewPosition(qm(q, A)),
                                p = M.x - J.x,
                                t = M.y - J.y;
                            return Math.min(r, Math.sqrt(p * p + t * t))
                        };
                    if ("billboard" === M) l = k([-.5, 0, 0], [.5, 0, 0]), W = k([0, -.5, 0], [0, .5, 0]);
                    else if ("plane" === M) l = k([-.5, 0, 0], [.5, 0, 0]), W = k([0, 0, -.5], [0, 0, .5]);
                    else if (m._currentCubeElementId != Y) {
                        var Z = 3 * Lp[a + 1],
                            E = 3 * Lp[a],
                            V = 3 * Lp[a + 2];
                        l = k([tm[Z], tm[Z + 1], tm[Z + 2]], [tm[V], tm[V + 1], tm[V + 2]]), W = k([tm[Z], tm[Z + 1], tm[Z + 2]], [tm[E], tm[E + 1], tm[E + 2]])
                    }
                    return [l, W]
                }
            },
            vf: function(Y, Q) {
                var n = this;
                if (n.gv.getFaceVisible(n.data, Y)) {
                    var f = Uj(n, Y);
                    f.mat && (n.faceMat = !0);
                    var B = f.uv;
                    if (B) {
                        var o = n._cubeUvs;
                        o || (o = n._cubeUvs = new Kh([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]));
                        for (var G = 0; 8 > G; G++) o[Q + G] = B[G]
                    }
                    return f
                }
            },
            _billboardInView: function() {
                var _ = [-.5, -.5, 0, -.5, .5, 0, .5, -.5, 0, .5, .5, 0],
                    B = [-.5, 0, -.5, -.5, 0, .5, .5, 0, -.5, .5, 0, .5],
                    W = new $l,
                    G = new Cb,
                    o = new gb;
                return function(q) {
                    var K = this;
                    if (!K.mat) return !0;
                    var Y = K.gv.getFrustum(),
                        T = "billboard" === q ? _ : B;
                    W.makeEmpty(), o.fromArray(K.mat);
                    for (var f = 0, Z = T.length; Z > f; f += 3) W.expandByPoint(G.fromArray(T, f).applyMatrix4(o));
                    return Y.intersectsBox(W)
                }
            }(),
            _80o: function(q, O, v) {
                var W = this;
                if (W._rectOverlapping) return !0;
                var b = W.shapeModel;
                if (b || !W.shapeName) {
                    var p = W.s("shape3d");
                    if (("billboard" === p || "plane" === p) && !W._billboardInView(p)) return !0;
                    var c = W.gv,
                        A = W.data,
                        C = c._cube,
                        m = $f.for(q),
                        t = m.directAttribs();
                    if (Bo && !id) {
                        var d = W.mat;
                        if (d)
                            for (var S = 0; S < d.length; S++) W.mat[S] = d[d.length - S - 1]
                    }
                    Yb(c, W.mat), !q._picking && W.s("shape3d.reflector") || W.s("effect.flow") || (b ? Rr(c, A, b, W, W.getBodyColor(), v) : (t.aPosition = rq(q, C.vs, Y, Y), t.aNormal = rq(q, C.ns, Y, Y), zq(q, C.is), W._18O(q, O, "left", 0, v), W._18O(q, O, "front", 6, v), W._18O(q, O, "right", 12, v), W._18O(q, O, "back", 18, v), W._18O(q, O, "top", 24, v), W._18O(q, O, "bottom", 30, v))), Gb(c), W.faceMat && (W._18O(q, O, "left", 0, v, !0), W._18O(q, O, "front", 6, v, !0), W._18O(q, O, "right", 12, v, !0), W._18O(q, O, "back", 18, v, !0), W._18O(q, O, "top", 24, v, !0), W._18O(q, O, "bottom", 30, v, !0))
                }
            },
            _18O: function(w, z, k, f, $, L) {
                var h = this[k];
                if (h) {
                    if (!$(h.transparent)) return;
                    if (L && !h.mat || !L && h.mat) return;
                    var B = this.data.s("polygonOffset");
                    B && rr(w, B), L && Yb(this.gv, h.mat);
                    var _ = this,
                        m = _.data,
                        E = $f.for(w),
                        K = E.directUniforms();
                    m._currentCubeElementId = f;
                    var Q = _.gv,
                        X = Q.getTexture(h.texture, m, k),
                        G = h.uv,
                        d = h.uvScale,
                        n = h.uvOffset,
                        c = h.uvRotation,
                        l = h.uvAnchor,
                        J = h.discardSelectable;
                    X ? G ? Gh(w, z, X, J, Q._buffer.uv, _._cubeUvs, n, d, c, l) : Gh(w, z, X, J, Q._cube.uv, Y, n, d, c, l) : Gh(w), Yf(w, z, h.blend, h.light, h.opacity, h.reverseFlip, h.reverseColor, h.reverseCull), K.uDiffuse = h.color || A["color.empty"], Km(w, f, 6), Zm(w, z), mn(w, z, X), L && Gb(Q), B && Vo(w), m._currentCubeElementId = null
                }
            },
            drawReflector: function() {
                var t = new Cb,
                    q = new Cb,
                    N = new jg,
                    Q = new gb,
                    r = new Cb,
                    M = new Cb,
                    F = new Cb,
                    $ = new Cb,
                    b = new gb,
                    j = new gb,
                    R = new jb,
                    p = new Kl,
                    H = new Kl,
                    G = function(B, A, f) {
                        B[f] = A[0], B[f + 1] = A[1], B[f + 2] = A[2]
                    },
                    k = function(c, O, y) {
                        y = y || 0, c[0] = O[y], c[1] = O[y + 1], c[2] = O[y + 2]
                    },
                    z = function(s, t) {
                        G(s, t.getEye(), 0), G(s, t.getCenter(), 3), G(s, t.getUp(), 6)
                    },
                    u = function(B, c) {
                        k(c._eye, B, 0), k(c._center, B, 3), k(c._up, B, 6), c._18Q = Y;
                        var T = c._skybox;
                        T && (T.p3([B[0], B[1], B[2]]), c.getData3dUI(T).iv())
                    };
                return function(G) {
                    var g = this;
                    g._reflectorInfo = null;
                    var h = g.data;
                    if (h._reflecting) return !1;
                    var X = g.gv;
                    if (X._picking) return !1;
                    var m = h instanceof Cr,
                        n = g._reflectorRenderTarget,
                        U = X._canvas.width,
                        E = X._canvas.height;
                    if (n ? n.setSize(G, U, E) : n = g._reflectorRenderTarget = new Hn.RenderTarget(X, G, U, E), m) {
                        var s = h.getPointsMatrix3d().getElements(),
                            S = h.p3();
                        S[1] += (1 - h.getAnchorElevation()) * h.getTall(), t.copy(qm(S, s))
                    } else t.copy(h.p3());
                    if (q.copy(X.getEye()), Q.makeRotationFromEuler(N.set(h.r3(), h.getRotationMode(), !0)), !g._reflectNormal) {
                        var c;
                        if (m && h.getThickness() < 0) {
                            if (!g.shapeModel || !g.shapeModel.top_vs) return !1;
                            c = {
                                vs: g.shapeModel.top_vs,
                                ns: g.shapeModel.top_ns
                            }
                        } else {
                            if (c = Ml(g, g.s("shape3d")), !c) return !1;
                            !c.ns && c.length && (c = c[0])
                        }
                        if (!c.ns || !c.vs) return !1;
                        g._reflectNormal = [c.ns[0], c.ns[1], c.ns[2]], g._reflectorVbuffer = Ik.Buffer.createVertexBuffer(G, new Float32Array(c.vs))
                    }
                    if (r.copy(g._reflectNormal), r.applyMatrix4(Q), M.subVectors(t, q), M.dot(r) > 0) return !1;
                    M.reflect(r).negate(), M.add(t), F.copy(X.getCenter()).negate().add(t), F.reflect(r).negate(), F.add(t), $.copy(X.getUp()), $.reflect(r);
                    var y = [0, 0, 0, 0, 0, 0, 0, 0, 0];
                    z(y, X), k(X._eye, M.toArray()), k(X._center, F.toArray()), k(X._up, $.toArray()), X._18Q = Y;
                    var l = X._skybox;
                    l && (l.p3(X._eye), X.getData3dUI(l).iv()), pm(G, n.frame), X.setViewport(G, 0, 0, n.width, n.height);
                    var Z = h.s("shape3d.reflector.background");
                    if (Z) {
                        var T = G.getParameter(G.COLOR_CLEAR_VALUE);
                        kj(G, Z)
                    } else kj(G, [0, 0, 0, 1]);
                    $f.for(G).glState.depth.mask = !0, G.clear(G.COLOR_BUFFER_BIT | G.DEPTH_BUFFER_BIT);
                    var B = h.s("shape3d.reflector.clip"),
                        _ = B === O ? .003 : B,
                        d = om(X),
                        P = sn(X);
                    R.setFromNormalAndCoplanarPoint(r, t.add(r.clone().multiplyScalar(_))), R.applyMatrix4(j.fromArray(P)), p.set(R.normal.x, R.normal.y, R.normal.z, R.constant), j.fromArray(d).getInverse(j), H.set(Math.sign(p.x), Math.sign(p.y), 1, 1).applyMatrix4(j), p.multiplyScalar(2 / p.dot(H)), d[2] = p.x - d[3], d[6] = p.y - d[7], d[10] = p.z - d[11], d[14] = p.w - d[15];
                    var L = X._computedProjectMatrix;
                    X._computedProjectMatrix = d, h._reflecting = !0;
                    var f = h.s("shape3d.reflector.shadow"),
                        v = {
                            renderAxis: !1,
                            renderEdit: !1,
                            renderGrid: !1
                        };
                    "disabled" === f ? (v.createShadowMap = !1, v.renderShadow = !1) : "scene" === f ? v.createShadowMap = !1 : v.useReflectorSelfShadowMap = !0, X.renderScene(v), X._computedProjectMatrix = L, b.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), b.multiply(j.fromArray(X._projectMatrix)), b.multiply(j.fromArray(X._viewMatrix)), Z && kj(G, T), Qk(G), u(y, X);
                    var V = h.s("shape3d.reflector.blur");
                    if (V) {
                        var K = X.getPostProcessingModule("Blur");
                        K && K.drawImpl(G, n, V, V >= 3, h.s("shape3d.reflector.blur.iterations"))
                    }
                    var I = X.getPostProcessingModule("Glitch");
                    I && I.enable && I.onlyReflector && (n = I._42(G, n));
                    var J = G._compiledShader.reflector;
                    J || (J = G._compiledShader.reflector = new Ik.Shader(G, tn.Reflector.vs, tn.Reflector.fs)), J.bind(), G.activeTexture(G.TEXTURE0), wq(G, n.texture), J.uniforms.tDiffuse = 0, J.uniforms.color = Wb(h.s("shape3d.reflector.color") || "rgb(128,128,128)"), J.uniforms.textureMatrix = b.toArray(), J.uniforms.modelMatrix = m ? s : Qj(h), J.uniforms.viewMatrix = sn(X), J.uniforms.projectionMatrix = om(X);
                    var A = g._reflectorVbuffer;
                    A.upload(), J.attributes.pos.pointer(A);
                    var o = this.s("shape3d.transparent");
                    if (o) {
                        var C = $f.for(G).glState,
                            i = C.depth.mask;
                        C.depth.mask = !1
                    }
                    return G.drawArrays(G.TRIANGLES, 0, A.data.length / 3), o && (C.depth.mask = i), h._reflecting = !1, G.useProgram(X._prg), wq(G, Y), !0
                }
            }()
        }), tn.Reflector = {
            vs: ["attribute vec3 pos;", "uniform mat4 textureMatrix;", "uniform mat4 modelMatrix;", "uniform mat4 viewMatrix;", "uniform mat4 projectionMatrix;", "varying vec4 vUv;", "void main() {", "	vUv = textureMatrix * modelMatrix * vec4( pos, 1.0 );", "	gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( pos, 1.0 );", "}"].join("\n"),
            fs: ["precision highp float;", "uniform vec3 color;", "uniform sampler2D tDiffuse;", "varying vec4 vUv;", "float blendOverlay( float base, float blend ) {", "	return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );", "}", "vec3 blendOverlay( vec3 base, vec3 blend ) {", "	return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );", "}", "void main() {", "	vec4 base = texture2DProj( tDiffuse, vUv );", "   vec2 tUv = vUv.xy / vUv.w;", "   if (tUv.x < .0 || tUv.y < .0 || tUv.x > 1. || tUv.y > 1.) discard;", "	gl_FragColor = vec4( blendOverlay( base.rgb, color ), base.a );", "}"].join("\n")
        };
        var at = function(d, w) {
            ip(at, this, [d, w])
        };
        Wj(at, _s, {
            _80o: function() {}
        });
        var bt = function(P, C) {
            ip(bt, this, [P, C])
        };
        Wj(bt, $s, {
            _25Q: 1,
            validate: function(Q) {
                var w = this;
                if (!w.s("geometry.cache") || !w.info) {
                    var W = w.gv,
                        p = w.data,
                        b = w.s,
                        L = b("edge.width"),
                        g = p._40I,
                        U = p._41I;
                    if (w.shapeModel = w.info = w.lineShapeModel = Y, g && U) {
                        var c, v, D, H, u, T, s, n, d, f, G = p.isLooped(),
                            X = b(tk),
                            _ = z.getEdgeType(X);
                        if (_) {
                            var I = _(p, Zb(w, W, p, G, X), W, w._19Q);
                            if (!I.points || I.points.isEmpty()) return;
                            T = w.info = {}, s = I.segments, u = I.points, n = u.size();
                            for (var i = g.getElevation(), J = U.getElevation(), l = 0; n > l; l++) {
                                var t = u.get(l);
                                t.e == Y && (t.e = i + (J - i) * l / (n - 1))
                            }
                            d = Ki(u.get(0)), f = Ki(u.get(n - 1));
                            var y = n % 2;
                            0 === y ? (T.c1 = Ki(u.get(n / 2 - 1)), T.c2 = Ki(u.get(n / 2))) : T.p3 = Ki(u.get((n - y) / 2)), T.s1 = d, T.s2 = Ki(u.get(1)), T.t1 = Ki(u.get(n - 2)), T.t2 = f
                        } else {
                            u = new no, T = w.info = {};
                            var K = b("edge.offset"),
                                o = b("edge.center"),
                                V = b("edge.source.t3"),
                                Z = b("edge.target.t3"),
                                E = nk(W, p, "source"),
                                S = nk(W, p, "target");
                            if (!E || !S) return W.invalidateData(p), delete w.info, !1;
                            if (V && (E[0] += V[0], E[1] += V[1], E[2] += V[2]), Z && (S[0] += Z[0], S[1] += Z[1], S[2] += Z[2]), X === Wq) {
                                s = b("edge.segments");
                                var q = T.points = b($j) || vg;
                                if (n = q.size()) {
                                    d = Ki(q.get(0)), f = Ki(q.get(n - 1)), !o && K && (D = _g(d, E, !0), K = h(K, cm(E, d)), E = [E[0] + D[0] * K, E[1] + D[1] * K, E[2] + D[2] * K], D = _g(S, f, !0), K = h(K, cm(f, S)), S = [S[0] - D[0] * K, S[1] - D[1] * K, S[2] - D[2] * K]);
                                    var y = n % 2;
                                    0 === y ? (c = Ki(q.get(n / 2 - 1)), v = Ki(q.get(n / 2))) : T.p3 = Ki(q.get((n - y) / 2)), T.s1 = E, T.s2 = d, T.t1 = f, T.t2 = S
                                } else !o && K && (D = _g(S, E, !0), H = cm(E, S), K = Cc(K, H), E = [E[0] + D[0] * K, E[1] + D[1] * K, E[2] + D[2] * K], S = [S[0] - D[0] * K, S[1] - D[1] * K, S[2] - D[2] * K]), c = E, v = S;
                                u.add({
                                    x: E[0],
                                    y: E[2],
                                    e: E[1]
                                }), u.addAll(q), u.add({
                                    x: S[0],
                                    y: S[2],
                                    e: S[1]
                                })
                            } else {
                                var R = Zb(w, W, p, G, X);
                                if (w._19Q || (R = -R), G) {
                                    var k = E[0],
                                        A = E[1],
                                        e = E[2],
                                        O = g.getTall() / 2 + R;
                                    c = [k - R, A + O, e], v = [k + R, A + O, e], u.add({
                                        x: k - R,
                                        y: e,
                                        e: A
                                    }), u.add({
                                        x: k - R,
                                        y: e,
                                        e: A + O
                                    }), u.add({
                                        x: k + R,
                                        y: e,
                                        e: A + O
                                    }), u.add({
                                        x: k + R,
                                        y: e,
                                        e: A
                                    })
                                } else {
                                    D = _g(S, E, !0), H = cm(E, S);
                                    var j = {
                                            x: E[0],
                                            y: E[2]
                                        },
                                        x = {
                                            x: S[0],
                                            y: S[2]
                                        },
                                        B = Ae(Y, j, x, R),
                                        P = B.x - j.x,
                                        F = B.y - j.y;
                                    K = Cc(K, H), D[0] *= K, D[1] *= K, D[2] *= K, c = [E[0] + D[0] + P, E[1] + D[1], E[2] + D[2] + F], v = [S[0] - D[0] + P, S[1] - D[1], S[2] - D[2] + F], o ? (u.add({
                                        x: E[0],
                                        y: E[2],
                                        e: E[1]
                                    }), u.add({
                                        x: c[0],
                                        y: c[2],
                                        e: c[1]
                                    }), u.add({
                                        x: v[0],
                                        y: v[2],
                                        e: v[1]
                                    }), u.add({
                                        x: S[0],
                                        y: S[2],
                                        e: S[1]
                                    })) : (u.add({
                                        x: c[0],
                                        y: c[2],
                                        e: c[1]
                                    }), u.add({
                                        x: v[0],
                                        y: v[2],
                                        e: v[1]
                                    }))
                                }
                            }
                            T.c1 = c, T.c2 = v
                        }
                        T._lastPointsSegments = {
                            points: u,
                            segments: s
                        }, T.list = b(zf) === Jo ? w.createTubeModel(u, s, L / 2, Q) : w.createLineModel(u, s, L, "edge", "edge.dash")
                    }
                }
            },
            invalidateCachedGeometry: function() {
                this.info = Y
            }
        });
        var ct = function(j, X) {
            ip(ct, this, [j, X]), this._needRecoverPosition = !0
        };
        Wj(ct, _s, {
            _80o: function(T, $, l) {
                var V = this,
                    v = V.mat;
                if (v && (!V.s("shape3d.reflector") || T._picking)) {
                    var k = V.gv,
                        A = V.shapeModel;
                    if (z.extractShapeTranslation) {
                        var U = V._vsTranslation;
                        U && (v = (new _q.Matrix4).fromArray(v).multiply(U).toArray())
                    }
                    Yb(k, v), A ? Rr(k, V.data, A, V, V.getBodyColor(), l) : (Sd(V, T, $, "left", l), Sd(V, T, $, "front", l), Sd(V, T, $, "right", l), Sd(V, T, $, "back", l), Sd(V, T, $, "top", l), Sd(V, T, $, "bottom", l)), Gb(k)
                }
            },
            validate: function(v, O) {
                var J, t, g = this,
                    $ = g.s,
                    F = g.data,
                    f = F._thickness / 2,
                    p = F.isClosePath(),
                    T = F.getPoints(),
                    X = F.getSegments(),
                    E = $(Uk),
                    k = v && v.uv;
                if (g.clear(), g.dispatchBoundingBoxChanged(), 0 > f) {
                    g.s("shape3d.reflector") && (g._reflectNormal = null);
                    try {
                        var x = $("shape3d.image.projection");
                        if (x && x[4]) {
                            var B = F.p3(),
                                W = B[0],
                                r = B[2];
                            x = [W + x[0], x[1] - r, W + x[2], x[3] - r]
                        }
                        t = g.shapeModel = os(T, X, $(vp), $(Ql), E, $(yp), F.getTall(), F.getShapeElevation(), p, x)
                    } catch (e) {
                        t = g.shapeModel = {}
                    }
                    $(sh) ? $("shape3d.image") || delete t.uv : (delete t.vs, delete t.ns, delete t.uv), $("shape3d.top.image") || delete t.top_uv, $("shape3d.bottom.image") || delete t.bottom_uv
                } else if ($(zf) === Jo) J = ml(T, X, E, p), t = g.shapeModel = {
                    vs: []
                }, $("shape3d.image") && (t.uv = [], t.sum = $(yp) || Lg(J) || 1, t.len = 0), $(vp) && !p && (t.top_vs = [], $("shape3d.top.image") && (t.top_uv = [])), $(Ql) && !p && (t.bottom_vs = [], $("shape3d.bottom.image") && (t.bottom_uv = [])), g._12O(J, f);
                else {
                    var b, C, N, q, P, h, G, Q, U, w;
                    if (J = ml(T, X, E, p), P = g.vf(ae, k, !1, O), f && (h = g.vf(Ad, k, !1, O), G = p ? Y : g.vf(_i, k, !1, O), Q = p ? Y : g.vf(rj, k, !1, O), U = g.vf(vi, k, !1, O), w = g.vf(Ei, k, !1, O)), f) {
                        for (var o = 0, i = J.length; i > o; o++) J[o] = g._tryRemoveBezierPoints(J[o], f);
                        g._12O(J, f)
                    } else P && J.forEach(function(S) {
                        if (q = S.length, q > 0)
                            for (b = S[0], N = 1; q > N; N++) C = S[N], g.addV(P.vs, b, C), b = C
                    });
                    g._20Q(J), v || (P && (P.ns = Ze(P.vs), Yp(P, "vs"), Yp(P, Np)), f && (h && (h.ns = Ze(h.vs), Yp(h, "vs"), Yp(h, Np)), G && (G.ns = Ze(G.vs), Yp(G, "vs"), Yp(G, Np)), Q && (Q.ns = Ze(Q.vs), Yp(Q, "vs"), Yp(Q, Np)), U && (U.ns = Ze(U.vs), Yp(U, "vs"), Yp(U, Np)), w && (w.ns = Ze(w.vs), Yp(w, "vs"), Yp(w, Np))))
                }
                var y = g.mat = F.getPointsMatrix3d().getElements();
                if (v) kl(g, y, v, t), g.clear();
                else if (z.extractShapeTranslation) {
                    var K = new _q.Vector3(0, 0, 0),
                        j = new _q.Vector3,
                        M = 0;
                    g.eachShapeModel(function(G) {
                        if (G)
                            for (var N = 0, l = G.length; l > N; N += 3) M++, K.add(j.fromArray(G, N))
                    }), K.divideScalar(M);
                    var W = K.x,
                        r = K.y,
                        V = K.z;
                    g.eachShapeModel(function(v) {
                        if (v)
                            for (var o = 0, K = v.length; K > o; o += 3) v[o] = v[o] - W, v[o + 1] = v[o + 1] - r, v[o + 2] = v[o + 2] - V
                    }), g._vsTranslation = (new _q.Matrix4).setPosition(K)
                }
            },
            _20Q: function(p) {
                var D, u, L, X, w, W, J, K = this,
                    $ = K.front,
                    i = K.back,
                    c = K.top,
                    R = K.bottom,
                    s = $ ? $.tuv : Y,
                    I = i ? i.tuv : Y,
                    z = c ? c.tuv : Y,
                    v = R ? R.tuv : Y,
                    j = 0;
                (s || I || z || v) && (D = K.s(yp) || Lg(p) || 1, p.forEach(function(C) {
                    if (u = C.length, u > 0)
                        for (W = C[0], L = 1; u > L; L++) J = C[L], X = j / D, j += cm(W, J), w = j / D, K._14O($, X, w), K._14O(i, 1 - w, 1 - X), K._14O(c, X, w), K._14O(R, X, w), W = J
                }))
            },
            _14O: function(w, S, i) {
                if (w) {
                    var y = w.uv,
                        O = w.tuv;
                    if (O) {
                        if (y) var I = y[0] + (y[6] - y[0]) * S,
                            h = y[1] + (y[7] - y[1]) * S,
                            n = y[2] + (y[4] - y[2]) * S,
                            v = y[3] + (y[5] - y[3]) * S,
                            X = y[2] + (y[4] - y[2]) * i,
                            F = y[3] + (y[5] - y[3]) * i,
                            _ = y[0] + (y[6] - y[0]) * i,
                            Z = y[1] + (y[7] - y[1]) * i;
                        else I = S, h = 0, n = S, v = 1, X = i, F = 1, _ = i, Z = 0;
                        O.push(n, v, X, F, _, Z, _, Z, I, h, n, v)
                    }
                }
            },
            _13O: function(S) {
                var K = S.uv,
                    Y = S.tuv;
                Y && (K ? Y.push(K[2], K[3], K[4], K[5], K[6], K[7], K[6], K[7], K[0], K[1], K[2], K[3]) : Y.push(0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1))
            },
            _tryRemoveBezierPoints: function(o, f) {
                var O = o.length;
                if (4 > O) return o;
                var v, T, n, b, z, Q, R = !1,
                    k = function(s) {
                        return o[s]
                    },
                    u = function(s) {
                        return o[O - 1 - s]
                    };
                for (z = 0; 1 >= z; z++)
                    for (Q = z ? u : k, T = Q(0), n = Q(1), v = 2; O - 1 > v; v++)
                        if (b = Q(v), !b.remove)
                            if (b.b) {
                                var U = Ae(T, n, b, f);
                                U.adjust ? (b.remove = !0, R = !0) : (T = n, n = b)
                            } else T = n, n = b;
                if (!R) return o;
                var F = [];
                for (v = 0; O > v; v++) o[v].remove || F.push(o[v]);
                return F
            },
            _12O: function(C, S) {
                var u, R, s, t, U, z = this.s("shape3d.point.epsilon"),
                    c = this;
                C.forEach(function(W) {
                    if (U = W.length, U > 0)
                        for (u = {
                                p: W[0],
                                n: !0
                            }, t = 1; U > t; t++) R = W[t], s = U - 1 > t ? W[t + 1] : Y, s && Math.abs(R.x - s.x) < z && Math.abs(R.y - s.y) < z || c.addPoint(u, R, s, S, W)
                })
            },
            addPoint: function(J, V, q, Z, G) {
                var E, w, k, t, v, c, N, u, P, F = this,
                    e = J.p,
                    C = J.f,
                    Q = J.b,
                    y = F.s("shape3d.side") || ik,
                    s = F.s("shape3d.start.angle"),
                    D = F.s("shape3d.sweep.angle"),
                    z = F.shapeModel,
                    I = F.data.isClosePath();
                if (J.n && (J.n = !1, C = I && G.length > 2 ? Ae(G[G.length - 2], e, V, Z) : Ae(Y, e, V, Z), Q = sq(e, C), z ? z.top_vs && F._10O(Q, C, y, s, D, z.top_vs, z.top_uv) : (E = F.left) && (F.addV(E.vs, Q, C), F._13O(E))), w = q ? Ae(e, V, q, Z) : I && G.length > 2 ? Ae(e, V, G[1], Z) : Ae(e, V, Y, Z), k = sq(V, w), z) {
                    var r, L, M = z.vs,
                        W = z.uv,
                        B = z.sum;
                    for (W && (r = z.len / B, z.len += cm(e, V), L = z.len / B), c = F._9O(Q, C, y, s, D), N = F._9O(k, w, y, s, D), u = 0; y > u; u++) P = u + 1, ks(M, c[P]), ks(M, N[u]), ks(M, c[u]), ks(M, N[u]), ks(M, c[P]), ks(M, N[P]), W && (t = u / y, v = P / y, W.push(r, v, L, t, r, t, L, t, r, v, L, v));
                    !q && z.bottom_vs && F._10O(k, w, y, s, D, z.bottom_vs, z.bottom_uv, !0)
                } else !q && (E = F.right) && (F.addV(E.vs, w, k), F._13O(E)), (E = F.front) && F.addV(E.vs, C, w), (E = F.back) && F.addV(E.vs, k, Q), (E = F.top) && F.addH(E.vs, C, w, k, Q, !0), (E = F.bottom) && F.addH(E.vs, Q, k, w, C);
                J.p = V, J.f = w, J.b = k
            },
            _10O: function(S, w, L, e, _, n, a, X) {
                var t, N, i = this,
                    z = i.data,
                    q = i._9O(S, w, L, e, _),
                    C = (S.x + w.x) / 2,
                    s = (S.y + w.y) / 2,
                    m = z.getShapeElevation(),
                    h = 0;
                for (h = 0; L > h; h++) X ? (ks(n, q[h]), ks(n, q[h + 1])) : (ks(n, q[h + 1]), ks(n, q[h])), ks(n, [C, m, s]), a && (X ? (t = U * (h + 1) / L + e, N = U * h / L + e) : (t = U * h / L + e, N = U * (h + 1) / L + e), a.push(.5 - .5 * u(N), .5 - .5 * b(N), .5 - .5 * u(t), .5 - .5 * b(t), .5, .5))
            },
            _9O: function(k, H, o, _, s) {
                var Q, S, M = this,
                    d = M.data,
                    Z = [],
                    f = (k.x + H.x) / 2,
                    N = (k.y + H.y) / 2,
                    P = d.getTall() / 2,
                    A = d.getShapeElevation(),
                    x = 0;
                for (s == Y && (s = U); o >= x; x++) Q = s * x / o + _, S = u(Q), Z.push([f + (k.x - f) * S, A + P * b(Q), N + (k.y - N) * S]);
                return Z
            },
            addV: function(u, y, J) {
                var I = y.x,
                    g = y.y,
                    $ = J.x,
                    l = J.y,
                    F = this.data,
                    Z = F.getShapeElevation(),
                    L = F.getTall() / 2;
                u.push(I, Z - L, g, $, Z - L, l, $, Z + L, l, $, Z + L, l, I, Z + L, g, I, Z - L, g)
            },
            addH: function(O, y, r, F, z, D) {
                var c = this.data,
                    E = c.getTall() / 2,
                    w = c.getShapeElevation() + (D ? E : -E);
                O.push(y.x, w, y.y, r.x, w, r.y, F.x, w, F.y, F.x, w, F.y, z.x, w, z.y, y.x, w, y.y)
            },
            vf: function(B, X, n, K) {
                var b, d = this,
                    G = d.gv.getFaceVisible(d.data, B);
                return (n || G) && (b = Uj(d, B, K), b.vs = [], b.tuv = G && (b.texture || X) ? [] : Y, b.visible = G), b
            }
        });
        var dt = function(x, K) {
                ip(dt, this, [x, K])
            },
            et = {},
            ft = function(X) {
                return /\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(X)
            };
        Wj(dt, _s, {
            validate: function() {
                var A = this,
                    x = A.gv,
                    p = A.data,
                    g = A.s,
                    K = Wb(g("points.color")),
                    L = g("points.size"),
                    R = g("points.uv.offset"),
                    F = g("points.image");
                !F || ft(F) || Kf.test(F) || (et[F] || (et[F] = A._createCachedImage(F)), F = et[F]);
                var v, Z, I = p._modelDirty,
                    $ = g("points.model");
                if ($) {
                    if (A._lastShapeModel !== $ || !A.shapeModel) {
                        var N = Ml(A, $);
                        if (!N) return;
                        var B = [],
                            X = {};
                        A.eachShapeModel(function(Z) {
                            for (var $ = 0, l = Z.length; l > $; $ += 3) {
                                var w = Z[$],
                                    P = Z[$ + 1],
                                    t = Z[$ + 2],
                                    T = "" + w + "_" + P + "_" + t;
                                X[T] || (X[T] = !0, B.push(w, P, t))
                            }
                        }, N), A._setShapeModelPoints(new Kh(B)), A._lastShapeModel = $, I = !0
                    }
                    v = A.shapeModel.vs.length, Z = v / 3
                } else {
                    var P = p.getPoints();
                    if (Z = v = P.length, I || p._pointsDirty || !A.shapeModel) {
                        for (var V = [], n = 0; Z > n; n++) {
                            var m = P[n];
                            m && V.push(m.x, m.e, m.y)
                        }
                        A._setShapeModelPoints(new Kh(V)), p._pointsDirty = !1, A._lastShapeModel = null, I = !0
                    }
                }
                if (A.info = {
                        mat: Qj(p),
                        size: L,
                        diffuse: K,
                        opacity: g("points.opacity"),
                        texture: F,
                        alphaTest: g("points.transparent") ? 0 : g("alphaTest"),
                        uvScale: g("points.uv.scale"),
                        uvOffset: R,
                        discardSelectable: g("points.discard.selectable")
                    }, I || p._colorsDirty) {
                    var o = !1,
                        S = p.getColors();
                    if (S && S.length > 0)
                        for (var M = [], n = 0; Z > n; n++)
                            for (var H = S[n], a = H ? (o = !0, Wb(H)) : K, l = 4 * n, W = 0; 4 > W; W++) M[l + W] = a[W];
                    A.shapeModel.cs = o ? new Kh(M) : null, p._colorsDirty = !1
                }
                if (I || p._sizesDirty) {
                    var d = !1,
                        q = p.getSizes();
                    if (q && q.length > 0)
                        for (var U, Q = [], n = 0; Z > n; n++) U = q[n], U >= 0 ? (Q.push(U), d = !0) : Q.push(L);
                    A.shapeModel.ss = d ? new Kh(Q) : null, p._sizesDirty = !1
                }
                if (I || p._offsetsDirty) {
                    var h = !1,
                        C = p.getUvoffsets();
                    if (C && C.length > 0)
                        for (var D, j, T, y = [], n = 0; Z > n; n++) D = 2 * n, j = C[D], T = C[D + 1], j != O && T != O ? (y.push(j, T), h = !0) : y.push(R[0], R[1]);
                    A.shapeModel.os = h ? new Kh(y) : null, p._offsetsDirty = !1
                }
                if (I || A._lastPointNumber !== Z) {
                    this.dispose();
                    var t = x.pickColorMap,
                        r = A._startPickId = t._pickIdUsed;
                    t._pickIdUsed = r + Z;
                    for (var V = [], n = 0; Z > n; n++) {
                        var z = r + n,
                            w = Ks(z);
                        V.push(w[0], w[1], w[2], w[3]), t[z] || (t[z] = {
                            data: p,
                            part: n
                        })
                    }
                    A.shapeModel.ps = new Kh(V), A._lastPointNumber = Z
                }
                p._modelDirty = !1, this.dispatchBoundingBoxChanged()
            },
            _setShapeModelPoints: function(j) {
                var E = this,
                    P = E.shapeModel,
                    _ = E.shapeModel = {
                        vs: j
                    };
                if (!P) return _;
                var W = j.length,
                    d = Math.round(W / 3);
                return P.cs && P.cs.length == 4 * d && (_.cs = P.cs), P.ss && P.ss.length == d && (_.ss = P.ss), P.os && P.os.length == 2 * d && (_.os = P.os), P.ps && P.ps.length == 4 * d && (_.ps = P.ps), _
            },
            _createCachedImage: function(V) {
                var s = 128,
                    P = ts(),
                    u = P.getContext("2d");
                yh(P, s, s, 1), ic(u, {
                    width: s,
                    height: s,
                    comps: [{
                        type: V,
                        background: "white",
                        borderWidth: 0,
                        rect: [0, 0, s, s]
                    }]
                }, 0, 0, s, s);
                var e = F.Math.generateUUID();
                return Af[e] = P, e
            },
            _80o: function(g, O) {
                var P = this,
                    H = P.gv,
                    I = H._picking;
                if (!I || H.isSelectable(P.data)) {
                    var A = P.shapeModel,
                        R = P.info;
                    if (A && A.vs && A.vs.length) {
                        var m = $f.for(g);
                        m.useProgram(P._asureProgram(g));
                        var _ = m.directUniforms(),
                            r = m.directAttribs();
                        _.modelMatrix = R.mat, _.modelViewMatrix = Qn([], H._viewMatrix, R.mat), _.projectionMatrix = H._projectMatrix, _.viewMatrix = H._viewMatrix, _.scale = H.getHeight() / 2, _.size = R.size, _.diffuse = R.diffuse, _.opacity = R.opacity, _.map = H.getTexture(R.texture, P.data), _.alphaTest = R.alphaTest, _.resolution = H.getDevicePixelRatio(), _.discardSelectable = R.discardSelectable, _.uvScale = R.uvScale, r.uvOffset = !I && A.os ? Cs(g, H._buffer.os, A.os, Y) : R.uvOffset, _.blackout = g._blooming && !P.data.s("bloom"), r.position = Cs(g, H._buffer.vs, A.vs, Y), I ? (_.picking = !0, r.pickColor = Cs(g, H._buffer.ps, A.ps, Y), _.useColor = !1, r.color = null) : (_.picking = !1, r.pickColor = null, A.cs ? (_.useColor = !0, r.color = Cs(g, H._buffer.cs, A.cs, Y)) : (_.useColor = !1, r.color = null)), A.ss ? (_.useSizeArray = !0, r.sizeArray = Cs(g, H._buffer.ss, A.ss, Y)) : (_.useSizeArray = !1, r.sizeArray = null), il(g, 0, A.vs.length / 3, g.POINTS), m.useProgram(O), r.disable(), H.shadowMap.enable && H.shadowMap.createShadow(), H.flowMap.createFlow(_)
                    }
                }
            },
            _asureProgram: function(W) {
                return W._pointsShader || (W._pointsShader = this.gv._postProcessing.createShader(W, dt.shaderSrc)), W._pointsShader.program
            },
            dispose: function() {
                dt.superClass.dispose.call(this);
                var B = this._startPickId,
                    V = this._lastPointNumber;
                if (B && V) {
                    for (var u = this.gv.pickColorMap, j = 0; V > j; j++) {
                        var M = B + j;
                        u[M] && delete u[M]
                    }
                    delete this._startPickId, delete this._lastPointNumber
                }
            }
        }), dt.shaderSrc = "!!~v!oj<g*p!s{n/!onpbjuu5j!tnppQewfnm!N.b!u0s!jfym<bd!tv!o)j!g>p+s!nf!{njbTuu5o!jnppQe`fmmhW!j*f!xfNwbjuusdjfyq<ts!fvQotjjg!p)s!ng!jn!bu<5*!!q1s/p2k!f.d!u>j>p!o^N!b4u!s]j^y!<3!!]vyojjsgupbsNno!pnjbuud5f!kwpjsfqx!N)b!u>s!jfyw<ju!dvfoqjtgspfsQnt!jg!mmppbpuc!!tdbm~f!<<o!pbjuuuvsmjpctvfusf!!+w!ffd{4j!tq!p>t!jfu{jjpTou<ojp!Qv`omjhg!ps|n!!fctpmpfm!!~v!tf<Doppmjpusv<mp!tbfusu!s+j!czvbusfs!Bwff{dj5t!!d>p!mfp{sj<Tu!owjbpsQz`jmohh!!w|f!d*5z!bwsDspBmfp{sj<Tft!vb)u!ugsjj!cv<uofp!jwufjdt3p!QvwwnP!g+g!tyfjus<ub!Nwobpsjzujdofhk!pwsfqd!3>!!woPpgjgutjftup<Q`m!hv!oj<goppsjnu!jctpppQmw!nq!j+d!lyjjoshu<bN!xbfujuWsmjfcevpunf!!>w!fodp5j!uqjjtdplQDwpnm!ps<<*!1!/v2o!j-gepfsnns!pggmtpobbus!ut!j){5fd<fw!!v>o!jogppjsunj!tgpmQpwbnu!!5sdfftwp!mv<u*j!poop<ju!jvtopjqg!p)s4nd!fcwp!p>m!!evftnfsTpjg{tfoBbsssub!z4<df!wb!uu<s*jucfvtugfg!Pgwmvp)b3ud!ftwj!{>f!Busfstbgzg<Pw!!c~p!pm<!sjptmQpfds!t>q!fsdpumjpwDfwN!bu|s!j*ys)p!mnpbDuf5t!vn)!!*g!j|!f!tsmffu!vs~o!!n<]s!p3m!p^D]l!d4j!q^!!>>!>s!p.m!p2D/w1!<|!!~*ho!jwlpdjjeq!)n!bgjjo!)*|!^#!!~qs~f!dj<tsjppmop!Difjthvigqg!jgem!p>b!us<pm!p$DehfbgsjGo`fm!hV!TF|`!NfBtQmf!!v~o!jg<psspnm!pwDfwd!5>!!esjpgmgpvDthfb<sG!`vmohj!gp<sens!bgdmtpjbeu!!*p1q/b1d!j>u>z!<b/!svpomjpgDpfstnv!gggmjpeb)u!!gbjm!qi|b!U*fhtouj<ldj!qv)o!jggjp!sn<!ecspbpdmt!jvet!f*DuptmfpUsb<iq!mwbb!s=z!jbo/hs!pwmfpdD5f!twvDgpgmjpes)<!gj!!vogjjgeposfn$!!cp~p!m!<q*jwdvl!j-oqhb<n!!)vEo3jfgspvsuny!fcup!p>m+!!esjptmdpbDsfetTvfgmgfjdeu!bc<muff<tgg!Pvwo!j>g,p!swnv!!cp<pfmm!bcdmTbwdvl!p+v!ue<spp!DvuoojjgppQs`nm!hw!f>d!3w!vv!w3Tddfbwm!f<|!!*wfbmsczbjuodhf!mwffTde3s!bwdPtgjgetaf!u}<}!h$ojjgl!dejfqgaj)o!fgej)!!V*T!FQ`BNNB`QF!T*V!!)veofjogjpgsfne!!tgbjn$q!mf~s!3E<!*n!bzqu<jd$bfqope!j+g!b/wfptjveg!gnjbej!o-){*z!y|/f!tjvgg!g)jcem!b)d5ldpfvwu!*>!!|s!phmmp`DGfstbvhgDgpjmep!s!|>!!fwtfmdf5!)~1!/1<-*!!1z/u1j-d!b1q/p1!-+!!2b//1s*p<m!psDfwu!v-s{oz<y!/~spm!pwDfwd!5)!5edjfgwg!v>t!fsDppmmppDsf<tv!gjggj!e)!aq|j!d*lsjpomhp!D%f%t!v";
        var gt = function(c, h) {
            ip(gt, this, [c, h]), this._needRecoverPosition = !0
        };
        Wj(gt, $s, {
            _25Q: 1,
            validate: function(f) {
                var P = this,
                    S = P.data,
                    R = P.s,
                    t = S.getPoints(),
                    b = t.size();
                P.dispatchBoundingBoxChanged();
                var y = S.p3(),
                    W = P.mat = Yn();
                bq(W, y), cr(W, S.getFinalRotation3d(), S.getRotationMode());
                var K = S.getScale3d(),
                    o = S._dynamicScale3d;
                if (o && (K[0] *= o[0], K[1] *= o[1], K[2] *= o[2]), Rp(W, K), bq(W, wp(y)), (!P.s("geometry.cache") || !P.shapeModel) && (P.shapeModel = P.info = P.lineShapeModel = Y, b > 1)) {
                    var N = P.info = {},
                        J = S.getSegments(),
                        x = S.getThickness(),
                        G = Ki(t.get(0)),
                        V = Ki(t.get(b - 1)),
                        Q = b % 2;
                    0 === Q ? (N.c1 = Ki(t.get(b / 2 - 1)), N.c2 = Ki(t.get(b / 2))) : N.p3 = Ki(t.get((b - Q) / 2)), N.s1 = G, N.s2 = Ki(t.get(1)), N.t1 = Ki(t.get(b - 2)), N.t2 = V, N.list = R(zf) === Jo ? P.createTubeModel(t, J, x / 2, f) : P.createLineModel(t, J, x, "shape.border", "shape.dash")
                }
            },
            invalidateCachedGeometry: function() {
                this.shapeModel = this.info = this.lineShapeModel = Y
            },
            _80o: function(X, o, c) {
                var S = this,
                    a = S.shapeModel;
                if (a) {
                    var F = S.gv;
                    Yb(F, S.mat), Rr(F, S.data, a, S, S.getBodyColor(), c), Gb(F)
                }
            }
        });
        var ht = F.graph3d.PostProcessing = function(Z) {
                function b() {
                    if (!p) {
                        var $ = Z.getGL();
                        p = new Hn.RenderTarget(Z, $, null, null, {
                            samples: A.renderTextureSamples || 1,
                            minFilter: $.LINEAR,
                            magFilter: $.LINEAR
                        }), F = new Ik.Shader($, t.vs, t.fs), K = Ik.Buffer.createIndexBuffer($, new Uint16Array([0, 2, 1, 1, 2, 3])), W = Ik.Buffer.createVertexBuffer($, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
                    }
                }
                var p, F, K, W, w = this,
                    x = {},
                    u = !1;
                ! function() {
                    G.keys(ht).forEach(function(C) {
                        x[C] = new ht[C](Z)
                    })
                }(), w.getModule = function(P) {
                    return P ? x[P] : w
                }, w.getModuleList = function() {
                    return G.keys(x)
                }, w._serializable = !0, w.handleDataModleChange = function(J, Q) {
                    J && (w._serializable && J.setPostProcessingData(w.serialize()), J.removeSerializeListener(w.onDataModelSerialize, w)), Q && (Q.addSerializeListener(w.onDataModelSerialize, w), w.deserialize(Q))
                }, w.onDataModelSerialize = function(F) {
                    "serialize" === F.type ? w._serializable && (Z.dm()._postProcessingData = w.serialize()) : "deserialize" === F.type && w.deserialize(Z.dm())
                }, w.isDeserializeDisabled = function(j) {
                    return !w._serializable || j.a("sceneBloom") !== O
                }, w.isSerializable = function() {
                    return w._serializable
                }, w.setSerializable = function(Y) {
                    w._serializable = Y, Y || Z.dm().setPostProcessingData(O)
                }, w.serialize = function() {
                    var i, j, O, Z, p = {};
                    for (j in x)
                        if (O = x[j], Z = O.serializeProperties) {
                            i = {}, O.enable && (i.enable = !0);
                            for (var V in Z) {
                                var r = O[V];
                                r != Z[V] && (i[V] = r)
                            }
                            G.keys(i).length && (p[j.toLowerCase()] = i)
                        }
                    return p
                }, w.deserialize = function(y) {
                    var B, o, R, V, k, E = {},
                        Y = {};
                    for (B in x) {
                        R = x[B], V = R.serializeProperties;
                        var Q = {},
                            f = "scene" + B,
                            q = y.a(f);
                        q !== O && (Q.enable = q);
                        for (var k in V) q = y.a(f + k[0].toUpperCase() + k.slice(1)), q !== O && q !== V[k] && (Q[k] = q);
                        Mq(Q) || (Y[B[0].toLowerCase() + B.slice(1)] = Q)
                    }
                    if (Mq(Y) && (Y = y.getPostProcessingData()), Y)
                        for (o in Y)
                            if (o && (B = o[0].toUpperCase() + o.slice(1), R = x[B])) {
                                E[B] = !0, V = Y[o];
                                var _ = !!V.enable;
                                w.enableModule(B, _), B = "scene" + B, y.a(B, _), R.resetProperties && R.resetProperties();
                                for (k in V)
                                    if ("enable" !== k) {
                                        var q = V[k];
                                        R[k] = q, y.a(B + k[0].toUpperCase() + k.slice(1), q)
                                    }
                            }
                    for (B in x) E[B] || (R = x[B], R.enable = !1, R.resetProperties && R.resetProperties())
                }, w.getRenderTarget = function() {
                    return p
                }, w.blitScreen = function(L, j, A, J, z) {
                    var w = Z.getGL();
                    if (w) {
                        L && (L.bind(w), Z.setViewport(w, 0, 0, L.width, L.height)), z && z.clear === !1 || w.clear(w.COLOR_BUFFER_BIT | w.DEPTH_BUFFER_BIT), b(), A || (A = F), A.bind(), w.activeTexture(w.TEXTURE0 + 0), wq(w, j || w._emptyTexture);
                        var h = A.uniforms;
                        h.image = 0;
                        var D = 1;
                        if (J)
                            for (var n in J) {
                                var f = J[n];
                                f instanceof WebGLTexture && (w.activeTexture(w.TEXTURE0 + D), wq(w, f), f = D, D++), h[n] = f
                            }
                        if (K.upload(), W.upload(), A.attributes.pos.pointer(W), w.drawElements(w.TRIANGLES, 6, w.UNSIGNED_SHORT, 0), D > 1)
                            for (; --D >= 0;) w.activeTexture(w.TEXTURE0 + D), wq(w, null);
                        else wq(w, null);
                        L && L.unbind(w)
                    }
                }, w.decodeShader = function(f) {
                    var y, h, p, I = "",
                        a = "";
                    for (p = 0; p < f.length; p++) y = f[p], "%" === y ? y = "'" : "a" === y ? y = '"' : "]" === y && (y = "\\"), h = String.fromCharCode(y.charCodeAt(0) - 1), p % 2 ? a += h : I = h + I;
                    return a + I
                }, w.createShader = function(n, Y, F) {
                    var h, J;
                    if ("string" == typeof Y) {
                        var r = Y.indexOf("^#");
                        h = w.decodeShader(Y.substr(0, r)), J = w.decodeShader(Y.substr(r + 2))
                    } else h = Y.vs, J = Y.fs;
                    if (F) {
                        var j = F(h, J);
                        j && j.vs && (h = j.vs), j && j.fs && (J = j.fs)
                    }
                    return new Ik.Shader(n, h, J)
                }, w.enableModule = function(r, G) {
                    var q, Z, K, v = r.split(",");
                    for (q = 0, Z = v.length; Z > q; q++) K = v[q].trim(), x[K] && (x[K].enable = G);
                    u = !1;
                    for (K in x)
                        if (x[K].enable) {
                            u = !0;
                            break
                        }
                    u && b()
                };
                var t = w.blitScreenShaderSrc = {
                    vs: ["attribute vec2 pos;", "varying vec2 vUv;", "void main(void) {", "gl_Position = vec4(pos.x * 2.0 - 1.0, -pos.y * 2.0 + 1.0, 0.0, 1.0);", "vUv = vec2(pos.x, 1.0 - pos.y);", "}"].join("\n"),
                    fs: ["precision highp float;", "uniform sampler2D image;", "varying vec2 vUv;", "void main() {", "gl_FragColor = texture2D(image, vUv);", "}"].join("\n")
                };
                w.render = function(e, R, $, j) {
                    if (u) {
                        p.setSize(e, R, $), p.bind(e);
                        var O = e.getParameter(e.COLOR_CLEAR_VALUE);
                        O && 0 === O[0] && 0 === O[1] && 0 === O[2] && 0 === O[3] ? O = null : kj(e, [0, 0, 0, 0]), e.clear(e.COLOR_BUFFER_BIT | e.DEPTH_BUFFER_BIT), Z.setViewport(e, 0, 0, R, $), j = j || {};
                        var t = j.renderAxis !== !1,
                            G = j.renderEdit !== !1;
                        j.renderAxis = j.renderEdit = !1, Z.renderScene(j), p.unbind(e);
                        for (var n = 0, C = Z._glCapabilities.maxAttributes; C > n; n++) e.disableVertexAttribArray(n);
                        var q, U = p;
                        for (q in x) U = x[q]._42(e, U) || U;
                        Z.setViewport(e, 0, 0, R, $), O && kj(e, O);
                        var g = w.getModule("Fxaa");
                        return g && g.enable ? w.blitScreen(null, U.texture, g.getShader(e), {
                            resolution: [1 / R, 1 / $]
                        }) : w.blitScreen(null, U.texture), e.useProgram(Z._prg), Z._renderAxisAndEditHelper(t, G), !0
                    }
                }
            },
            it = F.graph3d.PostProcessing.HueSaturation = function(W) {
                function V() {
                    Z = !0;
                    var Q = W.getGL();
                    b = new Hn.RenderTarget(W, Q), o = W._postProcessing.createShader(Q, it.hueSaturationShader), P = Ik.Buffer.createIndexBuffer(Q, new Uint16Array([0, 2, 1, 1, 2, 3])), d = Ik.Buffer.createVertexBuffer(Q, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
                }
                var P, d, o, b, a = this,
                    m = !1,
                    Z = !1,
                    M = [],
                    Q = [],
                    p = [];
                this.serializeProperties = {
                    hue: [0, 0, 0, 0, 0, 0, 0],
                    saturation: [0, 0, 0, 0, 0, 0, 0],
                    lightness: [0, 0, 0, 0, 0, 0, 0]
                }, this.resetProperties = function() {
                    var n = this.serializeProperties;
                    for (var s in n) this[s] = n[s]
                }, this.resetProperties(), G.defineProperties(a, {
                    enable: {
                        get: function() {
                            return m
                        },
                        set: function(C) {
                            !!m != !!C && (m = C, C && !Z && V(), W.iv())
                        }
                    },
                    hue: {
                        get: function() {
                            return M.map(function(C) {
                                return e(180 * C)
                            })
                        },
                        set: function(s) {
                            if (M !== s && 7 === s.length) {
                                for (var v = 0; 7 > v; v++) M[v] = s[v] / 180;
                                W.iv()
                            }
                        }
                    },
                    saturation: {
                        get: function() {
                            return Q.map(function(O) {
                                return e(100 * O)
                            })
                        },
                        set: function(X) {
                            if (Q !== X && 7 === X.length) {
                                for (var Z = 0; 7 > Z; Z++) Q[Z] = X[Z] / 100;
                                W.iv()
                            }
                        }
                    },
                    lightness: {
                        get: function() {
                            return p.map(function(v) {
                                return e(100 * v)
                            })
                        },
                        set: function($) {
                            if (p !== $ && 7 === $.length) {
                                for (var S = 0; 7 > S; S++) p[S] = $[S] / 100;
                                W.iv()
                            }
                        }
                    }
                }), a._42 = function(H, t) {
                    if (m) {
                        Z || V();
                        var J = t.width,
                            A = t.height;
                        if (J && A) {
                            b.setSize(H, J, A), pm(H, b.frame), W.setViewport(H, 0, 0, b.width, b.height), H.clear(H.COLOR_BUFFER_BIT | H.DEPTH_BUFFER_BIT), o.bind(), H.activeTexture(H.TEXTURE0 + 0), wq(H, t.texture);
                            var S = o.uniforms;
                            return S.image = 0, S.hue = M, S.saturation = Q, S.lightness = p, P.upload(), d.upload(), o.attributes.pos.pointer(d), H.drawElements(H.TRIANGLES, 6, H.UNSIGNED_SHORT, 0), wq(H, null), Qk(H), b
                        }
                    }
                }
            };
        it.hueSaturationShader = "!!b~u!us<j*czv/utfp!qw!f.d!31!/q2p!t-<y/!twpbqs)z3jdofhw!!w>f!dw3V!ww!Vw<<*1/!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+!!hzm/`tQppqt.j!u-j1p/o2!!>.!!w1f/d35!)+q!pyt/^#!!q~s!fd<j*txj/psop!mipjdh!i-q*!mgtmip)bcuh<s3!mvtoij)g5pdsfnw!!t>b!nsqpmmfpsD3hEb!sjGn`bmhhf!<<!*w!bs*zfjhoohb!Swtftdf3o!uwiVhwj<m!-!^$1e]ftgtjfoofu!iNhBjYm`!S-B{O/HmFt!i8)t!t$feofugijhojfm!`SqBbOnH!F`-B*MfMh!o1bSo!pvjoujbgspvsunb!tg!m-p^b1u]!oipvjfu]bNsBvYu`bStB!O-HzF/^m<ti!)voopjjgupbssnv!ugbmtp`bqub!nt!bu-v*sfbhuojbpSof]vNiB!Y-`^S1B]OfHvFi^!<-y!/vmotjig)pfsvni!`gqmbpnb!u!)m4jdhfiwu!o>f!tmtt]iN!BY`~S!BO~H!F^<<lbf!sgcm!pb<u^!snfbuqo`vipvdf`)fgvmip]btut!fjoouWibhmjvmf!->!!gfmhpobbuS!titvffoBumimh-j!mg!mp<b^us!fiuvofvSpbdo`hffv*i!]|op!jgumbpsbvuu!bwtb!m>v!ff!h>o!bjSooWpbjmuvbfs!v,u!b)ti!vf<B^msmf!u,o!vipvdf`Sfbvoih]ff*v!i0!!>3!/f1h<obS!fjvgi!!)w|b!m*vffh!o=b!s1!/>1>*!!ssffuuovvspod!`wfbvmiv)f!!g,j!!2/|1!<*,!,fsmftufo!vjpgd!`)fwvbim!v<fF!H?O!B2S/`1Y*B!Ns!f=u!vssfou!owvbpmdv`ff!v.i!!2</11!<>!!sffmutofv!psdf`ufvvsio!!uwobjm)v!fs<pg!!~<!2g!m,p!bfuh!onbbsq!`>t!bfuhvosbbsu!jp<o1)!g>m!pfbhuo!bjso!W*b7m!v>f?-!!fghmopbbsu)!!tgbju!vs~b!uj~p!oB<mlmb-f!sgcm!pb<us!ftubouvvpsdb`ufjvpio!S>b!ofhhfo*b!s|!!|g!m*p6b/u1!!w,b!m*vsff!u>o!vjpodW`bfmvvif)!u+b!p)m2g/!1=!!,i!)t!bgujv!sb|u!j*p,o,Bsmfmu!o,v!ptdb`ufvvsib!u<jFpHoOSBbSo`hYfB*N<!=!!ssffuuvosvop!dd`mfbvniq!)<w1b!m>v!fs-f!u1o/v1p-d!`2f/v1i*!<uo!j~)!!sgpmgp!bu!<nfbhqo`bmSjthtifuooufithtj)mg!m-pfbhuo!bjSooWpbjmuvbfs-v!ugbmtp!b-uf!hmojbhSifuvoif!tutbBpmmmg-!!g<m1p!b>u!!fmhjohbisu!oufotjt!Sb<oehmfp*i!t|fs!igum`pfbvui!!wu!b>p!mmgj!hi<u1o/f7t!t+B!mym/!m,t!im!j>h!iiu!oufbtptmSgb!oh<f*<{z!yj/gs!p)mwp!d=)!m1t/i13*ch!ss!f>u!vmstoi!!j4odWfbwm!vf<!*+w!V)ww!!-,f!h2b/n1j*)<E3!ffsmvtufyf!us!f>u!vsspom!pjdo!W5bdmfvwf!!,|!!)*w)!o+j!b)n2!/e1j!p.w!!joW~b!mv<f**m*!<-t!!~-i!)g4mdpfbwu!!oisvvfu3fssh!c)~g!mp<b1u/!7g!20-!!ig!m>p!biu!!g~3!-!<g1m/p7b!u>!,i!vif!*!||!*!1j/g1!!)=i!vif)!!=g!j1!/1*~!!i<vbfu!m,f>E!d2!/01!<*h!!f.m!tsf)!!j,g!!1)/i5v!f>!!?i!!2/|1!*ft!mifv!f~!!.><!b2u/m1f<Ed!!g0m!p*bsu!!.s!fct)<!,!!j1g/!3)!)>7!/i1!!+|!!i*vyfb*N!d=!!>2>/!1h*)!!gsjf!tf!t>m!fg!2~!!,!<)bgu3m!f.E!dg!20*!!*+c!!7./!1h!)+!!>i!vif!<|!!f*mytbfN!dj!g>!>)!)s3)/!1g!j+!!iv<f***!o=j!N2d/!1,*!y!bsNfdt)!!>.!!g13/<3)!!f0m!tbfu!mjfgE!d)!);4!/*1o!j+N!di!v,f!*y!b=N!d3)/!10*!b!usmfftE!d>!!@g!26!/,1!!)=g!3m!!.>!!gt2!*!+<!o)j)N3d/!1.!!0y!b4N/d1!*>!!.b!uimvffE*d!!+u!b7p/m1g<!!|f!m*tofjN!ds!f?t!!y>b!Ngd2)<!g!js!fuv<s1o/!3s!f0t!<*o!j~Nd!!,w!fydb4N!di)t!m>3!smh!c)w<f*d*4c!!i-thm)*y!b|n!!-wsf)dy4b!ns!h>c!<ybN!dj!gu!b)pimtgm!/z<!*>*>c!!1-/h1)*o!j|n!!-ssh)co!j>n!!w>f!do4j)Nidt!mu/b{p*m<g!!~<!cf/mdt!f>!!|c!!ugbmppmbgu!!g<3h</d!!>j!gh!!)uibtpmm/g{!!=<!s1//d6!*>!!sg!3u!b>p!migt!m/<{1!/+1!!)>2!/m1!!u,b!pimtgm!/z<*1</1!!f>m!ttf!u!bgp3m!g>!!i<t1m//2{.!!,>!!iit!mu/bzp!m.g!!it|m!/*zd!!+4!diftwm)/m{t<i3c!hgsm!p4bduf!wg!2!>~!!3/<1c!h+s!!iotsmv/u{f!s.!!g~3!<<*!*s1h/c4/0s1!/>2!)i!v.f!3ys/hmct)ig!2--3!gg!3--2!gi)tcmh/sy3!f,v!i)!2>/!1c0/4c/h1s*!*<<*!ys/hmct/ih!!->3!gi!v-f23gs)hc";
        var jt = F.graph3d.PostProcessing.Bloom = function(e) {
            function K() {
                var p = e.getGL();
                if (p)
                    for (var u = e._postProcessing, k = 0; J > k; k++) X[k] = u.createShader(p, jt._35Q, function(t, A) {
                        return {
                            fs: A.replace(/DEFINE_VALUE/g, w[k]).replace("%OVERRIDE_ALPHA_DEFINE%", n ? "#define OVERRIDE_ALPHA" : "")
                        }
                    })
            }

            function C() {
                var G = e.getWidth(),
                    p = e.getHeight();
                if (G && p) {
                    g = [G, p], j = !0;
                    var O, t = e.getGL(),
                        C = Math.round(g[0] / 2),
                        q = Math.round(g[1] / 2);
                    for (H = new Hn.RenderTarget(e, t, C, q), O = 0; J > O; O++) D.push(new Hn.RenderTarget(e, t, C, q)), x.push(new Hn.RenderTarget(e, t, C, q)), C = Math.round(C / 2), q = Math.round(q / 2);
                    var A = e._postProcessing;
                    W = A.createShader(t, jt._34Q), K(), l = A.createShader(t, jt._36Q, function(m, f) {
                        return {
                            fs: f.replace(/NUM_MIPS/g, J)
                        }
                    }), a = A.createShader(t, jt.finalShader), R = Ik.Buffer.createIndexBuffer(t, new Uint16Array([0, 2, 1, 1, 2, 3])), S = Ik.Buffer.createVertexBuffer(t, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
                }
            }
            var f, T, V, n, Y, R, S, L, N = this,
                F = !1,
                j = !1;
            this.serializeProperties = {
                strength: 1.5,
                threshold: .55,
                radius: .4,
                overrideAlpha: !0,
                selective: !1
            }, this.resetProperties = function() {
                var i = this.serializeProperties;
                for (var N in i) this[N] = i[N]
            }, G.defineProperties(N, {
                enable: {
                    get: function() {
                        return F
                    },
                    set: function(r) {
                        !!F != !!r && (F = r, r && !j && C(), e.iv())
                    }
                },
                strength: {
                    get: function() {
                        return f
                    },
                    set: function(u) {
                        f !== u && (f = u, e.iv())
                    }
                },
                threshold: {
                    get: function() {
                        return T
                    },
                    set: function(D) {
                        T !== D && (T = D, e.iv())
                    }
                },
                radius: {
                    get: function() {
                        return V
                    },
                    set: function(K) {
                        V !== K && (V = K, e.iv())
                    }
                },
                overrideAlpha: {
                    get: function() {
                        return n
                    },
                    set: function(v) {
                        !!n != !!v && (n = v, j && K(), e.iv())
                    }
                },
                selective: {
                    get: function() {
                        return Y
                    },
                    set: function(b) {
                        !!Y != !!b && (Y = !!b, e.iv())
                    }
                }
            }), this.resetProperties();
            var H, W, l, a, g = [256, 256],
                D = [],
                x = [],
                J = 5,
                w = [3, 5, 7, 9, 11],
                X = [];
            N._42 = function(N, i) {
                function h(y, B, C, g) {
                    pm(N, B.frame), e.setViewport(N, 0, 0, B.width, B.height), g ? g(N) : N.clear(N.COLOR_BUFFER_BIT | N.DEPTH_BUFFER_BIT), $ !== y && y.bind();
                    var F = 0;
                    for (var X in C) {
                        var Y = C[X];
                        Y instanceof WebGLTexture && (N.activeTexture(N.TEXTURE0 + F), wq(N, Y), Y = F, F++), y.uniforms[X] = Y
                    }
                    for ($ !== y && (R.upload(), S.upload(), y.attributes.pos.pointer(S), $ = y), N.drawElements(N.TRIANGLES, 6, N.UNSIGNED_SHORT, 0); F--;) N.activeTexture(N.TEXTURE0 + F), wq(N, null);
                    Qk(N)
                }
                if (F && (j || (C(), j))) {
                    var $;
                    if (Y) {
                        L || (L = new Hn.RenderTarget(e, N)), L.setSize(N, i.width, i.height), L.bind(N);
                        var c = N.getParameter(N.COLOR_CLEAR_VALUE);
                        c && 0 === c[0] && 0 === c[1] && 0 === c[2] && 1 === c[3] ? c = null : kj(N, [0, 0, 0, 1]), N.clear(N.COLOR_BUFFER_BIT | N.DEPTH_BUFFER_BIT), e.setViewport(N, 0, 0, i.width, i.height), N._blooming = !0, e.syncRenderState(), e.renderScene({
                            renderAxis: !1,
                            renderGrid: !1,
                            renderEdit: !1
                        }), N._blooming = !1, c && kj(N, c), L.unbind(N)
                    }
                    h(W, H, {
                        smoothWidth: .01,
                        luminosityThreshold: T,
                        tDiffuse: Y ? L.texture : i.texture
                    });
                    var n, Z = H,
                        z = Math.round(g[0] / 2),
                        I = Math.round(g[1] / 2);
                    for (n = 0; J > n; n++) h(X[n], D[n], {
                        colorTexture: Z.texture,
                        direction: [1, 0],
                        texSize: [z, I]
                    }), h(X[n], x[n], {
                        colorTexture: D[n].texture,
                        direction: [0, 1],
                        texSize: [z, I]
                    }), z = Math.round(z / 2), I = Math.round(I / 2), Z = x[n];
                    return h(l, D[0], {
                        blurTexture1: x[0].texture,
                        blurTexture2: x[1].texture,
                        blurTexture3: x[2].texture,
                        blurTexture4: x[3].texture,
                        blurTexture5: x[4].texture,
                        bloomStrength: f,
                        bloomRadius: V,
                        bloomTintColor: [1, 1, 1]
                    }), h(a, i, {
                        image: D[0].texture
                    }, function(x) {
                        $f.for(x).glState.blend.apply({
                            enabled: !0,
                            equation: x.FUNC_ADD,
                            func: [x.SRC_ALPHA, x.ONE]
                        })
                    }), $f.for(N).glState.blend.apply({
                        equation: N.FUNC_ADD,
                        func: [N.SRC_ALPHA, N.ONE_MINUS_SRC_ALPHA, N.ONE, N.ONE_MINUS_SRC_ALPHA]
                    }), i
                }
            }
        };
        jt._34Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*d!jbtijqpmob!!i-jmhfiyqf!ug!m-psbpum<pDvuovjqgupvspn!!)tybjnnq!m>f!ss3pEm!puDEhjbgsgGv`tmfh<<v*o!jwg!p-sinu!egjmXpibuup!pmnvtn!j,o!petmjpuiztUfissifUtziupjmtep<ojvnovjmg!p-senm!pgimtpfbsui!UtznupjptupioXjjnevumi!<)qwfbustzijuophp!nwtf!d>3!!bwiVqwm<b!wupbjpem!gnb<j*o1)/*1!!|-1w/f1d!5-!1u/f1y!f-m1!/>1!)u5fdyfuwv!s>f!3sEp)m!puDEujvgqguvvtpf!-5!dwfVww!<**<!bwnfvdm4!!-m{vznyb/!m>f!ywffud!4))u!p1e/!3>:!:w-!!u1b/p6m9g8-<!*1!/522", jt._35Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qsgfjdejotfj$po<!*ibj/hyijqQ!fgsmvpubyuf<u!w-bnsvzTjuoihh!jwffxd03n!vwTVfwt<vgvgojjeg)p5sdnf!wt!b>n!qsmpfmsp3DEh!bdspGm`pmshUffytumvfs$f<<*v1o/j2g!p-snnv!Twufidh3j!fuxf0ynTvjT{fft<vgvgojjeg)p5sdnf!ww!f>d!3s!pemjpsDfhdbusjGp`om<h$BeIfQgMjBo`fF!ELJFSSSOFFWMP`!SgBfEeJgVjT$!E~FG<JxO!F+`!W1B/M3V!F>,$!enfvgTjuoifh!jTfJxHN<Bx!!E+F!G*J3OfFm`qWnBbMtV!F,!&2PfWmFqSnSbJtE)F!`>B,M!QnIvBT`fEtFvGgJgOjFe&<gcmhpsb/u*!uhfbtvgtgtPjwbvo!Q.e!gw)Vjwo!!-gfmspvbuuy!fyU-s!pjmop!dg!m)pEb3uf!stvjuhynfbu*!!>|!3sffmuqvnsbot!!14/d4f:w9:<5c!h+s!/f*yuqf)t!g.g1P/w6v!!+,!!yw!V+w!!y-0f)s!vtujyhfnUbs!p+m!ptdj!h)nEb3*f*s0vtujyhfnub!<>!~2fwmpqjneb!tn!b4jdof)w*!<|y!w+f!df3{!jjTowwoTjj!{+f!!o>p!j2u/d1f!s0j!eu!f>y!Tujf{tfg<gPgwmvp!b3ud!fgwTj<h*nbbn!h>j!Tggm!p-byu))gTeJQHoNbBj*t<tvgbmhp!b>u!!xx!fujbhpimugTv<n*!j>)!uhbbpvmtgt!j>b!oyQ!eugb)p1m/g1-|!!g*T!j,h,n!bj*!<<TwVfJdE5B!Su`fMyFuOvSsFfLQ!j=y!!j>!!<u2f!y>u!vjs!fu3oEj)!!)dsppmgps<UnfvyTuuvishfj-f!xw!V+w!*c<hsw/fydj4Q!fesjvgugyvftuf!T>v!n", jt._36Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*d!j*twjVpwo!!-i6jfhsivqu!ygfmUpsbvum<c)wEb3sfzsjvouhy!fwuf!d+3!!*w1V/w2<!-vsopjmgppDsuno!jtUbnnpqpmmfcs)35Ed!fcwm!v+s!U*f3y/u1v)ssfp2u<dbvGonjpgppmsCnq!stfbmnq!m,f!s*3wEV!wc!m-v5sfUsfvyuuyvfsUfs3v<mcv)oEj3gfpssvnu!ytfbun!q+m!f*s13/E2!!c-msvpsmUpfDyuuovjsUfn4p<pmvco)j5gdpfswn!!+t!b*n5q/m1f)ss3pEu!dcbmGvnspUpfmyCuqvssffm5<!,v!o*jwgVpws!n-!4tfbsnvqumyffsU3sEv!mccm)vEs3Uffsyvuuvysffu6!<+!v*o1j/g2p!s-ns!ptmbpnDqumofjsU3nEp!pemjcs)u5Udffywu!v+s!f*<7/v1o)jsgppusdnb!GgnmpppbmuC!qcsmfpmpn!T,u!s*fwoVhwu!i-<3fvsovjugypfsUns!vgmmcp)bEu3!fcsmvpupynfSub!e+j!v*t1</2v!o-jsgppmspnD!uwofjdU4n!pcpmmpcp)n5Udjfowu!D+p!m*p9s/<1)gsmppubdub!GmnfpspqmCCmqpspfnmGb!d,u!p*sw)Vdwp!o-t2uf!sjvou!ygfmUpsbvum!cg)bEd3ufpssv*u!y|fug!m+p!b*u1!/n2j!s-ssppsmGpbDduuopjsU!n>p!p2m/c3)!5.d!fgwb!d+u!p*s1</2s)fsupvusdob!Gnnjpyp)mgCbqdsufpms!-)!!n+j!sisuphsoGfbsduuTpnsp-p!mccm!p>p!nsSpbmepjDvhtb*s<G`~mhwp|j!e*!)nobj", jt.finalShader = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*dwjVtwj!p-of!hibjnhji)qE!3gfmspvbuuy<fuv!o>j!gsppsmnp!DthbbnsqGm`fmsh3E|!!j*n)bohjfb<n!webjspzwjo<hw!Vwwf!d3";
        var kt = F.graph3d.PostProcessing.Dof = function(W) {
            function b() {
                y = !0;
                var V = W.getGL();
                P = new Hn.RenderTarget(W, V), s = W._postProcessing.createShader(V, kt._38Q), q = Ik.Buffer.createIndexBuffer(V, new Uint16Array([0, 2, 1, 1, 2, 3])), x = Ik.Buffer.createVertexBuffer(V, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
            }

            function R(y, X, q, O) {
                $ = null;
                var p = y.getCanvas(),
                    P = p.width,
                    r = p.height;
                if (q = q || 1024, P > q || r > q) {
                    var x = q / Math.max(P, r);
                    P = Math.round(P * x), r = Math.round(r * x), K || (K = ts()), p = z.resizeImage(p, P, r, K)
                }
                var M = W.getGL();
                if (J || (J = M.createTexture()), m = wn(M, p, J), N = X || .01, A = !0, W.iv(), O--) {
                    if ($) return;
                    $ = z.callLater(function() {
                        R(y, X, q, O)
                    })
                }
            }
            var P, s, q, x, m, f, C, L, K, J, $, p = this,
                M = !1,
                y = !1,
                N = 0,
                A = !1,
                g = _q.generateUUID();
            this.serializeProperties = {
                aperture: .025,
                maxblur: 1,
                image: null
            }, this.resetProperties = function() {
                var W = this.serializeProperties;
                for (var O in W) this[O] = W[O]
            }, G.defineProperties(p, {
                enable: {
                    get: function() {
                        return M
                    },
                    set: function(c) {
                        !!M != !!c && (M = c, c && !y && b(), c || (A = !1), W.iv())
                    }
                },
                image: {
                    get: function() {
                        return f
                    },
                    set: function(v) {
                        f !== v && (f = v, A = !1, m && (W.deleteTexture(g), m = null), W.iv())
                    }
                },
                maxblur: {
                    get: function() {
                        return C
                    },
                    set: function(k) {
                        C !== k && (C = k, W.iv())
                    }
                },
                aperture: {
                    get: function() {
                        return L
                    },
                    set: function(a) {
                        L !== a && (L = a, W.iv())
                    }
                }
            }), this.resetProperties(), p.setImageFromGraphView = function(X, Q, d) {
                this.image = null, R(X, Q, d, 2)
            }, p._42 = function(f, w) {
                function I(Y, Z, S, G) {
                    pm(f, Z.frame), W.setViewport(f, 0, 0, Z.width, Z.height), G ? G(f) : f.clear(f.COLOR_BUFFER_BIT | f.DEPTH_BUFFER_BIT), H !== Y && Y.bind();
                    var j = 0;
                    for (var P in S) {
                        var y = S[P];
                        y instanceof WebGLTexture && (f.activeTexture(f.TEXTURE0 + j), wq(f, y), y = j, j++), Y.uniforms[P] = y
                    }
                    for (H !== Y && (q.upload(), x.upload(), Y.attributes.pos.pointer(x), H = Y), f.drawElements(f.TRIANGLES, 6, f.UNSIGNED_SHORT, 0); j--;) f.activeTexture(f.TEXTURE0 + j), wq(f, null);
                    Qk(f)
                }
                if (M) {
                    y || b();
                    var H;
                    if (!m) {
                        var J = Di(this.image);
                        if (!J || !J.comps && !J.tagName) return w;
                        F.Default.setImage(g, J), m = W.getTexture(g)
                    }
                    var o = w.width,
                        v = w.height;
                    if (o && v) return P.setSize(f, o, v), I(s, P, {
                        tColor: w.texture,
                        tDepth: m,
                        aspect: o / v,
                        aperture: this.aperture,
                        maxblur: this.maxblur,
                        useG2d: A,
                        threshold: N
                    }), P
                }
            }
        };
        kt._38Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f1d/j2t!j>p!ob!/isjphmipqD!hgbmspGb`um<hw<b1s/z2j5o!h0!!wmfpdd3!!>w!Vswp<mpvDohjbgspGs`nm!hcp<p*m!!5vstvfmEcfgqpuei!<+!v*o!jugdpfssns!ptdbundqfmqftsb3!E+!!u*D!p5m/p1s!<-1v/o1j!g)p3sdnf!wt!b)n!q,m!fzsy3/Ew!VuwE!f-qsupim<pDvuo!j)gEp3sfns!vcupypfmu!!v>t,f!Hm3ped<<v*o!j5gspvsmnc!ggpmep!b+u!!*u!iusdfftsisppmdeu<dfvqotjbg!p+s!n*!!g:m3p/b1u.!!n-b:y3c/m1v.s!<)3vdofjwg!p)s!n,!!gzmyp/bwuV!wb!q-fsspumvpsDfu<!)vEo3jfgspvsuny!fgum!p>b,u!!mopfdbs<D*m!j5qs<vmvcogjpgep!s+n!!*g!mupdbfus!sgpbdsuDdmfjqqt<b!v+o!j*g!p1s/n1!!g-m5p/b1u.!!g)p3ddvftw<!)v!o,j!gzpys/nw!Vgwm!p-bsup!mbptDquf!d)uE<3fdspvoutyuf!ug!m>p,b!um!pVdoq<b*d!l5Espvxmoctgdpbem!f+!!>*!!3u6d6f/s!s0p!d3u6d7f/q<t!b0!0+!!1*/!/:23!/.1?!!-g:s3b/d1u.j!p)o3!d)ffwy!d)m!v,e!jzoyh/!w2V*w!d-psoptmup!Dwuf!d)4E!3QfbsdvluGybfduu!p>s,t!!m>p!dwf<d*4!)5!s3v6m7c/g!p+e!!3+6!7*/!!u+d!f3s6s7p/d-u!d3f6q7t/b!!++!!3*6!75//-1!.3!6-71//!1*!<)3ddpfowt!u)!!w,f!dz5y!/VwoVqwb!d-lsGpbmdpuDpus!t)!E>3!fVsovqubydfluE!p>x,o!tmdpbdmf<!*0!!5wsfvdm5c)g!pQeb!d+l!G*b!duudpfssts-p!d2u/d!f*q<tbg!m+p!b*u!!:v3o/q1b.d!l-S:H3C/B1U!p)E3fdqfuwi!))!!d,p!oztyu/!wjVow!!w-fsdp5m!pwD!u*!!)|E3!fssfvuuvysfou!!e>p,u!)m!pwd-!<V*o!q5bsdvlmGcbgdpuep!s+t!!**!<ud~fsgsmppdbuud!fhqftubE!f+q!u*i!)1!/d1p!o-t5u/!1j!o)!3wdffdw3!!)t!d,s!fzfyo/QwpVtwj!u-jsppom!p*D!u|!)\nEs3ffusvvsuoy!fvuo!q>b,d!lmSpHdCB<U*p!E5fsqvumic)g!puef!y+u!v*s!fu3dEf)s!supEdfuqdufiq-t!bt!d+s!f*f!o:Q3p/t1j!u-j:p3o/!1*!!)*3<df~w!g)m!p,b!uz!yq/fwsVtwq!f-dsupjmwpfDEuf!q)uEi3UfpsWvjufyxf[u)!!>d,p!omtpud!j<o*!!g8mspvbmuc!gjpoew!D+m!j*q![u-d!fdspsoptduu!djfoq!tgbm!p+b!u*!!o5f/b1s!--!1d/p1o!t)u3!djfow!!g)m!p,b!uz!yg/bwsV!w*!!-|sp!mspfDuuv!s)oE!3)f!sovfubysf!u+!!>g,b!sm!p*d!0<!*)!!8)s!vgmbcsg!p.e!!o+f!b*s!!u*d!f+s!sjpodwuDdmfjqqt[b!!.+!!g*b!s:!3*/<1.~!-g:m3p/b1u.!!h)f3udWfjwf!x)[!),!!dzpyo/twuV!wj!o-!sgpmmppbDuu!!e)fEq3ufis!v*u!y|fu\n!s>f,u!vmspod!q<f*s!t8qsfvdmucjgwpfeE!f+q!u*i!UupdWfjsfsxp[d)u!deffqqtubi!-+!!o*f!b1s/D1m!j-q5-/!1g.b!s)D3mdjfqw!!*)<!,~!zwyp/jweV!wn!b-jsop)m*p!D|u!w)fEd33f!sevpugycfmuv!s><,!wmfpdd3!<b*t!q8fsdvumdcpgspsef!d+u!!*>!!uwdffds3s)p!d2u/d1f-q!tbbt!q+f!d*u!!:*3</1j!g-!:)3v/t1f.E!f)q3udif*w!!|)!!,g!mzpyb/uw!Vwwj!f-xs[p!m>p!Dhuf!u)WEj3ffxs[v)u!yhffuu!E>f,q!umip)d!w<V*w!!8*s!v*m<cg!pgem!p+b!u*!!gubddfuspssp!d>u!d)f!qgtpbd!v+t!!*,!!5w/j1f.x![-!1*/<1!!)e3pdgfcwm!v)s!!,>!!zwyf/dw3V!w)!!-dsmpbmnpqD)u!!g)bEd3ufpssv!u+y!fbuq!f>s,u!vmspfd-!<.*n!b8yscvmmvcsg-p!en!b+y!c*m!vusd!f*s!s*p<du~dffqmttbf!!+|!*w!f:d35/!1u.f!y-f:m3!/>1!!u)f3ydufvws!f)3!E,)!!zuyE/fwqVuwi!--!swpfmdp3D)uw!V)wE/3yf-s!v2u/y1f!u.!!>w,V!wm/pzd*!<**<!8gsmvpmbcug!pbem!q+i!b*<!ujdgf!s)svptdfuHd3feq*t!b|!+b!m*q!i1b/!1>!!-t1n5p/p1u!i)t3udffqw)!!)u!i,s!fztyi/pwmVew-!!-usipsmfptDiup!m)eE!3,f!s1v/u1y2f-u!!u>f,y!fmmp/db!<**<!8~s!vfmmctgfp!e|!!+b!m*q!iubd!f>s!supfdyufdmf/qbt<b!!~+!!*e!p:g3c/m1v!s-!:>3!/w1f!d)33!d)f!wd!m)b!n,q!)z!yb/mwqViwb!!-+s!pbmqpfDsuu!v)sEf3-f!s.vnubyyfcum!v>s,-!!mnpbdyc<m*v!s:!s*v!m*c<gp~e!w+f!d*3!!uedpfgscsmpvdsu:d!f>q!tebp!g+c!m*v!s8!4+/!11./!:-<62w/f1d!3)!3edpfgwc!m)v!s,8!!z>y!/ewpVgwc!m-vssp!m+p!D1u/!8)<E3wffsdv3u!yefpug!c>m,v!sm5p!d>!<e*p!g:csmvvmsc!g+p!e1!/+5!<*!wufddf5s!sdppdmu!d>f!qwtfbd!5+)!!*1!/612!/*1<.!d-p8m4!/,1>.!!u)f3ydufvws!f)3!E,)!!zuyD/pwmVpws!--!swpVmwp/Dyuz!!)*E<3fdspvmu!y,f>u!!u>f,y!umvpsdf3<E*)!!:usDvpmmcpgsp-e!!w+V!w*/!yuzd!f,s!s)p!dwufddf3q)t!b1!/+1!-*!!16/25/!1*!!-+8!4b/t1q!f)d3uddfpws!s)f!d,u!!z*y!/+w!Vewp!g-csmpvmsp!D*u<!)dEp3mf!s,v>u!yuffuy!u>v,s!fm3pEd)!<u*D!p:mspvsm-c!gwpVew!/+y!z*!!,u!d)f!swsfpdd3u)d!f1q/t2b6!-+!!1*/!4884!/*1!!+-!6b2t/q1f.d!u)d3pdsfswf!d)u!!,*!!z+y!/ewpVgwc!m-vssp!m*p<Dud!p)mE!3,f>s!vuufyyfuuv!s>f,3!Em)p!duD<p*m!p:ss-v!mwcVgwp/ey!z+!!,*!!)u!dwffsds3p)d!u1d/f3q:t-b!!1+/!3*:!!8*4!/+1!.b!t-q6f2d/u1d.p!s)s3fddfuw!!*)!!+,!!ezpyg/cwmVvws!!-*s<pmdppDmu!!,)>E!3uffsyvuuvysffu3!E>),!!umDppdmp<s*-!!:wsVvwm/cygzp!e,!!+)!!*w!fudd3f)s!s.p1d/u4d8f-q!t1b/!2+6!!**!!6+2!/b1t.q!f-d8u4d/p1s!s)f3dduf!w*!!)+!!,e!pzgyc/mwvVsw!!*-<spdmppmD!u,!>)!Eu3ffysuvvusyff3uE!)>!,u!Dmppmdps<-*!!w:Vswv/myczg!p,e!!)+!!w*f!du3d)f!s1s/p5d1u-d!f1q/t1b!!*+!!+*!!b6t2q/f1d!u-d8p4s/s1f.d!u)!3*d!f+w!!e)p!g,c!mzvys/!w*V<w!d-psmp!m,p>D!uu!f)yEu3vfssfv3uEy)f!uu!D>p,m!pmsp-d!w<V*w!/:yszv!m,c!g)p!ew!f+d!3*)!!u1d/f4s8s-p!d.u1d/f2q6t!b*!!++!!*b!t8q4f/d1u!d-p6s2s/f1d!u)!3*d!f+w!!e)p!g,c!mzvys/!w*V<w!d-psmp!m,p>D!uu!f)yEu3vfssfv3uEy)f!uu!D>p,m!pmsp-d!w<V*w!/syvzm!c,g!p)e!!w+f!d*3!)u!d1f/s3s:p-d!u.d1f/q3t:b!!*+!!+*!!b8t4q/f1d.u!d-p6s2s/f1d!u)!3*d!f+w!!e)p!g,c!mzvys/!w*V<w!d-psmp!m,p>D!uu!f)yEu3vfssfv3uEy)f!uu!D>p,m!pmsp-d!w<V*w!/syvzm!c,g!p)e!!w+f!d*3!)u!d.f1s/s2p6d-u!d.f1q/t4b8!!+*!!*+!!:b3t/q1f.d!u-d:p3s/s1f.d!u)!3*d!f+w!!e)p!g,c!mzvys/!w*V<w!d-psmp!m,p>D!uu!f)yEu3vfssfv3uEy)f!uu!D>p,m!pmsp-d!w<V*w!/syvzm!c,g!p)e!!w+f!d*3!)u!d1f/s1s-p!d.u1d/f5q!t*b!!++!!b*t!q6f2d/u1d.p!s-s8f4d/u1!.*!!)+3!defpwg!c)m!v,s!!z*y</wdVpwm!!-,s>p!mupfDyuu!v)sEf33fEs)v!uuyDfpum!p>s,-!!mwpVdw/<y*z!!s,v!m)c!gwpfed!3+)!!*.!1u/d2f6s-s!p1d/u4d8f!q*t!b+!!+b!t*q!f1d/u1d!p-s5s/f1d.u!!)*3!d+f!we!p)g!c,m!vzsy!/*w<Vwd!p-ms!p,m>p!Duuf!y)uEv3sffs3vEu)y!fuuD!p>m,p!sm-p!dwV<w*/!yszv!m,c!g)p!ew!f+d!3*)!!u.d1f/s3s:p-d!u1d/f3q:t!b*!!++!!*b!t6q2f/d1u!d-p8s4s/f1d!u)!3*d!f+w!!e)p!g,c!mzvys/!w*V<w!d-psmp!m,p>D!uu!f)yEu3vfs";
        var lt = F.graph3d.PostProcessing.Blur = function(K) {
            function z() {
                X = !0;
                var B = K.getGL();
                d = new Hn.RenderTarget(K, B), _ = K._postProcessing.createShader(B, lt.hBlurShader), P = K._postProcessing.createShader(B, lt.vBlurShader)
            }
            var _, P, d, V, h, A, s, w, j, q = this,
                l = !1,
                X = !1;
            this.serializeProperties = {
                value: 0,
                downSample: !1,
                iterations: 1,
                layer: "main"
            }, this.resetProperties = function() {
                var B = this.serializeProperties;
                for (var F in B) this[F] = B[F]
            }, G.defineProperties(q, {
                enable: {
                    get: function() {
                        return l
                    },
                    set: function(q) {
                        !!l != !!q && (l = q, q ? K.addRenderLayerListener(I, this) : K.removeRenderLayerListener(I, this), q && !X && z(), K.iv())
                    }
                },
                downSample: {
                    get: function() {
                        return s
                    },
                    set: function(o) {
                        s !== o && (s = o, K.iv)
                    }
                },
                value: {
                    get: function() {
                        return A
                    },
                    set: function(U) {
                        A !== U && (A = U, K.iv())
                    }
                },
                iterations: {
                    get: function() {
                        return w
                    },
                    set: function(b) {
                        w !== b && (w = b, K.iv())
                    }
                },
                layer: {
                    get: function() {
                        return j
                    },
                    set: function(E) {
                        j !== E && (j = E, K.iv())
                    }
                }
            }), this.resetProperties();
            var I = function(n) {
                if (l && n.layer === j && "post" === n.phase) {
                    var G = K.getGL();
                    if (!K._picking && !K.isReflecting(G)) {
                        var i = K._postProcessing.getRenderTarget();
                        i.unbind(G);
                        for (var k = 0, A = K._glCapabilities.maxAttributes; A > k; k++) G.disableVertexAttribArray(k);
                        q.drawImpl(G, i), i.bind(G), G.useProgram(K._prg)
                    }
                }
            };
            q._42 = function() {}, q.drawImpl = function(o, x, I, $, B) {
                X || z();
                var N, G;
                if (x ? (N = x.width, G = x.height) : (N = K._viewport[2], G = K._viewport[3]), N && G) {
                    var b = K._postProcessing;
                    "boolean" != typeof $ && ($ = s), I == Y && (I = A), B == Y && (B = w), B = Math.max(1, Math.round(B));
                    var l = $f.for(o).glState.depth,
                        i = l.enabled;
                    if (l.enabled = !1, $) {
                        I /= 2;
                        var H = [N, G];
                        N /= 2, G /= 2, V || (V = new Hn.RenderTarget(K, o), h = b.createShader(o, lt.downSampleShader)), V.setSize(o, N, G), b.blitScreen(V, x.texture, h, {
                            texelSize: [1 / H[0], 1 / H[1]]
                        }), x.setSize(o, N, G)
                    } else V && V.setSize(0, 0);
                    d.setSize(o, N, G);
                    for (var F = [], e = 0; B > e; e++) F.push(I), I = Math.max(1, Math.floor(I / 2));
                    for (var e = 0; B > e; e++) {
                        var y = F[B - e - 1],
                            p = $ && 0 === e ? V.texture : x.texture;
                        b.blitScreen(d, p, _, {
                            value: y / N
                        }), $ && e === B - 1 && x.setSize(o, H[0], H[1]), b.blitScreen(x, d.texture, P, {
                            value: y / G
                        })
                    }
                    return l.enabled = i, x
                }
            }
        };
        lt.hBlurShader = "!!b~u!us<j*czv/utfp!qw!f.d!31!/q2p!t-<y/!twpbqs)z3jdofhw!!w>f!dw3V!ww!Vw<<*1/!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+!!hzm/`tQppqt.j!u-j1p/o2!!>.!!w1f/d35!)+q!pyt/^#!!q~s!fd<jntvjtp!o>!!isjphmipqD!hgbmspGb`um<h!!vo<j2g6p1s/n1!!t+b!n*q!m*f!sz3/Ew!Vjwn!b-hffv<mb!ww!b+s!z1j/o5h!!,w!fyd/3w!VwwV!w)<3d!fvwo!j-gfphsbnn!jg!m)pEb3uf!swvbumyvffu<!>,!!wnpvjte!!n<b9j2o:)1*/!1|!+!!w*f!d*5!!zt/vwnV!w>!!-wffvdm5b)w!!1+/!11!/*4<!,!!yt/vwnV!w,!>)!3udffywu!v-sffh3bEn)j!!j)nEb3hffs-v!uwyffdu3!)>!,w!Vnwv/ty!!.<!655/313!2+/!1w!b+m!v*f!-*!!wzV/ww/Vzw!!*-!f*v!m+b!w1!/+1!612/<3!!,t!vyn/!w,V>w!!u)f3ydufvws!f-3fEh)b!njjn!b)hEf3-f!swvfudy3f)u!!w>V,w!/nyv!t.!!4</214!6+2!/w1b!m+v!f*-!!*w!Vzw//wzV!w*!!-*f!v+m!b1w/!1+:!219/<2!!,t!vyn/!w,V>w!!u)f3ydufvws!f-3fEh)b!njjn!b)hEf3-f!swvfudy3f)u!!w>V,w!/nyv!t.!!3</414!7+2!/w1b!m+v!f*-!!*w!Vzw//wzV!w*!!-*y!/+w!V1w/!2)333d5f6w<!-!fthvbnn!j,!>)!Eu3ffysuvvusyff3uE!)>!,j!nnbvhtf!-!<w2f4d632)/!1w!V+w!/*y!!*.!!z2//w1V!w+!!-wfbvm", lt.vBlurShader = "!!b~u!us<j*czv/utfp!qw!f.d!31!/q2p!t-<y/!twpbqs)z3jdofhw!!w>f!dw3V!ww!Vw<<*1/!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+!!hzm/`tQppqt.j!u-j1p/o2!!>.!!w1f/d35!)+q!pyt/^#!!q~s!fd<jntvjtp!o>!!isjphmipqD!hgbmspGb`um<h!!vo<j2g6p1s/n1!!t+b!n*q!m*f!sf3vEm!bjwn!b+h!f1</5!!w,b!szz/jwoVhw!!w-fyd/3w!VwwV!w)<3d!fvwo!j-gfphsbnn!jg!m)pEb3uf!swvbumyvffu<!>,!!wnpvjte!!n<b9j2o:)1*/!1|!+!!w*f!d*5!!ftvvmnb!w>!!+w!f1d/54)!!,1!/z1/!w*V<w!-!yt/vwnV!w,!>)!3udffywu!v-sffh3bEn)j!!j)nEb3hffs-v!uwyffdu3!)>!,w!Vnwv/ty!-!<w6V5w3/3z2!/.1!!5+/!1*!!+*!!wfbvmmvbfw!!*+!!*1!/+3!!1,/!1z6/2w<Vw!!t-vyn/!w,V>w!!u)f3ydufvws!f-3fEh)b!njjn!b)hEf3-f!swvfudy3f)u!!w>V,w!/nyv-t!!wV<w2/4z6!2./!14!/+1!!*+!!*w!bfmvvmfb!w*!!+*!!1+/!21!/,1!:z2/9w<Vw!!t-vyn/!w,V>w!!u)f3ydufvws!f-3fEh)b!njjn!b)hEf3-f!swvfudy3f)u!!w>V,w!/nyv-t!!wV<w4/4z7!2./!13!/+1!!*+!!*w!bzm/vwfV!w*!!-*y!/+w!V1w/!2)333d5f6w<!-!fthvbnn!j,!>)!Eu3ffysuvvusyff3uE!)>!,j!nnbvhtf!-!<w2f4d632)/!1w!V+w!/*y!-*!!wfVvwm/bzw!!.+!!21/", lt.downSampleShader = "!!b~u!us<j*czv/utfp!qw!f.d!31!/q2p!t-<y/!twpbqs)z3jdofhw!!w>f!dw3V!ww!Vw<<*1/!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+!!hzm/`tQppqt.j!u-j1p/o2!!>.!!w1f/d35!)+q!pyt/^#!!q~s!fd<j1t/j5p!o0!!i*j*h*i1q/!2g!m-p1b/u1<)3!dvfowj!g+p!sfn{!jtTbmnfqymffus!3,E!!wjVnwb!h-ff<hb!nwjb)sEz3jfoshv!uwyffdu3!!w,V!w*<*1!/v2o.j!g-p1s/n1!)w3fddf3w!!u+f!yff{mjTTjm{ffy<fu!!,w!pwjVew!!n-bfjhob)n*j)!E|3f!shvmu`yGfsub!hD,p!m*p*s1!/>1!!)-u1f/y2u.v)s3fd3fEw)!j+n!bfh{fj-T!mwfVywf!u,!!,u!fwyVfwm!T-jf{hfb!n+j!)wEf3df3s)v2u/y1f-u!!1/,1!**";
        var mt = F.graph3d.PostProcessing.Glitch = function(s) {
            function U() {
                if (L && J) {
                    o = Date.now(), B = 0, W = 1e3 * $(J[0], J[1]), e = [];
                    for (var P = 1, Z = L.length; Z > P; P += 2) e.push((P > 1 ? e[e.length - 1] : 0) + W * L[P] / O)
                }
            }

            function m() {
                s.redraw()
            }

            function h() {
                r = !0;
                var j = s.getGL();
                l = new Hn.RenderTarget(s, j), v = s._postProcessing.createShader(j, mt.Shader);
                for (var B = V * V, n = tr(V, V), K = n.getImageData(0, 0, V, V), a = K.data, H = 0; B > H; H++) a[3 * H + 0] = f(256), a[3 * H + 1] = f(256), a[3 * H + 2] = f(256), a[3 * H + 3] = f(256);
                n.putImageData(K, 0, 0), w = wn(j, Vq)
            }
            var l, v, W, o, B, e, w, I, J, L, Z = this,
                M = !1,
                r = !1,
                $ = _q.randomFloat,
                f = _q.randomInt,
                O = 0,
                V = 64;
            this.serializeProperties = {
                onlyReflector: !1,
                period: [2, 3],
                intensity: [3, .3, 1, .1, 0, .4]
            }, this.resetProperties = function() {
                var h = this.serializeProperties;
                for (var g in h) this[g] = h[g]
            }, G.defineProperties(Z, {
                enable: {
                    get: function() {
                        return M
                    },
                    set: function(n) {
                        !!M != !!n && (M = n, n && (U(), r || h()), s.iv())
                    }
                },
                onlyReflector: {
                    get: function() {
                        return I
                    },
                    set: function(K) {
                        !!I != !!K && (I = K, s.iv())
                    }
                },
                period: {
                    get: function() {
                        return J
                    },
                    set: function(O) {
                        J = O, U(), s.iv()
                    }
                },
                intensity: {
                    get: function() {
                        return L
                    },
                    set: function(Y) {
                        Y || (Y = [1, 1]), L = Y, O = 0;
                        for (var I = 1, G = Y.length; G > I; I += 2) O += Y[I];
                        U(), s.iv()
                    }
                }
            }), this.resetProperties(), Z._42 = function(O, V) {
                if (M) {
                    r || h();
                    var c = !!s.isReflecting(O);
                    if (c === !!I) {
                        var u = V.width,
                            G = V.height;
                        if (u && G) {
                            var R = s._postProcessing,
                                a = $f.for(O).glState.depth,
                                t = a.enabled;
                            a.enabled = !1, l.setSize(O, u, G);
                            var S, j = Date.now();
                            j - o > e[B] && (B++, B >= e.length && U()), S = L[2 * B];
                            var J = {
                                seed: Math.random(),
                                byp: S ? 0 : 1,
                                tDisp: w
                            };
                            return S && (J.angle = $(-Math.PI, Math.PI), J.distortion_x = $(0, 1), J.distortion_y = $(0, 1), J.amount = Math.random() / 30 * S, J.seed_x = $(-1, 1) * S, J.seed_y = $(-1, 1) * S), R.blitScreen(l, V.texture, v, J), a.enabled = t, requestAnimationFrame(m), l
                        }
                    }
                }
            }
        };
        mt.Shader = "!!b~u!us<j*czv/utfp!qw!f.d!31!/q2p!t-<y/!twpbqs)z3jdofhw!!w>f!dw3V!ww!Vw<<*1/!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+!!hzm/`tQppqt.j!u-j1p/o2!!>.!!w1f/d35!)+q!pyt/^#!!q~s!fd~j!tj<p*ow!Viwj!h-ifqh!bgnmjp)b!uE<3f!svvoujygfpus>ns!pjmopuD!hcbzsqG<`m!hv!oj|g!pfstnm!ft!bn~q!mf<sx3pEo!tj!n,bshpfm<pD!hvbosjGg`pmshn!!>t!bsnpqmmpfDsh3bEs!Gu`Emjht!q<<*3!/v1o+j*g*p/s1n6!+gemfpfbtu!!+b!ntpzv-oeuf<ft!!v+o!jtgyp)s3nd!fgwm)peboub!sb)o5hdmffw<+u!ovvopjngbp+s/n1!1g3m!p>b!ux!ptoftf!e5<df!wv!ojfgtpjspno!!gemepbb0u0!!tf<f*eb`/yb<hd!!v-ocj/gcpds!n-!hg/mbphbdu!!-tsf/fsed`)z5<df!wv!o>j!gsppsmnp!DghmbpsbGu`!mehj!tu<p*suufjtpgog`py!<.!!qv!o-jfghpbsnnj!)gEm3pfbsuv!ueyjftuu!p>s!ucjdp!o5`dzf<w!!v<o*jqg!p-sfnh!bgnmjp)bEu3!fdspvmu`ytf<u!>!!wbbhsdz!j5odhf!ww!fd<3*!uwfVtwg<gp!!,d!pqo!t-uf!hgbmnpjb)uE!3VfosqvbudylfEup!x>o!tsddb!m5fd!f>w!!36<6*/*!f0m!h3o6b7)/o<jt!!d-p*oftmuh!owbf)dt4p!dQ)b3ddlfGwb!d+u!pusotv!p>n!bw!f>d!4u)f!t3g6g7p/!!3+d!f3w6!7/s!f+e!b3i6t7!/u-g!j3i6t7!/C!H+S!!3n6p7s/g-!!f3t6b7c/0!0*!<<!*d/p6o0teuf!fwtf)d+5z!`Veofqfbtd+lmGbbndsuppos>t,!z>/!qV!oq<b*d/l6E0pexfofttd)b+myf`!e0f!fwtf+dm5b)n!sQpbod>l,Gyb/dqu!ps~t!-!~2!/!<**<y`!ogpmjpubsup!uvtojqeb!d,l!SyH/CqB)U!p.E!f/q2u!i>)!!yd/pqo!tu|!!jfot!mwff!d5~!!w!<*y!`|op!jsufsupvustoj!ee>pyu/)q!!w-|!*V/o1q?bzd`leGfbfdtu)pgsjt!!*|<!*!e~fft!+gtm`pmbpud!.szb`ooep)jwufsdp3u!tdjpe*?|y/!qs!f%u%v!sto`!mgpsdb,dzu`)otpjjou)seppuut)jdep=/yy/zq!)-gwjf!d3~)!23~/!:9<:z9`-o8p9j/u3s4p4u*t*j*e!!+>!!5z4/8q6!9/|6!5f6t4m*f<!!~~!<!*wzp`joep!jnubsjpou)t*j!e|!,!!jzg/)qc)z!q.=!2/*2!!|>!!zw/fqd!3!|q*!/>1!?wyV`we<ff!tg)mgpjb!u!|y!t*!e>f!fgtm+ptp`sm)phdm.`yG`sobphjDupsppsuet/jye!?0z!/1q/!6%*%<!t!`gmmppdb,uy!`zotp!j>u!sgpmuptpjse)=hzm/`qG)sgbjh!Dp<p*s*ee/fzf!t0+!e1f/f6t*+<q!!-gqmtpjbEuu!)o!pEs3nfbsmv!u>y!fvuo)qibudqlfSEHpCUB";
        var nt = F.graph3d.PostProcessing.Fxaa = function(g) {
            var v, p = this,
                M = !1;
            G.defineProperties(p, {
                enable: {
                    get: function() {
                        return M
                    },
                    set: function(N) {
                        !!M != !!N && (M = N, g.iv())
                    }
                }
            }), p.getShader = function(N) {
                if (v) return v;
                var x = g.getPostProcessingModule();
                return v = x.createShader(N, {
                    vs: x.blitScreenShaderSrc.vs,
                    fs: x.decodeShader(nt.ShaderSourceFs)
                })
            }, p._42 = function() {}
        };
        nt.ShaderSourceFs = "~!!q<sbf/d*jwtVjwp!o-!fihjbhnijq)!Eg3mfpsbvuu<yf!uv>obj/gsppsmnp!DthbbnsqGm`fmsh3!E!<j*n!bh*f1</1!)v5odjfgwp!sn-!1w/f1d!3!-s1f/t1p!mv-u1j/p1o!<-!4w4b9s1z/j1o!h!-w7f7d23/!1w!Vw-<68/!1$!ef-g*j1o/f1!)G5YdBfBw`!RV-B*M1J/U1Z)`5Qd1f!w2!/1-*!1$/e1f)g5jdoffw!!GY-BoBp`jRuVvBmMpJtUfZs`!Q2-!f2h/b6nj!!$e-ffghjbonfj!!GY-BfBh`bRnVjB!MJ-U*Z1`/Q13)!53d/f1w!!$-ewfVgwj!of)!sGfYeBbBi`TRmVfByMjJQUbZb`yQG4>!s5p/m1pD!h$besfGg`jmohf!!G|Y!B*B)`oRjVbBnM!JeUjZp`wQ!5!~2!3/<1*N!b$nevfmg!j-o{fz!yG/y*bNbtCppqp!m-!ycfpup)mqpU!y$feUfbgbjyoGf)!5GuybbpbmGGmbpbbyuG!!gomspvbuufs!!$e<foghjjoTfi!uGhyobfbmG!m+p!byuj3q!cwvfTdu3ft!g$gePfmgfjyojfq!>G,yzb/bNGtmppqb!u*4o!bwqfTd{4sp!i$!e)fggjj!of<!oGhyjbTbiGumhpobfum5!!+w!fydj5qcv!T$uefftggjgoPfm!fGyyjbqb>T,byu/)Nyt*p!qd!m*bonbqq)Ty{-s!p1i/a1)-g!j2!/1<**I!y$jeqfcgvjto!f-!eGpypbHbuUfftyg!gtPbmnfqymjfqs)3yEbn!>$yejfqgcjvoTfu!fGtygbgbPUmffyyUjpqq!)uub-p!mqG*b!buyfGy!uv<s1f/31E!);u!-u!fqt-g!g1P/m1f*yj!q$!e@f!gojboqfT!eGpypbhb>UefpypPHgugf)tug-g!Pqm-f!ypj-q!!su*b!pumfGybubvysGf!3E<)yuj-q!cqv,T)zpu!j+m!bsv*R-b!b1y/g1!*+!!HGyyjbqbcGvmtp>bIuy!jGqycbvbtM!vunbbp)mGGybbbbyGGm!pb<u65/!1s,h*c*bq*d!S|i!ushfoufvMsoob!qsth.c)b!/+z!<u!t~e)!>GuyfbtbgGgmPpmbfuy5j!qG!yubbbpQmjGybfbmyTGi!be<fGsy)jq!cGvytb!b+G!mGpybjuq3c!vqtp>tH-yj!qGcyvbtb!GumbppbmuG5b!bgyyGb!bD<pQootbpqmTfeQpppthQ!p;t!-Oo!bGqyTbebpUpfhy!!@u!fOyo-pj!uGdyfbsbjUef>yo!bgqyTbebpDppho!tmppmpfC4b7b1yUGf!yF<y*qQCujtbet!O-fOhuPtoef)-oj!nG>yubtbeU!fuyb!pgmyGbbbbDypGo!tp<mQfu4t7e1!U=f!yOFuytqeC>jObotpOjfuhdUfxspj-e!!mGpypbCbbGbmypGb!u3<!iguyhbobfRMvobbmqjtu0z1S/d2q>GqsdbSnifu-ho!fGMyobbbqGtm!pubbup5m!GgbybbybGD!po<tppsmff[SUdMqNGbsnbvnmf!P>qau!-*1!/G1y!b=b!GQmepobFub5n!vgmy)b>bQDopboqtTpempfpShd!qmGpspbCnbfbPyqGu!3-<*!OGuytbeb,GQmuptbeu)5>!iguyhbobfDMpoobtqptm!fu4b7p1mSGdbqbGysGb!nf<Ppqsuf3[-UM!NGbynbvbmG!m>pab!u*!1g/y1b!b=R!vObemojFubznTvvmc)q>jOyo-bq!TGeypbpbhG!mmppbpuC!bgbyybGb!Rv<bzm/jNutzpFqe.hzf/UQitspfqt>iQpumtee-!*!oGbyqbTb{Gsmppibau)!ggjy!bb<Rzv/bOmtjpuqz.Fze/hNftUpiqs>fOtuitpem!e*Nojboq-T{!sGpyibab)Ggmjp!bu<!yg/yNbtbpDqp.oyt/pQmtfpFqe>hQfuTtieb!suqbopfmtGtb-by!GG!yb<byG/mOptbpuq!.gyy/bNbtDppqo>tOpumtfeF!euhbfpUmiGsbfbtyiGp!me~-!!~G!yb~b!Gm<p5bQu`!ZgUyJbMbBDVpRo`tBpBmYfGF!e+h!fzU/iQsOfgtgipp>m,ezN/jQot-pq!!G*yQbfboGpmepab)ug5j!!gy<b5bQD`pZoUtJpMmBfV4R7`1BDBpYoGt!u+E!jys/Q!O*g!g|p>!,Gyy/bQbtGpmqp!b*uQ3f!oqppetaN)<gj!!qp<t*NQ/fyo>pqepat)/!y}<}!!*qOpftoNp/eza>)q>pQtO/fzo<pe!!Gy<b5bQG`mZpUbJuM5B!VsRh`cBzBNY>GG!y+b!bzU/fQyOUgpgqp)>u.fzy/-O!tqppqt!N**O<fo!p$eeaf)ggjjo!f!<m5vQn`bZNU!JsMhBcVzRN`/BzBY!GG!y+b!byG/mQpObgug!pm>v.nyb/TO>tGpyqb!b*MOvfnobp)eGay)bgbjU!fy<Pegfgm)budfTyu-o!fqjpetbNs-h!!G>y?b!b*GQmepobFub3n)v!m1)/t1c-b!>2Q/f1o*p-e!!gy<bebfRmvbbdmTjuuozfSjdeqbGsshb!n>f?/!y*zO*e*o<Fb!nGvymb)btGcmbp>bOuf!ompven!bF<>6G/y1b!b+M!vOnObb)nGvymb.bQUefoyFPbgngv)mu>fQye-o!FqbpntvNm-!!*GQyfbobpGemap)bguj3!)!<26//11-!!+1!/O1O*b-n!vgmy.bObeRovFbbmnjvumz>SOdeqoGFsbbnnvfm/!y*zO*f*o<pe!aG)ygbjb!Gm<p*b*uz!ym/vQntbpOq>!G-yybfbuM)vqnpbU)yGfyUbbbbUyfGy)Pbgngv)Mubfbyy-G!>qQpetoNF-b!nGvymb!b*GQmfpobpue3a))!g1j/!1-<.*2*/z1y*/-O!tgpyqb!b-Ryvfbum)jqupzUSydfqUGbsbbynGf)/bynzv*M*b<by!GG>yObeboGFmbpnbvum!!m*vOnfboXp>eGay)bgbjM!vn|b!)*GQyObfboUpfey)Pggjg!)u<f4yQ-`!ZqUpJtMNB-V!RG`yBbBbYGGm!p+b!uz3/)Q.O2g/g1p->!,1z//1Q*t-p!qg!y*bQbfRovpbemaj)ugzjS!dq<G4sQb`nZfU/JyMzB*V*R<`B!BGYyGb!b+G!myp/bQuO!gngbpy>T,Ny>/nQbtyp)qm!v*nQbfTo-p!emav)ngbjN!*<<*!QGfyobpbeGam)p!b}u}!!n*jOofToNp>enaj)o>)QmOvfnobpTe-!!m<v4nQb`NZ*U<JM!BGVyRb`bBGBmYpGb!u+!!nzb/yQFOTgNg>pn>b.yz)/mOvtnpbqF!-*!OnfboypTeNa*)<gj!!Gy<b4bQG`mZpUbJuM!BnVjRo`FBTBNY>Gn!j+o!)ym/vQnObgFg-p!>n.jyo/TONt*p<q!!*GOyfbobpGemap)bguj!!nb<yeXfOm>bndbTyu)omfvjnebbOs-h!!m>v?n!b*XQ*e<oF!bGnyvbmb)Gtmcpbb>uQ!fnojpoeX!O><nejfom)bmdvTnuboOf-j!embvsnhb!X>*?<!*!OGeyobFbbGnmvpmb)ut!csbb>oOhffoNpbey!>n<b6y/)1n!b+y!XOOO-b!nnvbmy.FQTeNo*F<bn!vGmy>bQbeGomFpbbnuv!ms!b*oQhffoNpjeoa>)ngjjo!)n<j6o/X1O!-+!!nOjOobFnTvNm*.<Oe!oGFybbnbvGmm>pObeuo!Fsbbnovhmf!N*bOyfTodpbemaf)eg>js!bo<h*f*Nzbyy/!Q+t!pgqy!b-byRfvub)mqjpuUzyFfeUhbfbUyiGs)fbtnivpMmbeb<yG!>GQyebobFGbmnpvbmu!!*sQbfoohpfe>as)bgojh!fN<b*y*.zsyb/oOhtfpNqj!o-<yf!uG)yqbpbUGymfpUbbub!ysGb)obhnfvNMbbybDymGb>nOqefoeF>bnnbvym)!g*yObfboRpvebam)jgujz!Fe|h!f*UQiOsffotpiep)mgejN!jo<-3!Qs`bZoUhJfMNBbVyRT`dBbBmYfGe!*+<!z!/GQyObgbgCpp>p,mz!/fQbtspmqz!F*yQjfuo>psebao)hgfj!!=!<s3bQo`hZfUNJbMyBDVmRb`nBqBfYeG<!+!!jyg/)QfObgsgmpz>F,yyj/uQ*tp!qs!f*uQvfsoop!esah)cgzjN!<<!*GQyfbobpGemap)b!u}!}m!v*nObfOoXp>eGay)b>bQMOvfnobp)eG!yb<b3UQf`yZPUgJgM)BuVfRy`-B!BqYpGt!N+-!!zG/yQbObgGgmpp>b.uz3/)O.t2p/q1!-*.O2f/o1p*e-a!)ggyjb!bR<v3bQm`jZuUzJSMdBqVGRs`bBnBfY/Gy!z+*!*y</Q!OGgygbpb>G.myp/bOut!pmqv!n*bOTfFo>pGeyab)bgMjv!nb<)eGfymbbbdUTfuyoPfgjge)busfhy!->!?q!p*tQNe-o!FGbynbvbmG)mtpcbbu>3Q)f!o2p/e1!-!<2e/f1m*b-d!TguyobfbjRevbbsmhj!u>z?S!d*qOGesobFnbfn/vymz)*t*c<b>!OGfyobpbeG!mp<b6u/!1m!v+n!bOOOFb>nGvymb.bQMevonFbb)nGvymb>bQUefoyFPbgngv)mu!f*yQ-f!oqppetaN)-g!jG!yb<b6G/m1p!b+u!3O)O!b2n/v1m-..O2e/o1F*b-n!vgmy>bObeRovFbbmnjvumz!S*dOqfGospbenaf)/gyjz!**<<**!zGyy/bQbtGpmqp!b-uy!fmuv)nqbpTUXy>fGUybbbbyMGv)nbbn)vGMybbbbyUGf>yQPegogF)bunfvym-!!*qQpftoNp-e!aG)ygbjb!Gm<p*b*uz3y)/.O2t/p1q-!!-2y/f1u*)-q!pgUyybfbURbvbbymGj)ubznSvdMqbGbsybGn>fO/eyozF*b*n<vm!!G*yObfboGpmepab)ug!jm!vn|b!O*TQ>OmfvonpbeO),gmjv!nb<T2<Q`!ZGUyJbMbBGVmRp`bBuB!YmGv!n+b!XzF/>QmOvgngbpX>,,mzv/nQbtFp<q!!*GQyfbobpGemap)bguj!!tv<c2qQj`yZSUdJqMSBbVoRh`fB>B2Y/G1!0+s!byo/hQfO<gg!pG>y,byb/GQmtppbqu!!*tQvfcoqpjeyaO)TgXjF!>m<v*nQbfOoTp,emav)n!b}X}F!<*O!fGoypbebaG)m>pQbOuf!ofpeeh!fmIpppsC{b2b>y)G.!3/<12!Q+`!ZmUvJnMbBNV*R,`mBvBnYbGO!T+<!z!/GQyObgbgGpm>p.bzu/!Oftephqf!W*fOsfuo2p>e)a.)3g/j1!!+<!2mQv`nZbUNJ*M,BmVvRn`bBXBFY<G!!+G!yyb/bQGOmgpgbpu>!.myv/nObtOpFqT!F*>OmfvonpbeOaF),gmjv!nb<TeFf<mb!dGTyubobfGjmepbbsuh!!m>v?n!b*OQXeOoFF>bmnvvnmb)OtXc,bm>vQnfboOpFe<!m!pGpyCbbbbGymGp!bu<!effemhbfdITpuso{f3j>e)b.s3h/!1>!?+!!*mOvenobFFb*n,vmmv)ntbcObF>TOFf<op!eG!ymbpbpGCmbpbbyuG!!fe<h6f/W1f!s+u!3O>O)b.n3v/m1>!.+Q!emovFnbbnOv*m,!mv<n6b/O1X!O+F!<OO!bGnyvbmb>G.mOpebouF!bmnvvnmb!OX<T1X/>1m!v=n!bNONXb,nmvvmn>bpTsXf<[U!MGNybbnbvGmm!pmbpup!CmbvbnybGT!XT<FF>ymjvqncbvTtX!,+m!vEnybjTqFc<vt!>GGyybjbqGcmvptb!uu!bfpemhGfbIbpysG{!5><)6b/c1t!)+f!eOhOfbInpvsm{.2N*b!n+v!m3>/N1N*b,nbvcmt!)ufbephmfGIbpbsy{G3!*<<1!/G5y0b1b/G2m!p+b!uu!offejhefbWsfhs>ue5f>m)bbdcTtu)offejhefbWsfhs!uu2b*p!m+G!b3b/y1G*!,b<cTtT)bfnevhmf>WOfOsbun3v*m<!*!OGsyjbbbqGam)pgbju!!f<e*h*fQItppsq{!4->y)f.u3)/q1p!U+y!fmUvbnbbyXG*),bmnvvnMbbObXyTGX><Qe!oGFybbnbvGmm!pubbup!mfGebhbfyWGf!su<4D>y)j.q3c/v1t!!++!!mDvynjbqTc*v,tm>vFnybjTqXcTvFt<!u!bGpymbGbbGbmypGb!u!<f*e*hOftIppqs!{->ybfcut))qfpeUhyffIUpbsb{y4G*),bfnevhMfbIbpysG{>5O<eo!FGbynbvbmG!mupbbpum!GfbebhyfGW!fs<u1>/b4c,t*)DfyejhqfcWvfts+u*41*/,3f.e)h)f>WEfysjuq5c<vt!!GuybbpbmGGmbpbbyuG!!tv<c1qQj`yZOUXJTMXBOVFRT`FB>BmYvGn!b+O!XzT/XQ,Omgvgnpb,OzF/TCFt<pq!>Gzy/bQbtGpmqp!bu<!1mQf`oZhUuJiMTBjVhRo`>BgByYbGb!R+v!bym/jQuOzgSgdpq,Gys/bCntfp/qy><y/!QGtypbqb!Cp<pQmt!piqp!s3{uTbqpbmoG>bfbeyhGf!Ip<s1{Q!`?Z>U!JfMeBhVfRW`fBsBuY<G!!+G!yzb/bQGOmgpgbpu.!zt/vCctqpjqy>Bz>/tOvtcpqqj!yO<T1XQF`!Z+U!J3M/B1V,Rt`vBcBqYjGy!O+X!TyX/OQFOTgFg<p.!yj/gC)tapiqp>sy{/TOqtbpoq*!!m<vOntbpOq>!m3vunbbpXm<Gb!bjygG)!ai<p6s/{1T!q+b!oo*h!jmTvinubhTo>fmmv>n,bzF/<Ct!pjqg!)*iopbsq{TT{qsbpoi*!!)mgfjo!hu<i6T/j1h!o+>!goyhbjbTRivubhmojfumz>S,dyq/GCstbpnqf!/*zo<bq!TG{ysbpbiGam)pgbju!!t<vzc/qfjnybCs>G)qtdvSczqujjymBb!v+R!b)b2y/g1!0;2!31//11*!*@.!m*vonbbqNT<{s!pGiy!b)b>Gzm/pQbOug!ghps!be<jyf/ofunOb>smGvqndbSOz.umjvmnbbvNR<bb!yGgy!b;b!G1m/p1b!u@!!h*sobbeqjTf{osupTi>am)v>nyb/TQ.Omgvgnpb!N<<Q!OGgygbpb!G3mupbbpum!GmbvbnybGO!O><mzv/nNbtOp,qm>vzn/bCNt<pq!!Gy<byb/GNmtppbqu>!ym/vCntbpTqT!>m<vCntbpTq,!m3vunbbpNm<Gb!bGyyGb!bC<p*pfmh!oqbbSjqsdOS>ybjcqtc)vhts!b+e!j*fCoyujOq*c!v?t>)!tbccbt))uhbsTbbebjyfGo>uDTy*j<qc!vGty!bubbGpmmpGbbub!yhGs!be<jofhojuT>inubhyo)fbmc.t>)ohhsjbTeijufhooufOm*!-*!Obscjtb)qh)sgbje!jf<o*u*T", fp(z, {
            accordionViewExpandIcon: oi(ek),
            accordionViewCollapseIcon: oi(ek, !0),
            accordionViewLabelColor: he,
            accordionViewLabelFont: Wl,
            accordionViewTitleBackground: ai,
            accordionViewSelectBackground: Nl,
            accordionViewSelectWidth: 3,
            accordionViewSeparatorColor: O,
            splitViewDividerSize: 1,
            splitViewDividerBackground: ai,
            splitViewDragOpacity: .5,
            splitViewToggleIcon: {
                width: 16,
                height: 16,
                comps: [{
                    type: tb,
                    rect: [2, 2, 12, 12],
                    background: ek
                }]
            },
            propertyViewLabelColor: Jp,
            propertyViewLabelSelectColor: he,
            propertyViewLabelFont: Wl,
            propertyViewExpandIcon: oi(jm),
            propertyViewCollapseIcon: oi(jm, !0),
            propertyViewBackground: df,
            propertyViewRowLineVisible: !0,
            propertyViewColumnLineVisible: !0,
            propertyViewRowLineColor: Fh,
            propertyViewColumnLineColor: Fh,
            propertyViewSelectBackground: Nl,
            listViewLabelColor: Jp,
            listViewLabelSelectColor: he,
            listViewLabelFont: Wl,
            listViewRowLineVisible: !1,
            listViewRowLineColor: Fh,
            listViewSelectBackground: Nl,
            treeViewLabelColor: Jp,
            treeViewLabelSelectColor: he,
            treeViewLabelFont: Wl,
            treeViewExpandIcon: oi(on),
            treeViewCollapseIcon: oi(on, !0),
            treeViewRowLineVisible: !1,
            treeViewRowLineColor: Fh,
            treeViewSelectBackground: Nl,
            treeViewDoubleClickToToggle: !0,
            tableViewLabelColor: Jp,
            tableViewLabelSelectColor: he,
            tableViewLabelFont: Wl,
            tableViewRowLineVisible: !0,
            tableViewColumnLineVisible: !0,
            tableViewRowLineColor: Fh,
            tableViewColumnLineColor: Fh,
            tableViewSelectBackground: Nl,
            treeTableViewLabelColor: Jp,
            treeTableViewLabelSelectColor: he,
            treeTableViewLabelFont: Wl,
            treeTableViewExpandIcon: oi(on),
            treeTableViewCollapseIcon: oi(on, !0),
            treeTableViewRowLineVisible: !0,
            treeTableViewColumnLineVisible: !0,
            treeTableViewRowLineColor: Fh,
            treeTableViewColumnLineColor: Fh,
            treeTableViewSelectBackground: Nl,
            tableHeaderLabelColor: Jp,
            tableHeaderLabelFont: Wl,
            tableHeaderColumnLineVisible: !0,
            tableHeaderColumnLineColor: qo,
            tableHeaderBackground: df,
            tableHeaderMoveBackground: Ao,
            tableHeaderInsertColor: Nl,
            tableHeaderSortDescIcon: De(jm, !0),
            tableHeaderSortAscIcon: De(jm),
            tabViewTabGap: 1,
            tabViewLabelColor: he,
            tabViewLabelFont: Wl,
            tabViewTabBackground: ai,
            tabViewSelectWidth: 3,
            tabViewSelectBackground: Nl,
            tabViewMoveBackground: Ao,
            tabViewInsertColor: Nl,
            toolbarLabelColor: Jp,
            toolbarLabelSelectColor: he,
            toolbarLabelFont: Wl,
            toolbarBackground: df,
            toolbarSelectBackground: Nl,
            toolbarItemGap: 8,
            toolbarSeparatorColor: Tn
        }, !0);
        var ot = {
                translateX: 1,
                sortColumn: 1
            },
            pt = {
                sortable: 1,
                sortOrder: 1,
                sortFunc: 1
            },
            qt = {
                focusData: 1
            },
            rt = {
                dataModel: 1,
                sortColumn: 1,
                sortFunc: 1,
                visibleFunc: 1,
                rootData: 1,
                rootVisible: 1
            },
            st = {
                dataModel: 1,
                sortFunc: 1,
                visibleFunc: 1,
                categorizable: 1
            },
            tt = function(f, G) {
                G.add(f), f.hasChildren() && f.eachChild(function(g) {
                    tt(g, G)
                })
            },
            ut = function(J, y, E, n, R, r, o, h, b, v, l) {
                var V, H = E.getValueType(v),
                    K = E.getAlign(v);
                if (E.getEnumValues(v)) {
                    var A = E.toEnumLabel(y, v),
                        C = Fm || 0,
                        O = 0,
                        x = r,
                        m = z.getTextSize(n, A).width;
                    return V = Di(E.toEnumIcon(y, v)), V && (O = r + Fm / 2, "center" === K ? O += (h - (C + m)) / 2 : "right" === K && (O = O + h - (C + m)), Qm(J, V, O, o + b / 2, v, l), x = O + Fm / 2), A != Y && (V ? Dq(J, A, n, R, x, o, h - (x - r), b) : Dq(J, A, n, R, r, o, h, b, K)), void 0
                }
                return y = E.formatValue(y), y != Y ? H === Kb ? (or(J, r, o, h, b, y), void 0) : H === Fk || !H && xk(y) ? (V = Di(y ? vl : cj), Qm(J, V, r + h / 2, o + b / 2, v, l), void 0) : (Dq(J, y, n, R, r, o, h, b, K), void 0) : void 0
            },
            vt = function(A, P) {
                var B = P.view,
                    n = ds(A),
                    k = P.column || P.property;
                B.getDataModel().beginTransaction(), P.editor = A, A.info = P, B.setCurrentEditor(A), B.getView().insertBefore(n, B._79O), Bh(A, P.editorRect), A.setFocus ? A.setFocus() : is(A), A.commitValue = function(s, q) {
                    A._17Q && (A = A._17Q), q || B.setValue(P.data, k, A.getValue ? A.getValue() : A.value), A.close && A.close(), Fi(n)
                }, k.onEditorCreated && k.onEditorCreated(P)
            },
            wt = function(S, i, q, X, g) {
                var o = cn(S, q),
                    G = i.value,
                    N = i.view,
                    h = g.getValueType(i.data);
                return o.onblur = o.onchange = function() {
                    N.endEditing()
                }, "input" === S ? (G = g.formatValue(G), G != Y && (o.value = G), o.onkeydown = function(X) {
                    sp(X) ? N.endEditing() : Fr(X) && N.endEditing(!0)
                }, (h === cb || h === Op) && D(o, Nj, z.numberListener)) : S === pp && X.forEach(function(l) {
                    var C = W.createElement("option");
                    C.innerHTML = g.toEnumLabel(l), C.value = l, g.isEnumEqual(G, l) && (C.selected = !0), xb(o, C)
                }), vt(o, i), o
            },
            xt = F.widget = {},
            yt = function(C, J, X) {
                Wj(E + ".widget." + C, J, X)
            };
        fp(po, {
            ms_value: function(z) {
                z.getValue = function(E) {
                    var t = this.getItemById(E),
                        P = t.element;
                    return Sf(P) ? P : P ? P.getValue ? P.getValue() : P.value : t.selected
                }, z.setValue = function(H, h) {
                    var J = this.getItemById(H);
                    if (J) {
                        var U = J.element;
                        U && !Sf(U) ? U.setValue ? U.setValue(h) : U.value = h : xk(h) ? (J.selected = h, this.iv()) : (J.element = h, this.iv())
                    }
                }, z.v = function(h, j) {
                    var O = this;
                    if (2 === arguments.length) O.setValue(h, j);
                    else {
                        if (!jl(h)) return O.getValue(h);
                        for (var M in h) O.setValue(M, h[M])
                    }
                    return O
                }
            },
            _46o: function(x) {
                x._icon = Y, x._accessType = Y, x._valueType = Y, x._editable = !1, x._batchEditable = !0, x._align = _i, x._nullable = !0, x._emptiable = !1, x.setParent = sg, x.formatValue = function(k) {
                    var i = this,
                        L = i._valueType;
                    return i.getEnumValues() ? i.toEnumLabel(k) : L === Fk ? !!k : k != Y && L === cb ? X(k) : k
                }, x.setEnum = function(X, k, $, i, u, W, O) {
                    var G = this;
                    X && !ym(X) && X.values && (i = X.editable, $ = X.icons, k = X.labels, u = X.strict, W = X.maxHeight, O = X.dropDownWidth, X = X.values), eo(X) && (X = X._as), eo(k) && (k = k._as), eo($) && ($ = $._as), G._enumValues = X, G._enumLabels = k, G._enumIcons = $, G._enumEditable = i, G._enumStrict = u == Y ? !0 : u, G._enumMaxHeight = W, G._enumDropDownWidth = O, X && X.length && Jm(X[0]) && (G._valueType = Op), G.fp("enum", !1, !0)
                }, x.getEnumDropDownWidth = function() {
                    return this._enumDropDownWidth
                }, x.getEnumMaxHeight = function() {
                    return this._enumMaxHeight
                }, x.isEnumEditable = function() {
                    return this._enumEditable
                }, x.getEnumValues = function() {
                    return this._enumValues
                }, x.getEnumLabels = function() {
                    return this._enumLabels
                }, x.getEnumIcons = function() {
                    return this._enumIcons
                }, x.isEnumStrict = function() {
                    return this._enumStrict
                }, x.isEnumEqual = function(J, _) {
                    return this._enumStrict ? J === _ : J == _
                }, x.toEnumLabel = function(U, N) {
                    var b = this,
                        s = b.getEnumValues(N),
                        n = b.getEnumLabels(N);
                    if (s && n)
                        for (var D = 0; D < s.length; D++)
                            if (b.isEnumEqual(U, s[D])) return n[D];
                    return U
                }, x.toEnumIcon = function(P, g) {
                    var z = this,
                        Y = z.getEnumValues(g),
                        D = z.getEnumIcons(g);
                    if (Y && D)
                        for (var _ = 0; _ < Y.length; _++)
                            if (z.isEnumEqual(P, Y[_])) return D[_];
                    return O
                }
            },
            _45o: function(M) {
                M._87o = function(g, I, O, h, C, G) {
                    if (g) {
                        var x = this,
                            w = x._90I,
                            Y = Qr(1);
                        x._columnLineVisible && (C -= 1), x._rowLineVisible && (G -= 1), 0 >= C || 0 >= G || (x._90I || (w = x._90I = {}), w[I] || (w[I] = new no), Bh(Y, x.tx() + O, x.ty() + h, C, G), xb(Y, g), x._view.insertBefore(Y, x._79O), g.onParentAdded && g.onParentAdded(Y), w[I].add(Y))
                    }
                }, M._76o = function() {
                    var E = this,
                        q = E._90I;
                    if (q) {
                        for (var L in q) q[L].each(function(B) {
                            Fi(B)
                        });
                        delete E._90I
                    }
                }, M._77o = function(p) {
                    var u = this;
                    if (u._90I) {
                        var F = u._90I[p];
                        F && (F.each(function(R) {
                            Fi(R)
                        }), delete u._90I[p])
                    }
                }
            },
            _47o: function(Q) {
                Q.getValue = function(d, u) {
                    return u.getValue ? u.getValue(d, u, this) : go(d, u.getAccessType(), u.getName())
                }, Q.setValue = function(m, k, M) {
                    if (k.isEmptiable(m) || "" !== M || (M = O), k.isNullable(m) || M != Y) {
                        var r = this,
                            h = k.getName(m),
                            u = k.getAccessType(m),
                            $ = k.getValueType(m);
                        $ === cb && Sf(M) ? M = Hh(M) : $ === Op && Sf(M) ? M = parseFloat(M) : $ === Fk && Sf(M) && (M = "true" === M), r._batchEditable && k._batchEditable && r.isSelected(m) ? r.sm().each(function(F) {
                            k.setValue ? k.setValue(F, k, M, r) : pl(F, u, h, M)
                        }) : k.setValue ? k.setValue(m, k, M, r) : pl(m, u, h, M)
                    }
                }, Q.setCurrentEditor = function(L) {
                    this.endEditing(), this._currentEditor = L, this.redraw()
                }, Q.isEditing = function(I, l) {
                    var r = this,
                        V = r._currentEditor;
                    if (!V) return !1;
                    if (l) {
                        var p = V.info;
                        return p ? (p.column || p.property) === l && p.data === I : !1
                    }
                    return !0
                }, Q.endEditing = function(A) {
                    var m = this,
                        s = m._currentEditor;
                    s && (delete m._currentEditor, s.commitValue && s.commitValue(s.info, A), m.redraw(), m.getDataModel().endTransaction())
                }, Q.beginEditing = function(n) {
                    this.endEditing();
                    var z = this,
                        i = n.column || n.property;
                    if (i.beginEditing) i.beginEditing(n);
                    else {
                        var B = n.data,
                            N = n.value,
                            C = z.getSelectBackground(B),
                            h = i.getEnumValues(B),
                            K = i.getSlider(B),
                            D = i.getColorPicker(B);
                        if (K) {
                            var x = db(xt.Slider, K);
                            return x.setValue(N), x.getView().onblur = function() {
                                z.endEditing()
                            }, x.isInstant() && (x.onValueChanged = function() {
                                z.setValue(B, i, x.getValue())
                            }), vt(x, n), void 0
                        }
                        if (D || i.getValueType(B) === Kb) {
                            var Q = db(xt.ColorPicker, D);
                            return Q.setValue(N), Q.onClosed = function() {
                                z.endEditing()
                            }, Q.isInstant() && (Q.onValueChanged = function(x, n) {
                                z.setValue(B, i, n)
                            }), vt(Q, n), Q.open(), void 0
                        }
                        if (h) {
                            if (xt.ComboBox) {
                                var W = new xt.ComboBox;
                                W.setValue(N), W.setValues(h), W.setLabels(i.getEnumLabels(B)), W.setIcons(i.getEnumIcons(B)), W.setEditable(i.isEnumEditable(B)), W.setStrict(i.isEnumStrict(B)), W.setMaxHeight(i.getEnumMaxHeight(B)), W.setDropDownWidth(i.getEnumDropDownWidth(B)), W.onClosed = function() {
                                    z.endEditing()
                                }, vt(W, n), W.open()
                            } else wt(pp, n, C, h, i);
                            return
                        }
                        var q = i.getValueType(B);
                        if (q === Fk || xk(N)) return z.setValue(B, i, !N), void 0;
                        if (i.getItemEditor(B)) {
                            var y = Mo(i.getItemEditor(B)),
                                f = new y(B, i, z, n),
                                w = f.getView();
                            return w._17Q = f, f.setValue(N), zo(w), vt(w, n), f.editBeginning && f.editBeginning(), void 0
                        }
                        wt("input", n, C, Y, i)
                    }
                }
            },
            _44o: function(r) {
                r.init = function(n) {
                    var $ = this,
                        J = $.th = new Nt(n),
                        s = $._view = Dl(1, $);
                    $.tv = $._tableView = n, xb(s, J.getView()), xb(s, n.getView()), J.mp(function(d) {
                        d.property === _f && $.iv()
                    }), $.iv()
                }, r.getTableView = function() {
                    return this.tv
                }, r.getTableHeader = function() {
                    return this.th
                }, r.getDataModel = function() {
                    return this.tv.dm()
                }, r.getColumnModel = function() {
                    return this.tv.getColumnModel()
                }, r.setColumns = function(R) {
                    this.tv.setColumns(R)
                }, r.addColumns = function(t) {
                    this.tv.addColumns(t)
                }, r.endEditing = function() {
                    this.tv.endEditing()
                }, r.validateImpl = function() {
                    var x = this,
                        k = x.th,
                        A = lr(k),
                        r = {
                            x: 0,
                            y: 0,
                            width: x.getWidth(),
                            height: A
                        };
                    Bh(k, r), r.y = A, r.height = q(0, x.getHeight() - A), Bh(x.tv, r)
                }
            },
            ms_vs: function(z) {
                z._41o = function() {
                    return this._29I.height < this._59I
                }, z._43o = function() {
                    var i = this;
                    i._41o() && (i._58I || (Kc(function() {
                        i._94O()
                    }, ue), i.iv()), i._58I = new Date)
                }, z._94O = function() {
                    var R = this;
                    if (R._58I) {
                        var U = new Date;
                        U.getTime() - R._58I.getTime() >= ue ? (delete R._58I, R.iv()) : Kc(function() {
                            R._94O()
                        }, ue)
                    }
                }, z._93I = function() {
                    var T = this,
                        E = T._27I;
                    if (T._58I || !T._autoHideScrollBar) {
                        E || xb(T._79O, E = T._27I = Qr());
                        var G = T._29I,
                            y = G.height,
                            W = T._59I,
                            j = T.getScrollBarSize(),
                            i = G.width - j - 2,
                            J = y * (-T.ty() / W),
                            r = y * (y / W),
                            z = E.style;
                        W > y ? (Zg > r && (J = J + r / 2 - Zg / 2, 0 > J && (J = 0), J + Zg > y && (J = y - Zg), r = Zg), z.visibility = nd, z.background = T.getScrollBarColor(), z.borderRadius = j / 2 + dr, Bh(E, i, J, j, r)) : z.visibility = Rc
                    } else E && (E.style.visibility = Rc)
                }
            },
            ms_hs: function(U) {
                U._40o = function() {
                    return this._29I.width < this._91I
                }, U._42o = function() {
                    var P = this;
                    P._40o() && (P._95O || (Kc(function() {
                        P._94I()
                    }, ue), P.iv()), P._95O = new Date)
                }, U._94I = function() {
                    var v = this;
                    if (v._95O) {
                        var E = new Date;
                        E.getTime() - v._95O.getTime() >= ue ? (delete v._95O, v.iv()) : Kc(function() {
                            v._94I()
                        }, ue)
                    }
                }, U._92I = function() {
                    var f = this,
                        j = f._28I;
                    if (f._95O || !f._autoHideScrollBar) {
                        j || xb(f._79O, j = f._28I = Qr());
                        var p = f._29I,
                            t = p.width,
                            v = f._91I,
                            i = f.getScrollBarSize(),
                            I = p.height - i - 2,
                            S = t * (-f.tx() / v),
                            s = t * (t / v),
                            K = j.style;
                        v > t ? (Zg > s && (S = S + s / 2 - Zg / 2, 0 > S && (S = 0), S + Zg > t && (S = t - Zg), s = Zg), K.visibility = nd, K.background = f.getScrollBarColor(), K.borderRadius = i / 2 + dr, Bh(j, S, I, s, i)) : K.visibility = Rc
                    } else j && (j.style.visibility = Rc)
                }
            }
        }), rg(vl, ab(16, 16, [{
            type: Eh,
            rect: [1, 1, 14, 14],
            background: Nl
        }, {
            type: uh,
            rect: [1, 1, 14, 14],
            width: 1,
            color: tp
        }, {
            type: Cd,
            points: [13, 3, 7, 12, 4, 8],
            borderWidth: 2,
            borderColor: "#FFF"
        }])), rg(cj, ab(16, 16, {
            type: uh,
            rect: [1, 1, 14, 14],
            width: 1,
            color: tp
        })), rg(wl, ab(16, 16, [{
            type: zi,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: tp,
            background: "#FFF"
        }, {
            type: zi,
            rect: [4, 4, 8, 8],
            background: Nl
        }])), rg(Hq, ab(16, 16, {
            type: zi,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: tp
        })), po._15Q = function(t) {
            t._29I = yf, t._59I = 0, t._91I = 0, t._5o = function(f) {
                var T = this;
                T._30I = new no, T._rows = new no, T._rowMap = {}, T._31I = 0, T._14I = 0, T._view = Dl(1, T), T._canvas = ts(T._view), xb(T._view, T._79O = Qr()), T.dm(f ? f : new _c)
            }, t.getCheckIcon = function(W) {
                var Q = this.sm(),
                    G = Q.co(W);
                return Q.sg() ? Di(G ? wl : Hq) : Di(G ? vl : cj)
            }, t.checkData = function(J) {
                var U = this.sm(),
                    s = U.co(J);
                U.sg() && s || (this._32o = 1, s ? U.rs(J) : U.as(J), delete this._32o)
            }, t.getDataAt = function(r) {
                r.target && (r = this.lp(r));
                var t = e(r.y / this._rowHeight),
                    z = this._rows;
                return 0 > t || t >= z.size() ? Y : z.get(t)
            }, t.onDataDoubleClicked = function() {}, t.onDataClicked = function() {}, t.adjustTranslateX = function() {
                return 0
            }, t.adjustTranslateY = function(y) {
                var W = this.getHeight() - this._59I;
                return W > y && (y = W), y > 0 ? 0 : X(y)
            }, t.onPropertyChanged = function(P) {
                var v = this,
                    i = P.property;
                rt[i] ? v.ivm() : qt[i] || v.redraw(), i === hg ? v._42o() : i === Ie && v._43o()
            }, t.getLabel = function(z) {
                return z.toLabel()
            }, t.getLabelFont = function() {
                return this._labelFont
            }, t.getLabelColor = function(e) {
                var k = this;
                if (k.isCheckMode()) {
                    if (k._focusData === e) return k._labelSelectColor
                } else if (k.isSelected(e)) return k._labelSelectColor;
                return k._labelColor
            }, t.getStartRowIndex = function() {
                return this._31I
            }, t.getEndRowIndex = function() {
                return this._14I
            }, t.getRowDatas = function() {
                return this._rows
            }, t.getRowIndex = function(K) {
                return this._rowMap[K._id]
            }, t.getRowSize = function() {
                return this._rows.size()
            }, t.getViewRect = function() {
                return Vm(this._29I)
            }, t.isVisible = function(B) {
                return this._visibleFunc ? this._visibleFunc(B) : !0
            }, t.getCurrentSortFunc = function() {
                return this._sortFunc
            }, t.setDataModel = function(g) {
                var E = this,
                    b = E._dataModel,
                    i = E._selectionModel;
                b !== g && (b && (b.umm(E.handleDataModelChange, E), b.umd(E.handleDataPropertyChange, E), b.umh(E.handleHierarchyChange, E), i || b.sm().ums(E.handleSelectionChange, E)), E._dataModel = g, g.mm(E.handleDataModelChange, E), g.md(E.handleDataPropertyChange, E), g.mh(E.handleHierarchyChange, E), i ? i._21I(g) : g.sm().ms(E.handleSelectionChange, E), E.fp("dataModel", b, g))
            }, t.validateModel = function() {
                var A = this;
                A._rows.clear(), A._rowMap = {}, A.buildChildren(A._dataModel._roots);
                var P = A._rows = A._rows.toList(A.isVisible, A),
                    Z = 0,
                    M = A.getCurrentSortFunc(),
                    r = P.size();
                for (M && P.sort(M); r > Z; Z++) A._rowMap[P.get(Z)._id] = Z
            }, t.buildChildren = function($) {
                var B = this;
                $.each(function(j) {
                    B._rows.add(j), B.buildChildren(j._children)
                })
            }, t.handleDataModelChange = function() {
                this.ivm()
            }, t.handleDataPropertyChange = function(S) {
                "parent" === S.property ? this.ivm() : this.invalidateData(S.data)
            }, t.handleHierarchyChange = function() {
                this.ivm()
            }, t.handleSelectionChange = function(E) {
                E.datas.each(this.invalidateData, this), this.onSelectionChanged(E)
            }, t.onSelectionChanged = function(u) {
                var l = this,
                    _ = l.sm();
                !l.isAutoMakeVisible() || 1 !== _.size() || "set" !== u.kind && "append" !== u.kind || l._32o || l.makeVisible(_.ld())
            }, t.handleBackgroundClick = function(H) {
                Bj(H) && !this.isCheckMode() && this.sm().cs()
            }, t.makeVisible = function(l) {
                l && (this._23I = l, this.iv())
            }, t.scrollToIndex = function(r) {
                var V = this,
                    k = V._29I,
                    u = k.height,
                    D = V._rowHeight,
                    G = D * r;
                r >= 0 && r < V._rows.size() && u > 0 && (G + D > k.y + u ? V.ty(-G + u - D) : G < k.y && V.ty(-G))
            }, t.autoScroll = function(m, K) {
                var g = this,
                    U = g._rowHeight,
                    Q = U,
                    s = U / 4,
                    p = g._29I,
                    w = g.lp(m),
                    Y = {
                        x: g.tx(),
                        y: g.ty()
                    };
                return U > 0 && p && (w.x - p.x < Q ? g.translate(s, 0) : p.x + p.width - w.x < Q && g.translate(-s, 0), w.y - p.y < Q ? g.translate(0, s) : p.y + p.height - w.y < Q && g.translate(0, -s)), Y.x = g.tx() - Y.x, Y.y = g.ty() - Y.y, K && (K.x += Y.x, K.y += Y.y), Y
            }, t.getTopRowOrderSelection = function() {
                var Z = this.sm().getTopSelection(),
                    R = {},
                    U = new no;
                return Z.each(function(X) {
                    R[X._id] = X
                }), this._rows.each(function(g) {
                    R[g._id] && U.add(g)
                }), U
            }, t.getRowOrderSelection = function() {
                var r = new no;
                return this._rows.each(function(K) {
                    this.isSelected(K) && r.add(K)
                }, this), r
            }, t.ivm = function() {
                this.invalidateModel()
            }, t.invalidateModel = function() {
                var Q = this;
                Q._96I || (Q._96I = 1, Q._32I = 1, delete Q._24I), Q.iv()
            }, t.redraw = function() {
                var f = this;
                f._32I || (f._32I = 1, delete f._24I, f.iv())
            }, t.invalidateData = function(n) {
                var A = this;
                bn ? A.redraw() : A._32I || (A._24I || (A._24I = {}), A._24I[n._id] = n, A.iv())
            }, t.getFocusData = function() {
                return this._focusData
            }, t.setFocusDataById = function(Q) {
                this.setFocusData(this.dm().getDataById(Q))
            }, t.setFocusData = function(Y) {
                var t = this,
                    m = t._focusData;
                m !== Y && (t._focusData = Y, t.fp("focusData", m, Y), m && t.invalidateData(m), Y && (t.invalidateData(Y), t.isAutoMakeVisible() && t.makeVisible(Y)))
            }, t.drawRowBackground = function(t, r, L, n, c, p, T) {
                var e = this,
                    k = e.isCheckMode();
                (r === e._focusData && k || L && !k) && or(t, n, c, p, T, e.getSelectBackground(r))
            }, t.drawData = function(E, H, x) {
                var g = this,
                    m = g._rowHeight,
                    k = m * x,
                    l = g._29I,
                    P = l.x,
                    n = l.width;
                E.save(), E.beginPath(), E.rect(P, k, n, m), E.clip(), g._87o(g.drawRow(E, H, g.isSelected(H), P, k, n, m), x, P, k, n, m), E.restore(), g._rowLineVisible && or(E, P, k + m - 1, n, 1, g._rowLineColor)
            }, t._12I = function(P) {
                var B = this,
                    S = B._31I,
                    L = B._29I,
                    N = L.x,
                    d = L.y,
                    k = L.width,
                    i = L.height;
                for (P.beginPath(), P.rect(N, d, k, i), P.clip(), P.clearRect(N, d, k, i), B._76o(), B._93db(P); S < B._14I; S++) B.drawData(P, B._rows.get(S), S);
                B._92db(P)
            }, t._13I = function(H) {
                for (var C, D = this, s = D._rowHeight, Q = D._29I, x = Q.x, J = Q.width, R = D._31I, b = D._30I; R < D._14I; R++) C = D._rows.get(R), D._24I[C._id] && b.add({
                    data: C,
                    index: R
                });
                b.isEmpty() || (H.beginPath(), b.each(function(h) {
                    H.rect(x, h.index * s, J, s)
                }), H.clip(), b.each(function(L) {
                    H.clearRect(x, L.index * s, J, s)
                }), b.each(function(w) {
                    D._77o(w.index)
                }), D._93db(H), b.each(function(e) {
                    D.drawData(H, e.data, e.index)
                }), D._92db(H), b.clear())
            }, t.preValidateModel = function() {
                this.endEditing && this.endEditing()
            }, t.validateImpl = function() {
                var w = this,
                    k = w._canvas,
                    t = w.getWidth(),
                    K = w.getHeight(),
                    M = w._rowHeight,
                    y = w._32I;
                (t !== k.clientWidth || K !== k.clientHeight) && (yh(k, t, K), y = 1), w._96I && (w.preValidateModel(), w.validateModel());
                var n = w._29I,
                    D = {
                        x: -w.tx(),
                        y: -w.ty(),
                        width: t,
                        height: K
                    },
                    p = w._rows.size(),
                    U = Bc(k),
                    B = w._23I;
                y || Ch(D, n) || (y = 1), w._29I = D, w._59I = p * M, w._31I = e(D.y / M), w._14I = $((D.y + D.height) / M), w._31I < 0 && (w._31I = 0), w._14I > p && (w._14I = p), w._99I && y && w._99I();
                var f = w.tx(),
                    C = w.ty();
                (w._40o() || w._41o()) && (w._59I += w.getScrollBarSize(), w._99I && y && (w._91I += w.getScrollBarSize())), Bo && !id && (U.save(), vb(U, t / Jo.length, K / Jo.length, 1)), vb(U, f, C, 1), y ? w._12I(U) : w._24I && w._13I(U), w._93I(), w._92I(), U.restore(), w._32I = w._24I = w._96I = Y, B && (w.scrollToIndex(w.getRowIndex(B)), delete w._23I), w.tx(w.tx()), w.ty(w.ty())
            }, t.canHandleSelectMode = function() {
                return !0
            }
        }, po._48o = function(C) {
            C._rootVisible = !0, C._rootData = Y, C._35o = function() {
                this._expandMap = {}, this._levelMap = {}
            }, C.validateModel = function() {
                var D = this,
                    m = D._rootData;
                D._rows.clear(), D._levelMap = {}, D._rowMap = {}, D._currentLevel = 0, m ? D._rootVisible ? D.isVisible(m) && D.buildData(m) : D.buildChildren(m) : D.buildChildren(), delete D._currentLevel
            }, C.buildData = function(p) {
                var q = this,
                    J = p._id,
                    o = q._rows;
                q._rowMap[J] = o.size(), o.add(p), q._levelMap[J] = q._currentLevel, q.isExpanded(p) && (q._currentLevel++, q.buildChildren(p), q._currentLevel--)
            }, C.buildChildren = function(T) {
                var F = this,
                    Q = T ? T._children : F._dataModel._roots,
                    t = F.getCurrentSortFunc();
                t && F.isChildrenSortable(T) ? Q.toList(F.isVisible, F).sort(t).each(F.buildData, F) : Q.each(function(P) {
                    F.isVisible(P) && F.buildData(P)
                })
            }, C.getLevel = function(Y) {
                return this._levelMap[Y._id]
            }, C.getToggleIcon = function(o) {
                var $ = this,
                    L = $._loader,
                    u = $._collapseIcon;
                return L && !L.isLoaded(o) ? u : o.hasChildren() ? $.isExpanded(o) ? $._expandIcon : u : Y
            }, C.isCheckMode = function() {
                return this._checkMode != Y
            }, C.isChildrenSortable = function() {
                return !0
            }, C.handleDataModelChange = function(R) {
                var v = this;
                R.kind === eb ? delete v._expandMap[R.data._id] : R.kind === Aj && (v._expandMap = {}), v.ivm()
            }, C.toggle = function(O) {
                var j = this;
                j.isExpanded(O) ? j.collapse(O) : j.expand(O)
            }, C.isExpanded = function(t) {
                return 1 === this._expandMap[t._id]
            }, C.expand = function(l) {
                var Y = this,
                    F = Y._loader;
                Y.isExpanded(l) || (F && !F.isLoaded(l) && F.load(l), Y._expandMap[l._id] = 1, Y.ivm(), Y.onExpanded(l))
            }, C.onExpanded = function() {}, C.collapse = function(q) {
                var N = this;
                N.isExpanded(q) && (delete N._expandMap[q._id], N.ivm(), N.onCollapsed(q))
            }, C.onCollapsed = function() {}, C.expandAll = function(S) {
                if (S) this.expand(S), S.eachChild(function(s) {
                    this.expandAll(s)
                }, this);
                else {
                    var t = this;
                    t._dataModel.each(function(Q) {
                        Q.hasChildren() && (t._expandMap[Q._id] = 1)
                    }), t.ivm()
                }
            }, C.collapseAll = function() {
                this._expandMap = {}, this.ivm()
            }, C.makeVisible = function(Z) {
                if (Z) {
                    var d = this;
                    if (!d._rootData || Z.isDescendantOf(d._rootData)) {
                        for (var P = Z._parent; P;) d.expand(P), P = P._parent;
                        d._23I = Z, d.iv()
                    }
                }
            }, C.checkData = function(x) {
                var j, E = this,
                    i = E._checkMode,
                    $ = E.sm(),
                    Z = $.co(x);
                if (!$.sg() || !Z) {
                    if (E._32o = 1, i === Df) Z ? $.rs(x) : $.as(x);
                    else if (i === Xh) j = new no(x), j.addAll(x._children);
                    else if ("descendant" === i) j = new no, tt(x, j);
                    else if ("all" === i && (j = new no, tt(x, j), !Z))
                        for (var I = x._parent; I;) j.add(I), I = I._parent;
                    j && (Z ? $.rs(j) : $.as(j)), delete E._32o
                }
            }, C.drawTree = function(i, y, N, J, $, X, L) {
                var T = this,
                    W = T._indent,
                    Z = T._levelMap[y._id],
                    O = T.getIconWidth(y),
                    d = Di(T.getToggleIcon(y));
                d ? (J += W * Z, Qm(i, d, J + W / 2, $ + L / 2, y, T), J += W) : J += W * (Z + 1), T._checkMode && (Qm(i, T.getCheckIcon(y), J + W / 2, $ + L / 2, y, T), J += W), T.drawIcon(i, y, J, $, O, L), T.drawLabel(i, y, J + O, $, L)
            }
        }, po._14Q = function(I) {
            I.getIcon = function(I) {
                return I.getIcon()
            }, I.getIconWidth = function(y) {
                return this.getIcon(y) ? this._indent : 0
            }, I.drawIcon = function(X, q, G, i, C, t) {
                if (C) {
                    var J = this,
                        B = J.getBodyColor(q),
                        r = Di(J.getIcon(q), B);
                    r && (t -= J.isRowLineVisible() ? 1 : 0, Iq(X, r, lq, G, i, C, t, q, J, B), Pk(X, J.getBorderColor(q), G, i, C, t))
                }
            }, I.drawLabel = function(C, L, s, K, v) {
                var g = this;
                Dq(C, g.getLabel(L), g.getLabelFont(L), g.getLabelColor(L), s, K, 0, v)
            }
        }, po._50o = function(G) {
            G._98I = function() {
                var W = this,
                    R = W._39o = new _c;
                W._60I = new no, R.mm(W._17o, W), R.md(W._18o, W), R.mh(W._19o, W)
            }, G.setColumns = function(H) {
                this._39o.clear(), this.addColumns(H)
            }, G.addColumns = function(o) {
                var P = this._39o;
                o.forEach(function(v) {
                    if (!(v instanceof At)) {
                        var c = Mo(v.className);
                        v = db(c ? c : At, v)
                    }
                    P.add(v)
                })
            }, G.onColumnClicked = function() {}, G.onCheckColumnClicked = function() {}, G._3Q = function(W) {
                for (var E, v = 0, o = this._60I, L = o.size(); L > v; v++)
                    if (E = o.get(v), E.column === W) return E;
                return Y
            }, G.getColumnAt = function(z) {
                var s = this._4Q(z);
                return s ? s.column : Y
            }, G._4Q = function(v) {
                for (var Q = this, _ = v.target ? Q.lp(v).x : v.x, r = Q._60I, Z = 0; Z < r.size(); Z++) {
                    var g = r.get(Z),
                        L = g.startX;
                    if (_ >= L && _ < L + g.column.getWidth()) return g
                }
                return Y
            }, G.getToolTip = function(g) {
                var C = this,
                    i = C.getDataAt(g),
                    y = C.getColumnAt(g);
                return i && y ? y.getToolTip(i, C) : Y
            }, G.adjustTranslateX = function(n) {
                var P = this.getWidth() - this._91I;
                return P > n && (n = P), n > 0 ? 0 : X(n)
            }, G._99I = function() {
                var L = this,
                    y = L._29I,
                    o = L._60I;
                o.clear(), L._91I = 0, L._39o._roots.each(function(n) {
                    if (n.isVisible()) {
                        var S = L._91I + n.getWidth();
                        L._91I <= y.x + y.width && S >= y.x && o.add({
                            column: n,
                            startX: L._91I
                        }), L._91I = S
                    }
                })
            }, G.drawData = function(S, $, X) {
                var B = this,
                    L = B._rowHeight,
                    o = L * X,
                    i = B.isSelected($),
                    l = B._29I,
                    p = l.x,
                    x = l.width;
                B.drawRowBackground(S, $, i, p, o, x, L), B._60I.each(function(d) {
                    var r = d.column,
                        g = d.startX,
                        M = r.getWidth();
                    M > 0 && !B.isEditing($, r) && (S.save(), S.beginPath(), S.rect(g, o, M, L), S.clip(), B._87o(B.drawCell(S, $, i, r, g, o, M, L), X, g, o, M, L), B._columnLineVisible && or(S, g + M - 1, o, 1, L, B._columnLineColor), S.restore())
                }), B._rowLineVisible && or(S, p, o + L - 1, x, 1, B._rowLineColor)
            }, G.drawCell = function(o, O, U, B, S, e, M, q) {
                var d = this;
                if (B.drawCell) return B.drawCell(o, O, U, B, S, e, M, q, d);
                var V = d.getValue(O, B);
                ut(o, V, B, d.getLabelFont(O, B, V), d.getLabelColor(O, B, V), S, e, M, q, O, d)
            }, G.getColumnModel = function() {
                return this._39o
            }, G._17o = function() {
                this.redraw()
            }, G._18o = function($) {
                var o = this;
                $.data === o._sortColumn && pt[$.property] ? o.ivm() : (o._42o(), o.redraw())
            }, G._19o = function() {
                this.redraw()
            }, G.getCurrentSortFunc = function() {
                var P = this,
                    W = P._sortColumn;
                if (W && W.isSortable()) {
                    var U = W.getSortFunc(),
                        x = Gm === W.getSortOrder() ? 1 : -1;
                    return U || (U = nr),
                        function(t, f) {
                            return U.call(P, P.getValue(t, W), P.getValue(f, W), t, f) * x
                        }
                }
                return P._sortFunc
            }, G.isCellEditable = function(g, Y, i) {
                return Y.isEditable() && this.isEditable() ? Y.isCellEditable ? Y.isCellEditable(g, Y, i, this) : !0 : !1
            }, G._37O = function(x, Q) {
                if (Bj(Q))
                    for (var m = this, C = m.lp(Q), t = m._60I, y = m._rowHeight, F = m._29I, f = F.x, z = F.y, J = F.width, G = F.height, K = 0; K < t.size(); K++) {
                        var U = t.get(K),
                            _ = U.startX,
                            T = U.column,
                            O = T.getWidth();
                        if (T !== m._31o && T !== m._4o && C.x >= _ && C.x < _ + O && m.isCellEditable(x, T, Q)) {
                            var X = {
                                    x: _,
                                    y: m.getRowIndex(x) * y,
                                    width: O,
                                    height: y
                                },
                                D = {
                                    x: X.x + m.tx(),
                                    y: X.y + m.ty(),
                                    width: X.width,
                                    height: X.height
                                },
                                q = 0,
                                A = 0;
                            return X.x < f ? q = X.x - f : X.x + X.width > f + J && (q = X.x + X.width - f - J), q && (m.tx(m.tx() - q), D.x -= q), X.y < z ? A = X.y - z : X.y + y > z + G && (A = X.y + y - z - G), A && (m.ty(m.ty() - A), D.y -= A), m.beginEditing({
                                data: x,
                                column: T,
                                value: m.getValue(x, T),
                                event: Q,
                                rect: X,
                                editorRect: D,
                                view: m
                            }), void 0
                        }
                    }
            }
        }, xt.BaseItemEditor = function(D, j, c, B) {
            this._data = D, this._column = j, this._master = c, this._editInfo = B
        }, yt("BaseItemEditor", G, {
            ms_ac: ["data", "column", "master", "editInfo"],
            editBeginning: function() {},
            getView: function() {},
            getValue: function() {},
            setValue: function() {}
        });
        var zt = F.Tab = function() {
            ip(zt, this)
        };
        mb("Tab", Mc, {
            ms_ac: ["view", "closable", "disabled", "visible"],
            _icon: Y,
            _closable: !1,
            _disabled: !1,
            _visible: !0,
            setParent: sg
        });
        var At = F.Column = function() {
            ip(At, this)
        };
        mb("Column", Mc, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", nd, kc, Vg, Kq, "align", Kb, "sortOrder", Re, "sortable", "clickable", "nullable", "emptiable", "slider", "colorPicker", "itemEditor"],
            _visible: !0,
            _width: 80,
            _sortOrder: Gm,
            _sortFunc: Y,
            _sortable: !0,
            _clickable: !0,
            setWidth: function(_) {
                16 > _ && (_ = 16);
                var A = this._width;
                this._width = _, this.fp(Kq, A, _)
            },
            getToolTip: function(A, p) {
                return this.formatValue(p.getValue(A, this))
            }
        });
        var Bt = F.Property = function() {
            ip(Bt, this)
        };
        mb("Property", Mc, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", kc, Vg, "categoryName", Kb, "align", "nullable", "emptiable", "slider", "itemEditor", "colorPicker"],
            _categoryName: Y,
            getToolTip: function(R, u, i) {
                var L = this;
                return u ? L.formatValue(i.getValue(R, L)) : i.getPropertyName(L)
            }
        }), xt.AccordionView = function() {
            var Z = this;
            Z._20o = {}, Z._21o = new no, Z._10o = Y, Z._9o = Y, Z._11o = Y, Z._view = Dl(0, Z), Z.iv()
        }, yt("AccordionView", G, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: [se, Xd, "titleHeight", rl, fc, "titleBackground", "selectWidth", Ne, "orientation", "separatorColor"],
            _expandIcon: z.accordionViewExpandIcon,
            _collapseIcon: z.accordionViewCollapseIcon,
            _titleHeight: im,
            _labelColor: z.accordionViewLabelColor,
            _labelFont: z.accordionViewLabelFont,
            _titleBackground: z.accordionViewTitleBackground,
            _selectBackground: z.accordionViewSelectBackground,
            _selectWidth: z.accordionViewSelectWidth,
            _orientation: "v",
            _separatorColor: z.accordionViewSeparatorColor,
            onPropertyChanged: function() {
                this.iv()
            },
            getView: function() {
                return this._view
            },
            getTitles: function() {
                return this._21o
            },
            getCurrentTitle: function() {
                return this._10o
            },
            add: function(f, S, U, w) {
                var O = this,
                    c = Qr(),
                    A = {
                        content: S,
                        div: c,
                        canvas: ts(c),
                        icon: w
                    };
                if (O._20o[f]) throw f + " already exists";
                var h = A.downEventFunc = function(E) {
                        Fq(E)
                    },
                    E = A.upEventFunc = function(V) {
                        Fq(V), Bj(V) && (O._10o === f ? O.collapse() : O.expand(f))
                    };
                [Pc, uo].forEach(function(d) {
                    D(c, d, h)
                }), [nq, Wk].forEach(function(B) {
                    D(c, B, E)
                }), c.style.cursor = pi, xb(O._view, c), O._20o[f] = A, O._21o.add(f), U && O.expand(f), O.iv()
            },
            remove: function(W) {
                var p = this,
                    j = p._20o[W];
                if (j) {
                    var O = j.div;
                    Fi(O), [Pc, uo].forEach(function(y) {
                        J(O, y, j.downEventFunc)
                    }), [nq, Wk].forEach(function($) {
                        J(O, $, j.upEventFunc)
                    }), delete p._20o[W], p._21o.remove(W), p.iv()
                }
            },
            clear: function() {
                var I = this;
                I._21o.toArray().forEach(I.remove, I), I._20o = {}, I._21o.clear(), I.iv()
            },
            isExpanded: function(D) {
                return this._10o === D
            },
            expand: function(l) {
                var _ = this;
                _._20o[l] && _._10o !== l && (_._10o = l, _.onExpanded(l), _.iv())
            },
            onExpanded: function() {},
            collapse: function() {
                var C = this;
                C._10o && (C.onCollapsed(C._10o), delete C._10o, C.iv())
            },
            onCollapsed: function() {},
            initCanvas: function(l, i, O) {
                yh(l, i, O);
                var g = Bc(l);
                return vb(g, 0, 0, 1), g.clearRect(0, 0, i, O), g
            },
            drawTitle: function(Y, Z, t, D, q) {
                var k = this,
                    L = Di(q.icon),
                    X = k.isExpanded(Z),
                    A = k._titleHeight,
                    _ = k._titleBackground,
                    V = k._selectWidth,
                    m = k._separatorColor,
                    o = Di(X ? k._expandIcon : k._collapseIcon),
                    S = V + 4;
                or(Y, 0, 0, t, D, _), X && V && or(Y, 0, 0, V, D, k._selectBackground), (X || k._21o.get(k._21o.size() - 1) !== Z) && or(Y, 0, D - 1, t, 1, m ? m : zj(_)), L && (Qm(Y, L, S + ps(L) / 2, A / 2), S += ps(L) + 2), Dq(Y, Z, k.getLabelFont(Z), k.getLabelColor(Z), S, 0, 0, A), o && Qm(Y, o, t - ps(o) / 2 - 4, A / 2)
            },
            validateImpl: function() {
                var I = this,
                    L = I._view,
                    o = 0,
                    O = 0,
                    U = I.getWidth(),
                    F = I.getHeight(),
                    g = I._titleHeight,
                    X = I._21o.size() * g,
                    l = I._11o,
                    Z = I._9o;
                delete I._11o, delete I._9o, I._21o.each(function(m) {
                    var e, J, f = I._20o[m],
                        A = f.content,
                        v = I._10o === m;
                    Vj(I) ? (Bh(f.div, o, 0, g, F), e = I.initCanvas(f.canvas, g, F), uk(e, 0, F), rf(e, -yr), I.drawTitle(e, m, F, g, f), e.restore(), v ? (J = q(0, U - X), A && (I._11o = A, I._9o = ds(A), Bh(A, o + g, 0, J, F)), o += g + J) : o += g) : (Bh(f.div, 0, O, U, g), e = I.initCanvas(f.canvas, U, g), I.drawTitle(e, m, U, g, f), e.restore(), v ? (J = q(0, F - X), A && (I._11o = A, I._9o = ds(A), Bh(A, 0, O + g, U, J)), O += g + J) : O += g)
                });
                var T = I._9o;
                l && l !== I._11o && l.endEditing && l.endEditing(), T && T !== Z && xb(L, T), Z && Z !== T && Fi(Z)
            }
        }), xt.SplitView = function(S, j, q, g) {
            var i = this,
                n = i._dividerDiv = Qr(),
                e = i._60O = ts(),
                N = i._61O = ts(),
                k = e.style,
                $ = N.style;
            i._view = Dl(1, i), xb(i._view, n), k.msTouchAction = Pe, k.pointerEvents = Pe, k.cursor = pi, $.msTouchAction = Pe, $.pointerEvents = Pe, $.cursor = pi, S && i.setLeftView(S), j && i.setRightView(j), q && i.setOrientation(q), g != Y && i.setPosition(g), i.setStatus(bf), new Ct(i)
        }, yt("SplitView", G, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: ["continuousLayout", "dividerSize", "dividerBackground", "toggleIcon", "togglable", "dragOpacity", "orientation", "draggable", "status"],
            _continuousLayout: !1,
            _position: .5,
            _togglable: !0,
            _orientation: "h",
            _draggable: !0,
            _dividerSize: z.splitViewDividerSize,
            _dividerBackground: z.splitViewDividerBackground,
            _dragOpacity: z.splitViewDragOpacity,
            _toggleIcon: z.splitViewToggleIcon,
            onPropertyChanged: function() {
                this.iv()
            },
            getDividerDiv: function() {
                return this._dividerDiv
            },
            getPosition: function() {
                return this._position
            },
            setPosition: function(y, _) {
                var k = this,
                    L = k._position;
                isNaN(y) || (_ || (k._82O = 0 > y ? -1 : y > 1 ? 1 : 0), k._position = y, k.fp($n, L, y))
            },
            getLeftView: function() {
                return this._leftView
            },
            setLeftView: function(m) {
                var X = this,
                    f = X._leftView,
                    W = X._view;
                if (X._leftView !== m) {
                    if (f && f !== X._rightView) {
                        var j = ds(f);
                        j.parentNode === W && Fi(j)
                    }
                    if (X._leftView = m, m) {
                        var i = ds(m);
                        i.parentNode !== W && W.insertBefore(i, X._dividerDiv)
                    }
                    X.fp("leftView", f, m)
                }
            },
            getRightView: function() {
                return this._rightView
            },
            setRightView: function(u) {
                var r = this,
                    d = r._rightView,
                    p = r._view;
                if (r._rightView !== u) {
                    if (d && d !== r._leftView) {
                        var Q = ds(d);
                        Q.parentNode === p && Fi(Q)
                    }
                    if (r._rightView = u, u) {
                        var g = ds(u);
                        g.parentNode !== p && p.insertBefore(g, r._dividerDiv)
                    }
                    r.fp("rightView", d, u)
                }
            },
            validateImpl: function() {
                var M = this,
                    v = M._draggable,
                    U = M._position,
                    G = M.getWidth(),
                    c = M.getHeight(),
                    Q = M._dividerSize,
                    y = M._dividerBackground,
                    j = $r ? 18 : 8,
                    L = M._dividerDiv,
                    E = M._82O,
                    A = M._60O,
                    k = M._61O,
                    e = M._toggleIcon,
                    $ = M._status,
                    B = L.style,
                    D = null,
                    T = $r ? 20 : 4,
                    I = e.comps[0];
                Q >= j || 0 === Q ? M._coverDiv && (Fi(M._coverDiv), delete M._coverDiv) : M._coverDiv || (M._coverDiv = Qr(), Bp && (M._coverDiv.style.background = Mp), xb(L, M._coverDiv)), M._togglable ? A.parentNode || (xb(L, A), xb(L, k)) : (Fi(A), Fi(k));
                var g = M._coverDiv,
                    z = M._leftView,
                    J = M._rightView;
                if (Vj(M)) {
                    if (Q > G && (Q = G), $ === bf)
                        if (1 === E) var R = h(U, G),
                            p = q(0, G - Q - R);
                        else -1 === E ? (p = h(-U, G), R = q(0, G - Q - p)) : (R = X((G - Q) * U), p = q(0, G - Q - R));
                    else "cl" === $ ? (R = 0, p = q(0, G - Q)) : "cr" === $ && (p = 0, R = q(0, G - Q));
                    z && Bh(z, 0, 0, R, c), J && Bh(J, R + Q, 0, p, c), Bh(L, R, 0, Q, c), M._22o = R, g && (Bh(g, Q / 2 - j / 2, 0, j, c), g.style.cursor = v ? $q : ""), L.style.cursor = v ? $q : "";
                    var O = L.clientHeight / 2,
                        F = L.clientWidth;
                    yh(A, F, F), Bh(A, 0, O - F - T, F, F), D = Bc(A), vb(D, 0, 0, 1), I.rotation = -yr, ic(D, e, 0, 0, F, F), D.restore(), yh(k, F, F), Bh(k, 0, O + T, F, F), D = Bc(k), vb(D, 0, 0, 1), I.rotation = yr, ic(D, e, 0, 0, F, F), D.restore()
                } else {
                    if (Q > c && (Q = c), $ === bf)
                        if (1 === E) var S = h(U, c),
                            W = q(0, c - Q - S);
                        else -1 === E ? (W = h(-U, c), S = q(0, c - Q - W)) : (S = X((c - Q) * U), W = q(0, c - Q - S));
                    else "cl" === $ ? (S = 0, W = q(0, c - Q)) : "cr" === $ && (W = 0, S = q(0, c - Q));
                    z && Bh(z, 0, 0, G, S), J && Bh(J, 0, S + Q, G, W), Bh(L, 0, S, G, Q), M._22o = S, g && (Bh(g, 0, Q / 2 - j / 2, G, j), g.style.cursor = v ? Fd : ""), B.cursor = v ? Fd : "";
                    var l = L.clientWidth / 2,
                        F = L.clientHeight;
                    yh(A, F, F), Bh(A, l - F - T, 0, F, F), D = Bc(A), vb(D, 0, 0, 1), I.rotation = 0, ic(D, e, 0, 0, F, F), D.restore(), yh(k, F, F), Bh(k, l + T, 0, F, F), D = Bc(k), vb(D, 0, 0, 1), I.rotation = f, ic(D, e, 0, 0, F, F), D.restore()
                }
                B.background = y
            }
        });
        var Ct = function(X) {
            this.sv = X, this.addListeners()
        };
        Wj(Ct, G, {
            ms_listener: 1,
            getView: function() {
                return this.sv.getView()
            },
            handle_touchstart: function(a) {
                var q = this,
                    I = q.sv,
                    p = I._dividerDiv,
                    H = I._60O,
                    y = I._61O,
                    w = I._status,
                    Z = a.target;
                if (Z === H) w === bf ? I.setStatus("cl") : "cr" === w && I.setStatus(bf);
                else if (Z === y) w === bf ? I.setStatus("cr") : "cl" === w && I.setStatus(bf);
                else if (Xn(a) && (Z === p || Z === I._coverDiv) && (Fq(a), I.isDraggable())) {
                    I.getLeftView(), I.getRightView();
                    var G = q.maskDiv = Qr();
                    if (G.style.left = 0, G.style.top = 0, G.style.width = I.getWidth() + "px", G.style.height = I.getHeight() + "px", I.getView().appendChild(G), !I.isContinuousLayout()) {
                        var $ = q.resizeDiv = Qr();
                        $.style.left = p.style.left, $.style.top = p.style.top, $.style.width = p.style.width, $.style.height = p.style.height, $.style.opacity = I.getDragOpacity(), $.style.background = I.getDividerBackground(), xb(q.getView(), $)
                    }
                    q._lastAbsPosition = I._22o, q._86o = Vj(I) ? Lo(a).x : Lo(a).y, yq(q, a)
                }
            },
            handleWindowTouchMove: function(e) {
                Xn(e) && this.update(e, this.sv.isContinuousLayout())
            },
            handleWindowTouchEnd: function(O) {
                var P = this;
                P.update(O, !0), P.sv.setStatus(bf), P.maskDiv && Fi(P.maskDiv), P.resizeDiv && Fi(P.resizeDiv), P.maskDiv = P.resizeDiv = Y
            },
            handle_mousedown: function(Y) {
                Bj(Y) && this.handle_touchstart(Y)
            },
            handleWindowMouseMove: function(b) {
                this.handleWindowTouchMove(b)
            },
            handleWindowMouseUp: function(l) {
                this.handleWindowTouchEnd(l)
            },
            update: function(I, W) {
                var Z = this,
                    A = Z.sv,
                    K = Vj(A) ? A.getWidth() : A.getHeight(),
                    u = A._dividerSize,
                    T = Z._lastAbsPosition - Z._86o;
                Vj(A) ? (T += Lo(I).x, T > K - u && (T = K - u), 0 > T && (T = 0), Z.resizeDiv && (Z.resizeDiv.style.left = T + dr)) : (T += Lo(I).y, T > K - u && (T = K - u), 0 > T && (T = 0), Z.resizeDiv && (Z.resizeDiv.style.top = T + dr)), W && K !== u && (1 === A._82O ? A.setPosition(T, 1) : -1 === A._82O ? A.setPosition(T - K + u, 1) : A.setPosition(T / (K - u), 1))
            }
        }), xt.TabView = function() {
            var E = this,
                n = E._view = Dl(1, E),
                S = E._91O = Qr(1),
                p = E._tabModel = new _c,
                R = p.sm(),
                q = E.invalidate;
            E._7o = new no, E._canvas = ts(S), xb(n, S), xb(n, E._92O = Qr(1)), R.setSelectionMode(Zp), R.ms(E.handleSelectionChange, E), p.mm(q, E), p.mh(q, E), p.md(q, E), E._interactor = new Dt(E), E.iv()
        }, yt("TabView", G, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_ty: 1,
            ms_lp: 1,
            ms_ac: ["movable", "tabGap", "tabHeight", "tabPosition", rl, fc, "tabHPadding", "tabBackground", "selectWidth", Ne, "moveBackground", "insertColor"],
            _tabHPadding: 0,
            _tabPosition: vi,
            _tabHeight: im,
            _tabGap: z.tabViewTabGap,
            _labelColor: z.tabViewLabelColor,
            _labelFont: z.tabViewLabelFont,
            _tabBackground: z.tabViewTabBackground,
            _selectWidth: z.tabViewSelectWidth,
            _selectBackground: z.tabViewSelectBackground,
            _moveBackground: z.tabViewMoveBackground,
            _insertColor: z.tabViewInsertColor,
            _movable: !0,
            handleSelectionChange: function() {
                this._selectionChanged = !0, this.invalidate()
            },
            getContentDiv: function() {
                return this._92O
            },
            getTitleDiv: function() {
                return this._91O
            },
            getTabModel: function() {
                return this._tabModel
            },
            add: function(g, B, y) {
                var q, h = this._tabModel;
                return g instanceof zt ? (q = g, B && q.setView(B)) : (q = new zt, q.setName(g), q.setView(B)), h.add(q), y && h.sm().ss(q), q
            },
            getLabel: function(l) {
                return l.toLabel()
            },
            onPropertyChanged: function() {
                this.iv()
            },
            _7Q: function(F) {
                this._23o = F, this.iv()
            },
            get: function(G) {
                var W = this,
                    w = W._tabModel;
                if (Jm(G)) return w._roots.get(G);
                if (Sf(G)) {
                    var T;
                    return w.each(function(Q) {
                        G === W.getLabel(Q) && (T = Q)
                    }), T
                }
                return G instanceof zt ? G : Y
            },
            select: function(Q) {
                this._tabModel.sm().ss(this.get(Q))
            },
            remove: function(n) {
                var Q = this;
                if (n = Q.get(n)) {
                    var _ = Q._tabModel,
                        b = _._roots.indexOf(n);
                    Q._tabModel.remove(n), Q.selectByIndex(--b)
                }
            },
            getCurrentTab: function() {
                return this._8o
            },
            hideTabView: function(X, D) {
                D.parentNode === this._92O && (hi(D) ? (D.style.display = Yh, D._tab_ = X) : Fi(D), Wd())
            },
            showTabView: function(O, C) {
                hi(C) && (C.style.display = "block", C._tab_ = O), C.parentNode !== this._92O && (xb(this._92O, C), Wd())
            },
            _24o: function() {
                var b, d = this,
                    I = d._8o,
                    O = d._9o,
                    J = d._tabModel.sm().ld();
                J && (b = ds(J.getView())), b !== O && (O && (I.getView() && I.getView().endEditing && I.getView().endEditing(), d.hideTabView(I, O)), b && d.showTabView(J, b)), d._8o = J, d._9o = b, I !== J && d.onTabChanged(I, J)
            },
            onTabClosing: function() {
                return !0
            },
            onTabChanged: function() {},
            onTabClosed: function(J, e) {
                this.selectByIndex(--e)
            },
            selectByIndex: function(x) {
                var c = this,
                    v = c._tabModel,
                    O = v.size();
                if (O && !v.sm().ld()) {
                    x == Y && (x = 0), x >= O && (x = O - 1), 0 > x && (x = 0);
                    for (var T = x; T >= 0; T--) {
                        var A = c.get(T);
                        if (!A.isDisabled()) return c.select(A), A
                    }
                    for (T = x + 1; O > T; T++)
                        if (A = c.get(T), !A.isDisabled()) return c.select(A), A
                }
            },
            getTabWidth: function(I) {
                var m = this.getTabHPadding(),
                    E = 4 + 2 * m,
                    F = Di(I.getIcon());
                F && (E += ps(F, I) + 4);
                var w = this.getLabel(I);
                return w && (E += xo(this.getLabelFont(I), w).width + 4), I.isClosable() && (E += 10), E
            },
            drawTab: function(c, X, G, L, b, i, m) {
                var S, C = this,
                    r = C._tabPosition,
                    v = this.getTabHPadding(),
                    l = G + 4 + v,
                    Y = C._selectWidth,
                    $ = Di(X.getIcon()),
                    w = X.isDisabled(),
                    z = C.getLabelColor(X),
                    H = C.getLabelFont(X),
                    Q = C.getLabel(X),
                    k = C._selectBackground,
                    W = r === _i + "-vertical",
                    p = r === rj + "-vertical";
                (W || p) && (l = L + 4 + v), w && (c.globalAlpha = ll), or(c, G, L, b, i, m), X === C._8o && Y && (r === vi ? or(c, G, L + i - Y, b, Y, k) : r === _i ? or(c, G + b - Y, L, Y, i, k) : r === rj ? or(c, G, L, Y, i, k) : W ? or(c, G + b - Y, L, Y, i, k) : p ? or(c, G, L, Y, i, k) : or(c, G, L, b, Y, k));
                var I = b / 2;
                if (W && (uk(c, I, L + i / 2), rf(c, f), uk(c, -I, -L - i / 2)), $) {
                    var P = hh($, X),
                        y = ps($, X);
                    if (W || p) {
                        var Z = G + b / 2,
                            U = l + P / 2;
                        uk(c, Z, U), rf(c, yr), uk(c, -Z, -U), Qm(c, $, G + b / 2, l + P / 2, X, C), uk(c, Z, U), rf(c, -yr), uk(c, -Z, -U), l += P + 4
                    } else Qm(c, $, l + y / 2, L + i / 2, X, C), l += y + 4
                }
                return W || p ? (uk(c, b / 2, l + b / 2), rf(c, yr), uk(c, -b / 2, -l - b / 2), Dq(c, Q, H, z, G, l, i, b), uk(c, b / 2, l + b / 2), rf(c, -yr), uk(c, -b / 2, -l - b / 2)) : Dq(c, Q, H, z, l, L, b, i), W && (uk(c, I, L + i / 2), rf(c, -f), uk(c, -I, -L - i / 2)), X.isClosable() && (S = p ? {
                    x: G + b - 12,
                    y: L + i - 12,
                    width: 12,
                    height: 12
                } : {
                    x: G + b - 12,
                    y: L + 2,
                    width: 12,
                    height: 12
                }, this.drawCloseIcon(X, c, z, S)), w && (c.globalAlpha = 1), S
            },
            drawCloseIcon: function(y, H, e, d) {
                var j = d.x,
                    V = d.y;
                H.strokeStyle = e, H.lineWidth = 1, H.beginPath(), H.moveTo(j + 2, V + 8), H.lineTo(j + 8, V + 2), H.moveTo(j + 8, V + 8), H.lineTo(j + 2, V + 2), H.stroke()
            },
            getTabAt: function(C) {
                var s = this._interactor._8Q(C);
                return s ? s.tab : null
            },
            validateImpl: function() {
                var $ = this;
                $._24o();
                var n, o = $._canvas,
                    _ = $._tabPosition,
                    A = $._91O,
                    p = $._92O,
                    V = $._tabModel,
                    k = $.getWidth(),
                    g = $.getHeight(),
                    K = $._tabHeight,
                    c = $._7o,
                    E = $._tabGap,
                    X = _ === vi,
                    D = _ === _i,
                    i = _ === rj,
                    a = _ === _i + "-vertical",
                    P = _ === rj + "-vertical",
                    w = $._23o,
                    O = 0;
                if ((D || i) && V._roots.each(function(X) {
                        O = q($.getTabWidth(X), O)
                    }), X ? (Bh(A, 0, 0, k, K), n = {
                        x: 0,
                        y: K,
                        width: k,
                        height: q(0, g - K)
                    }) : D ? (Bh(A, 0, 0, O, g), n = {
                        x: O,
                        y: 0,
                        width: q(0, k - O),
                        height: g
                    }) : i ? (Bh(A, k - O, 0, O, g), n = {
                        x: 0,
                        y: 0,
                        width: q(0, k - O),
                        height: g
                    }) : a ? (Bh(A, 0, 0, K, g), n = {
                        x: K,
                        y: 0,
                        width: q(0, k - K),
                        height: g
                    }) : P ? (Bh(A, k - K, 0, K, g), n = {
                        x: 0,
                        y: 0,
                        width: q(0, k - K),
                        height: g
                    }) : (Bh(A, 0, g - K, k, K), n = {
                        x: 0,
                        y: 0,
                        width: k,
                        height: q(0, g - K)
                    }), Bh(p, n), a || P) {
                    $._9o && (n.x = 0, Bh($._8o.getView(), n)), yh(o, K, g);
                    var L = Bc(o),
                        H = 0;
                    if (vb(L, 0, $.ty(), 1), L.clearRect(0, 0, K, g), c.clear(), V._roots.each(function(C) {
                            if (C.isVisible()) {
                                var r, m = $.getTabWidth(C);
                                if (!w || w.tab !== C) {
                                    var J = $.getTabBackground(C);
                                    r = $.drawTab(L, C, 0, H, K, m, J)
                                }
                                c.add({
                                    _75o: r,
                                    tab: C,
                                    startY: H,
                                    endY: H + m,
                                    height: m
                                }), H += m + E
                            }
                        }), $._23Q = q(0, H - E), w) {
                        var x = w.position;
                        $.drawTab(L, w.tab, 0, w.startY, K, w.height, $._moveBackground), or(L, 0, x, K, 1, $._insertColor)
                    }
                    if (L.restore(), $._selectionChanged) {
                        $._selectionChanged = !1;
                        for (var B = $.ty(), j = 0; j < c.size(); j++) {
                            var l = c.get(j);
                            if (l.tab === $._8o) {
                                if (l.endY + B < 0) {
                                    $.ty(-l.startY);
                                    break
                                }
                                if (l.startY + B > g) {
                                    $.ty(g - l.endY);
                                    break
                                }
                            }
                        }
                    }
                    $.ty($.ty())
                } else if (D || i) {
                    $._9o && (n.x = 0, Bh($._8o.getView(), n)), yh(o, O, g);
                    var L = Bc(o),
                        H = 0;
                    if (vb(L, 0, $.ty(), 1), L.clearRect(0, 0, O, g), c.clear(), V._roots.each(function(Y) {
                            if (Y.isVisible()) {
                                var M;
                                if (!w || w.tab !== Y) {
                                    var r = $.getTabBackground(Y);
                                    M = $.drawTab(L, Y, 0, H, O, K, r)
                                }
                                c.add({
                                    _75o: M,
                                    tab: Y,
                                    startY: H,
                                    endY: H + K,
                                    height: K
                                }), H += K + E
                            }
                        }), $._23Q = q(0, H - E), w) {
                        var x = w.position;
                        $.drawTab(L, w.tab, 0, w.startY, O, w.height, $._moveBackground), or(L, 0, x, O, 1, $._insertColor)
                    }
                    if (L.restore(), $._selectionChanged) {
                        $._selectionChanged = !1;
                        for (var B = $.ty(), j = 0; j < c.size(); j++) {
                            var l = c.get(j);
                            if (l.tab === $._8o) {
                                if (l.endY + B < 0) {
                                    $.ty(-l.startY);
                                    break
                                }
                                if (l.startY + B > g) {
                                    $.ty(g - l.endY);
                                    break
                                }
                            }
                        }
                    }
                    $.ty($.ty())
                } else {
                    $._9o && (n.y = 0, Bh($._8o.getView(), n)), yh(o, k, K);
                    var L = Bc(o),
                        R = 0;
                    if (vb(L, $.tx(), 0, 1), L.clearRect(0, 0, k, K), c.clear(), V._roots.each(function(M) {
                            if (M.isVisible()) {
                                var g, f = $.getTabWidth(M);
                                if (!w || w.tab !== M) {
                                    var H = $.getTabBackground(M);
                                    g = $.drawTab(L, M, R, 0, f, K, H)
                                }
                                c.add({
                                    _75o: g,
                                    tab: M,
                                    startX: R,
                                    endX: R + f,
                                    width: f
                                }), R += f + E
                            }
                        }), $._64I = q(0, R - E), w) {
                        var x = w.position;
                        $.drawTab(L, w.tab, w.startX, 0, w.width, K, $._moveBackground), Te(L, $._insertColor, x, 0, K)
                    }
                    if (L.restore(), $._selectionChanged) {
                        $._selectionChanged = !1;
                        for (var S = $.tx(), j = 0; j < c.size(); j++) {
                            var l = c.get(j);
                            if (l.tab === $._8o) {
                                if (l.endX + S < 0) {
                                    $.tx(-l.startX);
                                    break
                                }
                                if (l.startX + S > k) {
                                    $.tx(k - l.endX);
                                    break
                                }
                            }
                        }
                    }
                    $.tx($.tx())
                }
                for (var Q = [], v = p.children, j = 0; j < v.length; j++) {
                    var r = v[j],
                        b = r._tab_;
                    b && !V.contains(b) && Q.push(r)
                }
                Q.forEach(function(I) {
                    p.removeChild(I)
                })
            }
        });
        var Dt = function(t) {
            this.tv = t, this.addListeners()
        };
        Wj(Dt, G, {
            ms_listener: 1,
            getView: function() {
                return this.tv._91O
            },
            handle_mousewheel: function(c) {
                this.handleScroll(c, 10 * (c.wheelDelta / 40))
            },
            handle_DOMMouseScroll: function(I) {
                this.handleScroll(I, 10 * -I.detail)
            },
            handleScroll: function(u, A) {
                Fq(u);
                var W = this.tv,
                    l = W._tabPosition;
                !W._40o() || l !== vi && l !== Ei || W.tx(this.tv.tx() + A), !W._41o() || l !== _i && l !== rj && l !== _i + "-vertical" && l !== rj + "-vertical" || W.ty(this.tv.ty() + A)
            },
            _8Q: function(U) {
                var q, E, n = this.tv,
                    g = n._tabPosition,
                    A = n._7o;
                if (g === vi || g === Ei) {
                    var l = n.lp(U).x;
                    for (q = 0; q < A.size(); q++)
                        if (E = A.get(q), E.startX <= l && l <= E.endX) return E
                } else if (g === _i || g === rj || g === _i + "-vertical" || g === rj + "-vertical") {
                    var c = n.lp(U).y;
                    for (q = 0; q < A.size(); q++)
                        if (E = A.get(q), E.startY <= c && c <= E.endY) return E
                }
                return Y
            },
            isClickable: function(q) {
                var g = this.tv,
                    c = g._tabPosition,
                    y = this._73o = this._8Q(q);
                return !g._40o() || c !== vi && c !== Ei ? !g._41o() || c !== _i && c !== rj && c !== _i + "-vertical" && c !== rj + "-vertical" ? y && (!y.tab.isDisabled() || g.isMovable()) : !0 : !0
            },
            handle_mousemove: function(F) {
                var s = this;
                xn ? s._74o = s._8Q(F) : s.getView().style.cursor = s.isClickable(F) ? pi : ""
            },
            handle_mousedown: function(Y) {
                this.handle_mousemove(Y), this.handle_touchstart(Y)
            },
            handle_touchstart: function(s) {
                var m = this,
                    z = m.tv,
                    M = z._tabPosition;
                Fq(s), Bj(s) && m.isClickable(s) && (M === vi || M === Ei ? (m.x = Lo(s).x, m.lp = z.lp(s), m.tx = z.tx()) : (m.y = Lo(s).y, m.lp = z.lp(s), m.ty = z.ty()), yq(m, s))
            },
            handle_mouseup: function(w) {
                this.handle_touchend(w)
            },
            handle_touchend: function(v) {
                if (km(v)) {
                    var w = this._73o;
                    if (!w) return;
                    var s = this.tv,
                        r = s.getTabModel(),
                        H = w.tab;
                    if (!H.isDisabled() && H.isClosable()) {
                        var A = function() {
                            var d = r._roots.indexOf(H);
                            r.remove(H), s.onTabClosed(H, d)
                        };
                        s.onTabClosing(H, A) && A()
                    }
                }
            },
            handleWindowMouseMove: function(M) {
                this.handleWindowTouchMove(M)
            },
            handleWindowTouchMove: function(p) {
                var l, m = this,
                    z = m.tv,
                    _ = z._tabPosition,
                    T = m._73o;
                if (_ === vi || _ === Ei) {
                    if (l = Lo(p).x - m.x, !m._25o && !m.moving && r(l) > 2 && (z._40o() && !Gp(p) ? m._25o = 1 : T && z.isMovable() && (m.moving = 1)), m._25o) z.tx(m.tx + l);
                    else if (m.moving) {
                        var o = m.lp.x + l,
                            C = z._tabGap / 2;
                        z._7o.each(function(Q) {
                            var f = Q.endX,
                                A = o - Q.startX < f - o;
                            o >= Q.startX && f >= o && z._7Q({
                                tab: T.tab,
                                startX: T.startX + l,
                                width: T.width,
                                front: A,
                                insertTab: Q.tab,
                                position: A ? q(0, Q.startX - C) : h(z._64I, f + C)
                            })
                        })
                    }
                } else if (l = Lo(p).y - m.y, !m._25o && !m.moving && r(l) > 2 && (z._41o() && !Gp(p) ? m._25o = 1 : T && z.isMovable() && (m.moving = 1)), m._25o) z.ty(m.ty + l);
                else if (m.moving) {
                    var n = m.lp.y + l,
                        C = z._tabGap / 2;
                    z._7o.each(function(W) {
                        var k = W.endY,
                            B = n - W.startY < k - n;
                        n >= W.startY && k >= n && z._7Q({
                            tab: T.tab,
                            startY: T.startY + l,
                            height: T.height,
                            front: B,
                            insertTab: W.tab,
                            position: B ? q(0, W.startY - C) : h(z._23Q, k + C)
                        })
                    })
                }
            },
            handleWindowMouseUp: function(y) {
                this.handleWindowTouchEnd(y)
            },
            handleWindowTouchEnd: function() {
                var z = this,
                    U = z.tv,
                    p = U._tabPosition,
                    F = U.getTabModel(),
                    o = F._roots,
                    K = z._73o;
                if (z.moving) {
                    var f = U._23o;
                    if (f && f.insertTab !== f.tab) {
                        var j = f.tab,
                            C = o.remove(j),
                            P = o.indexOf(f.insertTab);
                        P >= 0 && (f.front || P++, P <= o.size() && (o.add(j, P), F._38I(j, C, P)))
                    }
                    U._7Q(Y), delete z.moving
                } else if (!z._25o && K) {
                    j = K.tab;
                    var D = z._74o;
                    if (!D || D.tab === j)
                        if (!j.isDisabled() && mm(K._75o, z.lp)) {
                            var R = function() {
                                var l = o.indexOf(j);
                                F.remove(j), U.onTabClosed(j, l)
                            };
                            U.onTabClosing(j, R) && R()
                        } else j.isDisabled() || U._8o === j || F.sm().ss(j)
                }
                z._25o = z._73o = z._74o = p === vi || p === Ei ? z.x = z.lp = z.tx = Y : z.y = z.lp = z.ty = Y
            }
        }), xt.PropertyView = function(y) {
            var G = this;
            G._view = Dl(1, G), G._canvas = ts(G._view), xb(G._view, G._79O = Qr()), G._rows = new no, G._28o = new no, G._26o = {}, G._26Q = {};
            var U = G._propertyModel = new _c,
                h = G.ivm;
            U.mm(h, G), U.md(h, G), U.mh(h, G), G.dm(y ? y : new _c), new Et(G)
        }, yt("PropertyView", G, {
            ms_ac: [rl, th, fc, kc, Vg, "categorizable", Hl, Re, fg, se, Xd, vr, lg, sf, "selectRowIndex", Ne, "background", xq, Vk, ns, pq, Xi],
            ms_v: 1,
            ms_dm: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            _45o: 1,
            _47o: 1,
            ms_tip: 1,
            _29I: yf,
            _59I: 0,
            _9I: 0,
            _selectRowIndex: -1,
            _editable: !0,
            _batchEditable: !0,
            _categorizable: !0,
            _indent: Fm,
            _background: z.propertyViewBackground,
            _expandIcon: z.propertyViewExpandIcon,
            _collapseIcon: z.propertyViewCollapseIcon,
            _scrollBarColor: bp,
            _scrollBarSize: Wn,
            _autoHideScrollBar: Yl,
            _selectBackground: z.propertyViewSelectBackground,
            _rowHeight: hr,
            _rowLineVisible: z.propertyViewRowLineVisible,
            _rowLineColor: z.propertyViewRowLineColor,
            _10I: .5,
            _columnLineVisible: z.propertyViewColumnLineVisible,
            _columnLineColor: z.propertyViewColumnLineColor,
            _labelColor: z.propertyViewLabelColor,
            _labelSelectColor: z.propertyViewLabelSelectColor,
            _labelFont: z.propertyViewLabelFont,
            getRows: function() {
                return this._rows
            },
            getColumnPosition: function() {
                return this._10I
            },
            setColumnPosition: function(k) {
                0 > k && (k = 0), k > 1 && (k = 1);
                var Z = this,
                    L = Z._10I;
                Z._10I = k, Z.fp("columnPosition", L, k)
            },
            getPropertyName: function(r) {
                return r.toLabel()
            },
            getLabelFont: function() {
                return this._labelFont
            },
            getLabelColor: function(F, P, l) {
                return l === this._selectRowIndex ? this._labelSelectColor : this._labelColor
            },
            getPropertyFont: function() {
                return this._labelFont
            },
            getPropertyColor: function(c, k) {
                return k === this._selectRowIndex ? this._labelSelectColor : c.getColor() || this._labelColor
            },
            getCategoryFont: function() {
                return this._labelFont
            },
            getCategoryColor: function() {
                return this._labelColor
            },
            adjustTranslateX: function() {
                return 0
            },
            adjustTranslateY: function(j) {
                var C = this.getHeight() - this._59I;
                return C > j && (j = C), j > 0 ? 0 : X(j)
            },
            isExpanded: function(F) {
                if (!F) return !0;
                var z = this._26o[F];
                return z ? z.isExpanded : !(this._26Q[F] === !1)
            },
            toggle: function(T) {
                var m = this;
                m.isExpanded(T) ? m.collapse(T) : m.expand(T)
            },
            expandAll: function() {
                this.validate();
                for (var j in this._26o) this.expand(j)
            },
            expand: function(q) {
                if (q && q !== Yh) {
                    var G = this,
                        e = G._26o[q];
                    e && !e.isExpanded && (e.isExpanded = !0, G.onExpanded(q), G.ivm())
                }
            },
            onExpanded: function() {},
            collapseAll: function() {
                this.validate();
                for (var s in this._26o) this.collapse(s)
            },
            collapse: function(d) {
                if (d && d !== Yh) {
                    var $ = this,
                        z = $._26o[d];
                    z && z.isExpanded && (z.isExpanded = !1, $.onCollapsed(d), $.ivm())
                }
            },
            onCollapsed: function() {},
            getCategoryName: function(U) {
                if (!this.isCategorizable()) return Yh;
                var Z = U.getCategoryName();
                return Z ? Z : Yh
            },
            getPropertyModel: function() {
                return this._propertyModel
            },
            handleSelectionChange: function() {
                this.ivm()
            },
            setDataModel: function(u) {
                var l = this,
                    n = l._dataModel;
                n !== u && (n && (n.umd(l.handlePropertyChange, l), l._selectionModel || n.sm().ums(l.handleSelectionChange, l)), l._dataModel = u, u.md(l.handlePropertyChange, l), l._selectionModel ? l._selectionModel._21I(u) : u.sm().ms(l.handleSelectionChange, l), l.fp(co, n, u))
            },
            isVisible: function(r) {
                return this._visibleFunc ? this._visibleFunc(r) : !0
            },
            onPropertyChanged: function(Y) {
                var D = this,
                    T = Y.property;
                st[T] ? D.ivm() : D.iv(), T === Ie && D._43o()
            },
            getCurrentData: function() {
                return this._27o
            },
            updateCurrentData: function() {
                this._27o = this.sm().ld()
            },
            getRawProperties: function() {
                return this._27o ? this._propertyModel._roots : vg
            },
            handlePropertyChange: function(U) {
                this._27o === U.data && this.iv()
            },
            ivm: function() {
                this.invalidateModel()
            },
            invalidateModel: function() {
                var R = this;
                R._96I || (R.setSelectRowIndex(-1), R._96I = 1, R.iv())
            },
            redraw: function() {
                this.iv()
            },
            validateModel: function() {
                var Q = this,
                    i = Q._rows,
                    n = Q._28o,
                    A = {},
                    t = new no,
                    R = Q._27o;
                Q.updateCurrentData(), R !== Q._27o && Q.endEditing(), i.clear(), n.clear(), Q.getRawProperties().each(function($) {
                    if (Q.isVisible($)) {
                        t.add($);
                        var p = Q.getCategoryName($);
                        A[p] || (n.add(p, p === Yh ? 0 : O), A[p] = {
                            isExpanded: Q.isExpanded(p),
                            properties: new no
                        })
                    }
                }), Q._sortFunc && t.sort(Q._sortFunc);
                for (var K in Q._26o) Q._26Q[K] = Q.isExpanded(K);
                Q._26o = A, n.each(function(n) {
                    n !== Yh && i.add(n);
                    var I = A[n];
                    I.isExpanded && t.each(function(H) {
                        Q.getCategoryName(H) === n && (I.properties.add(H), i.add({
                            property: H,
                            data: Q._27o
                        }))
                    }, Q)
                })
            },
            validateImpl: function() {
                var F = this;
                F._76o(), F._96I && (F.validateModel(), delete F._96I);
                var d = F._canvas,
                    t = F.getWidth(),
                    n = F.getHeight(),
                    X = -F.ty(),
                    I = F._rowHeight,
                    b = F._indent,
                    u = t - b,
                    E = F._rows,
                    U = E.size(),
                    z = F._9I = b + u * F._10I,
                    o = F._59I = U * I;
                yh(d, t, n), F._29I = {
                    x: 0,
                    y: X,
                    width: t,
                    height: n
                }, F._31I = e(X / I), F._14I = $((X + n) / I), F._31I < 0 && (F._31I = 0), F._14I > U && (F._14I = U);
                var R, m = Bc(d),
                    y = F._background;
                vb(m, 0, -X, 1), m.beginPath(), m.rect(0, X, t, n), m.clip(), m.clearRect(0, X, t, n), F._93db(m), y && or(m, 0, 0, b, o, y);
                for (var K = F._31I; K < F._14I; K++) {
                    var f = E.get(K),
                        X = I * K;
                    if (Sf(f)) y && or(m, b, X, u, I, y), R = Di(F.isExpanded(f) ? F._expandIcon : F._collapseIcon), R && Iq(m, R, lq, 0, X, b, I), m.save(), m.beginPath(), m.rect(b, X, u, I), m.clip(), F.drawCategoryName(m, f, K, b, X, u, I), m.restore();
                    else {
                        var D = f.property,
                            j = f.data,
                            R = Di(D.getIcon()),
                            h = F._selectRowIndex === K ? F.getSelectBackground() : Y;
                        if (R && Iq(m, R, lq, 0, X, b, I), h && or(m, b, X, u, I, h), m.save(), m.beginPath(), m.rect(b, X, z - b, I), m.clip(), F.drawPropertyName(m, D, K, b, X, z - b, I), m.restore(), !F.isEditing(j, D)) {
                            var g = z + 1,
                                J = t - z - 1;
                            m.save(), m.beginPath(), m.rect(g, X, J, I), m.clip(), F._87o(F.drawPropertyValue(m, D, F.getValue(j, D), K, g, X, J, I, j), K, g, X, J, I), m.restore()
                        }
                    }
                    F._rowLineVisible && or(m, b, X + I - 1, u, 1, F._rowLineColor)
                }
                F._columnLineVisible && (or(m, z, 0, 1, o, F._columnLineColor), or(m, t - 1, 0, 1, o)), F._92db(m), F._93I(), m.restore(), F.ty(F.ty())
            },
            drawCategoryName: function(Z, t, q, u, I, N, B) {
                Dq(Z, t, this.getCategoryFont(t), this.getCategoryColor(t), u, I, N, B)
            },
            drawPropertyName: function(g, R, L, W, F, I, c) {
                return R.drawPropertyName ? (R.drawPropertyName(g, R, L, W, F, I, c, this), void 0) : (Dq(g, this.getPropertyName(R), this.getPropertyFont(R, L), this.getPropertyColor(R, L), W, F, I, c), void 0)
            },
            drawPropertyValue: function(W, c, p, Y, v, N, E, Z, l) {
                return c.drawPropertyValue ? c.drawPropertyValue(W, c, p, Y, v, N, E, Z, l, this) : (ut(W, p, c, this.getLabelFont(c, p, Y), this.getLabelColor(c, p, Y), v, N, E, Z, l, this), void 0)
            },
            isPropertyEditable: function(K) {
                return K.isEditable() && this.isEditable()
            },
            setProperties: function(B) {
                this._propertyModel.clear(), this.addProperties(B)
            },
            addProperties: function(H) {
                if (H) {
                    var g = this._propertyModel;
                    H.forEach(function(p) {
                        if (!(p instanceof Bt)) {
                            var m = Mo(p.className);
                            p = db(m ? m : Bt, p)
                        }
                        g.add(p)
                    })
                }
            },
            getRowIndexAt: function(J) {
                var Z = this,
                    O = e(Z.lp(J).y / Z._rowHeight);
                return O >= 0 && O < Z._rows.size() ? O : -1
            },
            getPropertyAt: function(H) {
                var v = this,
                    r = v.getRowIndexAt(H);
                return r >= 0 ? v._rows.get(r).property : Y
            },
            getToolTip: function(c) {
                var D = this,
                    Q = D.getPropertyAt(c),
                    x = D._27o;
                return Q && x ? Q.getToolTip(x, D._9I < D.lp(c).x, D) : Y
            }
        });
        var Et = function(y) {
            this.pv = y, this.addListeners()
        };
        Wj(Et, G, {
            ms_listener: 1,
            getView: function() {
                return this.pv._view
            },
            setCursor: function(B) {
                this.getView().style.cursor = B
            },
            clear: function() {
                var Q = this;
                Q._62O = Q.cp = Q.ty = Q.p = Y, Q.setCursor(Df)
            },
            handle_mousedown: function(T) {
                this.handle_touchstart(T)
            },
            handle_touchstart: function($) {
                var B = this,
                    y = B.pv;
                Fq($), y.setFocus($) && (Bj($) ? (B.cp = Lo($), B.ty = y.ty(), B.p = y.getColumnPosition(), B.handle_touchmove($)) : y.setSelectRowIndex(y.getRowIndexAt($)))
            },
            handleWindowMouseUp: function() {
                this.clear()
            },
            handleWindowTouchEnd: function() {
                this.clear()
            },
            handle_mouseup: function(W) {
                this.handle_touchend(W)
            },
            handle_touchend: function(l) {
                var x = this;
                if (x.cp && !x._62O) {
                    var C = x.pv,
                        c = C.lp(l),
                        k = c.x,
                        F = c.y,
                        G = C._indent,
                        $ = C.getRowIndexAt(l),
                        i = C._9I;
                    if ($ >= 0) {
                        var b = C._rowHeight,
                            u = b * $,
                            X = C._rows.get($),
                            q = X.property;
                        if (Sf(X)) Di(C.isExpanded(X) ? C._expandIcon : C._collapseIcon) && k >= 0 && G >= k && F >= u && u + b >= F ? C.toggle(X) : ms(l) && C.toggle(X);
                        else if (k > i && C.isPropertyEditable(q, l)) {
                            var y = {
                                    x: i + 1,
                                    y: u,
                                    width: C.getWidth() - i - 1,
                                    height: b
                                },
                                a = {
                                    x: y.x + C.tx(),
                                    y: y.y + C.ty(),
                                    width: y.width,
                                    height: y.height
                                },
                                R = 0,
                                S = C._29I;
                            y.y < S.y ? R = y.y - S.y : y.y + b > S.y + S.height && (R = y.y + b - S.y - S.height), R && (C.ty(C.ty() - R), a.y -= R), C.beginEditing({
                                data: X.data,
                                property: q,
                                value: C.getValue(X.data, q),
                                event: l,
                                rect: y,
                                editorRect: a,
                                view: C
                            })
                        }
                    }
                    C.setSelectRowIndex($)
                }
                x.clear()
            },
            handleWindowMouseMove: function(s) {
                this.handleWindowTouchMove(s)
            },
            handleWindowTouchMove: function(v) {
                var q = this,
                    $ = q.pv,
                    E = q.ty,
                    F = q.cp,
                    S = Lo(v),
                    g = q._62O;
                if ("p" === g) $.setTranslateY(E + S.y - F.y);
                else if ("c" === g) {
                    var j = $.getWidth() - $._indent;
                    if (j > 16) {
                        var J = q.p - (F.x - S.x) / j,
                            G = 16 / j;
                        G > J && (J = G), J > 1 - G && (J = 1 - G), $.setColumnPosition(J)
                    }
                } else "s" === g && $.setTranslateY(E + (F.y - S.y) * $._59I / $._29I.height)
            },
            handle_mousemove: function(N) {
                this.handle_touchmove(N)
            },
            handle_touchmove: function(s) {
                if (!xn && Bj(s)) {
                    var x = this,
                        E = x.pv,
                        y = r(E.lp(s).x - E._9I) <= ($r ? 8 : 3);
                    x.cp ? x._62O || (y ? (x._62O = "c", yq(x, s)) : r(Lo(s).y - x.cp.y) >= 2 && (x._62O = x.isV(s) ? "s" : "p", yq(x, s))) : (y ? x.setCursor($q) : x.setCursor(Df), x.isV(s) && E._43o())
                }
            },
            isV: function(P) {
                var u = this.pv,
                    e = u._29I;
                return u._41o() && e.x + e.width - u.lp(P).x < ho
            },
            handle_mousewheel: function(g) {
                this.handleScroll(g, g.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(Y) {
                2 === Y.axis && this.handleScroll(Y, -Y.detail)
            },
            handleScroll: function(x, l) {
                var i = this.pv;
                Fq(x), i.endEditing(), i.translate(0, l * i.getRowHeight())
            },
            handle_keydown: function(L) {
                var _ = this.pv,
                    m = _._rows.size(),
                    x = _._selectRowIndex + (lc(L) ? -1 : 1);
                (lc(L) || Xg(L)) && (0 > x && (x = 0), x >= m && (x = m - 1), _.setSelectRowIndex(x))
            }
        }), xt.ListView = function(A) {
            this._5o(A), new Ft(this)
        }, yt("ListView", G, {
            ms_ac: [rl, th, fc, xq, Hl, Vk, ns, Re, fg, vr, lg, sf, wc, Ne],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            _14Q: 1,
            ms_dm: 1,
            _45o: 1,
            _checkMode: !1,
            _indent: Fm,
            _rowHeight: hr,
            _rowLineVisible: z.listViewRowLineVisible,
            _rowLineColor: z.listViewRowLineColor,
            _scrollBarColor: bp,
            _scrollBarSize: Wn,
            _autoMakeVisible: si,
            _autoHideScrollBar: Yl,
            _selectBackground: z.listViewSelectBackground,
            _labelColor: z.listViewLabelColor,
            _labelSelectColor: z.listViewLabelSelectColor,
            _labelFont: z.listViewLabelFont,
            isCheckMode: function() {
                return this._checkMode
            },
            setCheckMode: function(f) {
                var D = this,
                    n = D._checkMode;
                D._checkMode = f, D.fp(bk, n, f)
            },
            drawRow: function(w, I, g, k, t, n, $) {
                var s = this,
                    b = 0,
                    F = s._indent,
                    U = s.getIconWidth(I);
                s.drawRowBackground(w, I, g, k, t, n, $), s._checkMode && (Qm(w, Di(s.getCheckIcon(I)), b + F / 2, t + $ / 2, I, s), b += F), s.drawIcon(w, I, b, t, U, $), s.drawLabel(w, I, b + U, t, $)
            }
        });
        var Ft = function(M) {
            this.list = M, this.addListeners()
        };
        Wj(Ft, G, {
            ms_listener: 1,
            getView: function() {
                return this.list._view
            },
            clear: function(W) {
                var c = this,
                    M = c.list;
                W && "d" === c._62O && !c.dragCancel && M.handleDragAndDrop(W, "end"), M.draggingData && (M.draggingData = null, M.redraw()), c.dragCancel = c._62O = c._isV = c._isH = c.cp = c.tx = c.ty = Y
            },
            handle_mousedown: function(S) {
                this.handle_touchstart(S)
            },
            handle_touchstart: function(D) {
                var B = this,
                    I = B.list;
                if (Fq(D), I.setFocus(D)) {
                    var m = I.getDataAt(D);
                    B.cp = Lo(D), B.tx = I.tx(), B.ty = I.ty(), Bj(D) ? m && I.handleDragAndDrop && !B.isV(D) && !B.isH(D) && (I.draggingData = m, I.redraw(), I.handleDragAndDrop(D, "prepare")) : (m ? B._33o(D, m) : this._cancelDataDoubleSelect(), B.clear(D))
                }
            },
            handleWindowMouseUp: function(m) {
                this.clear(m)
            },
            handleWindowTouchEnd: function(j) {
                this.clear(j)
            },
            handle_mouseup: function(u) {
                this.handle_touchend(u)
            },
            handle_touchend: function(g) {
                var K = this,
                    N = K.list;
                if (!K._isV && !K._isH && K.cp && !K._62O) {
                    var e = N.getDataAt(g);
                    e ? (N.isCheckMode() ? K._34o(g, e) : K._33o(g, e), ms(g) ? N.onDataDoubleClicked(e, g) : N.onDataClicked(e, g)) : (K._cancelDataDoubleSelect(), N.handleBackgroundClick(g))
                }
                K.clear(g)
            },
            handleWindowMouseMove: function(j) {
                this.handleWindowTouchMove(j)
            },
            handleWindowTouchMove: function(n) {
                var h = this,
                    H = h.list,
                    z = h._62O,
                    G = h.tx,
                    b = h.ty,
                    Z = h.cp,
                    F = Lo(n),
                    y = H._29I;
                "p" === z ? H.setTranslate(G + F.x - Z.x, b + F.y - Z.y) : "v" === z ? H.ty(b + (Z.y - F.y) * H._59I / y.height) : "h" === z ? H.tx(G + (Z.x - F.x) * H._91I / y.width) : "d" === z && (h.dragCancel || H.handleDragAndDrop(n, "between"))
            },
            handle_mousemove: function(E) {
                this.handle_touchmove(E)
            },
            handle_touchmove: function(d) {
                if (!xn && Bj(d)) {
                    var s = this,
                        O = s.list;
                    if (s._isV = s.isV(d), s._isH = s.isH(d), s.cp) {
                        if (!s._62O) {
                            if (cm(Lo(d), s.cp) < 2) return;
                            s._isV ? s._62O = "v" : s._isH ? s._62O = "h" : O.draggingData && !this.dragCancel ? (s._62O = "d", O.handleDragAndDrop(d, "begin")) : s._62O = "p", s._62O && "d" !== s._62O && O.draggingData && (O.draggingData = null, O.redraw()), yq(s, d)
                        }
                    } else s._isV && O._43o(), s._isH && O._42o()
                }
            },
            isV: function(J) {
                var x = this.list,
                    Y = x._29I;
                return x._41o() && Y.x + Y.width - x.lp(J).x < ho
            },
            isH: function(x) {
                var o = this.list,
                    I = o._29I;
                return o._40o() && I.y + I.height - o.lp(x).y < ho
            },
            handle_mousewheel: function(_) {
                this.handleScroll(_, _.wheelDelta / 40, _.wheelDelta !== _.wheelDeltaX)
            },
            handle_DOMMouseScroll: function(z) {
                this.handleScroll(z, -z.detail, 1)
            },
            handleScroll: function(j, g, p) {
                var z = this.list;
                Fq(j), z.endEditing && z.endEditing(), p && z._41o() ? z.translate(0, g * z.getRowHeight()) : z._40o() && z.translate(10 * g, 0)
            },
            handle_keydown: function(v) {
                if (!z.isInput(v.target)) {
                    var e, G = this.list,
                        j = G.sm(),
                        U = G._rows,
                        R = U.size();
                    if (Si(v)) G.selectAll();
                    else if (wf(v)) G.handleDelete && G.handleDelete(v);
                    else if (Fr(v)) "d" !== this._62O || this.dragCancel || (G.handleDragAndDrop(v, "cancel"), this.dragCancel = !0);
                    else if (Mf(v)) G.isCheckMode() && (e = G.getFocusData(), e && G.checkData(e));
                    else if (lc(v) || Xg(v)) {
                        var B = G.isCheckMode();
                        if (e = B ? G.getFocusData() : j.ld()) {
                            var y = G.getRowIndex(e);
                            y >= 0 && (lc(v) ? 0 !== y && (e = U.get(y - 1), B ? G.setFocusData(e) : j.ss(e)) : y !== R - 1 && (e = U.get(y + 1), B ? G.setFocusData(e) : j.ss(e)))
                        } else R > 0 && (e = U.get(0), B ? G.setFocusData(e) : j.ss(e))
                    }
                }
            },
            _34o: function(m, S) {
                var K = this.list,
                    R = K.lp(m).x;
                return R >= 0 && R <= K._indent ? (K.checkData(S), void 0) : (K.setFocusData(S), void 0)
            },
            _33o: function(V, r) {
                var O = this.list,
                    R = O.sm(),
                    z = R.ld();
                if (!O.canHandleSelectMode(V, r)) return this._cancelDataDoubleSelect(), void 0;
                if (Gp(V)) O.isSelected(r) ? R.rs(r) : R.as(r);
                else if (ck(V))
                    if (z)
                        for (var L = O.getRowIndex(z), m = O.getRowIndex(r); L !== m;) L += m > L ? 1 : -1, R.as(O._rows.get(L));
                    else R.ss(r);
                else Bj(V) ? (R.contains(r) ? O.handleDataDoubleSelect && (this._handleDataDoubleSelect(V, r), ms(V) && this._cancelDataDoubleSelect()) : this._cancelDataDoubleSelect(), R.ss(r)) : R.contains(r) || R.ss(r)
            },
            _handleDataDoubleSelect: function(l, b) {
                this._cancelDataDoubleSelect(), this._doubleSelectTimer = Kc(function() {
                    this.list.handleDataDoubleSelect(l, b), this._doubleSelectTimer = O
                }.bind(this), z.doubleClickSpeed)
            },
            _cancelDataDoubleSelect: function() {
                this._doubleSelectTimer && (ur(this._doubleSelectTimer), this._doubleSelectTimer = O)
            }
        }), xt.TreeView = function(k) {
            var D = this;
            D._35o(), D._5o(k), new Gt(D)
        }, yt("TreeView", G, {
            ms_ac: [rl, th, fc, "rootVisible", bk, "rootData", Re, fg, vr, lg, sf, Hl, xq, Vk, ns, se, Xd, wc, Ne, "loader", "doubleClickToToggle"],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _checkMode: Y,
            _indent: Fm,
            _rowHeight: hr,
            _rowLineVisible: z.treeViewRowLineVisible,
            _rowLineColor: z.treeViewRowLineColor,
            _scrollBarColor: bp,
            _scrollBarSize: Wn,
            _autoHideScrollBar: Yl,
            _expandIcon: z.treeViewExpandIcon,
            _collapseIcon: z.treeViewCollapseIcon,
            _autoMakeVisible: si,
            _selectBackground: z.treeViewSelectBackground,
            _labelColor: z.treeViewLabelColor,
            _labelSelectColor: z.treeViewLabelSelectColor,
            _labelFont: z.treeViewLabelFont,
            _doubleClickToToggle: z.treeViewDoubleClickToToggle,
            drawRow: function(y, c, z, a, d, D, V) {
                var p = this;
                p.drawRowBackground(y, c, z, a, d, D, V), p.drawTree(y, c, z, 0, d, D, V)
            },
            isOnToggleIcon: function(W) {
                var e = this.getDataAt(W);
                if (e) {
                    var z = this.getIndent(),
                        u = this.lp(W).x;
                    if (Di(this.getToggleIcon(e))) {
                        var K = z * this.getLevel(e);
                        if (u >= K && K + z >= u) return !0
                    }
                }
                return !1
            }
        });
        var Gt = function(c) {
            ip(Gt, this, [c])
        };
        Wj(Gt, Ft, {
            toggle: function(H, y, j, J) {
                var i = this.list,
                    E = i.lp(H).x;
                if (Di(i.getToggleIcon(y))) {
                    var P = j * J;
                    if (E >= P && P + j >= E) return i.toggle(y), !0
                }
                return i.isDoubleClickToToggle() && ms(H) ? (i.toggle(y), !0) : !1
            },
            _34o: function(H, z) {
                var I = this.list,
                    B = I.lp(H).x,
                    Q = I._levelMap[z._id],
                    K = I._indent,
                    U = K * (Q + 1);
                return B >= U && U + K >= B ? (I.checkData(z), void 0) : (this.toggle(H, z, K, Q) || I.setFocusData(z), void 0)
            },
            _33o: function(h, _) {
                var d = this,
                    g = d.list;
                if (!d.toggle(h, _, g._indent, g.getLevel(_)))
                    if (ck(h)) {
                        var w = g.sm();
                        if (w.size() > 0) {
                            for (var s = g._rows, B = null, N = 0, t = s.size(); t > N; N++)
                                if (g.isSelected(s.get(N))) {
                                    B = N;
                                    break
                                }
                            for (var Z = null, N = s.size() - 1; N >= 0; N--)
                                if (g.isSelected(s.get(N))) {
                                    Z = N;
                                    break
                                }
                            var K, q, o = g.getRowIndex(_);
                            for (B > o ? (K = o - 1, q = B) : o > Z ? (K = Z, q = o) : (K = B, q = Z); K !== q;) K++, w.as(g._rows.get(K))
                        } else w.ss(_)
                    } else Gt.superClass._33o.call(d, h, _)
            },
            handle_keydown: function(I) {
                if (pg(I) || dq(I)) {
                    var q = this.list,
                        j = q._rows,
                        s = q.isCheckMode(),
                        h = q.sm(),
                        $ = s ? q.getFocusData() : h.ld();
                    $ ? $.hasChildren() && (pg(I) ? q.collapse($) : q.expand($)) : j.size() > 0 && ($ = j.get(0), s ? q.setFocusData($) : h.ss($))
                } else Gt.superClass.handle_keydown.call(this, I)
            }
        });
        var Ht = xt.TableView = function(b) {
            this._98I(), this._5o(b), new It(this)
        };
        yt("TableView", G, {
            ms_ac: [rl, th, fc, "sortMode", kc, Vg, xq, Vk, ns, pq, Xi, "sortColumn", Re, fg, vr, lg, sf, wc, Ne],
            ms_v: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: Jl,
            _editable: !0,
            _batchEditable: !1,
            _rowHeight: hr,
            _rowLineVisible: z.tableViewRowLineVisible,
            _rowLineColor: z.tableViewRowLineColor,
            _columnLineVisible: z.tableViewColumnLineVisible,
            _columnLineColor: z.tableViewColumnLineColor,
            _scrollBarColor: bp,
            _scrollBarSize: Wn,
            _autoHideScrollBar: Yl,
            _autoMakeVisible: si,
            _selectBackground: z.tableViewSelectBackground,
            _labelColor: z.tableViewLabelColor,
            _labelSelectColor: z.tableViewLabelSelectColor,
            _labelFont: z.tableViewLabelFont,
            getCheckColumn: function() {
                var d = this;
                if (!d._31o) {
                    var H = d._31o = new At;
                    H.setEditable(!0), H.setWidth(40), H.getValue = d.getCheckColumValue, H.drawCell = d.drawCheckColumnCell
                }
                return d._31o
            },
            isCheckMode: function() {
                return this._39o.contains(this._31o)
            },
            setCheckMode: function(B) {
                var d = this,
                    O = d._39o,
                    o = d.getCheckColumn();
                B !== d.isCheckMode() && (B ? O.add(o, 0) : O.remove(o), d.fp(bk, !B, B))
            },
            getCheckColumValue: function(U, F, n) {
                return n.isSelected(U)
            },
            drawCheckColumnCell: function(b, I, w, T, i, r, F, H, n) {
                Qm(b, n.getCheckIcon(I), i + F / 2, r + H / 2, I, n)
            }
        });
        var It = function(y) {
            ip(It, this, [y])
        };
        Wj(It, Ft, {
            _34o: function(n, h) {
                var D = this.list,
                    p = D._31o;
                if (D.isCellEditable(h, p, n)) {
                    var I = D._3Q(p),
                        w = D.lp(n).x;
                    if (I && w >= I.startX && w < I.startX + p.getWidth()) return D.checkData(h), void 0
                }
                D._37O(h, n), D.setFocusData(h)
            },
            _33o: function(S, y) {
                this.list._37O(y, S), It.superClass._33o.apply(this, arguments)
            }
        });
        var Jt = xt.TreeTableView = function(M) {
                var I = this,
                    e = I._4o = new At;
                I._35o(), I._98I(), I._5o(M), e.setDisplayName("Name"), e.setEditable(!0), e.setWidth(180), e.drawCell = Kt, e.getValue = Lt, I._39o.add(e), new Mt(I)
            },
            Kt = function(k, S, $, j, F, b, q, A, Y) {
                Y.drawTree(k, S, $, F, b, q, A)
            },
            Lt = function(B, M, i) {
                return i.getLabel(B)
            };
        yt("TreeTableView", G, {
            ms_ac: [rl, th, fc, "sortMode", kc, Vg, Hl, bk, "rootData", "rootVisible", Re, fg, "sortColumn", se, Xd, vr, lg, sf, wc, ns, xq, Vk, pq, Xi, Ne, "loader"],
            ms_v: 1,
            ms_bnb: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: Jl,
            _checkMode: Y,
            _editable: !0,
            _batchEditable: !1,
            _indent: Fm,
            _rowHeight: hr,
            _rowLineVisible: z.treeTableViewRowLineVisible,
            _rowLineColor: z.treeTableViewRowLineColor,
            _columnLineVisible: z.treeTableViewColumnLineVisible,
            _columnLineColor: z.treeTableViewColumnLineColor,
            _expandIcon: z.treeTableViewExpandIcon,
            _collapseIcon: z.treeTableViewCollapseIcon,
            _scrollBarColor: bp,
            _scrollBarSize: Wn,
            _autoHideScrollBar: Yl,
            _autoMakeVisible: si,
            _selectBackground: z.treeTableViewSelectBackground,
            _labelColor: z.treeTableViewLabelColor,
            _labelSelectColor: z.treeTableViewLabelSelectColor,
            _labelFont: z.treeTableViewLabelFont,
            getTreeColumn: function() {
                return this._4o
            }
        });
        var Mt = function(I) {
            ip(Mt, this, [I])
        };
        Wj(Mt, Ft, {
            _34o: function(k, Q) {
                var T = this.list,
                    G = T._4o,
                    g = T._3Q(G),
                    x = T.lp(k).x;
                if (g) {
                    var H = T._indent,
                        h = g.startX + H * T.getLevel(Q);
                    if (Di(T.getToggleIcon(Q)) && x >= h && h + H >= x) return T.toggle(Q), void 0;
                    if (T.isCellEditable(Q, G) && (h += H, x >= h && h + H >= x)) return T.checkData(Q), void 0
                }
                T._37O(Q, k), T.setFocusData(Q)
            },
            _33o: function(r, m) {
                var B = this.list,
                    L = B.lp(r).x;
                if (Di(B.getToggleIcon(m))) {
                    var w = B._3Q(B._4o);
                    if (w) {
                        var Z = B._indent,
                            D = w.startX + Z * B.getLevel(m);
                        if (L >= D && D + Z >= L) return B.toggle(m), void 0
                    }
                }
                B._37O(m, r), Mt.superClass._33o.apply(this, arguments)
            }
        });
        var Nt = xt.TableHeader = function(c) {
            var p = this,
                D = p._view = Dl(1, p),
                u = p._39o = c.getColumnModel(),
                R = p.iv;
            p.tv = p._tableView = c, p._60I = new no, p._canvas = ts(D), D.style.background = z.tableHeaderBackground || "", D.style.height = Bq + dr, u.mm(R, p), u.md(R, p), u.mh(R, p), c.mp(function(H) {
                ot[H.property] && p.iv()
            }, p), new Ot(p), p.iv()
        };
        yt("TableHeader", G, {
            ms_v: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_ac: ["checkIcon", "sortDescIcon", "sortAscIcon", rl, fc, Hl, "moveBackground", "insertColor", pq, Xi, "resizable", "movable"],
            _checkIcon: cj,
            _movable: !0,
            _resizable: !0,
            _labelColor: z.tableHeaderLabelColor,
            _labelFont: z.tableHeaderLabelFont,
            _columnLineColor: z.tableHeaderColumnLineColor,
            _columnLineVisible: z.tableHeaderColumnLineVisible,
            _sortDescIcon: z.tableHeaderSortDescIcon,
            _sortAscIcon: z.tableHeaderSortAscIcon,
            _moveBackground: z.tableHeaderMoveBackground,
            _insertColor: z.tableHeaderInsertColor,
            _indent: Fm,
            getCheckIcon: function() {
                return this._checkIcon
            },
            getTableView: function() {
                return this.tv
            },
            getLabel: function(z) {
                return z.toLabel()
            },
            getLabelFont: function() {
                return this._labelFont
            },
            getLabelColor: function(H) {
                return H.getColor() || this._labelColor
            },
            getLabelAlign: function(y) {
                return y._align
            },
            onPropertyChanged: function() {
                this.iv()
            },
            _5Q: function(f) {
                this._61I = f, this.iv()
            },
            getLogicalPoint: function(k) {
                return Sq(k, this._canvas, this.tv.tx())
            },
            validateImpl: function() {
                var q = this,
                    Y = q._canvas,
                    D = q.getWidth(),
                    V = q.getHeight(),
                    m = q.tv,
                    Z = q._60I,
                    s = q._61I,
                    E = -m.tx(),
                    M = 0;
                (D !== Y.clientWidth || V !== Y.clientHeight) && yh(Y, D, V), Z.clear(), q._39o._roots.each(function(R) {
                    if (R.isVisible()) {
                        var I = M + R.getWidth();
                        E + D >= M && I >= E && Z.add({
                            column: R,
                            startX: M
                        }), M = I
                    }
                });
                var A = Bc(Y);
                if (vb(A, -E, 0, 1), A.beginPath(), A.rect(E, 0, D, V), A.clip(), A.clearRect(E, 0, D, V), Z.each(function(K) {
                        var O = K.column,
                            T = K.startX,
                            i = O.getWidth();
                        i > 0 && (A.save(), A.beginPath(), A.rect(T, 0, i, V), A.clip(), s && s.column === O || q.drawColumn(A, O, T, 0, i, V), q._columnLineVisible && or(A, T + i - 1, 0, 1, V, q._columnLineColor), A.restore())
                    }), s) {
                    var a = s.column,
                        M = s.startX,
                        l = s.position,
                        N = a.getWidth();
                    A.save(), A.beginPath(), A.rect(M, 0, N, V), A.clip(), A.fillStyle = q._moveBackground, A.fill(), q.drawColumn(A, a, M, 0, N, V), A.restore(), Te(A, q._insertColor, l, 0, V)
                }
                A.restore()
            },
            _6Q: function(w) {
                var H = this.tv;
                return H._31o === w && H.sm().getSelectionMode() === dj
            },
            drawColumn: function(s, S, C, L, Y, y) {
                var Q = this,
                    D = Q.tv,
                    z = Di(S.getIcon()),
                    U = Q.getLabelAlign(S);
                if (Q._6Q(S)) {
                    var p = Di(Q._checkIcon);
                    Qm(s, p, C + Y / 2, L + y / 2, S, Q)
                } else {
                    var B = Q.getLabel(S),
                        o = Q.getLabelFont(S),
                        Z = Q.getLabelColor(S),
                        N = xo(o, B).width,
                        w = z ? Q._indent : 0;
                    U === _i ? (z && Iq(s, z, lq, C, L, w, y), Dq(s, B, o, Z, C + w, L, Y, y, _i)) : U === rj ? (z && Iq(s, z, lq, C + Y - N - w, L, w, y), Dq(s, B, o, Z, C, L, Y, y, rj)) : (z && Iq(s, z, lq, C + (Y - N - w) / 2, L, w, y), Dq(s, B, o, Z, C + (Y - N + w) / 2, L, 0, y, _i))
                }
                if (S.isSortable() && D.getSortColumn() === S && (z = Di(S.getSortOrder() === Gm ? Q._sortAscIcon : Q._sortDescIcon))) {
                    var I = ps(z, S) / 2 + 2;
                    Qm(s, z, U === rj ? C + I : C + Y - I, L + y / 2, S, D)
                }
            }
        });
        var Ot = function(i) {
            var k = this;
            k.th = i, k.tv = i._tableView, k.addListeners()
        };
        Wj(Ot, G, {
            ms_listener: 1,
            getView: function() {
                return this.th.getView()
            },
            setCursor: function($) {
                this.getView().style.cursor = $
            },
            handle_mousemove: function(X) {
                if (!xn) {
                    var D = this;
                    delete D._29o, D.setCursor(Df);
                    for (var b = D.th, V = b._60I, k = b.lp(X).x, n = V.size() - 1; n >= 0; n--) {
                        var Y = V.get(n),
                            L = Y.column,
                            i = Y.startX + L.getWidth();
                        if (b.isResizable() && r(i - k) <= ($r ? 10 : 3)) return D._29o = Y, D.setCursor($q), void 0;
                        k > Y.startX && i > k && (D._29o = Y), (L.isClickable() || L.isSortable() || b.isMovable() || D.tv.getCheckColumn && L === D.tv.getCheckColumn()) && k > Y.startX && i > k && D.setCursor(pi)
                    }
                }
            },
            handle_mousedown: function(d) {
                this.handle_touchstart(d)
            },
            handle_touchstart: function(j) {
                var n = this;
                Fq(j), n.tv.endEditing(), n.handle_mousemove(j), n._29o && (n.x = Lo(j).x, n.lx = n.th.lp(j).x, n.w = n._29o.column.getWidth(), yq(n, j))
            },
            handleWindowMouseMove: function(s) {
                this.handleWindowTouchMove(s)
            },
            handleWindowTouchMove: function(j) {
                var U = this,
                    M = U.th,
                    e = U.getView().style.cursor,
                    Y = U._29o,
                    b = Lo(j).x - U.x;
                if (U.resizing || U.moving || (e === $q ? U.resizing = 1 : M.isMovable() && e === pi && r(b) > 2 && (U.moving = 1)), U.resizing) Y.column.setWidth(U.w + b);
                else if (U.moving) {
                    var c = U.lx + b;
                    M._60I.each(function(N) {
                        var q = N.startX,
                            F = q + N.column.getWidth();
                        if (c >= q && F >= c) {
                            var m = {
                                column: Y.column,
                                startX: Y.startX + b,
                                front: F - c > c - q,
                                insertColumn: N.column
                            };
                            m.position = m.front ? q : F, M._5Q(m)
                        }
                    })
                }
            },
            _16Q: function(W, i) {
                var x = this,
                    b = x.tv,
                    w = x.th,
                    u = w._checkIcon;
                if (w._6Q(W)) {
                    var t = Di(u),
                        y = x.lx,
                        k = W.getWidth(),
                        J = ps(t, W);
                    if (y >= i + k / 2 - J && i + k / 2 + J >= y) {
                        w.setCheckIcon(u === vl ? cj : vl);
                        var H = b.sm(),
                            z = b._rows;
                        return u === vl ? H.rs(z) : H.ss(z), b.onCheckColumnClicked(W), !0
                    }
                }
                return !1
            },
            handleWindowMouseUp: function(k) {
                this.handleWindowTouchEnd(k)
            },
            handleWindowTouchEnd: function(I) {
                var Z = this,
                    q = Z.tv,
                    D = Z.th,
                    A = Z._29o;
                if (Z.moving) {
                    var k = D._61I;
                    if (k && k.insertColumn !== k.column) {
                        var e = k.column,
                            r = q.getColumnModel()._roots,
                            B = r.remove(e),
                            $ = r.indexOf(k.insertColumn);
                        $ >= 0 && (k.front || $++, $ <= r.size() && (r.add(e, $), q.getColumnModel()._38I(e, B, $)))
                    }
                    D._5Q(Y), delete Z.moving
                } else if (!Z.resizing && A) {
                    e = A.column;
                    var P = D.lp(I).x,
                        o = A.startX,
                        a = !0;
                    if (D.onColumnClicked) {
                        var Q = D.onColumnClicked(e, I, o);
                        Q === !1 && (a = !1)
                    }
                    if (a && P >= o && P <= o + e.getWidth() && !Z._16Q(e, o)) {
                        if (e.isSortable()) {
                            var f = q.getSortMode(),
                                w = e.getSortOrder();
                            f === Jl ? q.getSortColumn() === e ? (w === gq && q.setSortColumn(Y), e.setSortOrder(w === Gm ? gq : Gm)) : q.setSortColumn(e) : "bistate" === f && (q.getSortColumn() === e ? e.setSortOrder(w === Gm ? gq : Gm) : q.setSortColumn(e))
                        }
                        q.onColumnClicked(e, I, o)
                    }
                }
                Z._29o = Z.resizing = Z.x = Z.lx = Z.w = Y
            }
        }), xt.TablePane = function(w) {
            this.init(new Ht(w))
        }, yt("TablePane", G, {
            ms_v: 1,
            _44o: 1
        }), xt.TreeTablePane = function(V) {
            this.init(new Jt(V))
        }, yt("TreeTablePane", G, {
            ms_v: 1,
            _44o: 1
        }), xt.Toolbar = function(n) {
            var r = this,
                Y = r._view = Dl(1, r),
                B = Y.style;
            B.background = z.toolbarBackground || "", B.height = im + dr, r._canvas = ts(Y), r._30o = new no, r._90I = new no, r.setItems(n || []), Y.handleGroupSelectedChanged = function(F) {
                if (F.isSelected()) {
                    var D = F.getGroupId();
                    null != D && r._items.forEach(function(M) {
                        var Q = M.element;
                        Q && Q !== F && Q.setSelected && Q.getGroupId && Q.getGroupId() === D && Q.setSelected(!1)
                    })
                }
            }, new Pt(r)
        }, yt("Toolbar", G, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_lp: 1,
            ms_tip: 1,
            ms_value: 1,
            ms_ac: [_d, rl, fc, th, Ne, "itemGap", "separatorColor", "currentItem", "stickToRight"],
            _labelColor: z.toolbarLabelColor,
            _labelSelectColor: z.toolbarLabelSelectColor,
            _labelFont: z.toolbarLabelFont,
            _selectBackground: z.toolbarSelectBackground,
            _itemGap: z.toolbarItemGap,
            _separatorColor: z.toolbarSeparatorColor,
            _stickToRight: !1,
            getSumWidth: function() {
                return this._64I
            },
            getToolTip: function(v) {
                var h = this.getItemInfoAt(v);
                return h ? h.item.toolTip : Y
            },
            getLabelColor: function(J) {
                return J && J.selected && J.type !== vl && J.type !== Oi ? this._labelSelectColor : this._labelColor
            },
            onPropertyChanged: function(h) {
                this.iv(), h.property === _d && this._items.forEach(function(w) {
                    ne(w)
                })
            },
            redraw: function() {
                this.iv()
            },
            addItem: function(O, u) {
                var X = this._items;
                u == Y ? X.push(O) : X.splice(u, 0, O), this.fp(_d, Y, X)
            },
            removeItem: function(V) {
                if (V)
                    for (var P = this._items, g = 0; g < P.length; g++) V === P[g] && (P.splice(g, 1), this.fp(_d, Y, P))
            },
            removeItemById: function(Q) {
                if (Q != Y)
                    for (var W = this._items, u = 0; u < W.length; u++)
                        if (Q === W[u].id) {
                            var E = W.splice(u, 1)[0];
                            return this.fp(_d, Y, W), E
                        }
            },
            getItemById: function(N) {
                if (N != Y)
                    for (var o = this._items, G = 0; G < o.length; G++) {
                        var R = o[G];
                        if (N === R.id) return R
                    }
            },
            setItemVisible: function(s, M) {
                var t = this.getItemById(s);
                t && (t.visible = M)
            },
            getItemInfos: function() {
                return this._30o
            },
            getItemInfoAt: function(d) {
                var i = this,
                    D = 0,
                    F = i._30o,
                    Z = i.lp(d),
                    E = Z.x,
                    P = Z.y;
                if (P >= 0 && P <= i.getHeight())
                    for (; D < F.size(); D++) {
                        var e = F.get(D);
                        if (e.startX <= E && E <= e.endX) return e
                    }
                return Y
            },
            drawItem: function(A, w, $, v, r) {
                if (w.visible === !1) return 0;
                if (Ap(w.visible) && !w.visible()) return 0;
                var y = this,
                    H = w.disabled;
                H && (A.globalAlpha = ll);
                var l = y.drawItemImpl(A, w, $, v, r),
                    Y = y._itemGap;
                return H && (A.globalAlpha = 1), this._currentItem !== w || "separator" === w || w.separator === !0 || w.unfocusable || Pk(A, y._separatorColor, $ - Y / 2, 0, l + Y, v), l
            },
            drawItemImpl: function(R, o, Z, Q, $) {
                var E = this,
                    w = E._view,
                    P = E._itemGap,
                    K = Q / 2,
                    f = o.type,
                    S = o.element,
                    p = o.label;
                Sf(S) && (p = S, S = Y);
                var B, s = E.getLabelFont(o),
                    U = E.getLabelColor(o),
                    u = o.selected,
                    W = Di(o.icon),
                    n = ps(W, o),
                    e = 0,
                    C = n + (p ? xo(s, p).width : 0);
                if ("separator" === o || o.separator === !0) return Te(R, E._separatorColor, Z, Q / 4, K), 1;
                if (S) {
                    W && Qm(R, W, Z + n / 2, K, o, E), Dq(R, p, s, U, Z + n, 0, 0, Q);
                    var N = ds(S);
                    $ || E._90I.add(N), N.parentNode !== w && xb(w, N), S.iv && S.iv(), S.validate && S.validate();
                    var I = N.getBoundingClientRect(),
                        A = I.width,
                        G = N.style;
                    return zo(N), G.left = E.tx() + Z + C + dr, G.top = (Q - I.height) / 2 + dr, C + A
                }
                return f === Oi ? B = Di(u ? wl : Hq) : f === vl && (B = Di(u ? vl : cj)), B ? (e = ps(B, o), Qm(R, B, Z + e / 2, K, o, E), Z += e, C += e) : u && or(R, Z - P / 2, 0, C + P, Q, E.getSelectBackground(o)), W && Qm(R, W, Z + n / 2, K, o, E), Dq(R, p, s, U, Z + n, 0, 0, Q), C
            },
            validateImpl: function() {
                var z = this,
                    T = z._canvas,
                    v = z.getWidth(),
                    L = z.getHeight(),
                    J = z._30o,
                    h = z._items;
                yh(T, v, L);
                var c = Bc(T),
                    U = z._itemGap,
                    O = U / 2;
                vb(c, z.tx(), 0, 1), c.clearRect(0, 0, v, L);
                var p = z._90I;
                z._90I = new no, J.clear(), h.forEach(function(M) {
                    var h = z.drawItem(c, M, O, L);
                    J.add({
                        item: M,
                        startX: O,
                        endX: O + h,
                        width: h
                    }), h && (O += h + U)
                }), p.each(function(k) {
                    z._90I.contains(k) || Fi(k)
                });
                var C = z._64I;
                z._64I = q(0, O - U / 2), c.restore(), z._stickToRight ? (z._65O = 0, c = Bc(T), O = v - z._64I + U / 2, vb(c, 0, 0, 1), c.clearRect(0, 0, v, L), J.clear(), h.forEach(function(j) {
                    var t = z.drawItem(c, j, O, L, !0);
                    J.add({
                        item: j,
                        startX: O,
                        endX: O + t,
                        width: t
                    }), t && (O += t + U)
                }), c.restore()) : z.tx(z.tx()), C !== z._64I && z.onSumWidthChanged(C, z._64I)
            },
            onSumWidthChanged: function() {},
            handleClick: function(u, b) {
                var X = this,
                    d = u.type,
                    l = u.action,
                    q = u.groupId,
                    j = u.selected;
                u.disabled || (q != Y ? j || (u.selected = !0, this._items.forEach(function(T) {
                    T.groupId === q && u !== T && (T.selected = !1)
                }), l && u.action(u, X, b)) : d === vl || "toggle" === d ? (u.selected = !j, l && u.action(u, X, b)) : l && u.action(u, X, b)), Wd(), X.iv()
            }
        });
        var Pt = function(V) {
            this.tb = V, this.addListeners()
        };
        Wj(Pt, G, {
            ms_listener: 1,
            getView: function() {
                return this.tb._view
            },
            handle_mousewheel: function(y) {
                this.handleScroll(y, 10 * (y.wheelDelta / 40))
            },
            handle_DOMMouseScroll: function(F) {
                this.handleScroll(F, 10 * -F.detail)
            },
            handleScroll: function(u, g) {
                Fq(u);
                var j = this.tb;
                j.isScrollable() && !j._stickToRight && (j.tx(j.tx() + g), ir())
            },
            handle_mousemove: function(p) {
                var t = this;
                xn || t.setItem(p)
            },
            handle_mouseout: function(o) {
                var H = this;
                o.target === H.getView() ? H.tb.setCurrentItem(Y) : H.handle_mousemove(o)
            },
            handle_mousedown: function(V) {
                this.handle_mousemove(V), this.handle_touchstart(V)
            },
            handle_touchstart: function(S) {
                var u = this,
                    A = u.tb,
                    t = S.target;
                Bj(S) && (t === u.getView() || t === A._canvas) && (Fq(S), A.setFocus(S) && (this.setItem(S, !0), (A.isScrollable() || u.info && !u.info.item.disabled) && (u.x = Lo(S).x, u.tx = A.tx(), yq(u, S))))
            },
            handleWindowMouseMove: function(h) {
                this.handleWindowTouchMove(h)
            },
            handleWindowTouchMove: function(p) {
                var P = this,
                    d = P.tb;
                if (!d._stickToRight) {
                    var T = Lo(p).x - P.x;
                    !P._25o && r(T) > 2 && d.isScrollable() && (P._25o = 1), P._25o && d.tx(P.tx + T)
                }
            },
            handleWindowMouseUp: function(g) {
                this.handleWindowTouchEnd(g)
            },
            handleWindowTouchEnd: function(U) {
                var B = this,
                    j = B.tb,
                    i = B.info,
                    W = B.tb.getItemInfoAt(U);
                if (!B._25o && i) {
                    var f = i.item;
                    W && W.item === f && j.handleClick(f, U)
                }
                B._25o = B.x = B.tx = Y, B.setItem()
            },
            setItem: function(e, E) {
                var t = this,
                    z = t.tb,
                    i = t.info = e ? z.getItemInfoAt(e) : Y,
                    A = i ? i.item : Y;
                z.setCurrentItem(A), E && A && Ap(A.onDown) && A.onDown(e)
            }
        }), xt.BorderPane = function() {
            this._view = Dl(1, this), this.iv()
        }, yt("BorderPane", G, {
            ms_v: 1,
            ms_ac: ["topHeight", "bottomHeight", "leftWidth", "rightWidth"],
            ms_fire: 1,
            getLeftView: function() {
                return this._leftView
            },
            setLeftView: function(b, t) {
                this._12o("leftView", b), t != Y && this.setLeftWidth(t)
            },
            getRightView: function() {
                return this._rightView
            },
            setRightView: function(K, C) {
                this._12o("rightView", K), C != Y && this.setRightWidth(C)
            },
            getTopView: function() {
                return this._topView
            },
            setTopView: function(A, Q) {
                this._12o("topView", A), Q != Y && this.setTopHeight(Q)
            },
            getBottomView: function() {
                return this._bottomView
            },
            setBottomView: function(j, G) {
                this._12o("bottomView", j), G != Y && this.setBottomHeight(G)
            },
            getCenterView: function() {
                return this._centerView
            },
            setCenterView: function(B) {
                this._12o("centerView", B)
            },
            _12o: function(q, Y) {
                var W = this,
                    u = "_" + q,
                    v = W._view,
                    x = W[u];
                x !== Y && (x && (x.getView ? Fi(x.getView()) : Fi(x)), W[u] = Y, Y && (Y.getView ? xb(v, Y.getView(), 1) : xb(v, Y, 1)), W.fp(q, x, Y))
            },
            onPropertyChanged: function() {
                this.iv()
            },
            validateImpl: function() {
                var o = this,
                    z = o._topView,
                    e = o._bottomView,
                    I = o._leftView,
                    r = o._rightView,
                    j = o._centerView,
                    g = o.getWidth(),
                    b = o.getHeight(),
                    w = 0,
                    l = 0,
                    Q = g,
                    F = b,
                    _ = 0,
                    v = 0,
                    W = 0,
                    D = 0;
                z && (_ = o._topHeight == Y ? lr(z) : o._topHeight, l = _), e && (v = o._bottomHeight == Y ? lr(e) : o._bottomHeight, F = b - v), I && (W = o._leftWidth == Y ? Pb(I) : o._leftWidth, w = W), r && (D = o._rightWidth == Y ? Pb(r) : o._rightWidth, Q = g - D);
                var M = q(0, Q - w),
                    A = q(0, F - l);
                z && Bh(z, 0, 0, g, _), e && Bh(e, 0, F, g, v), I && Bh(I, 0, l, W, A), r && Bh(r, Q, l, D, A), j && Bh(j, w, l, M, A)
            }
        })
    }
}("undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : (0, eval)("this"), Object);